*INA207 
*****************************************************************************
* (C) Copyright 2013 Texas Instruments Incorporated. All rights reserved.                                            
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.
** TI and its licensors and suppliers make no warranties, either expressed
** or implied, with respect to this model, including the warranties of 
** merchantability or fitness for a particular purpose.  The model is
** provided solely on an "as is" basis.  The entire risk as to its quality
** and performance is with the customer.
*****************************************************************************
*
* This model is subject to change without notice. Texas Instruments
* Incorporated is not responsible for updating this model.
*
*****************************************************************************
*
** Released by: Analog eLab Design Center, Texas Instruments Inc.
* Part: INA207
* Date: 16MAY2013
* Model Type: ALL IN ONE
* Simulator: PSPICE
* Simulator Version: 16.0.0.p001
* EVM Order Number: N/A
* EVM Users Guide: N/A
* Datasheet: SBOS360E–JUNE 2006–REVISED OCTOBER 2007
*
* Model Version: 1.0
*
*****************************************************************************
*
* Updates:
*
* Version 1.0 : 
* Release to Web
*
*****************************************************************************
* OPERATING NOTES
*
* THIS MACROMODEL WILL GIVE RESULTS WHICH ARE CONSISTENT WITH THE DATASHEET FOR NORMAL CASE 1 OPERATION.
* THIS MODEL WAS NOT DEVELOPED TO MATCH BEHAVIOUR IN ANY LOW VSENSE CASE OR NORMAL CASE 2.
* 
* MODEL FEATURES
* THIS MODEL FEATURES CURRENT SHUNT MONITOR WITH PARAMETERS:
* INPUT RANGE, OUTPUT SWING, OUTPUT COMPLIANCE (VS=12V), BANDWIDTH,
* GAIN VS CL, CMRR VS FREQ, PSRR VS FREQ,
* SETTLING TIME, QUIESCENT CURRENT AND
* QUIESCENT CURRENT VERSUS OUTPUT VOLTAGE,
* OUTPUT CURRENT DRAWN THROUGH THE SUPPLY,
* OUTPUT IMPEDANCE, INPUT OFFSET, INPUT
* BIAS CURRENT, AND NOISE, SHORT CIRCUIT CURRENT LIMIT
* VERSUS SUPPLY VOLTAGE.
*
* THIS MODEL FEATURES 2 COMPARATORS(1 POSITIVE AND 1 NEGATIVE)
* WITH PARAMETERS OFFSET VOLTAGE, HYSTERESIS, EXTERNAL THRESHOLD,
* BIAS CURRENTS, INPUT IMPEDANCE, LARGE SIGNAL DIFFERENTIAL GAIN, 
* RESPONSE TIME, PROPAGATION DELAY, HIGH LEVEL OUTPUT CURRENT,
* LOW LEVEL OUTPUT VOLTAGE.
* COMPARATOR1 FEATURES RESET LATCHING FUNCTIONALITY.
* COMPARATOR2 FEATURES PROGRAMMABLE PROPAGATION DELAY.
*************************

.SUBCKT INA207 CMP1_IN- OUT VS CMP1_IN+ GND CMP2_IN+ CMP2_IN- REF_OUT VIN- 
+ VIN+ CMP1_OUT CMP1_RESET_B CMP2_Delay CMP2_OUT 
XU1         VIN- GND VIN+ VS OUT CSM_0
XU4         CMP1_IN- CMP1_RESET_B CMP1_IN+ CMP1_OUT Vs1 GND CMP1_0
EVCVS1      Vs1 GND VS GND  1
XU2         CMP2_IN- CMP2_Delay CMP2_IN+ CMP2_OUT Vs1 GND CMP2_0
R4          CMP2_IN+ GND 20K 
R3          REF_OUT CMP2_IN+ 20K 
XU3         REF_OUT VS GND REF_0
R2          CMP1_IN- GND 20K 
R1          REF_OUT CMP1_IN- 20K 
.ENDS

.SUBCKT CSM_0 Vin- GND Vin+ Vs VOUT
V3          28 27 403.54U
V4          GND 29 400M
V1          VDD 42 150M
IS1         Vin- GND 9U
VCCVS4_in   12 GND
HCCVS4      13 GND VCCVS4_in   1
EVCVS9      14 GND VDD GND  5.6234U
C4          14 12 1.5915M 
R3          14 12 1 
VCCVS3_in   15 GND
HCCVS3      16 GND VCCVS3_in   1
C3          15 17 530.5U 
R9          15 17 1 
EVCVS8      17 GND IN+_Commonmode GND  1U
VCCVS2_in   18 GND
HCCVS2      19 GND VCCVS2_in   1
C1          20 18 106N 
R8          20 18 1 
EVCVS7      20 GND 21 GND  1
C2          21 GND 1N  
R7          22 21 R_RES_1 100 
EVCVS1      22 GND 23 GND  1
L4          24 25 400U  
XU1         IN+_Commonmode 26 27 IN+_Commonmode VCVS_LIMIT_0
C17         30 GND 1P  
C19         GND 31 1P  
R26         32 31 1 
R25         33 30 1 
R6          34 CL_clamp 10M 
SW2         34 32 31 GND  S_VSWITCH_1
SW1         33 34 GND 30  S_VSWITCH_1
XU22        35 Vimon 33 GND VCVS_LIMIT_1
XU21        29 Vimon 32 GND VCVS_LIMIT_1
EVCVS5      35 GND Vclim GND  1K
XU10        VDD GND Vclim GND VCCS_LIMIT_0
EVCVS6      37 GND 36 26  1
R11         38 39 R_RES_1 1MEG 
EVCVS4      38 GND VOUT GND  1
XU3         39 GND Vs GND VCCS_LIMIT_1
GVCCS4      Vs GND Vimon GND  1M
EVCVS3      VDD GND Vs GND  1
R1          Vclp GND 1T 
C7          VOUT GND 66P  
R15         40 25 300 
XR103       GND 41 RNOISE_FREE_0
XU13        41 23 0 23 VCCS_LIMIT_2
C6          23 0 500N  
R12         23 0 R_RES_1 10K 
XU12        36 28 noise_macro_0
XU23        Vimon GND 42 Vclp VCVS_LIMIT_2
XU11        CL_clamp GND 40 GND VCVS_LIMIT_3
R5          CL_clamp GND R_RES_1 1 
GVCCS2      CL_clamp GND 19 GND  -1
EVCVS2      43 GND Vclp GND  1
VCCVS1_in   25 VOUT
HCCVS1      Vimon 0 VCCVS1_in   1K
ROUT        40 24 R_RES_1 1.5 
R4          Vin- 26 R_RES_1 1U 
R2          Vin+ IN+_Commonmode R_RES_1 1U 
XU2         16 GND 44 45 VCVS_LIMIT_4
XU25        13 GND 44 37 VCVS_LIMIT_5
XU26        45 GND GND 41 43 VCCS_LIMIT_3
.MODEL R_RES_1 RES ( TCE=0 T_ABS=-300)
.MODEL S_VSWITCH_1 VSWITCH (RON=1 ROFF=1T VON=10 VOFF=-10)
.ENDS

.SUBCKT noise_macro_0 + -
EVCVS1      + - 58 0  1
R1          58 0 R_RES_1 96.3K 
.MODEL R_RES_1 RES ( TCE=0 T_ABS=25)
.ENDS



.SUBCKT CMP1_0 IN- RESET_B IN+ VOUT Vs gnd
V2          65 0 1
V1          68 gnd 950M
IbiasPos    IN+ gnd 5P
XU8         CMP1_Gain_stage_op gnd 63 gnd Vs NORMALIZE_0
R3          RESETB_OUT gnd 100K 
XU7         IN+ INm gnd Vs CMP1_Gain_stage_op Gain_Stage_Hyst_0
XU4         OP_D gnd VOUT gnd RESISTANCE_0
C2          0 VOUT 711.36P 
R2          IN+ gnd 1E15
XU6         INm IN- VOS_0
EVCVS2      67 gnd OP_R gnd  1
XU1         69 68 OP_D COMP_HYST_POS_VIH_0
+ PARAMS: VDD=1 VEE=0 HYST=0.9 

XU5         IN+ INm 69 67 PSUPP_DCC_0
*RU5         69 67 1

C1          69 gnd 1N IC=0 
XU3         gnd RESET_B RESETB_OUT RESET_DEGLITCH_DELAY_0
*ROPR        OP_R1 OP_R 1
*COPR        OP_R 0 1n
XU2         gnd RESETB_OUT 63 OP_D 65 OP_R RESET_LOGIC_0
*Rop_r 	OP_R 0 10G
R1          RESET_B gnd 2MEG 
.ENDS

.SUBCKT Gain_Stage_Hyst_0 IN+ IN- GND VS Vout
XU5         Vout VS IN- 70 HYST_GEN_0
XU2         IN+ 70 Vout GND VS VCVS_0
.ENDS


.SUBCKT RESET_DEGLITCH_DELAY_0 gnd RESETB_IN RESETB_OUT
V1          137 gnd 3
XU28        DISCHRG_EN thresh_in 115 AND2_BASIC_GEN_SAN_0
+ PARAMS: VDD=1 VEE=0 VTH=0.5
XU27        0 tail DISCHRG_EN 116 MUX_0
XU10        116 117 118 COMP_BASIC_GEN_0
+ PARAMS: VDD=1 VEE=0
XU7         thresh_in 115 117 gnd SET_THRESH_0
SW1         tail gnd DISCHRG_EN gnd  S_VSWITCH_1
XU26        119 thresh_in D_D_0
SW5         thresh_in gnd V4 gnd  S_VSWITCH_2
C1          thresh_in gnd 1N IC=0 
EVCVS1      119 gnd tail gnd  1
XU4         120 Less_than_1p5us V4 OR2_BASIC_GEN_SAN_0
+ PARAMS: VDD=1 VEE=0 VTH=0.5
SW4         V2 gnd Less_than_1p5us gnd  S_VSWITCH_3
XU25        121 122 BUF_BASIC_GEN_0
+ PARAMS: VTHRESH=0.5
C7          121 gnd 1N IC=0 
R7          Less_than_1p5us 121 500M 
SW3         123 gnd 122 gnd  S_VSWITCH_4
XU24        123 V3 BUF_BASIC_GEN_0
+ PARAMS: VTHRESH=0.5
SW2         tail gnd V4 gnd  S_VSWITCH_5
XU23        125 124 Less_than_1p5us AND2_BASIC_GEN_SAN_1
+ PARAMS: VDD=1 VEE=0 VTH=0.5
C6          125 gnd 1N IC=0 
R6          126 125 1.44 
XU22        124 126 INV_BASIC_GEN_SAN_0
+ PARAMS: VDD=1 VEE=0 VTH=0.5
XU21        V3 127 124 AND2_BASIC_GEN_SAN_0
+ PARAMS: VDD=1 VEE=0 VTH=0.5
XU20        V1 127 INV_BASIC_GEN_SAN_0
+ PARAMS: VDD=1 VEE=0 VTH=0.5
R5          120 123 2.165K 
C5          123 gnd 1N IC=0 
XU19        120 123 D_D_0
XU14        128 V1 120 AND2_BASIC_GEN_SAN_1
+ PARAMS: VDD=1 VEE=0 VTH=0.5
C4          128 gnd 1N IC=0 
R4          129 128 1.44 
XU13        V1 129 INV_BASIC_GEN_SAN_0
+ PARAMS: VDD=1 VEE=0 VTH=0.5
XU12        131 130 DISCHRG_EN AND2_BASIC_GEN_SAN_0
+ PARAMS: VDD=1 VEE=0 VTH=0.5
XU11        V2 131 INV_BASIC_GEN_SAN_0
+ PARAMS: VDD=1 VEE=0 VTH=0.5
R3          132 V2 4.329K 
C9          V2 gnd 1N IC=0 
XU17        132 V2 D_D_0
XU16        133 V1 132 AND2_BASIC_GEN_SAN_1
+ PARAMS: VDD=1 VEE=0 VTH=0.5
C8          133 gnd 1N IC=0 
R8          134 133 1.44 
XU15        V1 134 INV_BASIC_GEN_SAN_0
+ PARAMS: VDD=1 VEE=0 VTH=0.5
XU9         118 DISCHRG_EN N1 AND2_BASIC_GEN_SAN_0
+ PARAMS: VDD=1 VEE=0 VTH=0.5
XU18        N3 N1 RESETB_OUT OR2_BASIC_GEN_SAN_0
+ PARAMS: VDD=1 VEE=0 VTH=0.5
XU8         V1 130 INV_BASIC_GEN_SAN_0
+ PARAMS: VDD=1 VEE=0 VTH=0.5
XU6         135 V1 N3 AND2_BASIC_GEN_SAN_0
+ PARAMS: VDD=1 VEE=0 VTH=0.5
XU2         136 V1 D_D_0
XU5         tail 137 D_D_0
GVCCS1      137 tail V1 gnd  1
C3          tail gnd 1U IC=0 
XU3         136 135 BUF_BASIC_GEN_0
+ PARAMS: VTHRESH=0.5
C2          gnd 136 1N IC=0 
R2          V1 136 4.329K 
XU1         RESETB_IN V1 RESETB_DEGLITCH_DELAY_0
.MODEL S_VSWITCH_1 VSWITCH (RON=1 ROFF=1G VON=800M VOFF=200M)
.MODEL S_VSWITCH_2 VSWITCH (RON=1U ROFF=1G VON=800M VOFF=200M)
.MODEL S_VSWITCH_3 VSWITCH (RON=1U ROFF=1G VON=800M VOFF=200M)
.MODEL S_VSWITCH_4 VSWITCH (RON=1U ROFF=1G VON=800M VOFF=200M)
.MODEL S_VSWITCH_5 VSWITCH (RON=1U ROFF=1G VON=800M VOFF=200M)
.ENDS


.SUBCKT RESET_LOGIC_0 gnd RESETB IN OP_IN VDD OUT
XU2         IN 139 RESETB OUT MUX_1
XU1         IN OP_IN VDD gnd 139 OR_TANH_0
.ENDS



.SUBCKT CMP2_0 IN- DELAY IN+ CMP2_OUT Vs gnd
IbiasNeg    IN- gnd 5P
R2          IN- gnd 1E15
XU2         145 DELAY gnd VO_D CMP2_DELAY_0
+ PARAMS: VDD=1 VEE=0
XU4         VO_D gnd CMP2_OUT gnd RESISTANCE_1
XU8         Cmp2_Gain_op gnd 145 gnd Vs NORMALIZE_0
XU7         VTR IN- gnd Vs Cmp2_Gain_op Gain_Stage_Hyst_1
R1          DELAY gnd 1T
XU3         VTR IN+ CMP2_OFFSET_0
Cout        CMP2_OUT gnd 809.6939P 
.ENDS

.SUBCKT Gain_Stage_Hyst_1 IN+ IN- GND VS Vout
*R3          Vout GND 1MEG 
R4          IN- GND 1e20
XU5         Vout VS 152 IN+ HYST_GEN_1
XU2         152 IN- Vout GND VS VCVS_1
R5          152 GND 1e12
.ENDS



.SUBCKT REF_0 Ref Vs gnd
IS2         156 157 1M
IS1         158 157 1M
XU3         157 156 D_D_1
XU2         157 158 D_D_1
VCCVS1_in   156 Ref
HCCVS1      VILOAD gnd VCCVS1_in   1K
XU1         VILOAD Vs gnd 158 REFOUT_0
.ENDS



*VOLTAGE CONTROLLED SOURCE WITH LIMITS
.SUBCKT VCVS_LIMIT_0  VC+ VC- VOUT+ VOUT-
*              
.PARAM GAIN = 50
.PARAM VPOS = 5.5M
.PARAM VNEG = 0
E1 VOUT+ VOUT-  VALUE={LIMIT(-.2759*V(VC+,VC-)+(5.5M),5.48M,-.0M)}

.ENDS VCVS_LIMIT_0 


*VOLTAGE CONTROLLED SOURCE WITH LIMITS
.SUBCKT VCVS_LIMIT_1  VC+ VC- VOUT+ VOUT-
*              
.PARAM GAIN = 10000
.PARAM VPOS = 5000
.PARAM VNEG = -5000
E1 VOUT+ VOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),VPOS,VNEG)}
.ENDS VCVS_LIMIT_1 


*VOLTAGE CONTROLLED SOURCE WITH LIMITS
.SUBCKT VCCS_LIMIT_0  VC+ VC- VOUT+ VOUT-
*              
.PARAM GAIN = 5.5E-3
.PARAM IPOS = 27.5M
.PARAM INEG = 0
ESAT 1 0 VALUE={-54.54E-6*(TEMP) + 0.02981}
EOUT VOUT+ VOUT- VALUE={LIMIT((-23E-6*(TEMP) + 0.00859)*V(VC+,VC-) + (0.00003419*(TEMP) - 12.024E-3), V(1,0),INEG)}
.ENDS VCCS_LIMIT_0 


*VOLTAGE CONTROLLED SOURCE WITH LIMITS
.SUBCKT VCCS_LIMIT_1  VC+ VC- IOUT+ IOUT-
*              
.PARAM GAIN = 0.05E-3
.PARAM IPOS = .5
.PARAM INEG = -.5 
E1 1 0 VALUE={LIMIT(1.25M+1M*V(VC+,VC-),1.5M,1.25M)}
E2 2 1 VALUE={LIMIT(.14358M*V(VC+,VC-) - .035875M,5M,0)}
R 2 0 1M
G1 IOUT+ IOUT- VALUE={V(2,0)}
.ENDS VCCS_LIMIT_1 


* NOISELESS RESISTOR
.SUBCKT RNOISE_FREE_0  1 2
*ROHMS = VALUE IN OHMS OF NOISELESS RESISTOR
.PARAM ROHMS=1E6
ERES 1 3 VALUE = { I(VSENSE) * ROHMS }
RDUMMY 30 3 1
VSENSE 30 2 DC 0V
.ENDS RNOISE_FREE_0 


*VOLTAGE CONTROLLED SOURCE WITH LIMITS
.SUBCKT VCCS_LIMIT_2  VC+ VC- IOUT+ IOUT-
*              
.PARAM GAIN = 942.57M
.PARAM IPOS = .5
.PARAM INEG = -.5

G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),IPOS,INEG)}
.ENDS VCCS_LIMIT_2 


*VOLTAGE CONTROLLED SOURCE WITH LIMITS
.SUBCKT VCVS_LIMIT_2  VC+ VC- VOUT+ VOUT-
.PARAM VPOS = 2
.PARAM VNEG = 0

E1 VOUT+ 1 VALUE={LIMIT((0.1696E-3*(TEMP) +48.786E-3)*V(VC+,VC-),VPOS,VNEG)}

E2 1 VOUT- VALUE={LIMIT(EXP(.5*(V(VC+,VC-)-(-.051515*(TEMP)+24.94))),(V(VOUT+,0)-2),0)}

.ENDS VCVS_LIMIT_2 


*VOLTAGE CONTROLLED SOURCE WITH LIMITS
.SUBCKT VCVS_LIMIT_3  VC+ VC- VOUT+ VOUT-
*              
.PARAM GAIN = 1
.PARAM VPOS = 18
.PARAM VNEG = 4M
E1 VOUT+ VOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),VPOS,VNEG)}
.ENDS VCVS_LIMIT_3 


*VOLTAGE CONTROLLED SOURCE WITH LIMITS
.SUBCKT VCVS_LIMIT_4  VC+ VC- VOUT+ VOUT-
*              
.PARAM GAIN = -1
.PARAM VPOS = 20M
.PARAM VNEG = -20M
E1 VOUT+ VOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),VPOS,VNEG)}
.ENDS VCVS_LIMIT_4 


*VOLTAGE CONTROLLED SOURCE WITH LIMITS
.SUBCKT VCVS_LIMIT_5  VC+ VC- VOUT+ VOUT-
*              
.PARAM GAIN = 1
.PARAM VPOS = 20M
.PARAM VNEG = -20M
E1 VOUT+ VOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),VPOS,VNEG)}
.ENDS VCVS_LIMIT_5 


*VOLTAGE CONTROLLED SOURCE WITH LIMITS
.SUBCKT VCCS_LIMIT_3  VC+ VC- IOUT+ IOUT- VSAT
*              
.PARAM GAIN = 50U
.PARAM IPOS = 18U
.PARAM INEG = 0

G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),V(VSAT,0)*1U,INEG)}
.ENDS VCCS_LIMIT_3 



** 2:1 MUX**
.SUBCKT NORMALIZE_0  IN1 IN2 OUT1 OUT2 VS
E1 OUT1 OUT2 VALUE= { V(IN1,IN2)/V(VS) }
.ENDS



***DELAY VS TEMPERATURE AND OVERDRIVE VOLTAGE***
.SUBCKT RESISTANCE_0  IN1 IN2 O+ O- 

E_RVAL RVAL 0 VALUE={100N+120*V(IN1,IN2)}
G_R O+ O- VALUE={V(O+,O-)/(V(RVAL)*1E9)}

.ENDS


***COMPARATOR OFFSET VARIATION***
.SUBCKT VOS_0  + -
E + - VALUE = {(2 - 2M*(TEMP - 25))*1M}
.ENDS


* POSITIVE COMPARATOR WITH HYSTERISIS
* INP -- +VE TERMINAL; INM -- -VE TERMINAL
* IF OUTPUT = VDD E_HYST VALUE = HYSTERISIS ELSE E_HYST VALUE = 0

.SUBCKT COMP_HYST_POS_VIH_0  INP INM OUT PARAMS: VDD=1 VEE=0 HYST=0.1 

E_HYST INM INM1 VALUE = {((HYST)/2)+((HYST)/2)*TANH(10E6*(V(OUT1)-((VDD+VEE)/2)))}

E_COMP OUT 0 VALUE = {((VDD+VEE)/2)+((VDD-VEE)/2)*TANH(1E6*(V(INP)-V(INM1)))}

R_DELAY OUT OUT1 1
C_DELAY OUT1 0 10N

.ENDS COMP_HYST_POS_VIH_0 


***DELAY VS TEMPERATURE AND OVERDRIVE VOLTAGE***
.SUBCKT PSUPP_DCC_0  IN1 IN2 O+ O-
EW W 0 VALUE={TANH(1E12*(V(IN1,IN2)*1k))}
E_DELAY DELAY 0 VALUE={100.76816*(1.071312)**(-V(IN1,IN2)*V(W)*1k)+114.59256 + 0.56*(TEMP-25)}
GOUT O+ O- VALUE = {(2.99573/V(DELAY))*V(O+,O-)}
ROUT O+ O- 1E15
.ENDS


***HYSTERESIS***
.SUBCKT HYST_GEN_0  VO VS + -

ETH VTH 0 VALUE = {0.01*(V(F1)) + 0.99*(1-(V(F1)))}
EF1 F1 0 VALUE = {(0.5 + 0.5*TANH(1E20*(V(VO)/V(VS)-V(VTH))))}
EHYST + - VALUE = {8M*V(F1)}

.ENDS



** 2:1 MUX**
.SUBCKT VCVS_0  IN1 IN2 OUT1 OUT2 VS
E1 OUT1 OUT2 VALUE= { LIMIT(2E5*V(IN1,IN2),V(VS),0) }
.ENDS



*TWO INPUT AND GATE

.SUBCKT AND2_BASIC_GEN_SAN_0  IN1 IN2 Y PARAMS: VDD=1 VEE=0 VTH=0.5

E1 Y 0 VALUE ={(((VDD+VEE)/2)+ ((VDD-VEE)/2)*TANH((V(IN1,0)-VTH)*1E12))*
+ (((VDD+VEE)/2)+ ((VDD-VEE)/2)*TANH((V(IN2,0)-VTH)*1E12))}

.ENDS AND2_BASIC_GEN_SAN_0 




** 2:1 MUX**
.SUBCKT MUX_0  A B SEL OUT 
E1 OUT 0 VALUE= { ((V(B,0)-V(A,0))*V(SEL,0))+V(A,0)}
.ENDS



.SUBCKT COMP_BASIC_GEN_0  INP INM Y PARAMS: VDD=1 VEE=0 
E_ABM Y 0 VALUE = {((VDD+VEE)/2)+((VDD-VEE)/2)*TANH(10E20*(V(INP)-V(INM)))}
.ENDS COMP_BASIC_GEN_0 



****

.SUBCKT SET_THRESH_0  VIN EN VTH GND

E_1 1 GND VALUE={V(VIN)/(2.718^(V(VIN)))}
E_2 VTH GND VALUE={((1.5 + V(1))/2) + ((-1.5 + V(1))/2)*TANH(1E12*(V(EN) - 0.9))}
*E_1 VTH GND VALUE={IF(V(EN)>0.9,(V(VIN)*(2.718^(-V(VIN)))),1.5)}

.ENDS SET_THRESH_0 





.SUBCKT D_D_0  1 2
D1 1 2 D_D1
.MODEL D_D1 D( IS=1E-15 TT=10P RS=0.005 N=0.001 BV=1000MEG T_ABS=27)
*.MODEL DD D
*+ IS=1E-015
*+ N=0.01
*+ TT=1E-011
.ENDS D_D_0 
**$


*TWO INPUT OR GATE

.SUBCKT OR2_BASIC_GEN_SAN_0  IN1 IN2 Y PARAMS: VDD=1 VEE=0 VTH=0.5

E1 Y 0 VALUE ={(((VDD+VEE)/2)+ ((VDD-VEE)/2)*TANH((V(IN1,0)-VTH)*10E12)) + 
+ (((VDD+VEE)/2)+((VDD-VEE)/2)*TANH((V(IN2,0)-VTH)*10E12))-((((VDD+VEE)/2)+ ((VDD-VEE)/2)*TANH((V(IN1,0)-VTH)*10E12)) * 
+ (((VDD+VEE)/2)+((VDD-VEE)/2)*TANH((V(IN2,0)-VTH)*10E12)))}

.ENDS OR2_BASIC_GEN_SAN_0 




****

.SUBCKT BUF_BASIC_GEN_0  A X PARAMS: VTHRESH = 0.5
EVCVS_BUF X 0 VALUE = {0.5 + ( 0.5 * TANH ( (V(A)-{VTHRESH})*1E12))}
.ENDS BUF_BASIC_GEN_0  


*TWO INPUT AND GATE

.SUBCKT AND2_BASIC_GEN_SAN_1  IN1 IN2 Y PARAMS: VDD=1 VEE=0 VTH=0.5

E1 Y 0 VALUE ={(((VDD+VEE)/2)+ ((VDD-VEE)/2)*TANH((V(IN1,0)-VTH)*1E6))*
+ (((VDD+VEE)/2)+ ((VDD-VEE)/2)*TANH((V(IN2,0)-VTH)*1E6))}

.ENDS AND2_BASIC_GEN_SAN_1 



*INVERTER

.SUBCKT INV_BASIC_GEN_SAN_0  IN Y PARAMS: VDD=1 VEE=0 VTH=0.5 
E_ABM Y 0 VALUE = {((VDD+VEE)/2)-((VDD-VEE)/2)*TANH(10E12*(V(IN)-VTH))}
.ENDS INV_BASIC_GEN_SAN_0 


*DEGLITCH

.SUBCKT RESETB_DEGLITCH_DELAY_0  RESETB OUT

E_TH OUT1 0 VALUE={0.5+0.5*TANH((V(RESETB)-1.09)*1E6)}
E_VCVS OUT 0 OUT1 0 1

.ENDS



** 2:1 MUX**
.SUBCKT MUX_1  A B SEL OUT 
*E_TH VTH 0 VALUE={0.5+0.5*TANH((V(SEL)-1.09)*1E12)}
E1 OUT 0 VALUE= { ((V(B)-V(A))*V(SEL))+V(A)}
.ENDS




** OR_TANH**
.SUBCKT OR_TANH_0  A B VDD VEE OUT 
EVT VTH 0 VALUE={V(VDD)/2}
EA AI VEE VALUE={ (((V(VDD,0)-V(VEE,0))/2)*(TANH((V(A)-V(VTH))*(1000000))))+((V(VDD,0)+V(VEE,0))/2)}
EB BI VEE VALUE={ (((V(VDD,0)-V(VEE,0))/2)*(TANH((V(B)-V(VTH))*(1000000))))+((V(VDD,0)+V(VEE,0))/2)}
E1 OUT VEE VALUE={ (((V(VDD,0)-V(BI,0))*V(AI,0))+ V(BI,0))}
.ENDS


***COMPARATOR2 DELAY CIRCUIT***
.SUBCKT CMP2_DELAY_0  IN DELAY GND OUT PARAMS: VDD=1 VEE=0

GD 0 DELAY VALUE = {120E-9*(TANH((1E12)*(V(IN,GND) - (VDD+VEE)/2)))}
*RGD 0 DELAY 1000T
ED OUT1 GND VALUE = {((VDD+VEE)/2 + (VDD+VEE)/2*TANH(1E12*(V(DELAY) - 0.6)))}
R2 DELAY DELAY1 1m
C2 DELAY1 GND 0.01f
R1 OUT1 OUT 1
C1 OUT GND 0.1N
RD OUT GND 1T

D1 DELAY 4 D_D1
D2 2 DELAY D_D1
.MODEL D_D1 D( IS=1E-15 TT=10P RS=0.0005 N=.1  T_ABS=27)
V1 4 GND 1.1517
V2 2 GND 48.3M

.ENDS


***DELAY VS TEMPERATURE AND OVERDRIVE VOLTAGE***
.SUBCKT RESISTANCE_1  IN1 IN2 O+ O-

*E_RVAL RVAL 0 VALUE={100N+120*V(IN1,IN2)}
*G_R O+ O- VALUE={V(O+,O-)/(V(RVAL)*1E9)}
SW1         O+ O-  IN2 IN1  S_VSWITCH_1
.MODEL S_VSWITCH_1 VSWITCH (RON=100 ROFF=120G VON=0 VOFF=-750M)
.ENDS


***COMPARATOR TRIP POINT***
.SUBCKT CMP2_OFFSET_0  + -
E + - VALUE = {(2M + 5.4U*(TEMP - 25))}
.ENDS


***HYSTERESIS***
.SUBCKT HYST_GEN_1  VO VS + -

ETH VTH 0 VALUE = {0.1*(V(F1)) + 0.9*(1-(V(F1)))}
EF1 F1 0 VALUE = {(0.5 + 0.5*TANH(1E20*(V(VO)/V(VS)-V(VTH))))}
EHYST + - VALUE = {8M*V(F1)}

.ENDS


** GAIN STAGE **
.SUBCKT VCVS_1  IN1 IN2 OUT1 OUT2 VS

E1 OUT1 OUT2 VALUE= { LIMIT(2E5*V(IN1,IN2),V(VS),0) }

.ENDS



****DIODE*****
.SUBCKT D_D_1  1 2
D1 1 2 D_D1
.MODEL D_D1 D( IS=1E-15 TT=10P RS=0.005 N=0.001 BV=1000MEG T_ABS=27)
.ENDS D_D_1 
**$


***REFERENCE OUTPUT VOLTAGE***
.SUBCKT REFOUT_0  VLOAD VS GND OUT
EREF OUT GND VALUE = {1.2 + (48U)*(TEMP-25) - (0.4M)*(V(VLOAD,GND)-0.06) + (30U)*(V(VS,GND)-12)}
.ENDS

***
