*$
* TPS40305
*****************************************************************************
*  (C) Copyright 2009 Texas Instruments Incorporated. All rights reserved.
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.
** TI and its licensors and suppliers make no warranties, either expressed
** or implied, with respect to this model, including the warranties of 
** merchantability or fitness for a particular purpose.  The model is
** provided solely on an "as is" basis.  The entire risk as to its quality
** and performance is with the customer
*****************************************************************************
*
** Released by: Analog eLab Design Center, Texas Instruments Inc.
* Part: TPS40305	
* Date: 01/22/10
* Model Type: Transient
* Simulator: PSPICE
* Simulator Version: 16.0.0.p001
* Datasheet: SLUS964 – NOVEMBER 2009
*
* Model Version: Final 1.00
*
*****************************************************************************
*
* Updates:
*
* Final 1.00
* Release to Web.
*
***************************************************************************** 
.SUBCKT TPS40305 FB HDRV PG SW BPP COMP VDD LDRV EN_SS BOOT GND
X_ERROR_AMP_U9          ERROR_AMP_VREF ERROR_AMP_N132124 DC_1mV_1mA_1V_1nA
V_ERROR_AMP_V4         ERROR_AMP_N133169 RAMP_PK 0.65
X_ERROR_AMP_U14         ENDRB ERROR_AMP_N134265 INV_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_ERROR_AMP_S1    ERROR_AMP_N134265 0 ERROR_AMP_N132166 EAOUT
+  ERROR_AMP_ERROR_AMP_S1 
V_ERROR_AMP_V3         ERROR_AMP_N132124 0 0.6
X_ERROR_AMP_U12         ENDRB COMP_C_DONE ERROR_AMP_N133636 AND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_ERROR_AMP_U11          EAOUT ERROR_AMP_N133169 DC_1mV_1mA_1V_1nA
X_ERROR_AMP_U10         ERROR_AMP_VREF FB ERROR_AMP_N132154 op_amp PARAMS:
+  PARAMS:  HLIMIT=6 RIN=23.3MEG BW=24MEG DC_GAIN=60 ROUT=100 LLIMIT=0 SRP=10  
+  SRM=10 
R_ERROR_AMP_R1         SS ERROR_AMP_VREF  1k  
X_ERROR_AMP_S2    ERROR_AMP_N134309 0 EAOUT 0 ERROR_AMP_ERROR_AMP_S2 
C_ERROR_AMP_C2         ERROR_AMP_N132154 ERROR_AMP_N132166  1p  
X_ERROR_AMP_U8          0 ERROR_AMP_VREF DC_1mV_1mA_1V_1nA
X_ERROR_AMP_U13         ERROR_AMP_N133636 OCFLT ERROR_AMP_N134309 OR2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
G_ERROR_AMP_G2         ERROR_AMP_N132154 ERROR_AMP_N132166 TABLE {
+  V(ERROR_AMP_N132154, ERROR_AMP_N132166) } 
+ ( (-10,-0.0022)(-1m,-0.002)(0,0)(1m,2m)(10,2.2m) )
X_EN_SS_U5          EN_SS_N196558 BPP DC_1mV_1mA_1V_1nA
X_EN_SS_U7         EN_SS_N115446 EN_SS_N115777 EN1 SD1 SRLATCHRHP_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_EN_SS_U22         DCHG EN_SS_N170709 EN_SS_N139517 N175129
+  SRLATCHRHP_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_EN_SS_ABM2         EN_SS_V1P3 0 VALUE { IF( V(VDD) < 1.3, V(VDD), 1.3)    }
X_EN_SS_U20         ENDRB EN_SS_N168084 EN_SS_N166898 OR2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
V_EN_SS_V1         EN_SS_N115530 0 0.7
E_EN_SS_ABM5         EN_SS_N160998 0 VALUE { IF(V(ENDRV) > 0.5, (V(EN_SS) -
+  0.8), 0)    }
X_EN_SS_U15         MENA MSD INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_EN_SS_S1    EN_SS_CHARGE1 0 EN_SS_N190851 EN_SS EN_SS_EN_SS_S1 
X_EN_SS_U17         EN_SS_N164290 MENA SS_UP AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_EN_SS_U9         EN_SS_N144920 EN_SS EN_SS_N115777 COMP_BASIC
V_EN_SS_V2         EN_SS_N151434 0 0.4
G_EN_SS_ABMII1         EN_SS_V1P3 EN_SS VALUE { { IF (V(EN_SS_CHARGE1) > 0.5,
+  40u, 0) }    }
X_EN_SS_U3         EN_SS_N151434 EN_SS EN_SS_N151462 COMP_BASIC
V_EN_SS_V3         EN_SS_N144920 0 0.3
X_EN_SS_S2    ENDRV 0 EN_SS_N196558 EN_SS EN_SS_EN_SS_S2 
X_EN_SS_U1          EN_SS_N190851 EN_SS_V1P3 DC_1mV_1mA_1V_1nA
X_EN_SS_U18         EN_SS_N166898 SS_UP SS_ACT N176558 SRLATCHRHP_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_EN_SS_U6         EN_SS EN_SS_N115530 EN_SS_N115446 COMP_BASIC
E_EN_SS_ABM3         SS 0 VALUE { MAX (V(EN_SS_N160998), 0)    }
X_EN_SS_U11         EN_SS_T_DISCHARGE1 EN_SS_N139517 EN_SS_DISCHARGE1
+  OR2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_EN_SS_U16         SS EN_SS_N163802 EN_SS_N164290 COMP_BASIC
X_EN_SS_U12         EN_SS_N150535 SD1 ENDRV ENDRB SRLATCHRHP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
X_EN_SS_U14         BPOK EN1 MENA AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
G_EN_SS_ABMII2         EN_SS 0 VALUE { { IF (V(EN_SS_DISCHARGE1) > 0.5, 140u,
+  0) }    }
V_EN_SS_V4         EN_SS_N163802 0 0.7
X_EN_SS_U8         CAL_DONE1 CAL_DONE2 EN_SS_CHARGE1 NAND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_EN_SS_U19         EN_SS_N151462 MENA EN_SS_N168084 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_EN_SS_U2          0 EN_SS DC_1mV_1mA_1V_1nA
X_EN_SS_U13         EN1 EN_SS_N151462 MENA EN_SS_N150535 AND3_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_EN_SS_U10         CAL_DONE1 CAL_DONE2 ENDRB EN_SS_T_DISCHARGE1 AND3_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_EN_SS_U21         EN_SS_N168084 MSD EN_SS_N170709 OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
G_EN_SS_ABMII3         BPP EN_SS VALUE { { IF (V(ENDRV) > 0.5, 10u, 0) }    }
X_DRIVER_U11         DRIVER_N160856 DRIVER_N160840 delay PARAMS: PARAMS:  T=50 
+  
X_DRIVER_U30          DRIVER_N160440 DRIVER_N160432 INVERTER
R_DRIVER_R1         DRIVER_N161046 BOOT  40  
X_DRIVER_U22          DRIVER_N160896 LDRV DRIVER_N160856 COMPARATOR
X_DRIVER_S1    DRIVER_N160050 0 BOOT HDRV DRIVER_DRIVER_S1 
X_DRIVER_U35         HDON DRIVER_N160050 BUFFER_PS PARAMS: VHI=1 VLO=0
+  VTHRESH=500E-3 TPLH=1E-9 TPHL=15E-9 TR=1E-9 TF=1E-9
X_DRIVER_U25          N00841 DRIVER_N160840 HDON AND
D_DRIVER_D2         HDRV BOOT DIDEAL 
X_DRIVER_U28          VDD DRIVER_N161046 DC_1mV_1A_1V_1nA
D_DRIVER_D3         SW HDRV DIDEAL 
V_DRIVER_V2         DRIVER_N160896 0 0.7
X_DRIVER_U31         DRIVER_N160490 DRIVER_N160440 DRIVER_N160354
+  AND2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_DRIVER_U29          DRIVER_N160050 DRIVER_N161016 INVERTER
X_DRIVER_S2    DRIVER_N161016 0 HDRV SW DRIVER_DRIVER_S2 
X_DRIVER_U32         DRIVER_N160490 DRIVER_N160432 DRIVER_N160282
+  AND2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_DRIVER_S3    DRIVER_N160354 0 VDD LDRV DRIVER_DRIVER_S3 
X_DRIVER_U26          N00819 DRIVER_N1607361 LDON AND
X_DRIVER_S4    DRIVER_N160282 0 LDRV 0 DRIVER_DRIVER_S4 
X_DRIVER_U27          DRIVER_N160968 HDRV DRIVER_N160778 COMPARATOR
D_DRIVER_D4         LDRV VDD DIDEAL 
V_DRIVER_V3         DRIVER_N160968 SW 1.2
X_DRIVER_U33         TRILD DRIVER_N160490 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_DRIVER_U34         LDON DRIVER_N160440 BUFFER_PS PARAMS: VHI=1 VLO=0
+  VTHRESH=500E-3 TPLH=1E-9 TPHL=15E-9 TR=1E-9 TF=1E-9
D_DRIVER_D5         0 LDRV DIDEAL 
X_DRIVER_U12         DRIVER_N160778 DRIVER_N1607361 delay PARAMS: PARAMS:  T=50
+   
X_BP_6V_U2         BPP BP_6V_N161218 BPOK COMP_BASIC
X_BP_6V_U1         EN1 BP_6V_N00092 0 VDD SW1P2T_PS PARAMS: VTH=500E-3 RON=100
+  ROFF=1E6 TDELAY=1E-9 TRISE=1E-9 TFALL=1E-9 INITVAL=0
E_BP_6V_ABM3         BPP 0 VALUE { LIMIT( (V(BP_6V_N00092)*0.95), 0, 6.45)    }
V_BP_6V_V1         BP_6V_N161218 0 2.5
X_PWMOSC_U15          PWMOSC_N114689 PWMOSC_N114609 PWMOSC_N114711
+  PWMOSC_N114593 AND3
X_PWMOSC_U24          PWMOSC_N114705 PWMOSC_N114609 INVERTER
X_PWMOSC_U8          PWMOSC_N114593 FAULT N00819 AND_1
X_PWMOSC_S1    PWMOSC_N113611 0 PWMOSC_SRAMP 0 PWMOSC_PWMOSC_S1 
X_PWMOSC_U25          SW_START PWMOSC_N113611 INVERTER
X_PWMOSC_U16         PWMOSC_N114731 SW_START PWMOSC_N114711 RSFF_RDOM 
X_PWMOSC_U11         EN1 PWMOSC_N114731 one_shot PARAMS: PARAMS:  T=50
X_PWMOSC_U20          PWMOSC_N113757 N00841 PWMOSC_N113781 OR
V_PWMOSC_V3         RAMP_VLY 0 0.65
X_PWMOSC_U13          OCDET PWMOSC_N113685 PWMOSC_N1139670 OR
X_PWMOSC_U6          PWMOSC_N114435 FAULT N00841 AND_1
V_PWMOSC_V1         PWMOSC_N114537 0 1.1
E_PWMOSC_ABM3         RAMP_PK 0 VALUE { V(VDD)/6+0.65    }
C_PWMOSC_C1         PWMOSC_SRAMP 0  1n IC={SS} 
E_PWMOSC_ABM1         PWMOSC_N113659 0 VALUE { (V(PWMOSC_RAMP) *V(VDD)/6)+0.65 
+    }
I_PWMOSC_I1         PWMOSC_N114537 PWMOSC_SRAMP DC {1e-9*FREQ/128}  
X_PWMOSC_U10         PWMOSC_N114653 PWMOSC_N114435 PWMOSC_N114705 RSFF_RDOM 
E_PWMOSC_ABM2         PWMOSC_N114505 0 VALUE { 1-V(PWMOSC_RAMP)    }
X_PWMOSC_U18         FAULT PWMOSC_N113781 SW_START RSFF_RDOM 
X_PWMOSC_U5          PWMOSC_N113881 CLK PWMOSC_N114435 AND_1
X_PWMOSC_U9          PWMOSC_SRAMP PWMOSC_N114537 DC_1mV_1mA_1V_1nA
X_PWMOSC_U21          PWMOSC_N113659 COMP PWMOSC_N113685 COMPARATOR
V_PWMOSC_V2         PWMOSC_N113757 0  
+PULSE 0 0 0 1u 1u 1u 10
X_PWMOSC_U4         PWMOSC_N1139670 CLK PWMOSC_N113881 RSFF_RDOM 
X_PWMOSC_U22          PWMOSC_SRAMP PWMOSC_N114505 PWMOSC_N114653 COMPARATOR
X_PWMOSC_U23          PWMOSC_N114435 PWMOSC_N114689 INVERTER
X_PWMOSC_U1         FAULT PWMOSC_RAMP CLK osc PARAMS: PARAMS:  FREQ={FREQ} 
+  TCLK={TCLK}
R_R1         GND 0  1m  
X_COMP_CALIB_S2    COMP_CALIB_CALSIG 0 EAOUT COMP_CALIB_N137823
+  COMP_CALIB_COMP_CALIB_S2 
E_COMP_CALIB_E2         COMP_CALIB_N128264 0 COMP_CALIB_N128182 0 1
E_COMP_CALIB_E1         DIS_LLE 0 COMP_CALIB_N124794 0 1
X_COMP_CALIB_U11         COMP_CALIB_N119569 COMP_CALIB_CALSIG COMP_CALIB_40K
+  DLATCH 
R_COMP_CALIB_R3         0 COMP_CALIB_N128717  1  
X_COMP_CALIB_U14         COMP_CALIB_N147841 COMP_C_DONE BUFFER_PS PARAMS: VHI=1
+  VLO=0 VTHRESH=500E-3 TPLH=140E-9 TPHL=1E-9 TR=1E-9 TF=1E-9
X_COMP_CALIB_U12         COMP_CALIB_N119575 COMP_CALIB_CALSIG COMP_CALIB_13K
+  DLATCH 
E_COMP_CALIB_E3         COMP_CALIB_N128799 0 COMP_CALIB_N128717 0 1
X_COMP_CALIB_CALIB_TIMING_U17         COMP_CALIB_CALIB_TIMING_N151282
+  COMP_CALIB_CALIB_TIMING_N151316 CAL_DONE2 N153210 SRLATCHRHP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
X_COMP_CALIB_CALIB_TIMING_U18         COMP_CALIB_CALIB_TIMING_N151510
+  COMP_CALIB_CALIB_TIMING_N151316 COMP_CALIB_N147841 N153246
+  SRLATCHRHP_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_COMP_CALIB_CALIB_TIMING_U6         MENA COMP_CALIB_CALSIG one_shot PARAMS:
+  PARAMS:  T={(1.1-(SS))*1e6}
X_COMP_CALIB_CALIB_TIMING_U14         COMP_CALIB_CALSIG CAL_END_SIG one_shot_1
+  PARAMS: PARAMS:  T={(0.8-(0.7*SS)) * 1e6}
X_COMP_CALIB_CALIB_TIMING_U27         MENA COMP_CALIB_CALIB_TIMING_N179654
+  INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_COMP_CALIB_CALIB_TIMING_U15         COMP_CALIB_CALSIG
+  COMP_CALIB_CALIB_TIMING_N151510 one_shot_1 PARAMS: PARAMS:  T=50  
X_COMP_CALIB_CALIB_TIMING_U16         CAL_END_SIG
+  COMP_CALIB_CALIB_TIMING_N151282 one_shot_1 PARAMS: PARAMS:  T=50  
X_COMP_CALIB_CALIB_TIMING_U4         MENA COMP_CALIB_CALIB_TIMING_N151316
+  INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_COMP_CALIB_CALIB_TIMING_U30         COMP_CALIB_CALSIG
+  COMP_CALIB_CALIB_TIMING_N179654 OCFLT CAL_END_SIG FAULT OR4_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
G_COMP_CALIB_ABMI1         0 COMP_CALIB_N124794 VALUE { if(
+  V(COMP_CALIB_40K)<0.5 & V(COMP_CALIB_13K)<0.5,1,0)    }
X_COMP_CALIB_U9          COMP_CALIB_ICAL COMP_CALIB_N119463 COMP_CALIB_N119569
+  COMPARATOR
X_COMP_CALIB_H2    EAOUT COMP COMP_CALIB_ICAL 0 COMP_CALIB_COMP_CALIB_H2 
V_COMP_CALIB_V4         COMP_CALIB_N119463 0 0.005
G_COMP_CALIB_ABMI2         0 COMP_CALIB_N128182 VALUE { if(
+  V(COMP_CALIB_40K)>0.5 & V(COMP_CALIB_13K)<0.5,1,0)    }
V_COMP_CALIB_V5         COMP_CALIB_N119519 0 0.015
X_COMP_CALIB_U13         COMP_CALIB_N128264 COMP_CALIB_N128799 DIS_OOA
+  OR2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
V_COMP_CALIB_V3         COMP_CALIB_N137823 0 0.4
X_COMP_CALIB_U10          COMP_CALIB_ICAL COMP_CALIB_N119519 COMP_CALIB_N119575
+  COMPARATOR
X_COMP_CALIB_S4    CAL_END_SIG 0 COMP 0 COMP_CALIB_COMP_CALIB_S4 
R_COMP_CALIB_R2         0 COMP_CALIB_N128182  1  
R_COMP_CALIB_R1         0 COMP_CALIB_N124794  1  
G_COMP_CALIB_ABMI3         0 COMP_CALIB_N128717 VALUE { if(
+  V(COMP_CALIB_40K)<0.5 & V(COMP_CALIB_13K)<0.5,1,0)    }
X_PGOOD_U14         EN1 PGOOD_N00276 PGOOD_N02439 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
V_PGOOD_V1         PGOOD_N01260 0 0.675
X_PGOOD_U8         FB PGOOD_N01260 PGOOD_N00483 COMP_BASIC
X_PGOOD_S1    PGOOD_N02439 0 PG 0 PGOOD_PGOOD_S1 
X_PGOOD_U15         PGOOD_N00483 PGOOD_N00442 PGOOD_N00200 PGOOD_N00276
+  OR3_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
V_PGOOD_V2         PGOOD_N110735 0 0.525
X_PGOOD_U12         PGOOD_N00264 SS_UP PGOOD_N00207 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_PGOOD_U11         PGOOD_N00207 PGOOD_N00200 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_PGOOD_U10         OCFLT PGOOD_N00264 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_PGOOD_U13         PGOOD_N00442 PGOOD_N00207 UVD AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_PGOOD_U9         PGOOD_N110735 FB PGOOD_N00442 COMP_BASIC
X_OCP_DIG_MUX_2_1_U1         OCP_N16254 OCFLT OCP_DIG_MUX_2_1_N00100
+  NAND2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_OCP_DIG_MUX_2_1_U2         OCP_CLK2 OCP_DIG_MUX_2_1_N00213
+  OCP_DIG_MUX_2_1_N00110 NAND2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_OCP_DIG_MUX_2_1_U3         OCP_DIG_MUX_2_1_N00100 OCP_DIG_MUX_2_1_N00110
+  OCP_N116297 NAND2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_OCP_DIG_MUX_2_1_U4         OCFLT OCFLT OCP_DIG_MUX_2_1_N00213 NAND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_OCP_U1         OCP_N01362 OCP_N01337 OCP_N128687 COMP_BASIC
X_OCP_U23         OCFLT OCP_FAULTB OCP_CNT_3 OCP_N_1V OCP_N120446 OCP_N_1V
+  DFFSBRB_RHPBASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_OCP_OC_HSD_U1         OCP_ENDRV1 OCP_OC_HSD_N00165 N06512 AND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_OCP_OC_HSD_U3         OCP_ENDRV1 OCP_EN_HS_SNS OCP_OC_HSD_N109886
+  AND2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_OCP_OC_HSD_U4         OCP_OC_HSD_N00189 OCP_OC_HSD_N109818 OCP_OC_HSD_N00165
+  COMP_BASIC
X_OCP_OC_HSD_U5         OCP_OC_HSD_N109886 OCP_OC_HSD_N109818 VDD SW SW1P2T_PS
+  PARAMS: VTH=500E-3 RON=100 ROFF=1E6 TDELAY=1E-9 TRISE=1E-9 TFALL=1E-9
+  INITVAL=0
V_OCP_OC_HSD_V1         VDD OCP_OC_HSD_N00189 450m
X_OCP_U3         OCP_N01784 SW_START ENDRV OCP_ENDRV1 AND3_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_OCP_OC_SnH_S4    OCP_OC_SnH_N14720236 0 0 OCP_OC_SnH_N14720068
+  OC_SnH_OCP_OC_SnH_S4 
X_OCP_OC_SnH_U7         OCP_OC_SnH_N113722 OCP_OC_SnH_N113798
+  OCP_OC_SnH_N113310 OCP_OC_SnH_N113798 OCP_OC_SnH_N114524 OCP_OC_SnH_N114111
+  DFFSBRB_RHPBASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_OCP_OC_SnH_U1         OCP_SAMP OCP_OC_SnH_N113247 INV_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_OCP_OC_SnH_U2         OCP_ENDRV2 OCP_OC_SnH_N109976 INV_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_OCP_OC_SnH_S3    OCP_SAMP 0 0 OCP_OC_SnH_N14720060 OC_SnH_OCP_OC_SnH_S3 
X_OCP_OC_SnH_U3         OCP_OC_SnH_N109976 OCP_OC_SnH_N114524 INV_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_OCP_OC_SnH_S5    OCP_OC_SnH_N14720236 0 OCP_N01362 OCP_OC_SnH_N14720060
+  OC_SnH_OCP_OC_SnH_S5 
X_OCP_OC_SnH_U4         OCP_SAMP OCP_OC_SnH_N113648 OCP_OC_SnH_N113722
+  OCP_OC_SnH_N110230 AND3_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_OCP_OC_SnH_U9         OCP_OC_SnH_N109456 OCP_HOLD OCP_OC_SnH_N14720236
+  AND2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_OCP_OC_SnH_U6         OCP_OC_SnH_N113648 OCP_OC_SnH_N113310
+  OCP_OC_SnH_N113247 OCP_OC_SnH_N113310 OCP_OC_SnH_N114524 OCP_OC_SnH_N114111
+  DFFSBRB_RHPBASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
C_OCP_OC_SnH_C1         OCP_OC_SnH_N14720068 OCP_OC_SnH_N14720060  30p  
X_OCP_OC_SnH_U8         OCP_OC_SnH_N110230 OCP_OC_SnH_N109976
+  OCP_OC_SnH_N109456 OCP_OC_SnH_N108898 SRLATCHRHP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
X_OCP_OC_SnH_S2    OCP_SAMP 0 SW OCP_OC_SnH_N14720068 OC_SnH_OCP_OC_SnH_S2 
X_OCP_OC_SnH_S6    OCP_OC_SnH_N108898 0 OCP_N01362 0 OC_SnH_OCP_OC_SnH_S6 
V_OCP_OC_SnH_V1         OCP_OC_SnH_N114111 0 1
X_OCP_OC_TIMING_U18         OCP_OC_TIMING_N115503 OCP_HOLD INV_PS PARAMS: VHI=1
+  VLO=0 VTHRESH=500E-3 TPLH=50E-9 TPHL=1E-9 TR=1E-9 TF=1E-9
X_OCP_OC_TIMING_U22         OCP_HOLD OCP_OC_TIMING_N116265 BUFFER_PS PARAMS:
+  VHI=1 VLO=0 VTHRESH=500E-3 TPLH=300E-9 TPHL=1E-9 TR=1E-9 TF=1E-9
X_OCP_OC_TIMING_U1         HDON OCP_OC_TIMING_HDONB INV_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_OCP_OC_TIMING_U11         OCP_OC_TIMING_N107290 OCP_OC_TIMING_N116265
+  OCP_OC_TIMING_N114888 OR2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_OCP_OC_TIMING_U3         OCP_ENDRV1 OCP_OC_TIMING_N107290 INV_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_OCP_OC_TIMING_U10         HDON OCP_OC_TIMING_N114707 OCP_OC_TIMING_N114982
+  AND2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_OCP_OC_TIMING_U14         OCP_OC_TIMING_N107280 OCP_OC_TIMING_N107256
+  OCP_EN_HS_SNS N121949 SRLATCHRHP_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_OCP_OC_TIMING_U17         OCP_OC_TIMING_N107280 OCP_OC_TIMING_HDONB INV_PS
+  PARAMS: VHI=1 VLO=0 VTHRESH=500E-3 TPLH=150E-9 TPHL=1E-9 TR=1E-9 TF=1E-9
X_OCP_OC_TIMING_U19         OCP_OC_TIMING_N114707 HDON INV_PS PARAMS: VHI=1
+  VLO=0 VTHRESH=500E-3 TPLH=10E-9 TPHL=10E-9 TR=1E-9 TF=1E-9
X_OCP_OC_TIMING_U13         OCP_OC_TIMING_N115420 OCP_ENDRV1
+  OCP_OC_TIMING_N115503 OCP_SAMP AND3_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_OCP_OC_TIMING_U15         OCP_OC_TIMING_N114982 OCP_OC_TIMING_N114888
+  OCP_HOLD N122320 SRLATCHRHP_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_OCP_OC_TIMING_U20         LDON OCP_OC_TIMING_N115420 BUFFER_PS PARAMS: VHI=1
+  VLO=0 VTHRESH=500E-3 TPLH=20E-9 TPHL=1E-9 TR=1E-9 TF=1E-9
X_OCP_OC_TIMING_U9         OCP_OC_TIMING_HDONB OCP_OC_TIMING_N107290
+  OCP_OC_TIMING_N107256 OR2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_OCP_U21         ENDRV OCP_ENDRB INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_OCP_U27         OCP_N10086 OCFLT INV_PS PARAMS: VHI=1 VLO=0 VTHRESH=500E-3
+  TPLH=10E-9 TPHL=120E-9 TR=1E-9 TF=1E-9
X_OCP_U25         OCP_N06384 OCP_CLK2 INV_PS PARAMS: VHI=1 VLO=0 VTHRESH=500E-3
+  TPLH=26E-9 TPHL=10E-9 TR=1E-9 TF=1E-9
V_OCP_V1         OCP_N_1V 0 1
X_OCP_U26         OCP_N08462 SS_ACT INV_PS PARAMS: VHI=1 VLO=0 VTHRESH=500E-3
+  TPLH=120E-9 TPHL=10E-9 TR=1E-9 TF=1E-9
X_OCP_U9         CLK SW_START OCP_CLK2 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_OCP_U6         OCFLT OCP_N04180 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_OCP_U20         OCP_N16254 OCP_N14747 SS_ACT OCP_N14747 OCFLT OCP_N_1V
+  DFFSBRB_RHPBASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_OCP_OCSET_U5         OCP_OCSET_N151316 OCP_OCSET_N151166 TRILD OR2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_OCP_OCSET_U19         OCP_OCSET_N159883 OCP_OCSET_N153743 OCP_N01627 N160024
+  SRLATCHRHP_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_OCP_OCSET_U18         OCP_OCSET_N153855 OCP_OCSET_N153743 CAL_DONE1 N156574
+  SRLATCHRHP_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_OCP_OCSET_S2    CAL_END_SIG 0 OCP_OCSET_N112055 LDRV OCSET_OCP_OCSET_S2 
X_OCP_OCSET_U8         MENA OCP_OCSET_N153809 one_shot PARAMS: PARAMS:  T=
+ {(1.8-(1.65*SS)) * 1e6}
G_OCP_OCSET_ABMII1         OCP_OCSET_N112099 OCP_OCSET_N112055 VALUE { {IF
+  (V(CAL_END_SIG) > 0.5, 10u, 0)}    }
X_OCP_OCSET_U15         OCP_OCSET_N153809 OCP_OCSET_N153855 one_shot_1 PARAMS:
+  PARAMS:  T=50  
X_OCP_OCSET_U2         MENA OCP_OCSET_N150555 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_OCP_OCSET_U1          OCP_OCSET_N112055 OCP_OCSET_N112099 DC_1mV_1mA_1V_1nA
V_OCP_OCSET_V1         OCP_OCSET_N112099 0 345m
X_OCP_OCSET_U4         CAL_DONE1 OCP_OCSET_N150946 OCP_OCSET_N151166
+  NOR2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
E_OCP_OCSET_ABM1         OCP_OCSET_N159883 0 VALUE { {IF (V(CAL_END_SIG) > 0.5
+  & V(CAL_DONE1) > 0.5 & V(LDRV) > 340m, 1, 0)}    }
X_OCP_OCSET_U6         ENDRV OCP_OCSET_N151316 INV_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
E_OCP_OCSET_E2         OCP_N01337 0 OCP_OCSET_N112055 0 2
X_OCP_OCSET_U7         MENA OCP_OCSET_N153743 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
C_OCP_OCSET_C2         0 OCP_OCSET_N112055  1n  
X_OCP_OCSET_U3         OCP_OCSET_N150555 OCP_OCSET_N150946 BUFFER_PS PARAMS:
+  VHI=1 VLO=0 VTHRESH=500E-3 TPLH=1E-9 TPHL=5E-6 TR=1E-9 TF=1E-9
X_OCP_U18         OCFLT OCP_N10086 OCP_N11993 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_OCP_U15         SS_ACT OCP_N08462 OCP_N09250 NOR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_OCP_U4         OCP_N02424 OCP_HOLD OCP_OCLS AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_OCP_U13         OCP_N06890 OCP_FAULTB OCP_N116664 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_OCP_U2         OCP_N01627 OCP_N01784 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_OCP_U16         OCFLT OCP_N09250 OCP_N12189 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_OCP_U7         OCP_N04180 OCP_ENDRV1 OCP_ENDRV2 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_OCP_UP_DN_CNTR2_TFLOP1_U1         OCP_UP_DN_CNTR2_Q0 OCP_UP_DN_CNTR2_Q0B
+  OCP_N116297 OCP_UP_DN_CNTR2_TFLOP1_N00087 OCP_UP_DN_CNTR2_N00321
+  OCP_UP_DN_CNTR2_TFLOP1_N00116 DFFSBRB_RHPBASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_OCP_UP_DN_CNTR2_TFLOP1_U2         OCP_UP_DN_CNTR2_Q0 OCP_UP_DN_CNTR2_HOLDB
+  OCP_UP_DN_CNTR2_TFLOP1_N00087 XOR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
V_OCP_UP_DN_CNTR2_TFLOP1_V1         OCP_UP_DN_CNTR2_TFLOP1_N00116 0 1
X_OCP_UP_DN_CNTR2_U8         OCP_N116664 OCP_UP_DN_CNTR2_DOWN INV_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_OCP_UP_DN_CNTR2_TFLOP2_U1         OCP_UP_DN_CNTR2_Q1 OCP_UP_DN_CNTR2_Q1B
+  OCP_N116297 OCP_UP_DN_CNTR2_TFLOP2_N00087 OCP_UP_DN_CNTR2_N00321
+  OCP_UP_DN_CNTR2_TFLOP2_N00116 DFFSBRB_RHPBASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_OCP_UP_DN_CNTR2_TFLOP2_U2         OCP_UP_DN_CNTR2_Q1 OCP_UP_DN_CNTR2_T1
+  OCP_UP_DN_CNTR2_TFLOP2_N00087 XOR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
V_OCP_UP_DN_CNTR2_TFLOP2_V1         OCP_UP_DN_CNTR2_TFLOP2_N00116 0 1
X_OCP_UP_DN_CNTR2_U1         OCP_ENDRB OCP_UP_DN_CNTR2_N00321 INV_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_OCP_UP_DN_CNTR2_U6         OCP_UP_DN_CNTR2_Q0B OCP_UP_DN_CNTR2_HOLDB
+  OCP_UP_DN_CNTR2_DOWN OCP_UP_DN_CNTR2_N00689 NAND3_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_OCP_UP_DN_CNTR2_U2         OCP_UP_DN_CNTR2_HOLD OCP_UP_DN_CNTR2_HOLDB
+  INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_OCP_UP_DN_CNTR2_U9         OCP_UP_DN_CNTR2_Q0B OCP_UP_DN_CNTR2_Q1B OCP_CNT_0
+  AND2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_OCP_UP_DN_CNTR2_U7         OCP_UP_DN_CNTR2_N00647 OCP_UP_DN_CNTR2_N00689
+  OCP_UP_DN_CNTR2_T1 NAND2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_OCP_UP_DN_CNTR2_U3         OCP_UP_DN_CNTR2_Q0 OCP_UP_DN_CNTR2_Q1 OCP_CNT_3
+  AND2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_OCP_UP_DN_CNTR2_U11         OCP_UP_DN_CNTR2_N02662 OCP_UP_DN_CNTR2_N02762
+  OCP_UP_DN_CNTR2_HOLD NAND2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_OCP_UP_DN_CNTR2_U10         OCP_UP_DN_CNTR2_DOWN OCP_CNT_0
+  OCP_UP_DN_CNTR2_N02762 NAND2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_OCP_UP_DN_CNTR2_U4         OCP_CNT_3 OCP_N116664 OCP_UP_DN_CNTR2_N02662
+  NAND2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_OCP_UP_DN_CNTR2_U5         OCP_UP_DN_CNTR2_Q0 OCP_UP_DN_CNTR2_HOLDB
+  OCP_N116664 OCP_UP_DN_CNTR2_N00647 NAND3_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_OCP_U29         N06512 OCP_OCLS OCDET OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_OCP_U24         OCP_N128687 OCP_N02424 BUF_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=100n
X_OCP_U19         OCP_N11993 OCP_N12189 DCHG OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_OCP_U22         OCP_CNT_0 OCP_ENDRB OCP_N120446 NOR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_OCP_U28         OCDET OCP_N06516 OCP_N06890 N150084 SRLATCHRHP_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_OCP_U11         OCP_CLK2 OCP_N06384 OCP_N06516 NOR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
.PARAM  freq=1200e3 tclk=100e-9
.ENDS TPS40305
*$
.subckt ERROR_AMP_ERROR_AMP_S1 1 2 3 4  
S_ERROR_AMP_S1         3 4 1 2 _ERROR_AMP_S1
RS_ERROR_AMP_S1         1 2 1G
.MODEL         _ERROR_AMP_S1 VSWITCH Roff=1e7 Ron=1.0 Voff=0.25V Von=0.75V
.ends ERROR_AMP_ERROR_AMP_S1
*$
.subckt ERROR_AMP_ERROR_AMP_S2 1 2 3 4  
S_ERROR_AMP_S2         3 4 1 2 _ERROR_AMP_S2
RS_ERROR_AMP_S2         1 2 1G
.MODEL         _ERROR_AMP_S2 VSWITCH Roff=1e7 Ron=1.0 Voff=0.25V Von=0.75V
.ends ERROR_AMP_ERROR_AMP_S2
*$
.subckt EN_SS_EN_SS_S1 1 2 3 4  
S_EN_SS_S1         3 4 1 2 _EN_SS_S1
RS_EN_SS_S1         1 2 1G
.MODEL         _EN_SS_S1 VSWITCH Roff=1e9 Ron=1.0 Voff=0.25V Von=0.75V
.ends EN_SS_EN_SS_S1
*$
.subckt EN_SS_EN_SS_S2 1 2 3 4  
S_EN_SS_S2         3 4 1 2 _EN_SS_S2
RS_EN_SS_S2         1 2 1G
.MODEL         _EN_SS_S2 VSWITCH Roff=1e9 Ron=1.0 Voff=0.25V Von=0.75V
.ends EN_SS_EN_SS_S2
*$
.subckt DRIVER_DRIVER_S1 1 2 3 4  
S_DRIVER_S1         3 4 1 2 _DRIVER_S1
RS_DRIVER_S1         1 2 1G
.MODEL         _DRIVER_S1 VSWITCH Roff=1e9 Ron=1.5 Voff=0.25V Von=0.75V
.ends DRIVER_DRIVER_S1
*$
.subckt DRIVER_DRIVER_S2 1 2 3 4  
S_DRIVER_S2         3 4 1 2 _DRIVER_S2
RS_DRIVER_S2         1 2 1G
.MODEL         _DRIVER_S2 VSWITCH Roff=1e9 Ron=1.0 Voff=0.25V Von=0.75V
.ends DRIVER_DRIVER_S2
*$
.subckt DRIVER_DRIVER_S3 1 2 3 4  
S_DRIVER_S3         3 4 1 2 _DRIVER_S3
RS_DRIVER_S3         1 2 1G
.MODEL         _DRIVER_S3 VSWITCH Roff=1e9 Ron=1.5 Voff=0.25V Von=0.75V
.ends DRIVER_DRIVER_S3
*$
.subckt DRIVER_DRIVER_S4 1 2 3 4  
S_DRIVER_S4         3 4 1 2 _DRIVER_S4
RS_DRIVER_S4         1 2 1G
.MODEL         _DRIVER_S4 VSWITCH Roff=1e9 Ron=0.6 Voff=0.25V Von=0.75V
.ends DRIVER_DRIVER_S4
*$
.subckt PWMOSC_PWMOSC_S1 1 2 3 4  
S_PWMOSC_S1         3 4 1 2 _PWMOSC_S1
RS_PWMOSC_S1         1 2 1G
.MODEL         _PWMOSC_S1 VSWITCH Roff=1e9 Ron=1.0 Voff=0.25V Von=0.75V
.ends PWMOSC_PWMOSC_S1
*$
.subckt COMP_CALIB_COMP_CALIB_S2 1 2 3 4  
S_COMP_CALIB_S2         3 4 1 2 _COMP_CALIB_S2
RS_COMP_CALIB_S2         1 2 1G
.MODEL         _COMP_CALIB_S2 VSWITCH Roff=1e9 Ron=1 Voff=0.25V Von=0.75V
.ends COMP_CALIB_COMP_CALIB_S2
*$
.subckt COMP_CALIB_COMP_CALIB_H2 1 2 3 4  
H_COMP_CALIB_H2         3 4 VH_COMP_CALIB_H2 1000
VH_COMP_CALIB_H2         1 2 0V
.ends COMP_CALIB_COMP_CALIB_H2
*$
.subckt COMP_CALIB_COMP_CALIB_S4 1 2 3 4  
S_COMP_CALIB_S4         3 4 1 2 _COMP_CALIB_S4
RS_COMP_CALIB_S4         1 2 1G
.MODEL         _COMP_CALIB_S4 VSWITCH Roff=1e9 Ron=1 Voff=0.25V Von=0.75V
.ends COMP_CALIB_COMP_CALIB_S4
*$
.subckt PGOOD_PGOOD_S1 1 2 3 4  
S_PGOOD_S1         3 4 1 2 _PGOOD_S1
RS_PGOOD_S1         1 2 1G
.MODEL         _PGOOD_S1 VSWITCH Roff=1e9 Ron=30 Voff=0.2 Von=0.8
.ends PGOOD_PGOOD_S1
*$
.subckt OC_SnH_OCP_OC_SnH_S4 1 2 3 4  
S_OCP_OC_SnH_S4         3 4 1 2 _OCP_OC_SnH_S4
RS_OCP_OC_SnH_S4         1 2 1G
.MODEL         _OCP_OC_SnH_S4 VSWITCH Roff=1e9 Ron=1.0m Voff=0.2V Von=0.8V
.ends OC_SnH_OCP_OC_SnH_S4
*$
.subckt OC_SnH_OCP_OC_SnH_S3 1 2 3 4  
S_OCP_OC_SnH_S3         3 4 1 2 _OCP_OC_SnH_S3
RS_OCP_OC_SnH_S3         1 2 1G
.MODEL         _OCP_OC_SnH_S3 VSWITCH Roff=1e9 Ron=1.0m Voff=0.2V Von=0.8V
.ends OC_SnH_OCP_OC_SnH_S3
*$
.subckt OC_SnH_OCP_OC_SnH_S5 1 2 3 4  
S_OCP_OC_SnH_S5         3 4 1 2 _OCP_OC_SnH_S5
RS_OCP_OC_SnH_S5         1 2 1G
.MODEL         _OCP_OC_SnH_S5 VSWITCH Roff=1e9 Ron=100 Voff=0.2V Von=0.8V
.ends OC_SnH_OCP_OC_SnH_S5
*$
.subckt OC_SnH_OCP_OC_SnH_S2 1 2 3 4  
S_OCP_OC_SnH_S2         3 4 1 2 _OCP_OC_SnH_S2
RS_OCP_OC_SnH_S2         1 2 1G
.MODEL         _OCP_OC_SnH_S2 VSWITCH Roff=1e9 Ron=100 Voff=0.2V Von=0.8V
.ends OC_SnH_OCP_OC_SnH_S2
*$
.subckt OC_SnH_OCP_OC_SnH_S6 1 2 3 4  
S_OCP_OC_SnH_S6         3 4 1 2 _OCP_OC_SnH_S6
RS_OCP_OC_SnH_S6         1 2 1G
.MODEL         _OCP_OC_SnH_S6 VSWITCH Roff=1e7 Ron=1k  Voff=0.2V Von=0.8V
.ends OC_SnH_OCP_OC_SnH_S6
*$
.subckt OCSET_OCP_OCSET_S2 1 2 3 4  
S_OCP_OCSET_S2         3 4 1 2 _OCP_OCSET_S2
RS_OCP_OCSET_S2         1 2 1G
.MODEL         _OCP_OCSET_S2 VSWITCH Roff=1e9 Ron=1 Voff=0.25V Von=0.75V
.ends OCSET_OCP_OCSET_S2
*$
.subckt DC_1mV_1mA_1V_1nA A C
G1 A C TABLE { V(A, C) } ( (-1,-1n)(0,0)(1m,1m) (2m,100m) (3m,10) )
.ends DC_1mV_1mA_1V_1nA
*$
.subckt DC_1mV_1A_1V_1nA A C
G1 A C TABLE { V(A, C) } ( (-1,-1n)(0,0)(1m,1) (2m,10) (3m,1000) )
.ends DC_1mV_1A_1V_1nA 
*$
.SUBCKT COMPARATOR INP INM OUT  
EOUT OUT 0 VALUE { IF( V(INP)>V(INM),1,0) }
.ends COMPARATOR
*$
.SUBCKT ONE_SHOT IN OUT
+ PARAMs:  T=100
S_S1         MEAS 0 RESET2 0 S1
E_ABM1         CH 0 VALUE { if( V(IN)>0.5 | V(OUT)>0.5,1,0)    }
R_R2         RESET2 RESET  0.1  
E_ABM3         OUT 0 VALUE { if( V(MEAS)<0.5 & V(CH)>0.5,1,0)    }
R_R1         MEAS CH  {T} 
C_C2         0 RESET2  1.4427n  
C_C1         0 MEAS  1.4427n  
E_ABM2         RESET 0 VALUE { if(V(CH)<0.5,1,0)    }
.MODEL         S1 VSWITCH Roff=1e9 Ron=1.0 Voff=0.25V Von=0.75V
.ENDS ONE_SHOT
*$
.SUBCKT ONE_SHOT_1 IN OUT
+ PARAMs:  T=100
S_S1         MEAS 0 RESET2 0 S1
E_ABM1         CH 0 VALUE { if( V(IN)<0.5 | V(OUT)>0.5,1,0)    }
R_R2         RESET2 RESET  0.1  
E_ABM3         OUT 0 VALUE { if( V(MEAS)<0.5 & V(CH)>0.5,1,0)    }
R_R1         MEAS CH  {T} 
C_C2         0 RESET2  1.4427n  
C_C1         0 MEAS  1.4427n  
E_ABM2         RESET 0 VALUE { if(V(CH)<0.5,1,0)    }
.MODEL         S1 VSWITCH Roff=1e9 Ron=1.0 Voff=0.25V Von=0.75V
.ENDS ONE_SHOT_1
*$
.SUBCKT AND_1 A B OUT  
EOUT OUT 0 VALUE { IF( V(A)>0.5 & V(B)<0.5,1,0) }
.ends AND_1
*$
.SUBCKT AND A B OUT  
EOUT OUT 0 VALUE { IF( V(A)>0.5 & V(B)>0.5,1,0) }
.ends AND
*$
.SUBCKT DLATCH D CLK Q
EABM1  1 0 VALUE { If( (V(D)>0.5 & V(CLK)>0.5) | V(Q)>0.5, 1,0)    }
EABM2  Q  0 VALUE { If( V(2)>0.5 & (V(CLK)<0.5 | V(D)>0.5) , 1,0)    }
R1   1 2 1
C1   2  0 5n
.ENDS DLATCH
*$
.SUBCKT INVERTER IN OUT  
EOUT OUT 0 VALUE { IF( V(IN)<0.5,1,0) }
.ends INVERTER
*$
.SUBCKT OR A B OUT  
EOUT OUT 0 VALUE { IF( V(A)>0.5 | V(B)>0.5,1,0) }
.ends OR
*$
.SUBCKT RSFF_RDOM R S Q
EABM1  1 0 VALUE { If( V(S)>0.5 | V(Q)>0.5, 1,0)    }
EABM2  Q  0 VALUE { If( V(2)>0.5 & V(R)<0.5, 1,0)    }
R1   1 2 1
C1   2  0 5n
.ENDS RSFF_RDOM
*$
.model DIDEAL D Is=1e-14 Cjo=.1pF Rs=.1
*$
.SUBCKT AND3 A B C OUT  
EOUT OUT 0 VALUE { IF( V(A)>0.5 & V(B)>0.5 & V(C)>0.5,1,0) }
.ends AND3
*$
.SUBCKT DELAY IN OUT
+ PARAMs:  T=100
S_S1         MEAS 0 RESET2 0 S1
E_ABM1         CH 0 VALUE { if( V(IN)>0.5,1,0)    }
E_ABM3         OUT 0 VALUE { if( V(MEAS)>0.5 & V(CH)>0.5,1,0)    }
R_R1         MEAS CH  {T} 
C_C1         0 MEAS  1.4427n  
E_ABM2         RESET 0 VALUE { if(V(CH)<0.5,1,0)    }
R_R2         RESET2 RESET  0.1  
C_C2         0 RESET2  1.4427n  
.MODEL         S1 VSWITCH Roff=1e9 Ron=1.0 Voff=0.25V Von=0.75V
.ENDS DELAY
*$
.SUBCKT OSC FAULT RAMP CLK PARAMS:  FREQ=100E3 TCLK=1E-6
VCLK         CLK2 0 PULSE 0 1 {TON} 1n 1n {TCLK} {1/FREQ}
S1    RAMP 0 2 0 S1M 
EOUT1         2 0 VALUE { if( V(FAULT)>0.5 | V(CLK)>0.5,1,0)    }
EOUT2         CLK 0 VALUE { if( V(FAULT)<0.5,V(CLK2),0)    }
ICH         0 RAMP DC {ICHARGE}  
COSC         0 RAMP  1n IC=0
.PARAM  ICHARGE={1E-9/TON} RON={TCLK/100/1E-9} TON={(1/FREQ)-TCLK}
.MODEL         S1M VSWITCH Roff=1G Ron=1m Voff=0.25 Von=0.75 
.ENDS OSC
*$
.MODEL D_D1 D( IS=1e-15 TT=10p Rs=0.05 N=.1  )
*$
.SUBCKT OP_AMP P M OUT 
+ PARAMs:  Hlimit=5 Rin=10Meg BW=18Meg DC_Gain=100 Rout=100 Llimit=0 SRP=1 SRM=1
R_Rin         P M  {Rin}
E_E1          5 0 M P {-Gain}
E_LIMIT2      6 0 VALUE {LIMIT(V(5), {-Abs(SRM)*Ca*1Meg+V(1)/Ra},
+                 {SRP*Ca*1Meg+V(1)/Ra})}
G_G2          1 0 6 0 -1
R_Ra          0 1  {Ra} 
C_Ca          0 1  {Ca}   
E_LIMIT1      2 0 VALUE {LIMIT(V(1),{Llimit},{Hlimit})}
V_VL          3 0 {Llimit+200m}
V_VH          4 0 {Hlimit-200m}
D_D1          3 1 Dideal 
D_D2          1 4 Dideal 
R_Rout        OUT 2  {Rout}
.model Dideal D Is=1e-10 Cjo=.01pF Rs=1m  N=1
.PARAM  Ra=1k   Ca={exp(DC_gain*log(10)/20)/(2*3.14159*BW*Ra)} 
+ Gain={exp(DC_gain*log(10)/20)/Ra} 
.ENDS OP_AMP
*$
.SUBCKT COMP_BASIC INP INM Y
*** Changed 5V output to 1V output ***
*E_ABM Yint 0 VALUE {IF (V(INP) > 
*+ V(INM), 5,0)}
E_ABM Yint 0 VALUE {IF (V(INP) > 
+ V(INM), 1,0)}
R1 Yint Y 1
C1 Y 0 1n
.ENDS COMP_BASIC
*$
.SUBCKT AND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND2_BASIC_GEN
*$
.SUBCKT AND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND3_BASIC_GEN
*$
.SUBCKT OR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR2_BASIC_GEN
*$
.SUBCKT OR3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR3_BASIC_GEN
*$
.SUBCKT OR4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR4_BASIC_GEN
*$
.SUBCKT NAND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND2_BASIC_GEN
*$
.SUBCKT NAND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND3_BASIC_GEN
*$
.SUBCKT NOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR2_BASIC_GEN
*$
.SUBCKT INV_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS INV_BASIC_GEN
*$
.SUBCKT INV_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS INV_DELAY_BASIC_GEN
*$
.SUBCKT BUF_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS BUF_BASIC_GEN
*$
.SUBCKT BUF_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS BUF_DELAY_BASIC_GEN
*$
.SUBCKT XOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(A) > {VTHRESH}  ^  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS XOR2_BASIC_GEN
*$
**Reset has higher priority in this latch
.SUBCKT SRLATCHRHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,IF(V(S)>{VTHRESH},5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n
.IC V(Qint) {VSS}
.ENDS SRLATCHRHP_BASIC_GEN
*$
.SUBCKT DFFSBRB_RHPBASIC_GEN Q QB CLK D RB SB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} 
GQ 0 Qint VALUE = {IF(V(RB) < {VTHRESH},-5,IF(V(SB)< {VTHRESH},5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 5
D_D11 0 Qint D_D1 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSBRB_RHPBASIC_GEN
*$
**** BUFFER
.SUBCKT BUFFER_PS A Y PARAMS: vhi=1 vlo=0 vthresh=500e-3 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
RA A 0 1e11
CA A 0 0.01pF
VS VSUP 0 DC 1
***** boolean ************
EBUF1 Ypp 0 VALUE={IF(V(A) > ({vthresh}), 1, 0)}
ROUTpp Ypp 0 1e11
***** add delay lines ****
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
** add rise and fall *****
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
**************************
EOUT OUTf 0 VALUE={V(OUTr)*({vhi} - {vlo})+{vlo}}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS BUFFER_PS
*$
**** INVERTER 
.SUBCKT INV_PS Y A PARAMS: vhi=1 vlo=0 vthresh=500e-3 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
RA A 0 1e11
CA A 0 0.01pF
VS VSUP 0 DC 1
***** boolean ************
EINV1 Ypp 0 VALUE={IF(V(A) > ({vthresh}), 0, 1)}
ROUTpp Ypp 0 1e11
***** add delay lines ****
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
** add rise and fall *****
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
**************************
EOUT OUTf 0 VALUE={V(OUTr)*({vhi} - {vlo})+{vlo}}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS INV_PS
*$
.SUBCKT SW1P2T_PS A SWC SWD1 SWD2 PARAMS: vth=500e-3 ron=100 roff=1e6 tdelay=1e-9 trise=1e-9 tfall=1e-9 initval=0
*
VS VSUP 0 DC 1
***** boolean ************
EBUF1 Ypp 0 VALUE={IF(V(A) > ({vth}), {initval}, {1-initval})}
ROUTpp Ypp 0 1e11
***** add delay lines ****
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tdelay+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tdelay+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
** Add rise and fall *****
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(trise+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tfall+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
***Switches ************
EOUT1 VG1 test1 VALUE={V(OUTr)}
Etest1 test1 0 VALUE {IF(V(SWD1) < V(SWC), V(SWD1), V(SWC))}
Etest2 test2 0 VALUE {IF(V(SWD2) < V(SWC), V(SWD2), V(SWC))}
EOUT2 VG2 test2 VALUE={1-V(OUTr)}
XNSW3 SWD1 VG1 SWC NSW_PS PARAMS: RONval={ron} VTHval=0.5
XNSW4 SWD2 VG2 SWC NSW_PS PARAMS: RONval={ron} VTHval=0.5
.ENDS SW1P2T_PS
*$
.SUBCKT NSW_PS D G S PARAMS: RONval=10k VTHval=0.7 VCHARval=0.01 CGval=0.01pF CDval=0.01pF CSval=0.01pf
RDDUM D 0 1e11
RSDUM S 0 1e11
RGDUM G 0 1e11
CG G D {CGval}
CD D S {CDval}
CS G S {CSval}
***EEXP F1 0 VALUE={LIMIT(((V(G,S)-VTHval)/VCHARval),-80,80)} 
Etest test 0 VALUE={IF(V(D) > V(S), V(G,S), V(G,D))}
GOUT D S VALUE={V(D,S)/(RONval*(1+EXP(-LIMIT(((V(test)-VTHval)/VCHARval),-80,80))))}
.ENDS NSW_PS
*$
.SUBCKT PSW_PS D G S PARAMS: RONval=10k VTHval=0.7 VCHARval=0.01 CGval=0.01pF CDval=0.01pF 
RDDUM D 0 1e11
RSDUM S 0 1e11
RGDUM G 0 1e11
CG G D {CGval}
CD D S {CDval}
***EEXP F1 0 VALUE={LIMIT(((V(S,G)-VTHval)/VCHARval),-80,80)} 
Etest test 0 VALUE={IF(V(S) > V(D), V(S,G), V(D,G))}
GOUT S D VALUE={V(S,D)/(RONval*(1+EXP(-LIMIT(((V(test)-VTHval)/VCHARval),-80,80))))}
.ENDS PSW_PS
*$

