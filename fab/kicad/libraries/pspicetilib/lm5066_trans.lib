* CIP: NDA is required as of 08/29/2019
*****************************************************************************
* PSpice Model Editor - Version 16.2.0
*$
* LM5066
*****************************************************************************
*  (C) Copyright 2012 Texas Instruments Incorporated. All rights reserved.
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.
** TI and its licensors and suppliers make no warranties, either expressed
** or implied, with respect to this model, including the warranties of 
** merchantability or fitness for a particular purpose.  The model is
** provided solely on an "as is" basis.  The entire risk as to its quality
** and performance is with the customer
*****************************************************************************
*
** Released by: WEBENCH Design Center, Texas Instruments Inc.
* Part: LM5066
* Date: 28FEB2013
* Model Type: Transient
* Simulator: PSPICE
* Simulator Version: 16.2.0.p001
* EVM Order Number: SNVA487 - August 2011 
* EVM Users Guide: AN-2160 LM5066 Evaluation Board 
* Datasheet: SNVS655F -JUNE 2011- REVISED AUGUST 2011
*
* Model Version: Final 1.00
*****************************************************************************
* Updates:
*
* Final 1.00
* Release to Web.
* 
*****************************************************************************
.SUBCKT LM5066_TRAN SENSE GATE OUT  PGD PWR TIMER  RETRY_B  FB  CL VDD ADR0 ADR1 ADR2 VAUX DIODE  VREF 
+SMBA_B  SCL SDAO SDAI GND AGND  OVLO UVLO_EN  VIN VIN_K  PARAMS: CB_CL_RATIO_BIT=0

R_R12         VAUX 0  1k TC=0,0 
R_R14         GND 0  1m TC=0,0 
R_R18         AGND 0  1m TC=0,0 
V_U1_V5         U1_N15464299 U1_OUT_DUP 16.5
E_U1_ABM18         U1_IG_PULLDOWN 0 VALUE { IF((V(U1_ICL) - V(U1_ICL_MAX))<0
+  ,0,(V(U1_ICL)-V(U1_ICL_MAX))*35.2k)    }
V_U1_V6         SENSE U1_N14930454 0.7
E_U1_ABM17         U1_N15469381 0 VALUE { IF(((V(UVLOCK) > 0.5) | (V(OVLOCK) >
+  0.5)), 1, 0)    }
E_U1_E10         U1_IXIY 0 VALUE { V(U1_IX) *V (U1_IY) }
X_U1_U14         OVLOCK UVLOCK U1_N15297178 OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
G_U1_ABMII6         GATE 0 VALUE { IF (V(U1_ACTIVE_115M) > 0.5, 115m, 0)    }
V_U1_V12         U1_N15014608 0 5Vdc
X_U1_U17         INSERTION_TIME U1_N15297178 ENABLE_4P2MA U1_N14924861
+  OR3_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U1_S3    U1_N15469381 0 U1_N15469447 0 GATE_CONTROL_U1_S3 
G_U1_ABMII9         GATE 0 VALUE { MIN(V(U1_IG_PULLDOWN) ,100u)     }
E_U1_E8         U1_OUT_DUP 0 VALUE { V(OUT, 0) }
D_U1_D5         GATE U1_N15464299 DD 
E_U1_E1         U1_N14924147 0 VIN_K SENSE 1
E_U1_E6         U1_ICLPRE 0 VALUE { (V(VIN_K, SENSE) - 1.5m) *425u }
X_U1_U16         U1_N15700529 SHUTDOWN_B U1_N15705981 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
E_U1_ABM11         U1_N14924151 0 VALUE { V(U1_CL_THRESH)*V(U1_CB_MULT)    }
R_U1_R5         U1_N15699784 U1_N15700529  5k TC=0,0 
R_U1_R4         U1_N14924471 U1_N14924531  5k TC=0,0 
D_U1_D6         0 GATE DD 
G_U1_ABMII5         GATE 0 VALUE { IF (V(U1_N14924861) > 0.5,4.2m, 0)    }
E_U1_ABM15         U1_CB_MULT 0 VALUE { {IF(( V(U1_CB_CL)<0.5)
+  &(V(CL)<0.5),1.94,(IF(( V(U1_CB_CL)>0.5) &(V(CL)<0.5),3.87,(IF(
+  (V(U1_CB_CL)<0.5) &(V(CL)>0.5),1.88,3.75)))))}    }
C_U1_C6         0 U1_N15700529  10p  TC=0,0 
C_U1_C4         0 U1_N14924531  10p  TC=0,0 
V_U1_V10         U1_N15346934 U1_N14930316 0.7
E_U1_E7         U1_IZ 0 VALUE { (V(SENSE, OUT)*240n) }
D_U1_D12         OUT U1_N15469447 DD 
G_U1_ABMII2         0 GATE VALUE { IF(V(EN_CHARGE_PUMP) > 0.5, 20u, 0)    }
E_U1_E11         U1_N15153575 0 VALUE { V(U1_IZ) +V (U1_IX) }
E_U1_ABM10         U1_IX 0 VALUE { (V(PWR)*2u)    }
E_U1_E12         U1_ICL_MAX 0 VALUE { V(U1_IXIY) /V (U1_N15153575) }
E_U1_ABM9         U1_CL_THRESH 0 VALUE { IF(V(CL)<2.35,50m,26m)    }
R_U1_R6         U1_IY_0 U1_IY  1 TC=0,0 
V_U1_V11         VIN U1_N14994427 0.7
R_U1_R_SNSOUT         OUT SENSE  1E6 TC=0,0 
D_U1_D7         0 OUT DD 
C_U1_C5         0 U1_IY  1n  TC=0,0 
D_U1_D10         U1_N14994427 U1_N15346934 DD 
E_U1_ABM14         U1_ICL 0 VALUE { IF(V(SHUTDOWN)>0.5,0,V(U1_ICLPRE))    }
E_U1_ABM12         U1_CB_CL 0 VALUE { (V(U1_N15014608) * {CB_CL_RATIO_BIT})   
+  }
G_U1_G1         VIN 0 VALUE { IF(V(VIN, 0)>4.1,7.2m, 0) }
E_U1_ABM23         U1_N15699784 0 VALUE { IF(V(U1_IG_PULLDOWN) > 10u , 1 , 0 ) 
+    }
D_U1_D11         U1_N14994537 VIN DD 
D_U1_D9         U1_N14930316 SENSE DD 
E_U1_E4         U1_IY_0 0 VALUE { IF(V(CL)<2.35,20u,10u) }
X_U1_U13         U1_N14924531 POR U1_ACTIVE_115M OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U1_U12         U1_N14924147 U1_N14924151 U1_N14924471 COMP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
X_U1_U15         U1_N15705981 U1_ACTIVE_115M ACTIVE OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
D_U1_D8         U1_N14930454 VIN_K DD 
V_U1_V7         VIN_K U1_N14994537 0.7
G_U1_ABMII8         VIN_K U1_N15346934 VALUE { IF (V(VIN) > 0,175u, 0)    }
R_R8         ADR1 0  1k TC=0,0 
R_R16         SMBA_B 0  1k TC=0,0 
R_R15         DIODE 0  1k TC=0,0 
R_R17         SDAI 0  1k TC=0,0 
G_U3_ABMII8         VDD TIMER VALUE { IF(V(INSERTION_TIME) > 0.5, 4.8u, 0)    }
X_U3_U26         U3_N14919944 TIMER U3_TIMER_LESS_3P9 COMP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
X_U3_U36         U3_N14945837 TIMER U3_TIMER_LESS_0P3 COMP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
X_U3_U795         RETRY_B U3_FAULT_DET U3_N14993822 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U3_S3    U3_N15035983 0 U3_C_COUNT7 0 TIMER_LOGIC_U3_S3 
X_U3_U785         U3_N14919324 U3_CH_DIS U3_N14919254 OR2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
V_U3_V16         U3_N14945837 0 0.3
X_U3_U784         U3_TIMER_MORE_3P9 ACTIVE U3_FAULT_DET AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U810         U3_C_COUNT7 U3_N15028577 U3_COUNT7 COMP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
X_U3_U27         U3_N14920332 TIMER U3_TIMER_LESS_1P1 COMP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
X_U3_U32         U3_N14919522 U3_N14919908 U3_ENABLE_1P5M_PD N14920128
+  SRLATCHRHP_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U3_U39         U3_END_INSERTION_TIME POR U3_ENABLE_2P5U_PD N15068113
+  SRLATCHRHP_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U3_U790         U3_CH_DIS U3_TIMER_MORE_3P9 U3_N14920160 AND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U811         U3_CH_DIS U3_N15031002 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U3_U37         U3_CH_DIS U3_TIMER_LESS_0P3 ENABLE_4P2MA N14954204
+  SRLATCHRHP_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U3_U805         U3_CH_DIS U3_N15008468 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
V_U3_V15         U3_N14920332 0 1.1V
X_U3_U30         U3_END_INSERTION_TIME U3_N14919456 INV_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U3_U783         POR U3_TIMER_LESS_0P3 U3_N14919908 OR2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U29         U3_TIMER_LESS_3P9 U3_TIMER_MORE_3P9 INV_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
E_U3_E2         U3_N15114271 0 VALUE { IF(V(U3_N14919940)>0.5 &
+  V(POR_EN)>0.5,5,0) }
X_U3_U782         U3_END_INSERTION_TIME U3_N14919522 rising_oneshot PARAMS:
+  PARAMS:  PULSE=10u VDD=1 VSS=0 VTHRESH=0.5
X_U3_U33         U3_FAULT_DET U3_N14919732 U3_CH_DIS N14920300
+  SRLATCHRHP_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U3_S2    POR 0 TIMER 0 TIMER_LOGIC_U3_S2 
X_U3_U38         U3_N14993822 UVLOCK LATCHOFF N14978683 SRLATCHRHP_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U3_U800         U3_END_INSERTION_TIME SHUTDOWN_B EN_CHARGE_PUMP
+  AND2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U34         U3_SET_CH_75U U3_RESET_CH_75U U3_CHARGE_75U N14919354
+  SRLATCHRHP_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U3_U787         U3_N14970400 SHUTDOWN U3_N14919732 OR2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
D_U3_D3         U3_C_COUNT7 U3_N15022993 DD 
V_U3_V18         U3_N15022993 0 7
X_U3_U793         ACTIVE U3_N14919324 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U3_U35         ACTIVE U3_N14919254 U3_FAULT_TIMEOUT N14919660
+  SRLATCHRHP_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
G_U3_ABMII9         TIMER 0 VALUE { IF(V(U3_ENABLE_1P5M_PD) > 0.5, 1.5m, 0)   
+  }
X_U3_U31         U3_TIMER_LESS_3P9 POR_B U3_N14919456 INSERTION_TIME
+  AND3_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U28         U3_TIMER_MORE_3P9 POR U3_END_INSERTION_TIME N14919618
+  SRLATCHRHP_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
V_U3_V19         U3_N15028577 0 6.5
G_U3_ABMII11         VDD TIMER VALUE { IF(V(U3_N15114271) > 0.5, 75u, 0)    }
E_U3_E1         U3_N15112415 0 VALUE { IF(V(U3_ENABLE_2P5U_PD)>0.5 &
+  V(POR_EN)>0.5,5,0) }
D_U3_D1         TIMER VDD DD 
X_U3_U794         U3_COUNT7 U3_TIMER_MORE_3P9 U3_N14970400 AND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
G_U3_ABMII10         TIMER 0 VALUE { IF(V(U3_N15112415) > 0.5, 2.5u, 0)    }
X_U3_U788         U3_CH_DIS U3_TIMER_LESS_1P1 U3_SET_CH_75U AND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U792         U3_FAULT_TIMEOUT U3_CHARGE_75U U3_N14919940 OR2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U812         SHUTDOWN U3_N15031002 U3_N15035983 OR2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U809         U3_CHARGE_75U U3_N15021246 rising_oneshot PARAMS: 
+  PULSE=100u VDD=1 VSS=0 VTHRESH=0.5
X_U3_U806         U3_N14920160 SHUTDOWN U3_N15008468 U3_RESET_CH_75U
+  OR3_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
D_U3_D2         0 TIMER DD 
C_U3_C1         0 U3_C_COUNT7  100n  TC=0,0 
V_U3_V14         U3_N14919944 0 3.9v
G_U3_ABMII12         U3_N15022993 U3_C_COUNT7 VALUE { V(U3_N15021246)*1m    }
R_R9         ADR2 0  1k TC=0,0 
E_U2_GAIN2         U2_N14830905 0 VALUE {1 * V(U2_N14830847)}
R_U2_R3         U2_N14830905 U2_N14830957  1k TC=0,0 
X_U2_U30         VIN VDD VDD_REG 
V_U2_V5         U2_N15095056 0 8.6
C_U2_C3         0 U2_N14830957  11n  TC=0,0 
G_U2_ABMII4         VDD FB VALUE { IF (V(U2_N14830847) > 0.5, 20u, 0)    }
X_U2_U24         OVLOCK UVLOCK U2_VIN_FAULTS OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U2_U10         U2_N14830957 U2_FB_OK BUF_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
G_U2_ABMII1         0 PWR VALUE { IF (V(SHUTDOWN) < 0.5, 20u, 0)    }
G_U2_ABMII7         VDD OVLO VALUE { IF (V(U2_OV_OK) < 0.5, 21u, 0)    }
E_U2_GAIN1         U2_N14832185 0 VALUE {1 * V(U2_UV_OK)}
V_U2_V2         U2_N14831963 0 7.8
R_U2_R2         U2_N14832185 U2_N14832233  1k TC=0,0 
X_U2_U2         VIN U2_N14831963 U2_N14831373 POR_B COMPHYS_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
G_U2_ABM2I1         UVLO_EN 0 VALUE { IF ((V(U2_UV_OK) < 0.5 & V(VIN)>0) , 20u,
+  0)    }
E_U2_ABM10         VREF 0 VALUE { MIN(V(VDD),2.97)    }
D_U2_D3         FB VDD DD 
C_U2_C2         0 U2_N14832233  13n  TC=0,0 
V_U2_V13         U2_N15147495 0 2.46
E_U2_GAIN3         U2_N14831591 0 VALUE {1 * V(U2_OV_OK)}
X_U2_S1    SHUTDOWN 0 PWR 0 UV_OV_POR_U2_S1 
X_U2_U9         FB U2_N14830831 U2_N14830847 COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
R_U2_R6         U2_N14831591 U2_N14831289  1k TC=0,0 
X_U2_U11         U2_FB_OK U2_UV_OK U2_OV_OK U2_N14834188 NAND3_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
V_U2_V8         U2_N14830831 0 2.46
C_U2_C5         0 U2_N14831289  19n  TC=0,0 
X_U2_U8         U2_N14832233 UVLOCK INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U2_U4         POR U2_VIN_FAULTS LATCHOFF SHUTDOWN OR3_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U2_S3    U2_N14834188 0 PGD 0 UV_OV_POR_U2_S3 
X_U2_U5         VIN U2_N15095056 U2_N15095008 POR_EN COMPHYS_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
X_U2_U7         UVLO_EN U2_N14832101 U2_UV_OK COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
X_U2_U23         U2_N14831289 OVLOCK INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
V_U2_V7         U2_N14832101 0 2.48
X_U2_U3         POR_B POR INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
V_U2_V3         U2_N14831373 0 120m
V_U2_V4         U2_N15095008 0 120m
D_U2_D4         PWR VDD DD 
X_U2_U22         U2_N15147495 OVLO U2_OV_OK COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
X_U2_U15         SHUTDOWN SHUTDOWN_B INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_R13         DIODE 0  1k TC=0,0 
R_R10         SDAO 0  1k TC=0,0 
R_R7         ADR0 0  1k TC=0,0 
R_R11         SCL 0  1k TC=0,0 

.MODEL DD D( IS=1F N=0.01 TT = 10p )

.ENDS LM5066_TRAN

*$
**************************************
.subckt GATE_CONTROL_U1_S3 1 2 3 4  
S_U1_S3         3 4 1 2 _U1_S3
RS_U1_S3         1 2 1G
.MODEL         _U1_S3 VSWITCH Roff=1e9 Ron=5 Voff=0.2 Von=0.8
.ends GATE_CONTROL_U1_S3
**
*$
**************************************
.subckt TIMER_LOGIC_U3_S3 1 2 3 4  
S_U3_S3         3 4 1 2 _U3_S3
RS_U3_S3         1 2 1G
.MODEL         _U3_S3 VSWITCH Roff=1e9 Ron=1 Voff=0.2 Von=0.8
.ends TIMER_LOGIC_U3_S3
**
*$
**************************************
.subckt TIMER_LOGIC_U3_S2 1 2 3 4  
S_U3_S2         3 4 1 2 _U3_S2
RS_U3_S2         1 2 1G
.MODEL         _U3_S2 VSWITCH Roff=1e9 Ron=140 Voff=0.2 Von=0.8
.ends TIMER_LOGIC_U3_S2
**
*$
**************************************
.subckt UV_OV_POR_U2_S1 1 2 3 4  
S_U2_S1         3 4 1 2 _U2_S1
RS_U2_S1         1 2 1G
.MODEL         _U2_S1 VSWITCH Roff=1e9 Ron=140 Voff=0.2 Von=0.8
.ends UV_OV_POR_U2_S1
**
*$
**************************************
.subckt UV_OV_POR_U2_S3 1 2 3 4  
S_U2_S3         3 4 1 2 _U2_S3
RS_U2_S3         1 2 1G
.MODEL         _U2_S3 VSWITCH Roff=80meg Ron=30 Voff=0.2 Von=0.8
.ends UV_OV_POR_U2_S3
**
*$
**************************************

.SUBCKT AND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND2_BASIC_GEN
*$
.SUBCKT AND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND3_BASIC_GEN
*$
.SUBCKT OR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR2_BASIC_GEN
*$
.SUBCKT OR3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR3_BASIC_GEN
*$
.SUBCKT NAND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND2_BASIC_GEN
*$
.SUBCKT NAND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND3_BASIC_GEN
*$
.SUBCKT INV_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS INV_BASIC_GEN
*$
.SUBCKT BUF_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS BUF_BASIC_GEN
*$
.SUBCKT INV_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS INV_DELAY_BASIC_GEN
*$
.SUBCKT BUF_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS BUF_DELAY_BASIC_GEN
*$
.SUBCKT COMP_BASIC_GEN INP INM Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
E_ABM Yint 0 VALUE {IF (V(INP) > 
+ V(INM), {VDD},{VSS})}
R1 Yint Y 1
C1 Y 0 1n
.ENDS COMP_BASIC_GEN
*$
.SUBCKT COMPHYS_BASIC_GEN INP INM HYS OUT PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
EIN INP1 INM1 INP INM 1 
EHYS INP1 INP2 VALUE { IF( V(1) > {VTHRESH},-V(HYS),0) }
EOUT OUT 0 VALUE { IF( V(INP2)>V(INM1), {VDD} ,{VSS}) }
R1 OUT 1 1
C1 1 0 5n
RINP1 INP1 0 1K
.ENDS COMPHYS_BASIC_GEN
*$
.SUBCKT RISING_DELAY IN OUT PARAMS: DELAY=100n VDD=1 VSS=0 VTHRESH=0.5
D_D1         INT IN DD 
R_R1         IN INT  {DELAY/(0.693 * 1E-9)}  
C_C1         0 INT  1n  
X_U1         INT OUT BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH=
+ {VTHRESH}
.MODEL DD D( IS=1F N=0.01 TT = 10p )
.ENDS RISING_DELAY
*$
.SUBCKT FALLING_DELAY IN OUT PARAMS: DELAY=100n VDD=1 VSS=0 VTHRESH=0.5
X_U1         INT OUT BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH=
+ {VTHRESH}
R_R1         IN INT  {DELAY/(0.693 * 1E-9)}  
C_C1         0 INT  1n  
D_D1         IN INT DD 
.MODEL DD D( IS=1F N=0.01 TT = 10p )
.ENDS FALLING_DELAY
*$
.SUBCKT RISING_ONESHOT IN OUT PARAMS: PULSE=100n VDD=1 VSS=0 VTHRESH=0.5
D_D1         INT IN DD 
C_C1         0 INT  1n  
X_U22         INT IN_B_DELAYED INV_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS}
+  VTHRESH={VTHRESH}
R_R1         IN INT  {PULSE/(0.693 * 1E-9)}  
X_U1         IN IN_B_DELAYED OUT AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS}
+  VTHRESH={VTHRESH}
.MODEL DD D( IS=1F N=0.01 TT = 10p )
.ENDS RISING_ONESHOT
*$
.SUBCKT FALLING_ONESHOT IN OUT PARAMS: PULSE=100n VDD=1 VSS=0 VTHRESH=0.5
R_R1         IN INT  {PULSE/(0.693 * 1E-9)}  
X_U1         IN_B INT OUT AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH=
+ {VTHRESH}
C_C1         0 INT  1n  
D_D1         IN INT DD 
X_U3         IN IN_B INV_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH=
+ {VTHRESH}
S_S1 OUT 0 IN 0 S1
.MODEL         S1 VSWITCH Roff=100e6 Ron=1e-3 Voff=0.45V Von=0.55V
.MODEL DD D( IS=1F N=0.01 TT = 10p )
.ENDS FALLING_ONESHOT
*$
.SUBCKT DFFSR_RHPBASIC_GEN Q QB CLK D R S PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}  
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,IF(V(S) > {VTHRESH},5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
*CQint Qint 0 1n
* Cap increased to 100n since simulation needs to be run for several seconds
CQint Qint 0 100n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
.MODEL D_D1 D( IS=1e-15 TT=10p Rs=0.05 N=.1  )
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSR_RHPBASIC_GEN
*$
.SUBCKT DFFSBRB_RHPBASIC_GEN Q QB CLK D RB SB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} 
GQ 0 Qint VALUE = {IF(V(RB) < {VTHRESH},-5,IF(V(SB)< {VTHRESH},5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
*CQint Qint 0 1n
* Cap increased to 100n since simulation needs to be run for several seconds
CQint Qint 0 100n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
.MODEL D_D1 D( IS=1e-15 TT=10p Rs=0.05 N=.1  )
V1 MY5 0 5
D_D11 0 Qint D_D1 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSBRB_RHPBASIC_GEN
*$
**Reset has higher priority in this latch
.SUBCKT SRLATCHRHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,IF(V(S)>{VTHRESH},5, 0))}
*CQint Qint 0 1n
* Cap increased to 100n since simulation needs to be run for several seconds
CQint Qint 0 100n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
.MODEL D_D1 D( IS=1e-15 TT=10p Rs=0.05 N=.1  )
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n
.IC V(Qint) {VSS}
.ENDS SRLATCHRHP_BASIC_GEN
*$
**Set has higher priority in this latch
.SUBCKT SRLATCHSHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(S) > {VTHRESH},5,IF(V(R)>{VTHRESH},-5, 0))}
*CQint Qint 0 1n
* Cap increased to 100n since simulation needs to be run for several seconds
CQint Qint 0 100n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
.MODEL D_D1 D( IS=1e-15 TT=10p Rs=0.05 N=.1  )
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n 
.IC V(Qint) {VSS}
.ENDS SRLATCHSHP_BASIC_GEN
*$
.MODEL DD D( IS=1F N=0.01 TT = 10p )
*$
.SUBCKT LDCR IN OUT
+ PARAMs:  L=1u DCR=0.01 IC=0
L	IN 1  {L} IC={IC}
RDCR	1 OUT {DCR}
.ENDS LDCR
*$
.SUBCKT CESR IN OUT
+ PARAMs:  C=100u ESR=0.01 X=2 IC=0
C	IN 1  {C*X} IC={IC}
RESR	1 OUT {ESR/X}
*LESL 2 OUT {0.6n/X}
.ENDS CESR
*$
.SUBCKT DD1 1 2
D1 1 2 DD1
.MODEL DD1 D( IS=1F N=0.01 TT = 10p )
.ENDS DD1
*$
.MODEL D_D1 D( IS=1e-15 TT=10p Rs=0.05 N=.1  )
*$
.SUBCKT DD_D1 1 2
D1 1 2 DD_D1
.MODEL DD_D1 D( IS=1e-15 TT=10p Rs=0.05 N=.1  )
.ENDS DD_D1
*$
* Model for SI4866DY from TPS40007 Application Circuit
.SUBCKT SI4866DY   10 20 30
*     TERMINALS:  D  G  S
M1   1  2  3  3  DMOS L=1U W=1U
RD  10  1  1.14m
RS  40  3  1.11m
RG  20  2  10.0
CGS  2  3  40p 
EGD 12  0  2  1  1
VFB 14  0  0
FFB  2  1  VFB  1
CGD 13 14  1p 
R1  13  0  1.00
D1  12 13  DLIM
DDG 15 14  DCGD
R2  12 15  1.00
D2  15  0  DLIM
DSD  3 10  DSUB
LS  30 40  1.50n
.MODEL DMOS NMOS(LEVEL=3 VMAX=10k THETA=80.0m
+ ETA=2.00m VTO=1 KP=86
.MODEL DCGD D (CJO=2.77n VJ=0.600 M=0.680
.MODEL DSUB D (IS=1.27u N=1.50 RS=4.67m BV=60.0
+ CJO=2.4n VJ=0.380 M=0.420 TT=40.0n
.MODEL DLIM D (IS=100U)
.ENDS
*$
.SUBCKT POWERMOS G D S PARAMS: RDSON=16m Ciss=1375p Crss=70p Coss=340p VSP=3.5 RG=1 
* This is a simple model for Power MOSFET.
* The parameters modeled are 
* - RDSon, 
* - Input Capacitance, 
* - Reverse capacitance, 
* - Output capacitance,
* - Switching point voltage (Gate voltage where the FET starts switching), 
* - Gate Resistance
C_C1         S Da  {Coss} IC=0 
R_R1         Da D  10
C_C2         Ga D  {Crss}  IC=0
R_R2         G Ga {RG}
C_C3         Ga S  {Ciss} IC=0
D_D1         S Db Dbreak 
R_R3         Db D 1m
S_switchM         D S Ga S _switchM
RS_switchM         Ga S 100Meg
.MODEL         _switchM VSWITCH Roff=100e6 Ron={RDSON} Voff=1.1 Von={VSP}
.model Dbreak D Is=1e-14 Cjo=.1pF Rs=.1
.ends POWERMOS
*$
******* VDD REGULATOR ******
.SUBCKT VDD_REG VIN VDD
EVDD1 VDD1 0 TABLE {V(VIN,0)} (0,0) (4.9,4.9) (5,4.9)
GVDD1 0 VDD2 TABLE {V(VDD1,VDD3)} (0,0) (0.3,30m)
CVDD1 VDD2 0 3P
RVDD1 VDD2 0 100MEG
VDUMMY1 VDD2 VDD3
RVDD2 VDD3 VDD 5
RGIG VDD 0 10K
.ENDS
*$
.SUBCKT D_SCH 1 2
D1 1 2 D_SCH
.MODEL D_SCH D  ( IS=1F RS=14.1m BV=80.0 IBV=500u
+ CJO=159p  M=0.333 N=0.01 TT=14.4n )
.ENDS D_SCH
*$
.SUBCKT D_IN 1 2
D1 1 2 D_IN
.MODEL D_IN D( IS=1e-15 TT=10p Rs=0.05 N=.1  BV=65)
.ENDS D_IN
*$
