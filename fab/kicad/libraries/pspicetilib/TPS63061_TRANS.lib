***
*$
*TPS63061
*****************************************************************************
* (C) Copyright 2011 Texas Instruments Incorporated. All rights reserved.                                            
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.                                             
** TI and its licensors and suppliers make no warranties, either expressed                                           
** or implied, with respect to this model, including the warranties of                                                    
** merchantability or fitness for a particular purpose. The model is                                                      
** provided solely on an "as is" basis. The entire risk as to its quality                                                    
** and performance is with the customer                                                                                          
*****************************************************************************
*
** Released by: Analog eLab(TM) Design Center, Texas Instruments Inc.
* Part: TPS63061
* Date: 08/02/2011
* Model Type: Transient 
* Simulator: PSpice 
* Simulator Version: 16.0.0.p001
* EVM Order Number: TPS63060EVM-619
* EVM Users Guide: SLVU442
* Datasheet: SLVSA92 
* Model Version: Final 1.00
*
*****************************************************************************
*
* Updates:
*
* Final 1.00
* Release to Web.
*
***************************************************************************
.SUBCKT TPS63061_TRANS L1 VIN VAUX EN PS_SYNC GND PGND PG FB VOUT L2
RMY1 FB FB_INT 1350k
RMY2 FB_INT 0 150k
RMY3 FB NODE1 10k
CMY1 NODE1 FB_INT 0.1p
R_R8         N6067255 ENLOGIC  1  
E_GAIN1         VIN_BUF 0 VALUE {1 * V(VIN)}
C_C7         0 ENLOGIC  1n  
R_R13         N166429631 N16739273  1  
C_U5_C4         0 U5_N16779121  1n  
C_U5_C12         0 U5_VOUT_ILIMIT  1n  
X_U5_S1    U5_N6144664 0 PG 0 HK_U5_S1 
R_U5_R12         U5_N6157414 U5_N6157424  1  
R_U5_R5         U5_N16862567 U5_PFM_HYSOUT  10  
V_U5_V8         U5_N16869356 0 0.621
E_U5_ABM4         V4 0 VALUE { V(VIN_BUF)*0.0125    }
C_U5_C20         0 U5_N16727053  1n  
R_U5_R11         U5_N16766644 U5_N6144664  2k  
C_U5_C6         0 U5_N6157424  1n  
V_U5_V7         U5_N6123425 0 0.1
E_U5_ABM10         U5_N167758431 0 VALUE { IF(V(U5_N6157424) < 0.25,0.6,
+  (V(U5_N6157424)*0.4)+0.5)    }
E_U5_ABM12         U5_N6126241 0 VALUE { V(ILIMIT) - 10m    }
E_U5_ABM3         V2 0 VALUE { V(V3)*0.8    }
E_U5_ABM2         V3 0 VALUE { (V(VOUT)+V(VIN_BUF))/4  
+     }
R_U5_R16         U5_N167758431 ILIMIT  1  
E_U5_ABM8         U5_N168539611 0 VALUE { (V(U5_PFM_HYSOUT)*-10m + 515m)    }
E_U5_ABM9         U5_N6157414 0 VALUE { IF(V(U5_VOUT_ILIMIT) <
+  V(U5_VIN_ILIMIT),   
+ V(U5_VOUT_ILIMIT),V(U5_VIN_ILIMIT))   }
X_U5_U43         U5_N6126241 VVA U5_N6123789 COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
X_U5_U57         PS_SYNCLOGIC U5_N16856319 U5_N16869516 PS_RST_N OR3_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U5_U29         VIN_BUF U5_N16779121 U5_OUT COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
R_U5_R4         U5_N168539611 U5_N16853592  1  
E_U5_ABM6         U5_N167758991 0 VALUE { LIMIT(V(VIN_BUF)*2 - 3.75,0.25,2.25) 
+    }
R_U5_R19         U5_N167758991 U5_VIN_ILIMIT  1  
X_U5_U48         U5_FAULT_BAR FAULT INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
C_U5_C8         0 U5_N16853592  1n  
C_U5_C13         0 U5_VIN_ILIMIT  1n  
X_U5_U55         U5_PFM_HYSOUT U5_N16856319 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U5_U58         PS_SYNCLOGIC U5_N16856319 PS_RST_PULL_N OR2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
R_U5_R26         ENLOGIC U5_N16727053  86.4k  
X_U5_U53         U5_N6123789 U5_N6123654 U5_FAULT_BAR U5_N16766644
+  NAND3_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U5_U47         U5_OUT U5_N16727053 U5_FAULT_BAR AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U5_U44         FB_INT U5_N6123425 U5_N6123654 COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
D_U5_D7         U5_N16727053 ENLOGIC D_D1 
D_U5_D8         U5_N6144664 U5_N16766644 D_D1 
E_U5_ABM7         U5_N167790941 0 VALUE { (V(U5_OUT)*-300m + 2.09)    }
E_U5_ABM5         U5_N6157610 0 VALUE { LIMIT(V(VOUT)*1.54 + 0.4,0.4,2.25)    }
C_U5_C10         0 ILIMIT  1n  
R_U5_R18         U5_N6157610 U5_VOUT_ILIMIT  1  
C_U5_C9         0 U5_PFM_HYSOUT  1n  
X_U5_U54         FB_INT U5_N16853592 U5_N16862567 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
R_U5_R3         U5_N167790941 U5_N16779121  1  
C_U5_C5         0 U5_N6144664  1n  
X_U5_U56         VVA U5_N16869356 U5_N16869516 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
V_U5_V1         VREF 0 0.5
R_R12         N16740850 VAUX  1  
G_ABMII1         FB_INT 0 VALUE { V(N16659649)*-1m    }
V_U2_V3         BOOSTRAMP U2_N16588429 30m
X_U2_U35         FAULT U2_N16692057 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
C_U2_C1         0 U2_N124395  1n IC=0 
E_U2_GAIN1         BUCKRAMP 0 VALUE {1 * V(U2_N124395)}
X_U2_U26         FAULT CLK U2_RAMPDIS OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U2_S5    U2_RAMPDIS 0 U2_N124395 0 OSCILLATOR_U2_S5 
V_U2_V10         U2_N16690633 0  
+PULSE 0 1 0 1n 1n 10n 416n
G_U2_G2         U2_SET5 U2_N126109 VOUT 0 0.6m
V_U2_V5         U2_SET5 0 5
E_U2_E2         U2_N16588429 U2_N128582 V3 0 1
X_U2_S6    U2_RAMPDIS 0 U2_N126109 0 OSCILLATOR_U2_S6 
D_U2_D5         U2_N126109 U2_SET5 D_D1 
G_U2_G1         U2_SET5 U2_N124395 VIN_BUF 0 0.6m
X_U2_U34         U2_N16690633 U2_N16692057 CLK AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
C_U2_C2         0 U2_N126109  1n IC=0 
E_U2_GAIN2         U2_N128582 0 VALUE {-1 * V(U2_N126109)}
D_U2_D4         U2_N124395 U2_SET5 D_D1 
E_ABM10         N16740850 0 VALUE { IF(V(FAULT) > 0.5,0,  
+ V(N16739273))   }
E_ABM11         N16659649 0 VALUE { MAX(V(VOUT) - 15,0)    }
C_C9         0 VAUX  1n  
R_R10         0 PGND  1m  
V_V1         N16731381 0 7
D_D15         FB_INT N16731381 D_D1 
R_R11         0 GND  1m  
E_ABM6         N16629194 0 VALUE { IF(V(PS_SYNC) > 1.19,1,0)    }
R_R9         N16629194 PS_SYNCLOGIC  1  
X_U3_U41         U3_N16710738 U3_FAULT_BAR PS_RST_N U3_N178130 AND3_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
C_U3_C7         0 U3_N148451  8p  
D_U3_D2         0 L1 D_D1 
X_U3_S2    U3_BUCKDRV_PRE 0 U3_N162880 L1 DRIVER_U3_S2 
X_U3_U24         U3_N162195 U3_N16705153 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U3_S5    U3_N178130 0 L2 0 DRIVER_U3_S5 
X_U3_U27         FAULT U3_FAULT_BAR INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U3_U37         U3_N16710240 U3_N16710232 U3_N16710738 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U32         U3_N16705153 U3_N16705010 BUF_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=20n
X_U3_U36         U3_N166627 U3_N16709141 BUF_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=20n
X_U3_U31         U3_N16705153 U3_N16705010 U3_N16705859 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U26         U3_FAULT_BAR BOOSTDRV U3_N166627 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
D_U3_D1         L1 U3_N162880 D_D1 
X_U3_U40         U3_BUCKDRV_PRE U3_N162195 U3_N167831 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
D_U3_D4         0 L2 D_D1 
X_U3_U34         U3_N162195 U3_N16706290 BUF_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=15n
X_U3_S4    U3_N176320 0 VOUT L2 DRIVER_U3_S4 
X_U3_U28         BUCKDRV U3_FAULT_BAR U3_N162195 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
E_U3_ABM1         U3_N167308371 0 VALUE { IF(V(FAULT) > 0.5,0,  
+ V(U3_N148451))   }
C_U3_C9         0 ISEN  1n  
X_U3_U35         U3_N166627 U3_N16709141 U3_N176320 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
D_U3_D3         L2 VOUT D_D1 
X_U3_S3    U3_N179660 0 L1 0 DRIVER_U3_S3 
X_U3_U33         U3_N162195 U3_N16706290 U3_N16718213 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U42         U3_N16705859 PS_RST_N U3_FAULT_BAR U3_N179660 AND3_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U39         U3_N16718213 U3_BUCKDRV_PRE BUF_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=5n
R_U3_R2         U3_N167308371 ISEN  1  
X_U3_H1    VIN U3_N162880 U3_ISEN_INT 0 DRIVER_U3_H1 
X_U3_U25         U3_N166627 U3_N16710240 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U3_U38         U3_N16710240 U3_N16710232 BUF_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=20n
X_U3_S1    U3_N167831 0 U3_ISEN_INT U3_N148451 DRIVER_U3_S1 
R_U4_R8         0 VCA  1e9  
V_U4_V1         U4_N137240 0 0.5
X_U4_U58         U4_N16572662 U4_N16572638 PS_RST_PULL_N U4_N16573227
+  MUX2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_U4_ABM1         U4_N165519481 0 VALUE { IF(V(PS_SYNCLOGIC) < 0.5 & V(VVA) <
+  0.621,0.62, V(VVA))    }
V_U4_V9         U4_N16572662 0 0.61
R_U4_R6         U4_N165519481 U4_VVA_PROG  1  
X_U4_U4         V4 VCA D_D
C_U4_CCV         U4_N134364 0  40p IC=0.51 
C_U4_C6         0 VVA  10f  
G_U4_ABM3I1         0 VVA VALUE { LIMIT(V(VOUT)*10e-6*(V(VREF)-V(FB_INT)),-2u,2u)  
+   }
V_U4_V3         U4_N16572638 0 500m
X_U4_U1         VVA ILIMIT D_D
G_U4_G8         0 U4_VVA_ACT ISEN 0 5
X_U4_U3         VCA V2 D_D
R_U4_R7         0 VVA  1e9  
X_U4_U2         U4_N16573227 VVA D_D
C_U4_CCI         0 U4_N138646  20p IC=0 
C_U4_C7         0 VCA  10f  
C_U4_C5         0 U4_VVA_PROG  1n  
G_U4_G5         0 VCA U4_VVA_PROG U4_VVA_ACT 10u
V_U4_V2         U4_VVA_PROG IAVG 0.5
R_U4_RZV         U4_N134364 VVA  250k  
R_U4_R2         U4_N137240 U4_VVA_ACT  0.080  
R_U4_RZI         U4_N138646 VCA  400k  
X_U1_U48         CLK U1_N16735382 U1_N16744945 N16744979 SRLATCHRHP_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
V_U1_V1         U1_N16733033 0 0.5
X_U1_U37         U1_BUCK_CLK U1_N16735382 BUCKDRV U1_BUCKDRV_N
+  SRLATCHRHP_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U1_S2    BOOSTDRV 0 U1_N16737594 0 PWM_U1_S2 
X_U1_U49         U1_N16744945 U1_BUCK_SET_MASK U1_BUCK_CLK AND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U1_U41         U1_N185413 BUCKDRV U1_N184433 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U1_U46         CLK U1_N175129 U1_N16739234 N16741552 SRLATCHRHP_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U1_U45         U1_N16737594 U1_N16737782 U1_BOOST_SET_MASK COMP_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U1_U39         U1_PS_RST FAULT U1_N171118 OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U1_U43         U1_N16548296 U1_N16733033 U1_BUCK_SET_MASK COMP_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U1_U38         U1_BOOST_CLK U1_N175129 BOOSTDRV U1_BOOSTDRV_N
+  SRLATCHRHP_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
V_U1_V3         U1_N16737782 0 0.5
D_U1_D1         U1_N16548296 U1_N16548465 D_D1 
X_U1_U42         U1_N185976 BOOSTDRV U1_N186143 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U1_S1    BUCKDRV 0 U1_N16548296 0 PWM_U1_S1 
G_U1_ABMII1         U1_N16548465 U1_N16548296 VALUE { V(U1_BUCKDRV_N)*14.28m   
+  }
G_U1_ABMII2         U1_N16737602 U1_N16737594 VALUE { V(U1_BOOSTDRV_N)*14.28m  
+   }
V_U1_V2         U1_N16548465 0 1
V_U1_V4         U1_N16737602 0 1
X_U1_U36         U1_N186143 U1_N171118 U1_N16735382 OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U1_U34         VCA BOOSTRAMP U1_N185413 COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
D_U1_D2         U1_N16737594 U1_N16737602 D_D1 
X_U1_U40         PS_RST_N U1_PS_RST INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U1_U47         U1_N16739234 U1_BOOST_SET_MASK U1_BOOST_CLK AND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
C_U1_C1         0 U1_N16548296  1n  
X_U1_U33         BUCKRAMP VCA U1_N185976 COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
C_U1_C2         0 U1_N16737594  1n  
X_U1_U35         U1_N184433 U1_N171118 U1_N175129 OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
C_C8         0 PS_SYNCLOGIC  1n  
E_ABM9         N166429631 0 VALUE { MIN(7,MAX(  
+ +V(VIN),V(VOUT)))   }
E_ABM5         N6067255 0 VALUE { IF(V(EN) > 1.19,1,0)    }
C_C10         0 N16739273  1n  
.ENDS TPS63061_TRANS
*$
.subckt HK_U5_S1 1 2 3 4  
S_U5_S1         3 4 1 2 _U5_S1
RS_U5_S1         1 2 1G
.MODEL         _U5_S1 VSWITCH Roff=55e6 Ron=4k Voff=0.2V Von=0.8V
.ends HK_U5_S1
*$
.subckt OSCILLATOR_U2_S5 1 2 3 4  
S_U2_S5         3 4 1 2 _U2_S5
RS_U2_S5         1 2 1G
.MODEL         _U2_S5 VSWITCH Roff=100e6 Ron=10m Voff=0.2V Von=0.8
.ends OSCILLATOR_U2_S5
*$
.subckt OSCILLATOR_U2_S6 1 2 3 4  
S_U2_S6         3 4 1 2 _U2_S6
RS_U2_S6         1 2 1G
.MODEL         _U2_S6 VSWITCH Roff=100e6 Ron=10m Voff=0.2V Von=0.8
.ends OSCILLATOR_U2_S6
*$
.subckt DRIVER_U3_S2 1 2 3 4  
S_U3_S2         3 4 1 2 _U3_S2
RS_U3_S2         1 2 1G
.MODEL         _U3_S2 VSWITCH Roff=1e6 Ron=80m Voff=0.2V Von=0.8
.ends DRIVER_U3_S2
*$
.subckt DRIVER_U3_S5 1 2 3 4  
S_U3_S5         3 4 1 2 _U3_S5
RS_U3_S5         1 2 1G
.MODEL         _U3_S5 VSWITCH Roff=1e6 Ron=80m Voff=0.2V Von=0.8
.ends DRIVER_U3_S5
*$
.subckt DRIVER_U3_S4 1 2 3 4  
S_U3_S4         3 4 1 2 _U3_S4
RS_U3_S4         1 2 1G
.MODEL         _U3_S4 VSWITCH Roff=1e6 Ron=80m Voff=0.2V Von=0.8
.ends DRIVER_U3_S4
*$
.subckt DRIVER_U3_S3 1 2 3 4  
S_U3_S3         3 4 1 2 _U3_S3
RS_U3_S3         1 2 1G
.MODEL         _U3_S3 VSWITCH Roff=1e6 Ron=80m Voff=0.2V Von=0.8
.ends DRIVER_U3_S3
*$
.subckt DRIVER_U3_H1 1 2 3 4  
H_U3_H1         3 4 VH_U3_H1 1
VH_U3_H1         1 2 0V
.ends DRIVER_U3_H1
*$
.subckt DRIVER_U3_S1 1 2 3 4  
S_U3_S1         3 4 1 2 _U3_S1
RS_U3_S1         1 2 1G
.MODEL         _U3_S1 VSWITCH Roff=100k Ron=50 Voff=0.25V Von=0.75V
.ends DRIVER_U3_S1
*$
.subckt PWM_U1_S2 1 2 3 4  
S_U1_S2         3 4 1 2 _U1_S2
RS_U1_S2         1 2 1G
.MODEL         _U1_S2 VSWITCH Roff=10e6 Ron=1.0 Voff=0.2 Von=0.8
.ends PWM_U1_S2
*$
.subckt PWM_U1_S1 1 2 3 4  
S_U1_S1         3 4 1 2 _U1_S1
RS_U1_S1         1 2 1G
.MODEL         _U1_S1 VSWITCH Roff=10e6 Ron=1.0 Voff=0.2 Von=0.8
.ends PWM_U1_S1
*$

.SUBCKT AND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND2_BASIC_GEN
*$
.SUBCKT AND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND3_BASIC_GEN
*$
.SUBCKT AND4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH} &
+ V(D) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND4_BASIC_GEN
*$
.SUBCKT NAND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND2_BASIC_GEN
*$
.SUBCKT NAND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND3_BASIC_GEN
*$
.SUBCKT NAND4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH} &
+ V(D) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND4_BASIC_GEN
*$
.SUBCKT OR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR2_BASIC_GEN
*$
.SUBCKT OR3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR3_BASIC_GEN
*$
.SUBCKT OR4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR4_BASIC_GEN
*$
.SUBCKT NOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR2_BASIC_GEN
*$
.SUBCKT NOR3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR3_BASIC_GEN
*$
.SUBCKT NOR4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR4_BASIC_GEN
*$
.SUBCKT NOR5_BASIC_GEN A B C D E Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH} |
+ V(E) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR5_BASIC_GEN
*$
.SUBCKT NOR6_BASIC_GEN A B C D E F Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH} |
+ V(E) > {VTHRESH} |
+ V(F) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR6_BASIC_GEN
*$
.SUBCKT INV_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS INV_BASIC_GEN
*$
.SUBCKT XOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(A) > {VTHRESH}  ^  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS XOR2_BASIC_GEN
*$
.SUBCKT XNOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(A) > {VTHRESH}  ^  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS XNOR2_BASIC_GEN
*$
.SUBCKT MUX2_BASIC_GEN A B S Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(S) > {VTHRESH},  
+ V(B),V(A))}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS MUX2_BASIC_GEN
*$
.SUBCKT INV_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS INV_DELAY_BASIC_GEN
*$
.SUBCKT BUF_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS BUF_DELAY_BASIC_GEN
*$
.SUBCKT BUF_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS BUF_BASIC_GEN
*$
**Set has higher priority in this latch
.SUBCKT SRLATCHSHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(S) > {VTHRESH},5,IF(V(R)>{VTHRESH},-5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n 
.IC V(Qint) {VSS}
.ENDS SRLATCHSHP_BASIC_GEN
*$
**Reset has higher priority in this latch
.SUBCKT SRLATCHRHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,IF(V(S)>{VTHRESH},5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n
.IC V(Qint) {VSS}
.ENDS SRLATCHRHP_BASIC_GEN
*$
**Reset has higher priority in this latch and active low set and reset - basically NAND based SR latch
.SUBCKT SBRBLATCHRHP_BASIC_GEN SB RB Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(RB) < {VTHRESH},-5,IF(V(SB) < {VTHRESH},5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
.IC V(Qint) {VSS}
.ENDS SBRBLATCHRHP_BASIC_GEN
*$
**Reset has higher priority in this latch and active low set and reset - basically NAND based SR latch
.SUBCKT SBRBLATCHSHP_BASIC_GEN SB RB Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(SB) < {VTHRESH},5,IF(V(RB) < {VTHRESH},-5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
.IC V(Qint) {VSS}
.ENDS SBRBLATCHSHP_BASIC_GEN
*$
.SUBCKT DFFSBRB_SHPBASIC_GEN Q QB CLK D RB SB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
GQ 0 Qint VALUE = {IF(V(SB) < {VTHRESH},5,IF(V(RB)<{VTHRESH},-5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSBRB_SHPBASIC_GEN
*$
.SUBCKT DFFSR_SHPBASIC_GEN Q QB CLK D R S PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} 
GQ 0 Qint VALUE = {IF(V(S) > {VTHRESH},5,IF(V(R) > {VTHRESH},-5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSR_SHPBASIC_GEN
*$
.SUBCKT DFFSBRB_RHPBASIC_GEN Q QB CLK D RB SB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} 
GQ 0 Qint VALUE = {IF(V(RB) < {VTHRESH},-5,IF(V(SB)< {VTHRESH},5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 5
D_D11 0 Qint D_D1 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSBRB_RHPBASIC_GEN
*$
.SUBCKT DFFSR_RHPBASIC_GEN Q QB CLK D R S PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}  
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,IF(V(S) > {VTHRESH},5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSR_RHPBASIC_GEN
*$
.SUBCKT COMP_BASIC_GEN INP INM Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
E_ABM Yint 0 VALUE {IF (V(INP) > 
+ V(INM), {VDD},{VSS})}
R1 Yint Y 1
C1 Y 0 1n
.ENDS COMP_BASIC_GEN
*$
.subckt d_d 1 2
d1 1 2 dd
.model dd d
+ is=1e-015
+ n=0.01
+ tt=1e-011
.ends d_d
*$
.MODEL D_D1 D( IS=1e-15 TT=10p Rs=0.05 N=.1  )
*$

