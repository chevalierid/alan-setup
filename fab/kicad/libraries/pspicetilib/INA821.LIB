*$
* INA821
*****************************************************************************
* (C) Copyright 2022 Texas Instruments Incorporated. All rights reserved.                                            
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.
** TI and its licensors and suppliers make no warranties, either expressed
** or implied, with respect to this model, including the warranties of 
** merchantability or fitness for a particular purpose.  The model is
** provided solely on an "as is" basis.  The entire risk as to its quality
** and performance is with the customer
*****************************************************************************
*
* This model is subject to change without notice. Texas Instruments
* Incorporated is not responsible for updating this model.
*
*****************************************************************************
*
** Released by: Online Design Tools, Texas Instruments Inc.
* Part: INA821
* Date: 07DEC2022
* Model Type: Generic (suitable for all analysis types)
* EVM Order Number: N/A
* EVM Users Guide:  N/A 
* Datasheet: SBOS893D - AUGUST 2018 - REVISED JUNE 2020
* Created with Green-Williams-Lis Op Amp Macro-model Architecture
*
* Model Version: Final 1.1
*
*****************************************************************************
*
* Updates:
*
* Final 1.1
* 1. Updated PSpice Symbol.
* 2. Fixed Non-Convergence issue by removing R_CMMR and GAIN_SENSE blocks.
* 3. Updated C3 Capacitor from 1F to 100N to fix Non-Convergence issue.
*
* Final 1.0
* Release to Web.
*
*****************************************************************************
* Model Usage Notes:
* 1. The following parameters are modeled: 
*    a. OPEN-LOOP GAIN AND PHASE VS. FREQUENCY  WITH RL, CL EFFECTS (Aol)
*    b. UNITY GAIN BANDWIDTH (GBW)
*    c. INPUT COMMON-MODE REJECTION RATIO VS. FREQUENCY (CMRR)
*    d. POWER SUPPLY REJECTION RATIO VS. FREQUENCY (PSRR)
*    e. DIFFERENTIAL INPUT IMPEDANCE (Zid)
*    f. COMMON-MODE INPUT IMPEDANCE (Zic)
*    g. OPEN-LOOP OUTPUT IMPEDANCE VS. FREQUENCY (Zo)
*    h. OUTPUT CURRENT THROUGH THE SUPPLY (Iout)
*    i. INPUT VOLTAGE NOISE DENSITY VS. FREQUENCY (en)
*    j. INPUT CURRENT NOISE DENSITY VS. FREQUENCY (in)
*    k. OUTPUT VOLTAGE SWING vs. OUTPUT CURRENT (Vo)
*    l. SHORT-CIRCUIT OUTPUT CURRENT (Isc)
*    m. QUIESCENT CURRENT (Iq)
*    n. SETTLING TIME VS. CAPACITIVE LOAD (ts)
*    o. SLEW RATE (SR)
*    p. SMALL SIGNAL OVERSHOOT VS. CAPACITIVE LOAD
*    q. LARGE SIGNAL RESPONSE
*    r. OVERLOAD RECOVERY TIME (tor)
*    s. INPUT BIAS CURRENT (Ib)
*    t. INPUT OFFSET CURRENT (Ios)
*    u. INPUT OFFSET VOLTAGE (Vos)
*    v. INPUT OFFSET VOLTAGE VS. TEMPERATURE (Vos Drift)
*    w. INPUT COMMON-MODE VOLTAGE RANGE (Vcm)
*    x. INPUT OFFSET VOLTAGE VS. INPUT COMMON-MODE VOLTAGE (Vos vs. Vcm)
*    y. INPUT/OUTPUT ESD CELLS (ESDin, ESDout)
*****************************************************************************
.SUBCKT INA821 IN+ IN- VCC VEE OUT REF RG+ RG-
*****************************************************************************
C_CMN 27 MID 7P 
C_CMP MID 34 7P 
C_DIFF 34 27 1P 
C3 41 0 100N 
C4 40 0 1F 
C5 42 0 1F 
C6 INP MID 1F 
C7 INN MID 1F 
C60 IN-_J1_24 NODE1 3.5P 
C61 IN-_J1 NODE2 3.5P 
C64 OUT_J1 IN-_J1_20 100F 
C65 REF IN+_J1_19 1F 
E3 MID 0 41 0 1
G1 VCC_B 0 VCC 0 -1
G2 VEE_B 0 VEE 0 -1
GM1 IN-_J1_24 RG- INN RG- 1.33M
GM2 IN-_J1 RG+ INP RG+ 1.33M
I_B 18 MID 150P
I_OS 28 MID 1F
I_Q VCC VEE 600U
ISINK1 RG- VEE_B 24U
ISINK2 RG+ VEE_B 24U
R1 NODE1 IN-_J1_20 10K 
R2 IN-_J1_20 OUT_J1 10K 
R3 NODE2 IN+_J1_19 10K 
R4 IN+_J1_19 REF 10000.2 
R5 41 0 R_NOISELESS 1G 
R6 VCC_B 40 R_NOISELESS 1M 
R7 42 VEE_B R_NOISELESS 1M 
R8 40 41 R_NOISELESS 1MEG 
R9 41 42 R_NOISELESS 1MEG 
R10 VCC_B 0 R_NOISELESS 1 
R11 VEE_B 0 R_NOISELESS 1 
R12 38 17 R_NOISELESS 1M 
R13 32 33 R_NOISELESS 1M 
R14 37 MID R_NOISELESS 1G 
R15 MID 36 R_NOISELESS 1G 
R16 IN+ 34 R_NOISELESS 10M 
R17 IN- 27 R_NOISELESS 10M 
R18 MID 34 R_NOISELESS 1T 
R19 27 MID R_NOISELESS 1T 
R20 MID 35 R_NOISELESS 1 
R21 INP 35 R_NOISELESS 1M 
R22 31 MID R_NOISELESS 1G 
R23 MID 30 R_NOISELESS 1G 
R24 MID 29 R_NOISELESS 1 
R25 INN 29 R_NOISELESS 1M 
R168 OUT_J1 OUT 10M 
RB1 VCC_B IN-_J1_24 41.67K 
RB2 VCC_B IN-_J1 41.67K 
RF1 NODE1 RG- 24.7K 
RF2 NODE2 RG+ 24.7K 
S4 34 VCC 34 VCC S_VSWITCH_1
S5 27 VCC 27 VCC S_VSWITCH_1
S6 VEE 34 VEE 34 S_VSWITCH_1
S7 VEE 27 VEE 27 S_VSWITCH_1
S8 OUT VCC OUT VCC S_VSWITCH_1
S9 VEE OUT VEE OUT S_VSWITCH_1
S10 VEE REF VEE REF S_VSWITCH_1
S11 REF VCC REF VCC S_VSWITCH_1
S12 RG- VCC RG- VCC S_VSWITCH_1
S13 VEE RG- VEE RG- S_VSWITCH_1
S14 RG+ VCC RG+ VCC S_VSWITCH_1
S15 VEE RG+ VEE RG+ S_VSWITCH_1
V_OSN 33 28 0
VB VCC_B IN+_J1_26 1
VCM_MAXN 31 VCC_B -2
VCM_MAXP 37 VCC_B -2
VCM_MINN 30 VEE_B 2
VCM_MINP 36 VEE_B 2
XA1 IN+_J1_26 IN-_J1_24 VCC VEE NODE1 MID IN_AMP_1_INA821
XA2 IN+_J1_26 IN-_J1 VCC VEE NODE2 MID IN_AMP_0_INA821
XA3 IN+_J1_19 IN-_J1_20 VCC VCC_B VEE VEE_B OUT_J1 MID OUT_AMP_INA821
XE_NN 27 28 VNSE_IN_0_INA821
XE_NP 34 18 VNSE_IN_1_INA821
XI_NN 28 MID FEMT_INA821
XI_NP MID 18 FEMT_INA821
XU5 17 18 VOS_DRIFT_IN_INA821
XVCM_CLAMPN 32 MID 29 MID 31 30 VCCS_EXT_LIM_INA821
XVCM_CLAMPP 38 MID 35 MID 37 36 VCCS_EXT_LIM_INA821
.MODEL R_NOISELESS RES (TCE=0 T_ABS=-273.15)
.MODEL S_VSWITCH_1 VSWITCH (RON=50 ROFF=1T VON=500M VOFF=100M)
.ENDS INA821
*
.SUBCKT CLAMP_AMP_HI_INA821 VC+ VC- VIN COM VO+ VO-
.PARAM G=10
GVO- COM VO- VALUE = {IF(V(VIN,COM)<V(VC-,COM),((V(VC-,COM)-V(VIN,COM))*G),0)}
GVO+ COM VO+ VALUE = {IF(V(VIN,COM)>V(VC+,COM),((V(VIN,COM)-V(VC+,COM))*G),0)}
.ENDS CLAMP_AMP_HI_INA821
*
.SUBCKT CLAMP_AMP_LO_INA821 VC+ VC- VIN COM VO+ VO-
.PARAM G=1
GVO- COM VO- VALUE = {IF(V(VIN,COM)<V(VC-,COM),((V(VC-,COM)-V(VIN,COM))*G),0)}
GVO+ COM VO+ VALUE = {IF(V(VIN,COM)>V(VC+,COM),((V(VIN,COM)-V(VC+,COM))*G),0)}
.ENDS CLAMP_AMP_LO_INA821
*
.SUBCKT FEMT_INA821 1 2
.PARAM FLWF=0.11
.PARAM GLFF={PWR(FLWF,0.25)*NLFF/1164}
.PARAM NLFF=370
.PARAM NVRF=100
.PARAM RNVF={1.184*PWR(NVRF,2)}
.MODEL DVNF D (KF={PWR(FLWF,0.5)/1E11} IS=1.0E-16)
D1 7 0 DVNF 
D2 8 0 DVNF 
E1 3 6 7 8 {GLFF}
E2 6 4 5 0 10
G1 1 2 3 4 1E-6
I1 0 7 10E-3
I2 0 8 10E-3
R1 3 0 1E9 
R2 3 0 1E9 
R3 3 6 1E9 
R4 5 0 {RNVF} 
R5 5 0 {RNVF} 
R6 3 4 1E9 
R7 4 0 1E9 
.ENDS FEMT_INA821
*
.SUBCKT IN_AMP_0_INA821 IN+ IN- VCC VEE OUT MID
.MODEL R_NOISELESS RES (TCE=0 T_ABS=-273.15)
C17 VIMON2 MID 1N 
C18 149 MID 1.46U 
C21 MID 150 35.4F 
C22 MID 143 15.9F 
C23 MID 144 15.9F 
C55 146 147 15.92N 
C56 155 MID 3.316F 
C57 137 140 1.477E-16 
C58 152 MID 2.122E-16 
C59 141 MID 2.122E-16 
G9 146 MID 144 145 -88.496
G10 150 MID 149 MID -1U
G11 143 MID 150 MID -1U
G12 144 MID 143 MID -1U
G32 156 MID 147 MID -18
G33 138 MID 137 MID -9.09091K
GB4 153 MID 154 MID -1
GC5 142 MID 151 MID -1
GC6 140 MID 139 MID -1
H2 157 MID V2 1K
R1 142 MID R_NOISELESS 1 
R43 MID 157 R_NOISELESS 1G 
R46 157 VIMON2 R_NOISELESS 100 
R48 MID 148 R_NOISELESS 1MEG 
R49 MID 149 R_NOISELESS 1MEG 
R56 147 146 R_NOISELESS 100MEG 
R57 MID 150 R_NOISELESS 1MEG 
R58 MID 143 R_NOISELESS 1MEG 
R59 MID 144 R_NOISELESS 1MEG 
R153 147 MID R_NOISELESS 5.882MEG 
R154 156 MID R_NOISELESS 1 
R155 154 156 R_NOISELESS 627.3MEG 
R156 155 154 R_NOISELESS 100MEG 
R157 137 140 R_NOISELESS 100MEG 
R158 137 MID R_NOISELESS 11.0012K 
R159 138 MID R_NOISELESS 1 
R160 153 MID R_NOISELESS 1 
R161 151 153 R_NOISELESS 271.3MEG 
R162 152 151 R_NOISELESS 100MEG 
R164 139 142 R_NOISELESS 271.3MEG 
R165 141 139 R_NOISELESS 100MEG 
R166 140 MID R_NOISELESS 1 
RDC2 146 MID R_NOISELESS 1 
RDUMMY2 MID 145 R_NOISELESS 10K 
RX2 145 138 R_NOISELESS 100K 
V2 145 OUT 0
XIQN1 MID VIMON2 VEE MID VCCS_LIMIT_IQ_INA821
XIQP1 VIMON2 MID MID VCC VCCS_LIMIT_IQ_INA821
XVCCS_LIM_3 IN+ IN- MID 148 VCCS_LIM_1_INA821
XVCCS_LIM_4 148 MID MID 149 VCCS_LIM_2_IN_INA821
.ENDS IN_AMP_0_INA821
*
.SUBCKT IN_AMP_1_INA821 IN+ IN- VCC VEE OUT MID
.MODEL R_NOISELESS RES (TCE=0 T_ABS=-273.15)
C1 MID 190 15.9F 
C1_2 192 193 15.92N 
C2 201 MID 3.316F 
C9 VIMON1 MID 1N 
C10 195 MID 1.45U 
C13 MID 196 35.4F 
C14 MID 189 15.9F 
C41 183 186 1.477E-16 
C53 198 MID 2.122E-16 
C54 187 MID 2.122E-0016 
G4 192 MID 190 191 -88.496
G5 196 MID 195 MID -1U
G6 189 MID 196 MID -1U
G7 190 MID 189 MID -1U
G30 202 MID 193 MID -18
G31 184 MID 183 MID -9.09091K
GB3 199 MID 200 MID -1
GC3 188 MID 197 MID -1
GC4 186 MID 185 MID -1
H1 203 MID V1 1K
R1 188 MID R_NOISELESS 1 
R26 MID 203 R_NOISELESS 1G 
R29 203 VIMON1 R_NOISELESS 100 
R31 MID 194 R_NOISELESS 1MEG 
R32 MID 195 R_NOISELESS 1MEG 
R39 193 192 R_NOISELESS 100MEG 
R40 MID 196 R_NOISELESS 1MEG 
R41 MID 189 R_NOISELESS 1MEG 
R42 MID 190 R_NOISELESS 1MEG 
R86 199 MID R_NOISELESS 1 
R139 193 MID R_NOISELESS 5.882MEG 
R140 202 MID R_NOISELESS 1 
R141 200 202 R_NOISELESS 627.3MEG 
R142 201 200 R_NOISELESS 100MEG 
R143 183 186 R_NOISELESS 100MEG 
R144 183 MID R_NOISELESS 11.0012K 
R145 184 MID R_NOISELESS 1 
R147 197 199 R_NOISELESS 271.3MEG 
R148 198 197 R_NOISELESS 100MEG 
R150 185 188 R_NOISELESS 271.3MEG 
R151 187 185 R_NOISELESS 100MEG 
R152 186 MID R_NOISELESS 1 
RDC1 192 MID R_NOISELESS 1 
RDUMMY1 MID 191 R_NOISELESS 10K 
RX1 191 184 R_NOISELESS 100K 
V1 191 OUT 0
XIQN1 MID VIMON1 VEE MID VCCS_LIMIT_IQ_INA821
XIQP1 VIMON1 MID MID VCC VCCS_LIMIT_IQ_INA821
XVCCS_LIM_1 IN+ IN- MID 194 VCCS_LIM_1_INA821
XVCCS_LIM_2 194 MID MID 195 VCCS_LIM_2_IN_INA821
.ENDS IN_AMP_1_INA821
*
.SUBCKT OL_SENSE_OUT_INA821 COM SW+ OLN OLP
GSW+ COM SW+ VALUE = {IF((V(OLN,COM)>10E-3|V(OLP,COM)>10E-3),1,0)}
.ENDS OL_SENSE_OUT_INA821
*
.SUBCKT OUT_AMP_INA821 IN+ IN- VCC VCC_B VEE VEE_B OUT MID
.MODEL R_NOISELESS RES (TCE=0 T_ABS=-273.15)
.MODEL S_VSWITCH_1 VSWITCH (RON=1M ROFF=1G VON=900M VOFF=800M)
.MODEL S_VSWITCH_2 VSWITCH (RON=10M ROFF=1G VON=10M VOFF=0)
C_CMN3 75 MID 1P 
C_CMP3 MID 122 1P 
C_DIFF3 122 75 1P 
C24 80 MID 1F 
C25 MID 98 1F 
C26 97 MID 1F 
C27 VOUT_S3 MID 1N 
C28 MID 104 1F 
C29 103 MID 1F 
C30 MID 94 1F 
C31 93 MID 1F 
C32 SW_OL3 MID 1P 
C33 VIMON3 MID 1N 
C34 107 MID 1F 
C35 MID 108 1F 
C36 111 MID 1F 
C37 VCLP3 MID 1N 
C38 CLAMP3 MID 300N 
C39 83 MID 1P 
C40 84 MID 1P 
C42 57 58 4.75N 
C43 65 MID 6.77F 
C44 62 63 1.87200000000000E-0016 
C45 68 MID 7.96000000000000E-0017 
C46 71 MID 7.96E-17 
C47 117 MID 3.537E-16 
C48 MID 56 4.97F 
C49 MID 55 1.59F 
C50 121 125 15N 
C51 119 120 15N 
C52 123 124 1.326N 
E6 81 MID CL_CLAMP3 MID 1
E7 127 MID OUT MID 1
G13 76 73 118 123 -1M
G14 VCC_CLP3 MID 98 MID -1M
G15 VEE_CLP3 MID 97 MID -1M
G16 CLAW_CLAMP3 MID 55 MID -1M
G17 CL_CLAMP3 MID CLAW_CLAMP3 MID -1M
G18 VSENSE3 MID CLAMP3 MID -1M
G19 91 MID 92 MID -1
G20 88 MID 89 MID -1
G21 57 MID CL_CLAMP3 59 -88.496
G22 61 MID 58 MID -6.866
G23 116 MID VSENSE3 MID -1
G24 56 MID 72 MID -1U
G25 55 MID 56 MID -1U
G26 120 MID 121 MID -1
G27 118 MID 119 MID -326.667
G28 125 MID VCC_B MID -163.35U
G29 124 MID VEE_B MID -50M
GB1 66 MID 64 MID -1
GB2 72 MID 115 MID -1
GC1 69 MID 67 MID -1
GC2 63 MID 70 MID -1
H3 126 MID V3 1K
H4 86 MID V4 -1
H5 85 MID V5 1
R60 73 53 R_NOISELESS 1M 
R61 74 75 R_NOISELESS 1M 
R62 78 MID R_NOISELESS 1G 
R63 MID 79 R_NOISELESS 1G 
R64 MID 77 R_NOISELESS 1 
R65 80 77 R_NOISELESS 1M 
R66 MID 126 R_NOISELESS 1G 
R67 MID 127 R_NOISELESS 1G 
R68 100 VCC_B R_NOISELESS 1K 
R69 VEE_B 99 R_NOISELESS 1K 
R70 MID VEE_CLP3 R_NOISELESS 1K 
R71 VCC_CLP3 MID R_NOISELESS 1K 
R72 100 98 R_NOISELESS 1M 
R73 97 99 R_NOISELESS 1M 
R74 127 VOUT_S3 R_NOISELESS 100 
R75 MID 101 R_NOISELESS 1G 
R76 MID 105 R_NOISELESS 1 
R77 106 MID R_NOISELESS 1 
R78 102 MID R_NOISELESS 1G 
R79 VEE_CLP3 MID R_NOISELESS 1G 
R80 MID 95 R_NOISELESS 1 
R81 96 MID R_NOISELESS 1 
R82 VCC_CLP3 MID R_NOISELESS 1G 
R83 96 93 R_NOISELESS 1M 
R84 95 94 R_NOISELESS 1M 
R85 106 103 R_NOISELESS 1M 
R86 105 104 R_NOISELESS 1M 
R87 82 MID R_NOISELESS 1 
R88 82 SW_OL3 R_NOISELESS 100 
R89 126 VIMON3 R_NOISELESS 100 
R90 IN+ 122 R_NOISELESS 10M 
R91 IN- 75 R_NOISELESS 10M 
R92 MID 109 R_NOISELESS 1 
R93 112 MID R_NOISELESS 1G 
R94 110 MID R_NOISELESS 1 
R95 113 MID R_NOISELESS 1G 
R96 110 107 R_NOISELESS 1M 
R97 109 108 R_NOISELESS 1M 
R98 VSENSE3 111 R_NOISELESS 1M 
R99 MID VSENSE3 R_NOISELESS 1K 
R100 MID CLAW_CLAMP3 R_NOISELESS 1K 
R101 MID CL_CLAMP3 R_NOISELESS 1K 
R102 81 VCLP3 R_NOISELESS 100 
R103 MID 122 R_NOISELESS 1T 
R104 75 MID R_NOISELESS 1T 
R105 73 76 R_NOISELESS 1K 
R106 MID 114 R_NOISELESS 1MEG 
R107 MID CLAMP3 R_NOISELESS 1MEG 
R108 91 MID R_NOISELESS 1 
R109 MID 88 R_NOISELESS 1 
R110 86 83 R_NOISELESS 100 
R111 85 84 R_NOISELESS 100 
R112 58 57 R_NOISELESS 100MEG 
R113 58 MID R_NOISELESS 17.05MEG 
R114 61 MID R_NOISELESS 1 
R115 64 61 R_NOISELESS 147MEG 
R116 65 64 R_NOISELESS 100MEG 
R117 62 63 R_NOISELESS 100MEG 
R118 62 MID R_NOISELESS 8.50072K 
R119 60 MID R_NOISELESS 1 
R120 66 MID R_NOISELESS 1 
R121 67 66 R_NOISELESS 300MEG 
R122 68 67 R_NOISELESS 100MEG 
R123 69 MID R_NOISELESS 1 
R124 70 69 R_NOISELESS 300MEG 
R125 71 70 R_NOISELESS 100MEG 
R126 63 MID R_NOISELESS 1 
R127 116 115 R_NOISELESS 73.1MEG 
R128 115 117 R_NOISELESS 100MEG 
R129 MID 116 R_NOISELESS 1 
R130 MID 72 R_NOISELESS 1 
R131 MID 56 R_NOISELESS 1MEG 
R132 MID 55 R_NOISELESS 1MEG 
R133 MID 121 R_NOISELESS 30.71 
R134 125 121 R_NOISELESS 10K 
R135 120 119 R_NOISELESS 10K 
R136 MID 119 R_NOISELESS 30.71 
R137 MID 123 R_NOISELESS 1.00001K 
R138 124 123 R_NOISELESS 100MEG 
RDC3 57 MID R_NOISELESS 1 
RDUMMY3 MID 59 R_NOISELESS 10K 
RSRC1 MID 125 R_NOISELESS 1 
RSRC2 MID 120 R_NOISELESS 1 
RSRC3 MID 118 R_NOISELESS 1 
RSRC4 MID 124 R_NOISELESS 1 
RX3 59 60 R_NOISELESS 100K 
S1 57 58 SW_OL3 MID S_VSWITCH_1
S2 CLAMP3 87 CLAMP3 87 S_VSWITCH_2
S3 90 CLAMP3 90 CLAMP3 S_VSWITCH_2
V_GRN3 112 MID -144
V_GRP3 113 MID 144
V_ISCN3 101 MID -18
V_ISCP3 102 MID 18
V_ORN3 92 VCLP3 -650M
V_ORP3 89 VCLP3 450M
V3 59 OUT 0
V4 90 91 0
V5 87 88 0
VCM_MAX1 78 VCC_B -2
VCM_MIN1 79 VEE_B 2
XCL_AMP3 102 101 VIMON3 MID 106 105 CLAMP_AMP_LO_INA821
XCL_SRC3 103 104 CL_CLAMP3 MID VCCS_LIM_4_OUT_INA821
XCLAW_AMP3 VCC_CLP3 VEE_CLP3 VOUT_S3 MID 96 95 CLAMP_AMP_LO_INA821
XCLAW_SRC3 93 94 CLAW_CLAMP3 MID VCCS_LIM_3_OUT_INA821
XCLAWN3 MID VIMON3 VEE_B 99 VCCS_LIM_CLAWN_OUT_INA821
XCLAWP3 VIMON3 MID 100 VCC_B VCCS_LIM_CLAWP_OUT_INA821
XE_N3 122 54 VNSE_OUT_INA821
XGR_AMP3 113 112 111 MID 110 109 CLAMP_AMP_HI_INA821
XGR_SRC3 107 108 CLAMP3 MID VCCS_LIM_GR_OUT_INA821
XIQN MID VIMON3 VEE MID VCCS_LIMIT_IQ_INA821
XIQP VIMON3 MID MID VCC VCCS_LIMIT_IQ_INA821
XOL_SENSE3 MID 82 83 84 OL_SENSE_OUT_INA821
XU5 53 54 VOS_DRIFT_OUT_INA821
XVCCS_LIM_5 80 74 MID 114 VCCS_LIM_1_INA821
XVCCS_LIM_6 114 MID MID CLAMP3 VCCS_LIM_2_OUT_INA821
XVCCS_LIM_ZO3 62 MID MID 60 VCCS_LIM_ZO_OUT_INA821
XVCM_CLAMP3 76 MID 77 MID 78 79 VCCS_EXT_LIM_INA821
.ENDS OUT_AMP_INA821
*
.SUBCKT VCCS_EXT_LIM_INA821 VIN+ VIN- IOUT- IOUT+ VP+ VP-
.PARAM GAIN=1
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VIN+,VIN-),V(VP-,VIN-),V(VP+,VIN-))}
.ENDS VCCS_EXT_LIM_INA821
.SUBCKT VCCS_LIM_1_INA821 VC+ VC- IOUT+ IOUT-
.PARAM GAIN=1E-4
.PARAM INEG=-.5
.PARAM IPOS=.5
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}
.ENDS VCCS_LIM_1_INA821
*
.SUBCKT VCCS_LIM_2_IN_INA821 VC+ VC- IOUT+ IOUT-
.PARAM GAIN=0.1234
.PARAM INEG=-10
.PARAM IPOS=10
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}
.ENDS VCCS_LIM_2_IN_INA821
*
.SUBCKT VCCS_LIM_2_OUT_INA821 VC+ VC- IOUT+ IOUT-
.PARAM GAIN=0.1234
.PARAM INEG=-0.63
.PARAM IPOS=0.63
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}
.ENDS VCCS_LIM_2_OUT_INA821
*
.SUBCKT VCCS_LIM_3_OUT_INA821 VC+ VC- IOUT+ IOUT-
.PARAM GAIN=1
.PARAM INEG=-0.287
.PARAM IPOS=0.287
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}
.ENDS VCCS_LIM_3_OUT_INA821
*
.SUBCKT VCCS_LIM_4_OUT_INA821 VC+ VC- IOUT+ IOUT-
.PARAM GAIN=1
.PARAM INEG=-0.575
.PARAM IPOS=0.575
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}
.ENDS VCCS_LIM_4_OUT_INA821
*
.SUBCKT VCCS_LIM_CLAWN_OUT_INA821 VC+ VC- IOUT+ IOUT-
G1 IOUT+ IOUT- TABLE {(V(VC+,VC-))} =(0, 4E-5)(2, 8.16E-5)(4, 1.21E-4)(8, 1.92E-4)(10, 2.35E-4)(12, 2.76E-4)(13,
+ 3.1E-4)(13.5, 3.39E-4)(13.9, 3.7E-4)(18, 7E-4)
.ENDS VCCS_LIM_CLAWN_OUT_INA821
*
.SUBCKT VCCS_LIM_CLAWP_OUT_INA821 VC+ VC- IOUT+ IOUT-
G1 IOUT+ IOUT- TABLE {(V(VC+,VC-))} =(0, 3E-5)(8, 2.36E-4)(10, 2.82E-4)(12, 3.34E-4)(13, 3.66E-4)(13.9, 4.02E-4)(18,
+ 6E-4)
.ENDS VCCS_LIM_CLAWP_OUT_INA821
*
.SUBCKT VCCS_LIM_GR_OUT_INA821 VC+ VC- IOUT+ IOUT-
.PARAM GAIN=1
.PARAM INEG=-1.26
.PARAM IPOS=1.26
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}
.ENDS VCCS_LIM_GR_OUT_INA821
*
.SUBCKT VCCS_LIM_ZO_OUT_INA821 VC+ VC- IOUT+ IOUT-
.PARAM GAIN=11764.7
.PARAM INEG=-3.6E3
.PARAM IPOS=3.6E3
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}
.ENDS VCCS_LIM_ZO_OUT_INA821
*
.SUBCKT VCCS_LIMIT_IQ_INA821 VC+ VC- IOUT+ IOUT-
.PARAM GAIN=1E-3
G1 IOUT- IOUT+ VALUE={IF((V(VC+,VC-)<=0),0,GAIN*V(VC+,VC-))}
.ENDS VCCS_LIMIT_IQ_INA821
*
.SUBCKT VNSE_IN_0_INA821 1 2
.PARAM FLW=1
.PARAM GLF={PWR(FLW,0.25)*NLF/1164}
.PARAM NLF=1
.PARAM NVR=4.3
.PARAM RNV={1.184*PWR(NVR,2)}
.MODEL DVN D (KF={PWR(FLW,0.5)/1E11} IS=1.0E-16)
D1 7 0 DVN 
D2 8 0 DVN 
E1 3 6 7 8 {GLF}
E2 6 4 5 0 10
E3 1 2 3 4 1
I1 0 7 10E-3
I2 0 8 10E-3
R1 3 0 1E9 
R2 3 0 1E9 
R3 3 6 1E9 
R4 5 0 {RNV} 
R5 5 0 {RNV} 
R6 3 4 1E9 
R7 4 0 1E9 
.ENDS VNSE_IN_0_INA821
*
.SUBCKT VNSE_IN_1_INA821 1 2
.PARAM FLW=1
.PARAM GLF={PWR(FLW,0.25)*NLF/1164}
.PARAM NLF=4.3
.PARAM NVR=4.3
.PARAM RNV={1.184*PWR(NVR,2)}
.MODEL DVN D (KF={PWR(FLW,0.5)/1E11} IS=1.0E-16)
D1 7 0 DVN 
D2 8 0 DVN 
E1 3 6 7 8 {GLF}
E2 6 4 5 0 10
E3 1 2 3 4 1
I1 0 7 10E-3
I2 0 8 10E-3
R1 3 0 1E9 
R2 3 0 1E9 
R3 3 6 1E9 
R4 5 0 {RNV} 
R5 5 0 {RNV} 
R6 3 4 1E9 
R7 4 0 1E9 
.ENDS VNSE_IN_1_INA821
*
.SUBCKT VNSE_OUT_INA821 1 2
.PARAM FLW=0.11
.PARAM GLF={PWR(FLW,0.25)*NLF/1164}
.PARAM NLF=254
.PARAM NVR=27
.PARAM RNV={1.184*PWR(NVR,2)}
.MODEL DVN D (KF={PWR(FLW,0.5)/1E11} IS=1.0E-16)
D1 7 0 DVN 
D2 8 0 DVN 
E1 3 6 7 8 {GLF}
E2 6 4 5 0 10
E3 1 2 3 4 1
I1 0 7 10E-3
I2 0 8 10E-3
R1 3 0 1E9 
R2 3 0 1E9 
R3 3 6 1E9 
R4 5 0 {RNV} 
R5 5 0 {RNV} 
R6 3 4 1E9 
R7 4 0 1E9 
.ENDS VNSE_OUT_INA821
*
.SUBCKT VOS_DRIFT_IN_INA821 VOS+ VOS-
.PARAM DC=10E-06
.PARAM DRIFT=0.4E-6
.PARAM POL=1
E1 VOS+ VOS- VALUE={DC+POL*DRIFT*(TEMP-27)}
.ENDS VOS_DRIFT_IN_INA821
*
.SUBCKT VOS_DRIFT_OUT_INA821 VOS+ VOS-
.PARAM DC=10.09E-06
.PARAM DRIFT=2.5E-6
.PARAM POL=1
E1 VOS+ VOS- VALUE={DC+POL*DRIFT*(TEMP-27)}
.ENDS VOS_DRIFT_OUT_INA821
*
