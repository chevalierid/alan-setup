*$
* TPS254900A-Q1
*****************************************************************************
* (C) Copyright 2015 Texas Instruments Incorporated. All rights reserved.                                            
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.
** TI and its licensors and suppliers make no warranties, either expressed
** or implied, with respect to this model, including the warranties of 
** merchantability or fitness for a particular purpose.  The model is
** provided solely on an "as is" basis.  The entire risk as to its quality
** and performance is with the customer
*****************************************************************************
*
* This model is subject to change without notice. Texas Instruments
* Incorporated is not responsible for updating this model.
*
*****************************************************************************
*
** Released by: WEBENCH Design Center, Texas Instruments Inc.
* Part: TPS254900A-Q1
* Date: 10OCT2017
* Model Type: TRANSIENT
* Simulator: PSPICE
* Simulator Version: 16.2.0.s003
* EVM Order Number: 
* EVM Users Guide: 
* Datasheet: SLUSCU5 –SEPTEMBER 2016
*
* Model Version: Final 1.00
*
*****************************************************************************
*
* Updates:
*
* Final 1.00
* Release to Web.
*
*****************************************************************************
*
* Model Usage Notes:
*
* 1. The following features have been modeled
*      a. Power switch
*      b. timing characteristics
*      c. Cable compensation
*      d. OVP on DP and DM bus
*      e. Current limit and Hard short response
* 2. Temperature effects are note been modeled. 
* 3. Modes of operation(DCP,CDP,SDP) are not modelled.
*
*****************************************************************************
*$
.SUBCKT TPS254900A_TRANS CS CTL1 CTL2 DM_IN DM_OUT DP_IN DP_OUT EN FAULT_B GND
+  ILIM_HI ILIM_LO IMON IN IN_1 OUT OUT_1 OVP_SEL STATUS_B PAD BIAS  
R_RIN IN IN_1 1m
R_OUT OUT OUT_1 1m
X_S9    N18133814 GND OUT GND TPS254900A_TRANS_S9 
X_U31         N16902812 GND ISENSE ILIM VCVSCLIP_PS PARAMS: gain=1 vomax=20
+  vomin=0
X_S17    N18126137 GND STATUS_B GND TPS254900A_TRANS_S17 
V_V23         N18126227 GND 1
C_C3         OUT GND  1p IC=0 TC=0,0 
C_C2         GATE GND  30.6p IC=0 TC=0,0 
C_C6         8_2MS GND  1u IC=0 TC=0,0 
X_U45         POWEROK OVP_AT_OUT N18133814 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
D_D_D7         N18126091 N18126227 D_D1 
R_R14         CTL1 GND  1e9 TC=0,0 
R_R9         IN N16910925  1e9 TC=0,0 
V_V12         N18123783 GND 100mVdc
V_V4         N16680578 N16696863 0.4Vdc
R_R19         N18118986 N18118980  3 TC=0,0 
R_R11         ILIM_DET 8_2MS  12.3k TC=0,0 
E_ABM8         N18123829 0 VALUE { IF(V(OVP_REF)>6.5,130m,90m)    }
X_U26         N18123773 N18123788 N18123783 N18123722 COMPHYS_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
X_U287         SIG SIG_B INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
G_ABMII5         GND N18126037 VALUE { IF(V(SIG_B) >0.5,0.167u,0)    }
X_U8         8_2MS BUF_OUT BUF_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U28         GATE GND N18265900 GND VCCS_CLIP_PS PARAMS: GM=1m IOMAX=95n
+  IOMIN=0
X_U34         N18123803 N18123818 N18123813 N18123816 COMPHYS_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
X_U33         OVP RESET INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U44         VIN_OK_B OVP_AT_OUT N18133823 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U46         VCCOK OVP_AT_OUT N18133678 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U30         ISENSE GND IN D VCVSCLIP_PS PARAMS: gain=200 vomax=10 vomin=-5
V_V2         N18109263 GND 200mVdc
X_U38         DM_DISCHARGE N18118986 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U41         OUT OVP_REF N18123829 OVP_AT_OUT COMPHYS_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
X_U21         ENOK N16652763 N16652897 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U11         ILIM_DET N16522411 INV_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5 DELAY=10u
X_U9         CHANGE BUF_OUT SET1 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U35         VCCOK VIN_OK_B INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U23         N16522727 N16522669 NEG AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
E_ABM6         OVP_REF 0 VALUE { IF(V(OVP_SEL)>4.49,6.95,6)    }
V_V3         N16679140 N16695654 0.4Vdc
D_D1         OVP_AT_OUT N18123743 D_D1 
X_U18         VCCOK ENOK POWEROK AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
D_D_D1         GND GATE D_D1 
X_U6         POS NEG CHANGE OR2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
V_V13         N18123788 GND 3.9Vdc
E_ABM5         N18126200 0 VALUE { V(N16686286) +40m    }
V_V16         N18118678 GND 100m
X_U19         N16652763 N16652857 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_S5    N16910925 GND OUT GND TPS254900A_TRANS_S5 
C_C11         DM_OUT GND  5p IC=0 TC=0,0 
R_R15         STATUS_B IN  1e6 TC=0,0 
V_V11         N7643981 GND 200mVdc
X_U27         GATE GND N18107841 GND VCCS_CLIP_PS PARAMS: GM=-1m IOMAX=0
+  IOMIN=-25n
V_V9         N7643416 GND 0.65Vdc
V_V5         N16942861 GND 12Vdc
V_V19         N18123818 GND 3.9Vdc
X_S3    SET0 GND 8_2MS GND TPS254900A_TRANS_S3 
X_U40         ISENS N18126200 N18126206 SIG COMPHYS_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
X_U43         N18205668 OVP N18265900 OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_S16    SIG GND N18126037 GND TPS254900A_TRANS_S16 
X_S11    N18118955 GND DP_IN DP_OUT TPS254900A_TRANS_S11 
X_H3    N16695654 GND ILO GND TPS254900A_TRANS_H3 
D_D_D4         N16943140 OUT D_D1 
V_V14         N18119007 GND 3.9
X_S8    OVP GND N18123533 GND TPS254900A_TRANS_S8 
X_S1    SET1 GND N7640425 8_2MS TPS254900A_TRANS_S1 
X_U25         ENOK N18123842 INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_H2    ILIM_HI N16680578 N16686486 GND TPS254900A_TRANS_H2 
V_V6         GND N16943140 0.7Vdc
X_S12    DP_DISCHARGE GND DP_OUT GND TPS254900A_TRANS_S12 
E_E3         N18123803 GND DM_IN GND 1
X_U5         ENOK N18109114 INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
V_V18         N18123813 GND 100mVdc
D_D_D2         GATE N16942861 D_D1 
C_C4         N16929031 GND  1u IC=0 TC=0,0 
X_S18    GATE GND D S TPS254900A_TRANS_S18 
D_D_D3         GND OUT D_D1 
E_E2         N18123773 GND DP_IN GND 1
X_U17         EN N7637958 N7643981 ENOK COMPHYS_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
X_U20         N16522669 N16522727 INV_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5 DELAY=10u
X_U37         DP_DISCHARGE N18118962 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U16         N18107503 N7638368 N7643416 VCCOK COMPHYS_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
X_U12         CHANGE N7639915 SET0 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
C_C10         N18123533 GND  1u IC=0 TC=0,0 
R_R6         CTL2 GND  1e9 TC=0,0 
C_C12         N18126091 GND  1u IC=0 TC=0,0 
V_V20         N18126206 GND 50m
E_E1         N18107503 GND IN GND 1
X_S14    DM_DISCHARGE GND DM_OUT GND TPS254900A_TRANS_S14 
X_U13         ILIM_DET N16522411 POS AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
G_ABMII1         GATE GND VALUE {
+  LIMIT((0.1u)*PWRS(V(N16902812),2)+(30u)*V(N16902812),0,1m)    }
X_U2         N18107946 N18109361 N18109263 N16690681 COMPHYS_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
X_U36         DM_IN N18119041 N18118678 DM_DISCHARGE COMPHYS_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
X_U14         COMP_OUT N18239291 ILIM_DET AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U10         BUF_OUT POWEROK N7649534 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
G_G2         IN GND ENOK GND 220u
C_C14         N18126037 GND  1u IC=0 TC=0,0 
C_C5         N16652763 GND  1n IC=0 TC=0,0 
X_U47         OVP OVP_B INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_H4    N16696863 GND IHI GND TPS254900A_TRANS_H4 
X_U24         ISENSE N7653480 COMP_OUT COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
X_H1    ILIM_LO N16679140 N16686286 GND TPS254900A_TRANS_H1 
C_C7         N18118955 GND  1u IC=0 TC=0,0 
G_G1         CS GND ISENSE GND 82u
V_V15         N18119014 GND 100m
X_U285         OVP N18123842 N18123738 N18123852 SRLATCHRHP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
X_U3         POWEROK N16910925 GND SWITCH_PS PARAMS: tdelay=0 trise=1e-6
+  tfall=1e-6 initval=0 ron=1e3 vth=500e-3 roff=1e9
V_V8         N7640425 GND 1Vdc
X_S19    N18133678 GND OUT GND TPS254900A_TRANS_S19 
X_U289         OVP_B ENOK POWEROK N18107841 AND3_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U32         DP_IN N18119007 N18119014 DP_DISCHARGE COMPHYS_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
X_S13    N18118980 GND DM_IN DM_OUT TPS254900A_TRANS_S13 
X_U4         N16929031 POWEROK_B INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_R17         N18118962 N18118955  3 TC=0,0 
G_ABMII4         GND N18126091 VALUE { IF(V(SIG) >0.5,2.4u,0)    }
X_U288         N18123722 N18123816 N18123743 OVP OR3_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
C_C13         N18118980 GND  1u IC=0 TC=0,0 
G_ABMII3         GND N18123533 VALUE { V(RESET)*31.25u    }
X_U22         ILIM_DET N16522669 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
V_V7         N7638368 GND 4.15Vdc
X_U7         BUF_OUT N7639915 INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
E_ABM4         N7653480 0 VALUE { V(ILIM) *0.98    }
V_V1         N18109361 GND 1.35Vdc
E_ABM7         N18123741 0 VALUE { IF( V(N18123533) > 500m,1,0)    }
V_V10         N7637958 GND 1.35Vdc
X_S7    N18123741 GND 16MS GND TPS254900A_TRANS_S7 
X_S2    N18107224 GND FAULT_B GND TPS254900A_TRANS_S2 
X_U48         OVP_B POWEROK N18239291 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U286         N18126091 N18126037 N18126137 N18126144 SRLATCHRHP_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_S6    N18133823 GND OUT GND TPS254900A_TRANS_S6 
X_S15    SIG_B GND N18126091 GND TPS254900A_TRANS_S15 
V_V17         N18119041 GND 3.9
R_R7         IN D  5m TC=0,0 
C_C15         N18123743 GND  1u IC=0 TC=0,0 
G_ABMII2         GND 16MS VALUE { V(N18123738)*31.25u    }
X_U1         N16686286 N16686486 N16690681 ILIM MUX2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
G_G3         IMON GND ISENSE GND -104u
X_U15         N16652857 ENOK N16652885 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_H5    S OUT ISENS GND TPS254900A_TRANS_H5 
C_C9         16MS GND  1u IC=0 TC=0,0 
R_R10         POWEROK N16929031  2.3k TC=0,0 
X_U29         N7649534 16MS N18107224 OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U42         POWEROK_B N18109114 N18205668 OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
C_C8         DP_OUT GND  5p IC=0 TC=0,0 
R_R16         IN N18107946  100k TC=0,0 
R_R12         N16652763 N18107946  1 TC=0,0 
.ENDS TPS254900A_TRANS
*$
.subckt TPS254900A_TRANS_S9 1 2 3 4  
S_S9         3 4 1 2 _S9
RS_S9         1 2 1G
.MODEL         _S9 VSWITCH Roff=1e9 Ron=55k Voff=0.25 Von=0.75
.ends TPS254900A_TRANS_S9
*$
.subckt TPS254900A_TRANS_S17 1 2 3 4  
S_S17         3 4 1 2 _S17
RS_S17         1 2 1G
.MODEL         _S17 VSWITCH Roff=1e9 Ron=10m Voff=0.1V Von=0.9V
.ends TPS254900A_TRANS_S17
*$
.subckt TPS254900A_TRANS_S5 1 2 3 4  
S_S5         3 4 1 2 _S5
RS_S5         1 2 1G
.MODEL         _S5 VSWITCH Roff=1e9 Ron=500 Voff=0.25 Von=1.0V
.ends TPS254900A_TRANS_S5
*$
.subckt TPS254900A_TRANS_S3 1 2 3 4  
S_S3         3 4 1 2 _S3
RS_S3         1 2 1G
.MODEL         _S3 VSWITCH Roff=1e9 Ron=1 Voff=0.25 Von=0.75V
.ends TPS254900A_TRANS_S3
*$
.subckt TPS254900A_TRANS_S16 1 2 3 4  
S_S16         3 4 1 2 _S16
RS_S16         1 2 1G
.MODEL         _S16 VSWITCH Roff=1e9 Ron=10m Voff=0.2 Von=0.8
.ends TPS254900A_TRANS_S16
*$
.subckt TPS254900A_TRANS_S11 1 2 3 4  
S_S11         3 4 1 2 _S11
RS_S11         1 2 1G
.MODEL         _S11 VSWITCH Roff=1e9 Ron=1m Voff=0.01 Von=0.99
.ends TPS254900A_TRANS_S11
*$
.subckt TPS254900A_TRANS_H3 1 2 3 4  
H_H3         3 4 VH_H3 -1
VH_H3         1 2 0V
.ends TPS254900A_TRANS_H3
*$
.subckt TPS254900A_TRANS_S8 1 2 3 4  
S_S8         3 4 1 2 _S8
RS_S8         1 2 1G
.MODEL         _S8 VSWITCH Roff=1e9 Ron=1m Voff=0.25 Von=0.75V
.ends TPS254900A_TRANS_S8
*$
.subckt TPS254900A_TRANS_S1 1 2 3 4  
S_S1         3 4 1 2 _S1
RS_S1         1 2 1G
.MODEL         _S1 VSWITCH Roff=1e9 Ron=1 Voff=0.25 Von=0.75V
.ends TPS254900A_TRANS_S1
*$
.subckt TPS254900A_TRANS_H2 1 2 3 4  
H_H2         3 4 VH_H2 -123.65k
VH_H2         1 2 0V
.ends TPS254900A_TRANS_H2
*$
.subckt TPS254900A_TRANS_S12 1 2 3 4  
S_S12         3 4 1 2 _S12
RS_S12         1 2 1G
.MODEL         _S12 VSWITCH Roff=1e9 Ron=100Meg Voff=0.1 Von=0.9
.ends TPS254900A_TRANS_S12
*$
.subckt TPS254900A_TRANS_S18 1 2 3 4  
S_S18         3 4 1 2 _S18
RS_S18         1 2 1G
.MODEL         _S18 VSWITCH Roff=1e6 Ron=45m Voff=0 Von=7
.ends TPS254900A_TRANS_S18
*$
.subckt TPS254900A_TRANS_S14 1 2 3 4  
S_S14         3 4 1 2 _S14
RS_S14         1 2 1G
.MODEL         _S14 VSWITCH Roff=1e9 Ron=100MEG Voff=0.1 Von=0.9
.ends TPS254900A_TRANS_S14
*$
.subckt TPS254900A_TRANS_H4 1 2 3 4  
H_H4         3 4 VH_H4 -1
VH_H4         1 2 0V
.ends TPS254900A_TRANS_H4
*$
.subckt TPS254900A_TRANS_H1 1 2 3 4  
H_H1         3 4 VH_H1 -123.65k
VH_H1         1 2 0V
.ends TPS254900A_TRANS_H1
*$
.subckt TPS254900A_TRANS_S19 1 2 3 4  
S_S19         3 4 1 2 _S19
RS_S19         1 2 1G
.MODEL         _S19 VSWITCH Roff=1e9 Ron=500 Voff=0.25 Von=0.75
.ends TPS254900A_TRANS_S19
*$
.subckt TPS254900A_TRANS_S13 1 2 3 4  
S_S13         3 4 1 2 _S13
RS_S13         1 2 1G
.MODEL         _S13 VSWITCH Roff=1e9 Ron=1m Voff=0.01 Von=0.99
.ends TPS254900A_TRANS_S13
*$
.subckt TPS254900A_TRANS_S7 1 2 3 4  
S_S7         3 4 1 2 _S7
RS_S7         1 2 1G
.MODEL         _S7 VSWITCH Roff=1e9 Ron=1m Voff=0.1 Von=0.9V
.ends TPS254900A_TRANS_S7
*$
.subckt TPS254900A_TRANS_S2 1 2 3 4  
S_S2         3 4 1 2 _S2
RS_S2         1 2 1G
.MODEL         _S2 VSWITCH Roff=1e9 Ron=60 Voff=0.25 Von=0.75V
.ends TPS254900A_TRANS_S2
*$
.subckt TPS254900A_TRANS_S6 1 2 3 4  
S_S6         3 4 1 2 _S6
RS_S6         1 2 1G
.MODEL         _S6 VSWITCH Roff=1e9 Ron=80k Voff=0.25 Von=0.75
.ends TPS254900A_TRANS_S6
*$
.subckt TPS254900A_TRANS_S15 1 2 3 4  
S_S15         3 4 1 2 _S15
RS_S15         1 2 1G
.MODEL         _S15 VSWITCH Roff=1e9 Ron=10m Voff=0.2 Von=0.8
.ends TPS254900A_TRANS_S15
*$
.subckt TPS254900A_TRANS_H5 1 2 3 4  
H_H5         3 4 VH_H5 1
VH_H5         1 2 0V
.ends TPS254900A_TRANS_H5
*$
** Wrapper definitions for AA legacy support **
.subckt d_d10 1 2
d1 1 2 dd1
.model dd1 d
+ is=1e-015
+ tt=1e-011
+ rs=0.001
+ n=0.001
.ends d_d10
*$
.SUBCKT COMP_BASIC_GEN INP INM Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
E_ABM Yint 0 VALUE {IF (V(INP) > 
+ V(INM), {VDD},{VSS})}
R1 Yint Y 1
C1 Y 0 1n
.ENDS COMP_BASIC_GEN
*$
.SUBCKT COMPHYS_BASIC_GEN INP INM HYS OUT PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
EIN INP1 INM1 INP INM 1 
EHYS INP1 INP2 VALUE { IF( V(1) > {VTHRESH},-V(HYS),0) }
EOUT OUT 0 VALUE { IF( V(INP2)>V(INM1), {VDD} ,{VSS}) }
R1 OUT 1 1
C1 1 0 5n
RINP1 INP1 0 1K
.ENDS COMPHYS_BASIC_GEN
*$
.SUBCKT COMPHYS2_BASIC_GEN INP INM HYS OUT PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
+ T=10
EIN INP1 INM1 INP INM 1 
EHYS INM2 INM1 VALUE { IF( V(1) > {VTHRESH},-V(HYS)/2,V(HYS)/2) }
EOUT OUT 0 VALUE { IF( V(INP1)>V(INM2), {VDD} ,{VSS}) }
R1 OUT 1 1
C1 1 0 {T*1e-9}
RINP1 INP1 0 10K
RINM2 INM2 0 10K
.ENDS COMPHYS2_BASIC_GEN
*$
.SUBCKT AND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND2_BASIC_GEN
*$
.SUBCKT AND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND3_BASIC_GEN
*$
.SUBCKT AND4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH} &
+ V(D) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND4_BASIC_GEN
*$
.SUBCKT NAND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND2_BASIC_GEN
*$
.SUBCKT NAND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND3_BASIC_GEN
*$
.SUBCKT NAND4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH} &
+ V(D) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND4_BASIC_GEN
*$
.SUBCKT OR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR2_BASIC_GEN
*$
.SUBCKT OR3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR3_BASIC_GEN
*$
.SUBCKT OR4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR4_BASIC_GEN
*$
.SUBCKT NOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR2_BASIC_GEN
*$
.SUBCKT NOR3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR3_BASIC_GEN
*$
.SUBCKT NOR4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR4_BASIC_GEN
*$
.SUBCKT NOR5_BASIC_GEN A B C D E Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH} |
+ V(E) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR5_BASIC_GEN
*$
.SUBCKT NOR6_BASIC_GEN A B C D E F Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH} |
+ V(E) > {VTHRESH} |
+ V(F) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR6_BASIC_GEN
*$
.SUBCKT INV_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS INV_BASIC_GEN
*$
.SUBCKT XOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(A) > {VTHRESH}  ^  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS XOR2_BASIC_GEN
*$
.SUBCKT XNOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(A) > {VTHRESH}  ^  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS XNOR2_BASIC_GEN
*$
.SUBCKT MUX2_BASIC_GEN A B S Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(S) > {VTHRESH},  
+ V(B),V(A))}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS MUX2_BASIC_GEN
*$
.SUBCKT INV_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS INV_DELAY_BASIC_GEN
*$
.SUBCKT BUF_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS BUF_DELAY_BASIC_GEN
*$
.SUBCKT BUF_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS BUF_BASIC_GEN
*$
**Set has higher priority in this latch
.SUBCKT SRLATCHSHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(S) > {VTHRESH},5,IF(V(R)>{VTHRESH},-5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n 
.IC V(Qint) {VSS}
.ENDS SRLATCHSHP_BASIC_GEN
*$
**Reset has higher priority in this latch
.SUBCKT SRLATCHRHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,IF(V(S)>{VTHRESH},5, 0))}
CQint Qint 0 1n
*RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n
.IC V(Qint) {VSS}
.ENDS SRLATCHRHP_BASIC_GEN
*$
**Reset has higher priority in this latch and active low set and reset - basically NAND based SR latch
.SUBCKT SBRBLATCHRHP_BASIC_GEN SB RB Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(RB) < {VTHRESH},-5,IF(V(SB) < {VTHRESH},5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
.IC V(Qint) {VSS}
.ENDS SBRBLATCHRHP_BASIC_GEN
*$
**Reset has higher priority in this latch and active low set and reset - basically NAND based SR latch
.SUBCKT SBRBLATCHSHP_BASIC_GEN SB RB Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(SB) < {VTHRESH},5,IF(V(RB) < {VTHRESH},-5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
.IC V(Qint) {VSS}
.ENDS SBRBLATCHSHP_BASIC_GEN
*$
.SUBCKT DFFSBRB_SHPBASIC_GEN Q QB CLK D RB SB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
GQ 0 Qint VALUE = {IF(V(SB) < {VTHRESH},5,IF(V(RB)<{VTHRESH},-5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSBRB_SHPBASIC_GEN
*$
.SUBCKT DFFSR_SHPBASIC_GEN Q QB CLK D R S PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} 
GQ 0 Qint VALUE = {IF(V(S) > {VTHRESH},5,IF(V(R) > {VTHRESH},-5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSR_SHPBASIC_GEN
*$
.SUBCKT DFFSBRB_RHPBASIC_GEN Q QB CLK D RB SB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} 
GQ 0 Qint VALUE = {IF(V(RB) < {VTHRESH},-5,IF(V(SB)< {VTHRESH},5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 5
D_D11 0 Qint D_D1 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSBRB_RHPBASIC_GEN
*$
.SUBCKT DFFSR_RHPBASIC_GEN Q QB CLK D R S PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}  
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,IF(V(S) > {VTHRESH},5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSR_RHPBASIC_GEN
*$
.SUBCKT MONONEG_PS in Q Qn PARAMS: PW=1u 
VS VSUP 0 DC 1
GIN VSUP YA VALUE={IF(V(IN)<0.5, V(VSUP)/1000K, 0)}
GDIS YA 0 VALUE={IF(V(IN)<0.5,0, V(YA)/1m)}
CIN YA 0 1n IC=0
RIN YA 0 1e11
EABM1 YTD 0 VALUE={IF(V(YA)> {PW*1000}, 0, 1)}
RYTD YTD 0 1e11
EXOR P 0 VALUE={IF(V(YTD) > 0.5 ^ V(IN) > .5, 1, 0)}
ROUTpp2 P 0 1e11
EAND1 Q1 0 VALUE={ IF(V(P)>0.5 & V(YTD)>0.5, 1, 0)}
Ro1 Q1 Q 1m
Co1 Q 0 1p IC=0
ROUT2 Q 0 1e11
EAND2 Qn1 0 VALUE={ IF(V(Q)>0.5, 0, 1)}
Ro2 Qn1 Qn 1m
Co2 Qn 0 1p
ROUT4 Qn 0 1e11
.ENDS MONONEG_PS
*$
*SRC=B260;DI_B260;Diodes;Si;  60.0V  2.00A  1.00ns   Diodes Inc. 
.MODEL DI_B260 D  ( IS=6.08u RS=14.9m BV=60.0 IBV=500u
+ CJO=370p  M=0.333 N=1.55 TT=1.44n )
*$
.SUBCKT CESR IN OUT
+ PARAMs:  C=100u ESR=0.01 X=2 IC=0
C	IN 1  {C*X} IC={IC}
RESR	1 OUT {ESR/X}
.ENDS CESR
*$
.SUBCKT LDCR IN OUT
+ PARAMs:  L=1u DCR=0.01 IC=0
L	IN 1  {L} IC={IC}
RDCR	1 OUT {DCR}
.ENDS LDCR
*$
.SUBCKT SWITCH_PS A SWD SWC PARAMS: vth=500e-3 ron=1e3 roff=1e9 tdelay=0 trise=1e-6 tfall=1e-6 initval=0
*
VS VSUP 0 DC 1
***** boolean ************
EBUF1 Ypp 0 VALUE={IF(V(A) > ({vth}), {1-initval}, {initval})}
ROUTpp Ypp 0 1e11
***** add delay lines ****
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tdelay+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tdelay+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
** Add rise and fall *****
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(trise+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tfall+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
***Switch ************
EOUT VG1 SWC VALUE={V(OUTr)}
XNSW3 SWD VG1 SWC NSW_PS PARAMS: RONval={ron} VTHval=0.5
.ENDS SWITCH_PS
*$
.SUBCKT VCCS_CLIP_PS IOUT_P IOUT_N VIN_P VIN_N PARAMS: GM=1 IOMAX=1 IOMIN=-1
RCTRLP VIN_P 0 1e11
RCTRLN VIN_N 0 1e11
GOUT IOUT_P IOUT_N VALUE={LIMIT({GM}*V(VIN_P,VIN_N), {IOMIN},{IOMAX})}
ROUTP IOUT_P 0 1e11
ROUTN IOUT_N 0 1e11
.ends VCCS_CLIP_PS
*$
.SUBCKT VCVSCLIP_PS YP YN POS NEG PARAMS: gain=1 vomax=1 vomin=-1
RP POS 0 1e11
CP POS 0 0.01pF
RN NEG 0 1e11
CN NEG 0 0.01pF
ROUTN YN 0 1e11
COUTN YN 0 0.01pF
***** boolean ************
EVCLP YP YN VALUE={LIMIT((V(POS)-V(NEG))*{gain},{vomin},{vomax})}
**************************
RO YP 0 1e11
.ENDS VCVSCLIP_PS
*$
.model D_D1 d
+ is=1e-015
+ tt=1e-011
+ rs=0.05
+ n=0.1
*$
.SUBCKT NSW_PS D G S PARAMS: RONval=10k VTHval=0.7 VCHARval=0.01 CGval=0.01pF CDval=0.01pF CSval=0.01pf
RDDUM D 0 1e11
RSDUM S 0 1e11
RGDUM G 0 1e11
CG G D {CGval}
CD D S {CDval}
CS G S {CSval}
***EEXP F1 0 VALUE={LIMIT(((V(G,S)-VTHval)/VCHARval),-80,80)} 
Etest test 0 VALUE={IF(V(D) > V(S), V(G,S), V(G,D))}
GOUT D S VALUE={V(D,S)/(RONval*(1+EXP(-LIMIT(((V(test)-VTHval)/VCHARval),-80,80))))}
.ENDS NSW_PS
*$
.SUBCKT PSW_PS D G S PARAMS: RONval=10k VTHval=0.7 VCHARval=0.01 CGval=0.01pF CDval=0.01pF 
RDDUM D 0 1e11
RSDUM S 0 1e11
RGDUM G 0 1e11
CG G D {CGval}
CD D S {CDval}
***EEXP F1 0 VALUE={LIMIT(((V(S,G)-VTHval)/VCHARval),-80,80)} 
Etest test 0 VALUE={IF(V(S) > V(D), V(S,G), V(D,G))}
GOUT S D VALUE={V(S,D)/(RONval*(1+EXP(-LIMIT(((V(test)-VTHval)/VCHARval),-80,80))))}
.ENDS PSW_PS
*$