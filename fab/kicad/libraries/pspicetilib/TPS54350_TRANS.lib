*$
*TPS54350
*****************************************************************************
* (C) Copyright 2011 Texas Instruments Incorporated. All rights reserved.                                            
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.                                             
** TI and its licensors and suppliers make no warranties, either expressed                                           
** or implied, with respect to this model, including the warranties of                                                    
** merchantability or fitness for a particular purpose. The model is                                                      
** provided solely on an "as is" basis. The entire risk as to its quality                                                    
** and performance is with the customer                                                                                          
*****************************************************************************
** Released by: Analog eLab(TM) Design Center, Texas Instruments Inc.
* Part: TPS54350
* Date: 07/14/2011
* Model Type: Transient 
* Simulator: PSpice 
* Simulator Version: 16.0.0.p001
* EVM Order Number: TPS54350EVM-235
* EVM Users Guide: SLVU097a - Sep 2003
* Datasheet: SBVS456C - October 2004
* Model Version: Final 1.00
*
*****************************************************************************
*
* Updates:
*
* Final 1.00
* Release to Web.
*
***************************************************************************
.SUBCKT TPS54350_TRANS VIN1 VIN2 UVLO PWRGD RT SYNC ENA COMP
+ VSENSE AGND PGND VBIAS LSG PH2 PH1 BOOT PwrPD PARAMS:FASTMODE=1
R_R3         VIN VIN1  1m  
C_U4_C77         U4_N16302798 0  1n  
V_U4_V81         U4_N16285556 U4_N16285566 0.612
E_U4_ABM169         U4_N16315663 0 VALUE { {V(HDRV) - V(PH)}    }
R_U4_R144         U4_N16286224 U4_N16286208  86.4  
X_U4_S4    U4_LDRV_PRE 0 VBIAS LSG OutputDriver_U4_S4 
E_U4_ABM84         U4_N16286224 0 VALUE { {IF ( V(U4_N16285344) >
+  V(U4_N16286290)  
+ ,0,1)}   }
X_U4_S3    U4_N16285670 0 HDRV PH OutputDriver_U4_S3 
X_U4_S5    U4_N16285436 0 LSG 0 OutputDriver_U4_S5 
E_U4_ABM79         U4_N16302804 0 VALUE { {IF ( V(LSG) > V(U4_N16302754)  
+ ,0,1)}   }
D_U4_D64         VIN BOOT d_d1  
X_U4_S32    LSG 0 U4_N16285566 0 OutputDriver_U4_S32 
V_U4_V31         U4_N16286290 0 1
C_U4_C78         U4_N16286208 0  1n  
C_U4_C80         U4_N16285344 0  1n  
X_U4_U676         U4_LDRVIN OCBBAR U4_LDRV_PRE AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
V_U4_V30         U4_N16302754 0 1
X_U4_S30    HDRV PH U4_N16285804 PH OutputDriver_U4_S30 
X_U4_U675         U4_HDRVIN OCBBAR U4_HDRV_PRE AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U4_U671         PWMFF U4_PWMFFBAR INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
D_U4_D13         PH U4_N16285804 d_d1  
D_U4_D16         PH U4_N16285556 d_d1  
X_U4_U672         U4_N16286208 U4_PWMFFBAR U4_N16286196 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U4_S2    U4_HDRV_PRE 0 BOOT HDRV OutputDriver_U4_S2 
X_U4_U678         U4_LDRV_PRE U4_N16285436 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U4_U677         U4_HDRV_PRE U4_N16285670 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U4_U674         U4_N16302798 ENAB PWMFF U4_HDRVIN AND3_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
R_U4_R143         U4_N16302804 U4_N16302798  86.4  
X_U4_H1    VIN U4_N16285804 ISW 0 OutputDriver_U4_H1 
R_U4_R145         U4_N16315663 U4_N16285344  1  
X_U4_U673         U4_N16286196 ENAB U4_LDRVIN AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
C_U4_C142         PH U4_N16285804  10p  
R_R6         PH PH2  1m  
C_U9_C147         0 U9_N15723378  13p  
X_U9_U685         U9_N15723162 U9_N15723982 OCB OCBBAR SRLATCHRHP_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
C_U9_C83         U9_N15723134 0  100p  
R_U9_R16         U9_N15723220 U9_N15723162  1  
V_U9_V55         U9_N15723904 0 3
D_U9_D15         U9_N15723134 U9_N15723600 d_d1  
E_U9_ABM152         U9_ISNS 0 VALUE { {IF(V(U9_N15723378) > 0.5,  
+ V(ISW),0.0)}   }
V_U9_V52         U9_N15723600 0 5
C_U9_C16         0 U9_N15723162  1n  
G_U9_ABM2I1         U9_N15723600 U9_N15723134 VALUE { V(OCB)*
+  (V(IRT)*5.84e-2+4.77e-8)    }
X_U9_U686         U9_N15723134 U9_N15723904 U9_HICCUP COMP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
C_U9_C20         0 U9_N15723332  900p  
D_U9_D58         U9_N15723378 U9_N15723406 d_d1  
X_U9_S28    OCB 0 U9_N15723134 0 OverCurrent_U9_S28 
X_U9_S72    FASTMODE 0 U9_N15723134 U9_N15723332 OverCurrent_U9_S72 
R_U9_R255         U9_N15723406 U9_N15723378  14.4k  
E_U9_ABM180         U9_N15723220 0 VALUE { {IF(V(U9_ISNS) > 4.5,1,0)}    }
G_U9_ABM2I2         U9_N15723600 U9_N15723134 VALUE { V(RTFLOAT) *0.66u+
+  V(RTGND)*0.33u    }
E_U9_ABM151         U9_N15723406 0 VALUE { {IF(V(PWMFF) > 0.5, 1,0)}    }
X_U9_U684         UVLOOKBAR U9_HICCUP U9_N15723982 OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
R_R4         VIN VIN2  1m  
E_U5_ABM186         U5_N156192140 0 VALUE { 1*{FASTMODE}    }
X_U5_U689         OCB ENABBAR U5_N15601562 OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
D_U5_D63         0 ENA d_d1  
R_U5_R290         U5_N15611825 U5_N15609083  1  
C_U5_C8         0 ENA  0.1p  
R_U5_R13         U5_N15602144 U5_N15601756  1  
C_U5_C12         0 U5_N15601756  1n  
V_U5_V70         U5_N15601510 0 1.5
R_U5_R289         U5_N156192140 FASTMODE  1  
D_U5_D66         0 SS_TRINT d_d1  
E_U5_ABM187         U5_N15609792 0 VALUE { IF(V(UVLOOK) > 0.5,V(U5_N15609083)  
+ ,0)   }
X_U5_S71    FASTMODE 0 SS_TRINT U5_N15602114 Softstart_U5_S71 
V_U5_V72         U5_N15601174 0 1.5
E_U5_ABM181         U5_N15602144 0 VALUE { MIN(V(ENA),  
+ V(SS_TRINT))   }
C_U5_C15         0 U5_N15602114  500p  
C_U5_C14         0 VREF  1n  
R_U5_R291         U5_N15609792 U5_N15612047  1  
C_U5_C167         0 FASTMODE  1n  
C_U5_C168         0 U5_N15609083  1n  
E_U5_ABM178         U5_N15601810 0 VALUE { IF(V(U5_N15601756) < 0.891,
+  V(U5_N15601756),0.891)    }
C_U5_C11         0 SS_TRINT  500p  
E_U5_ABM188         U5_N15611825 0 VALUE { IF(V(RTFLOAT)> 0.5,387n,  
+ IF(V(RTGND) > 0.5, 193.5n,  
+ (3.39e-2*V(IRT)+27.8e-9)))  }
R_U5_R14         U5_N15601810 VREF  1  
G_U5_ABMI1         U5_N15601510 ENA VALUE { {IF(V(UVLOOK) > 0.5,5u,0)}    }
G_U5_ABMII1         U5_N15601174 SS_TRINT VALUE { V(U5_N15612047)    }
X_U5_S69    U5_N15601562 0 SS_TRINT 0 Softstart_U5_S69 
D_U5_D65         SS_TRINT U5_N15601174 d_d1  
X_U5_S68    OCB 0 ENA 0 Softstart_U5_S68 
D_U5_D62         ENA U5_N15601510 d_d1  
C_U5_C169         0 U5_N15612047  1n  
R_R2         0 AGND  1m  
R_R1         0 PGND  1m  
R_R7         0 PwrPD  1m  
X_SYNC_U682         FSBY2_RST SYNC_N16147411 SYNC_N16147597 N16147491
+  SRLATCHRHP_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_SYNC_S70    SYNC_N16147597 0 SYNC_N16147135 0 SYNCgenerator_SYNC_S70 
C_SYNC_C17         0 SYNC_N16147353  1n  
R_SYNC_R18         SYNC_N16147215 SYNC_N16147353  1  
X_SYNC_U683         SYNC_RST ENABBAR SYNCMASKBAR SYNCMASK SRLATCHRHP_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_SYNC_U681         SYNC_N16147353 SYNC_N16147629 SYNC_RST AND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
V_SYNC_V79         SYNC_N16147717 0 3.3
X_SYNC_U679         FSBY2_NEGRST ENABBAR SYNC_N16147411 OR2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_SYNC_S20    INT_CLK 0 SYNC SYNC_SYNCO SYNCgenerator_SYNC_S20 
C_SYNC_C152         0 SYNC_N16147135  1n  
E_SYNC_ABM185         SYNC_N16147215 0 VALUE { IF(V(INT_CLK) > 0.5,0,  
+ IF(V(SYNC)> 2.3, 0,1))   }
R_SYNC_R283         SYNC_N16147135 SYNC_N16147717  200  
C_SYNC_C169         0 SYNC_SYNCO  1n  
R_SYNC_R295         SYNC_N16147139 SYNC_SYNCO  1  
X_SYNC_U680         SYNC_N16147353 SYNC_N16147629 INV_DELAY_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5 DELAY=75n
E_SYNC_E2         SYNC_N16147139 0 SYNC_N16147135 0 1
G_U10_ABM3I4         U10_N15153133 FFRAMP VALUE { (V(RTFLOAT)*V(VIN)*130n) +  
+ V(RTGND)*V(VIN)*65n   }
C_U10_C82         FFRAMP 0  2p  
D_U10_D14         FFRAMP U10_N15153133 d_d1  
X_U10_S27    FFRAMP_RST 0 FFRAMP U10_N15153269 ComparatorRamp_U10_S27 
V_U10_V51         U10_N15153269 0 0.3
G_U10_ABM3I1         U10_N15153133 FFRAMP VALUE {
+  V(INT_CLK_BAR)*V(VIN)*2.5e-10*(V(IRT)*4.38e7+35.9)    }
V_U10_V50         U10_N15153133 0 6
C_Enable_C45         0 Enable_N15613898  1n  
E_Enable_ABM31         Enable_N15613872 0 VALUE { (V(UVLOOK) * -220m)+1.24    }
R_Enable_R268         0 UVLO  125k  
X_Enable_U663         ENAB ENABBAR INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_Enable_R267         UVLO VIN  320k  
X_Enable_U666         ENA UVLOOK ENAB AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_Enable_U665         UVLO Enable_N15613898 UVLOOK COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
R_Enable_R95         Enable_N15613872 Enable_N15613898  1  
X_Enable_U664         UVLOOK UVLOOKBAR INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U101_S22    ENAB 0 COMP 0 ErrorAmplifier_U101_S22 
C_U101_C138         0 U101_N16036987  1n  
D_U101_D16         COMP U101_N16299869 d_d1  
X_U101_U666         U101_PWM ENABBAR U101_N16037499 OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
E_U101_E1         U101_N162955392 0 VSENSE 0 1
X_U101_U690         U101_PWMFF1 U101_N16037475 INV_DELAY_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5 DELAY=15n
R_U101_R266         U101_N16037037 U101_N16036987  349.4  
E_U101_ABM1         U101_N16299565 0 VALUE { (V(VIN)*0.1075)+0.294    }
X_U101_U670         U101_PWMFF1 U101_N16036987 PWMFF OR2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
C_U101_C167         0 U101_N16299869  1n  
X_U101_U665         FFRAMP COMP U101_PWM COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
C_U101_C166         0 VSENSEINT  1n  
R_U101_R289         U101_N16299565 U101_N16299869  1  
X_U101_U667         FFRAMP_RST U101_N16037499 U101_PWMFF1 N16037443
+  SRLATCHRHP_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U101_U84         VREF VSENSEINT COMP op_amp PARAMS:  HLIMIT=4
+  RIN=1MEG BW=2.8MEG DC_GAIN=80 ROUT=100 LLIMIT=0 SRP=1.5   SRM=1.5 
R_U101_R288         U101_N162955392 VSENSEINT  1  
X_U101_U669         U101_N16037475 U101_PWMFF1 U101_N16037037 AND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U101_U599         U101_N16037037 U101_N16036987 d_d PARAMS:
C_U3_C79         U3_RAMP 0  2p  
X_U3_U650         U3_CLK U3_N16308698 INT_CLK U3_N16309154 MUX2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
C_U3_C80         RTFLOAT 0  1n  
R_U3_R280         U3_N16308934 U3_CLK  1k  
E_U3_ABM187         U3_N16452290 0 VALUE { {IF(V(IRT) > 200u , 1,0)}    }
R_U3_R278         U3_N16454356 RTFLOAT  1  
X_U3_U653         SYNCMASK INT_CLK U3_N16350873 OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U3_U646         U3_N16308424 U3_N16308520 RTFLOAT U3_N16308698 MUX2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U3_U647         U3_CLK INT_CLK SYNCMASKBAR U3_N16309284 OR3_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
E_U3_ABM186         U3_N16454356 0 VALUE { {IF(V(IRT) < 2u , 1,0)}    }
V_U3_V46         U3_N16310306 0 1
X_U3_U662         U3_RAMP U3_N16310306 U3_N16309148 COMP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
G_U3_ABM2I1         U3_N16310020 U3_RAMP VALUE {
+  2e-12*(1/(1/(8.76e10*V(IRT)+7.18e4)-70e-9))*V(ENAB)    }
X_U3_S26    U3_N16309284 0 U3_RAMP 0 OscillatorRamp_U3_S26 
X_U3_U648         ENABBAR U3_N16346594 U3_N16308554 OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
C_U3_C81         U3_N16308934 0  70p  
X_U3_U654         SYNC_RST FSBY2_RST U3_N16350873 FFRAMP_RST MUX2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U3_U659         U3_FSBY2 U3_N16308376 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U3_U664         INT_CLK INT_CLK_BAR INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
V_U3_V75         U3_N16308424 0  
+PULSE 0 1 0 2n 2n 75n 2u
R_U3_R279         U3_N16452290 RTGND  1  
R_U3_R277         RT U3_N16360832  1  
V_U3_V76         U3_N16308520 0  
+PULSE 0 1 0 2n 2n 75n 1u
X_U3_U649         U3_N16309148 U3_N16308554 U3_CLK N16309842
+  SRLATCHRHP_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U3_U657         U3_FSBY2 U3_N16309066 INV_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5 DELAY=10n
X_U3_H1    U3_N16310000 U3_N16360832 IRT 0 OscillatorRamp_U3_H1 
C_U3_C82         RTGND 0  1n  
X_U3_U658         U3_N16308376 U3_N16309852 INV_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=10n
X_U3_U656         U3_N16309852 U3_N16308376 FSBY2_NEGRST AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U660         U3_FSBY2 U3_N16309716 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U3_U652         RTFLOAT RTGND INT_CLK OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U3_U655         U3_N16309066 U3_FSBY2 FSBY2_RST AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
V_U3_V45         U3_N16310020 0 6
V_U3_V44         U3_N16310000 0 1.05
X_U3_U663         U3_FSBY2 N16331757 U3_N16309154 U3_N16309716 ENAB SET1
+  DFFSBRB_RHPBASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
R_U3_R276         0 RT  1e9  
D_U3_D11         U3_RAMP U3_N16310020 d_d1  
X_U3_U645         INT_CLK_BAR SYNCMASK U3_N16308934 U3_N16346594 AND3_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
V_U7_V9         U7_N15875552 0 0.864
X_U7_U665         VSENSEINT U7_N15878847 U7_OUT COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
G_U7_ABM3I1         U7_N15892671 U7_N15890982 VALUE { IF(V(RTGND)>0.5,250n, IF(
+  V(RTFLOAT)>0.5,500n, (V(IRT)*4.38e-2+3.59e-8)))    }
C_U7_C83         U7_N15890982 0  100p  
X_U7_U688         VREF U7_N15875552 U7_N15878087 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
V_U7_V55         U7_N15891006 0 1
R_U7_R95         U7_N15878843 U7_N15878847  1  
X_U7_U692         U7_N15910310 U7_N15910635 U7_N15911431 OR2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
V_U7_V56         U7_N15916326 0 1.1
D_U7_D15         U7_N15890982 U7_N15892671 d_d1  
X_U7_U687         ENAB U7_OUT U7_N15878087 OCBBAR U7_N15931923 NAND4_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U7_S72    FASTMODE 0 U7_N15890982 U7_N15890858 PowerGood_U7_S72 
E_U7_ABM31         U7_N15878843 0 VALUE { (V(U7_OUT) * -4m)+0.864    }
X_U7_U689         U7_N15916326 VIN U7_N15910635 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
X_U7_S73    U7_N15931923 0 U7_N15890982 0 PowerGood_U7_S73 
C_U7_C20         0 U7_N15890858  900p  
X_U7_S19    U7_N15911431 0 PWRGD 0 PowerGood_U7_S19 
X_U7_U686         U7_N15890982 U7_N15891006 U7_N15910310 COMP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
C_U7_C45         0 U7_N15878847  1n  
V_U7_V52         U7_N15892671 0 5
R_R5         PH PH1  1m  
E_U8_ABM181         U8_N15840390 0 VALUE { MIN(V(VIN),  
+ V(U8_N15838753))   }
R_U8_R292         U8_N15840390 U8_N15839276  1  
V_U8_V53         SET1 0 1
C_U8_C169         0 U8_N15839276  1n  
V_U8_V55         U8_N15838753 0 7.8
E_U8_ABM182         U8_N15837497 0 VALUE { {IF(V(ENAB) > 0.5,
+  V(U8_N15839276),0)}    }
R_U8_R291         U8_N15837497 VBIAS  1  
C_U8_C168         0 VBIAS  1n  
V_U8_V54         SET0 0 0
.IC         V(U4_LDRV_PRE )=0
.IC         V(U4_HDRV_PRE )=0
.IC         V(U9_N15723134 )=0
.IC         V(SS_TRINT )=0
.IC         V(FFRAMP )=0
.IC         V(U3_RAMP )=0
.IC         V(U7_N15890982 )=0
.ENDS TPS54350_TRANS
*$
.subckt OutputDriver_U4_S4 1 2 3 4  
S_U4_S4         3 4 1 2 _U4_S4
RS_U4_S4         1 2 1G
.MODEL         _U4_S4 VSWITCH Roff=1e6 Ron=5 Voff=0.2V Von=0.8V
.ends OutputDriver_U4_S4
*$
.subckt OutputDriver_U4_S3 1 2 3 4  
S_U4_S3         3 4 1 2 _U4_S3
RS_U4_S3         1 2 1G
.MODEL         _U4_S3 VSWITCH Roff=1e6 Ron=1.0 Voff=0.2V Von=0.8V
.ends OutputDriver_U4_S3
*$
.subckt OutputDriver_U4_S5 1 2 3 4  
S_U4_S5         3 4 1 2 _U4_S5
RS_U4_S5         1 2 1G
.MODEL         _U4_S5 VSWITCH Roff=1e6 Ron=5 Voff=0.2V Von=0.8V
.ends OutputDriver_U4_S5
*$
.subckt OutputDriver_U4_S32 1 2 3 4  
S_U4_S32         3 4 1 2 _U4_S32
RS_U4_S32         1 2 1G
.MODEL         _U4_S32 VSWITCH Roff=10e6 Ron=3.35 Voff=0.2 Von=0.8
.ends OutputDriver_U4_S32
*$
.subckt OutputDriver_U4_S30 1 2 3 4  
S_U4_S30         3 4 1 2 _U4_S30
RS_U4_S30         1 2 1G
.MODEL         _U4_S30 VSWITCH Roff=10e6 Ron=125m Voff=0.2V Von=0.8
.ends OutputDriver_U4_S30
*$
.subckt OutputDriver_U4_S2 1 2 3 4  
S_U4_S2         3 4 1 2 _U4_S2
RS_U4_S2         1 2 1G
.MODEL         _U4_S2 VSWITCH Roff=1e6 Ron=2 Voff=0.2 Von=0.8
.ends OutputDriver_U4_S2
*$
.subckt OutputDriver_U4_H1 1 2 3 4  
H_U4_H1         3 4 VH_U4_H1 1
VH_U4_H1         1 2 0V
.ends OutputDriver_U4_H1
*$
.subckt OverCurrent_U9_S28 1 2 3 4  
S_U9_S28         3 4 1 2 _U9_S28
RS_U9_S28         1 2 1G
.MODEL         _U9_S28 VSWITCH Roff=100e6 Ron=1 Voff=0.8 Von=0.2
.ends OverCurrent_U9_S28
*$
.subckt OverCurrent_U9_S72 1 2 3 4  
S_U9_S72         3 4 1 2 _U9_S72
RS_U9_S72         1 2 1G
.MODEL         _U9_S72 VSWITCH Roff=100e6 Ron=1 Voff=0.8 Von=0.2
.ends OverCurrent_U9_S72
*$
.subckt Softstart_U5_S71 1 2 3 4  
S_U5_S71         3 4 1 2 _U5_S71
RS_U5_S71         1 2 1G
.MODEL         _U5_S71 VSWITCH Roff=100e6 Ron=1 Voff=0.8 Von=0.2
.ends Softstart_U5_S71
*$
.subckt Softstart_U5_S69 1 2 3 4  
S_U5_S69         3 4 1 2 _U5_S69
RS_U5_S69         1 2 1G
.MODEL         _U5_S69 VSWITCH Roff=100e6 Ron=100 Voff=0.2 Von=0.8
.ends Softstart_U5_S69
*$
.subckt Softstart_U5_S68 1 2 3 4  
S_U5_S68         3 4 1 2 _U5_S68
RS_U5_S68         1 2 1G
.MODEL         _U5_S68 VSWITCH Roff=100e6 Ron=100 Voff=0.2 Von=0.8
.ends Softstart_U5_S68
*$
.subckt SYNCgenerator_SYNC_S70 1 2 3 4  
S_SYNC_S70         3 4 1 2 _SYNC_S70
RS_SYNC_S70         1 2 1G
.MODEL         _SYNC_S70 VSWITCH Roff=100e6 Ron=1.0 Voff=0.8 Von=0.2
.ends SYNCgenerator_SYNC_S70
*$
.subckt SYNCgenerator_SYNC_S20 1 2 3 4  
S_SYNC_S20         3 4 1 2 _SYNC_S20
RS_SYNC_S20         1 2 1G
.MODEL         _SYNC_S20 VSWITCH Roff=2e6 Ron=10 Voff=0.2V Von=0.8V
.ends SYNCgenerator_SYNC_S20
*$
.subckt ComparatorRamp_U10_S27 1 2 3 4  
S_U10_S27         3 4 1 2 _U10_S27
RS_U10_S27         1 2 1G
.MODEL         _U10_S27 VSWITCH Roff=100e6 Ron=1 Voff=0.2 Von=0.8
.ends ComparatorRamp_U10_S27
*$
.subckt ErrorAmplifier_U101_S22 1 2 3 4  
S_U101_S22         3 4 1 2 _U101_S22
RS_U101_S22         1 2 1G
.MODEL         _U101_S22 VSWITCH Roff=10e8 Ron=10m Voff=0.8V Von=0.2V
.ends ErrorAmplifier_U101_S22
*$
.subckt OscillatorRamp_U3_S26 1 2 3 4  
S_U3_S26         3 4 1 2 _U3_S26
RS_U3_S26         1 2 1G
.MODEL         _U3_S26 VSWITCH Roff=5e9 Ron=100 Voff=0.2 Von=0.8
.ends OscillatorRamp_U3_S26
*$
.subckt OscillatorRamp_U3_H1 1 2 3 4  
H_U3_H1         3 4 VH_U3_H1 1
VH_U3_H1         1 2 0V
.ends OscillatorRamp_U3_H1
*$
.subckt PowerGood_U7_S72 1 2 3 4  
S_U7_S72         3 4 1 2 _U7_S72
RS_U7_S72         1 2 1G
.MODEL         _U7_S72 VSWITCH Roff=1e9 Ron=10 Voff=0.8 Von=0.2
.ends PowerGood_U7_S72
*$
.subckt PowerGood_U7_S73 1 2 3 4  
S_U7_S73         3 4 1 2 _U7_S73
RS_U7_S73         1 2 1G
.MODEL         _U7_S73 VSWITCH Roff=1e9 Ron=10 Voff=0.2 Von=0.8
.ends PowerGood_U7_S73
*$
.subckt PowerGood_U7_S19 1 2 3 4  
S_U7_S19         3 4 1 2 _U7_S19
RS_U7_S19         1 2 1G
.MODEL         _U7_S19 VSWITCH Roff=2e6 Ron=50 Voff=0.8V Von=0.2V
.ends PowerGood_U7_S19
*$
.SUBCKT OP_AMP P M OUT 
+ PARAMs:  Hlimit=5 Rin=10Meg BW=18Meg DC_Gain=100 Rout=100 Llimit=0 SRP=1 SRM=1
R_Rin         P M  {Rin}
E_E1          5 0 M P {-Gain}
E_LIMIT2      6 0 VALUE {LIMIT(V(5), {-Abs(SRM)*Ca*1Meg+V(1)/Ra},
+                 {SRP*Ca*1Meg+V(1)/Ra})}
G_G2          1 0 6 0 -1
R_Ra          0 1  {Ra} 
C_Ca          0 1  {Ca}   
E_LIMIT1      2 0 VALUE {LIMIT(V(1),{Llimit},{Hlimit})}
V_VL          3 0 {Llimit+200m}
V_VH          4 0 {Hlimit-200m}
D_D1          3 1 Dideal 
D_D2          1 4 Dideal 
R_Rout        OUT 2  {Rout}
.model Dideal D Is=1e-10 Cjo=.01pF Rs=1m  N=1
.PARAM  Ra=1k   Ca={exp(DC_gain*log(10)/20)/(2*3.14159*BW*Ra)} 
+ Gain={exp(DC_gain*log(10)/20)/Ra} 
.ENDS OP_AMP
*$
.MODEL D_D1 D( IS=1e-15 TT=10p Rs=0.05 N=.1  )
*$
.subckt d_d 1 2
d1 1 2 dd
.model dd d
+ is=1e-015
+ n=0.01
+ tt=1e-011
.ends d_d
*$
* PSpice Model Editor - Version 16.0.0
*$
.SUBCKT AND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND2_BASIC_GEN
*$
.SUBCKT AND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND3_BASIC_GEN
*$
.SUBCKT AND4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH} &
+ V(D) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND4_BASIC_GEN
*$
.SUBCKT NAND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND2_BASIC_GEN
*$
.SUBCKT NAND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND3_BASIC_GEN
*$
.SUBCKT NAND4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH} &
+ V(D) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND4_BASIC_GEN
*$
.SUBCKT OR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR2_BASIC_GEN
*$
.SUBCKT OR3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR3_BASIC_GEN
*$
.SUBCKT OR4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR4_BASIC_GEN
*$
.SUBCKT NOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR2_BASIC_GEN
*$
.SUBCKT NOR3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR3_BASIC_GEN
*$
.SUBCKT NOR4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR4_BASIC_GEN
*$
.SUBCKT NOR5_BASIC_GEN A B C D E Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH} |
+ V(E) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR5_BASIC_GEN
*$
.SUBCKT NOR6_BASIC_GEN A B C D E F Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH} |
+ V(E) > {VTHRESH} |
+ V(F) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR6_BASIC_GEN
*$
.SUBCKT INV_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS INV_BASIC_GEN
*$
.SUBCKT XOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(A) > {VTHRESH}  ^  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS XOR2_BASIC_GEN
*$
.SUBCKT XNOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(A) > {VTHRESH}  ^  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS XNOR2_BASIC_GEN
*$
.SUBCKT MUX2_BASIC_GEN A B S Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(S) > {VTHRESH},  
+ V(B),V(A))}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS MUX2_BASIC_GEN
*$
.SUBCKT INV_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS INV_DELAY_BASIC_GEN
*$
.SUBCKT BUF_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS BUF_DELAY_BASIC_GEN
*$
.SUBCKT BUF_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS BUF_BASIC_GEN
*$
**Set has higher priority in this latch
.SUBCKT SRLATCHSHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(S) > {VTHRESH},5,IF(V(R)>{VTHRESH},-5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n 
.IC V(Qint) {VSS}
.ENDS SRLATCHSHP_BASIC_GEN
*$
**Reset has higher priority in this latch
.SUBCKT SRLATCHRHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,IF(V(S)>{VTHRESH},5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n
.IC V(Qint) {VSS}
.ENDS SRLATCHRHP_BASIC_GEN
*$
**Reset has higher priority in this latch and active low set and reset - basically NAND based SR latch
.SUBCKT SBRBLATCHRHP_BASIC_GEN SB RB Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(RB) < {VTHRESH},-5,IF(V(SB) < {VTHRESH},5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
.IC V(Qint) {VSS}
.ENDS SBRBLATCHRHP_BASIC_GEN
*$
**Reset has higher priority in this latch and active low set and reset - basically NAND based SR latch
.SUBCKT SBRBLATCHSHP_BASIC_GEN SB RB Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(SB) < {VTHRESH},5,IF(V(RB) < {VTHRESH},-5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
.IC V(Qint) {VSS}
.ENDS SBRBLATCHSHP_BASIC_GEN
*$
.SUBCKT DFFSBRB_SHPBASIC_GEN Q QB CLK D RB SB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
GQ 0 Qint VALUE = {IF(V(SB) < {VTHRESH},5,IF(V(RB)<{VTHRESH},-5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSBRB_SHPBASIC_GEN
*$
.SUBCKT DFFSR_SHPBASIC_GEN Q QB CLK D R S PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} 
GQ 0 Qint VALUE = {IF(V(S) > {VTHRESH},5,IF(V(R) > {VTHRESH},-5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSR_SHPBASIC_GEN
*$
.SUBCKT DFFSBRB_RHPBASIC_GEN Q QB CLK D RB SB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} 
GQ 0 Qint VALUE = {IF(V(RB) < {VTHRESH},-5,IF(V(SB)< {VTHRESH},5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 5
D_D11 0 Qint D_D1 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSBRB_RHPBASIC_GEN
*$
.SUBCKT DFFSR_RHPBASIC_GEN Q QB CLK D R S PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}  
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,IF(V(S) > {VTHRESH},5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSR_RHPBASIC_GEN
*$
.SUBCKT COMP_BASIC_GEN INP INM Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
E_ABM Yint 0 VALUE {IF (V(INP) > 
+ V(INM), {VDD},{VSS})}
R1 Yint Y 1
C1 Y 0 1n
.ENDS COMP_BASIC_GEN
*$
.SUBCKT COMPHYS_BASIC_GEN INP INM HYS OUT PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
EIN INP1 INM1 INP INM 1 
EHYS INP1 INP2 VALUE { IF( V(1) > {VTHRESH},-V(HYS),0) }
EOUT OUT 0 VALUE { IF( V(INP2)>V(INM1), {VDD} ,{VSS}) }
R1 OUT 1 1
C1 1 0 5n
RINP1 INP1 0 1K
.ENDS COMPHYS_BASIC_GEN
*$
.SUBCKT COMPHYS2_BASIC_GEN INP INM HYS OUT PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
+ T=10
EIN INP1 INM1 INP INM 1 
EHYS INM2 INM1 VALUE { IF( V(1) > {VTHRESH},-V(HYS)/2,V(HYS)/2) }
EOUT OUT 0 VALUE { IF( V(INP1)>V(INM2), {VDD} ,{VSS}) }
R1 OUT 1 1
C1 1 0 {T*1e-9}
RINP1 INP1 0 10K
RINM2 INM2 0 10K
.ENDS COMPHYS2_BASIC_GEN
*$
