* INA240-SEP
*****************************************************************************
* (C) Copyright 2021 Texas Instruments Incorporated. All rights reserved.   
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.
** TI and its licensors and suppliers make no warranties, either expressed
** or implied, with respect to this model, including the warranties of
** merchantability or fitness for a particular purpose.  The model is
** provided solely on an "as is" basis.  The entire risk as to its quality
** and performance is with the customer
*****************************************************************************
*
* This model is subject to change without notice. Texas Instruments
* Incorporated is not responsible for updating this model.
*
*****************************************************************************
*
* Released by: Texas Instruments Inc.
* Part: INA240-SEP
* Date: 2022-05-17
* Model Type:  All-in-One
* Simulator: Cadence PSpice
* Simulator Version: 17.4
* Datasheet: SBOS956 –DECEMBER 2018
*
* Model Version: A
*
*****************************************************************************	
* MACRO-MODEL SIMULATED PARAMETERS:
*****************************************************************************
* AC PARAMETERS (small signal)
********************************************
* CLOSED-LOOP OUTPUT IMPEDANCE VS. FREQUENCY (Zout vs. Freq.)
* CLOSED-LOOP GAIN VS. FREQUENCY  WITH RL, CL EFFECTS (Acl vs. Freq.)
* COMMON-MODE REJECTION RATIO VS. FREQUENCY (CMRR vs. Freq.)
    * DC CMRR set to 127 dB
* POWER SUPPLY REJECTION RATIO VS. FREQUENCY (PSRR vs. Freq.)
    * DC PSRR set to +7 uV/V
* REFERENCE VOLTAGE REJECTION RATIO VS. FREQUENCY
    * DC RVRR set to -19.6 uV/V
* INPUT VOLTAGE NOISE DENSITY VS. FREQUENCY (en vs. Freq.)
**********************
* DC PARAMETERS (all tested/measured using datasheet testing conditions)
**********************
* INPUT COMMON-MODE VOLTAGE RANGE (Vcm)
* INPUT OFFSET VOLTAGE at final test at room temperature (Vos = +11.3uV at 27°C, 12V VCM, 5V VS, 2.5V VREF)
* INPUT OFFSET VOLTAGE VS. TEMPERATURE (Vos vs. Temp) (MAX +0.25 uV/°C for all variants)
* INPUT BIAS CURRENT VS. INPUT COMMON-MODE VOLTAGE (Ib vs. Vcm)
* INPUT BIAS CURRENT VS. SENSE VOLTAGE (Ib vs. Vsense)
* INPUT RESISTANCE at REF1 and REF2 pins
* GAIN ERROR (Eg) (+0.0854% at 27°C)
* GAIN ERROR DRIFT (Eg vs. Temp)(MAX +2.5 ppm/°C for all variants)
* OUTPUT VOLTAGE SWING vs. OUTPUT CURRENT (Vout vs. Iout at 125°C)
* SHORT-CIRCUIT OUTPUT CURRENT (Isc; 2mA source, -4.2mA sink)
* QUIESCENT CURRENT (Iq) 2 mA + Iout for all variants
* REFERENCE DIVIDER ACCURACY (+0.06% when V_REF2 > V_REF1 over whole temperature range)
**********************
* TRANSIENT PARAMETERS
**********************
* SLEW RATE (SR)
* OVERLOAD RECOVERY TIME (tor)
******************************************************
.SUBCKT INA240-SEP IN+ IN- VS GND OUT REF1 REF2
******************************************************
.MODEL R_NOISELESS RES (T_ABS=-273.15)
C_C10         GND N2681845  1E-15   
C_C11         N2682313 GND  1E-15   
C_C12         GND N2681581  1E-15   
C_C13         N2682047 GND  1E-15   
C_C14         GND N2681449  1E-15   
C_C15         N2681939 GND  1E-15   
C_C16         GND N2681417  1E-15   
C_C33         VS_B 0  1E-15   
C_C35         N2685127 GND  1E-15   
C_C7         N2683535 GND  1E-15   
C_C8         GND N2681001  1E-15   
C_C9         GND N2682253  1E-15   
C_CC         CLAMP GND  32.7E-9   
C_C_VIMON         GND VIMON  1E-9   
C_C_VIMON1         GND VIMON2  0.06E-9   
C_C_VOUT_S         GND VOUT_S  0.6E-9   
E_E24         N2685649 N2685469 CMR GND -0.5
E_E25         N2683999 VN CMR GND 0.5
E_E27         N2684013 N2684009 PSR GND 0.5
E_E28         N2685665 N2685659 PSR GND -0.5
E_E3         N2685123 GND OUT GND 1
E_E34         N2684009 N2683999 RVR GND -0.5
E_E35         N2685659 N2685649 RVR GND 0.5
E_E36         N2683551 VBIAS N2683535 N2685127 0.5
E_E37         VBIAS GND VS_B GND 0.5
E_E4         VBIAS N2685551 N2685127 N2683535 -0.5
G_G12         VGROSS GND CLAMP GND -1E-3
G_G15         CLAW_CLAMP GND N2685061 GND -1E-3
G_G16         CL_CLAMP GND CLAW_CLAMP GND -1E-3
G_G36         N2679983 0 VS 0 -1
G_G61         N2680419 GND GND IN- -1
G_G62         VICM GND IN+ N2680419 -0.5
G_G66         ACL GND CL_CLAMP GND -1
G_G67         VSENSE GND IN+ IN- -1
G_G79         VS GND VIMON2 GND 1E-3
G_G8         VS_CLP GND N2681001 GND -1E-3
G_G80         REF_B GND REF1 N2686873 -0.5
G_G81         N2686873 GND GND REF2 -1
G_G9         GND_CLP GND N2682253 GND -1E-3
I_I_Q         VS GND DC 2E-3  
R_R107         N2679983 0 R_NOISELESS 1
R_R110         N2679983 VS_B R_NOISELESS 1E-3
R_R147         N2680419 GND R_NOISELESS 1
R_R148         VICM GND R_NOISELESS 1
R_R153         GND VCM_MIN R_NOISELESS 1E9
R_R154         VCM_MAX GND R_NOISELESS 1E9
R_R155         GND N2686469 R_NOISELESS 1
R_R156         N2685127 N2686469 R_NOISELESS 1E-3
R_R157         GND ACL R_NOISELESS 1
R_R158         VSENSE GND R_NOISELESS 1
R_R160         VS GND  1E7 TC=0,0 
R_R211         N2686873 GND R_NOISELESS 1
R_R212         REF_B GND R_NOISELESS 1
R_R213         ACL N2686703  50K TC=0,0 
R_R214         ACL N2686703  50.06K TC=0,0 
R_R215         REF2 REF_MID  50.00K TC=0,0 
R_R216         REF1 REF_MID  50.06K TC=0,0 
R_R217         VIMON2 VIMON R_NOISELESS 100
R_R27         GND N2683521 R_NOISELESS 1
R_R28         N2683535 N2683521 R_NOISELESS 1E-3
R_R29         N2680979 VS_B R_NOISELESS 1E3
R_R30         N2681001 N2680979 R_NOISELESS 1E-3
R_R31         VS_CLP GND R_NOISELESS 1E3
R_R32         N2682237 GND R_NOISELESS 1E3
R_R33         N2682253 N2682237 R_NOISELESS 1E-3
R_R34         GND_CLP GND R_NOISELESS 1E3
R_R35         GND VS_CLP R_NOISELESS 1E9
R_R36         N2681817 GND R_NOISELESS 1
R_R37         N2681845 N2681817 R_NOISELESS 1E-3
R_R38         N2682313 N2682299 R_NOISELESS 1E-3
R_R39         GND N2682299 R_NOISELESS 1
R_R40         GND GND_CLP R_NOISELESS 1E9
R_R41         GND N2680649 R_NOISELESS 1E9
R_R42         N2681553 GND R_NOISELESS 1
R_R43         N2681581 N2681553 R_NOISELESS 1E-3
R_R44         N2682047 N2682033 R_NOISELESS 1E-3
R_R45         GND N2682033 R_NOISELESS 1
R_R46         GND N2682793 R_NOISELESS 1E9
R_R49         GND N2680507 R_NOISELESS 1E9
R_R50         N2681421 GND R_NOISELESS 1
R_R51         N2681449 N2681421 R_NOISELESS 1E-3
R_R52         N2681939 N2681925 R_NOISELESS 1E-3
R_R53         GND N2681925 R_NOISELESS 1
R_R54         GND N2682753 R_NOISELESS 1E9
R_R55         N2681417 VGROSS R_NOISELESS 1E-3
R_R60         GND N2683571 R_NOISELESS 1E6
R_R61         GND CLAMP R_NOISELESS 1E6
R_R62         GND VGROSS R_NOISELESS 1E3
R_R65         GND CLAW_CLAMP R_NOISELESS 1E3
R_R66         GND CL_CLAMP R_NOISELESS 1E3
R_R81         GND N2685095 R_NOISELESS 1E9
R_R82         VIMON N2685095 R_NOISELESS 100
R_R83         GND N2685123 R_NOISELESS 1E9
R_R84         VOUT_S N2685123 R_NOISELESS 100
R_RBIAS         N2685469 N2683953  6.8965K TC=0,0 
R_RINT1         N2713204 N2683953  25K TC=0,0 
R_RINT2         N2685469 N2713204  25K TC=0,0 
R_R_IN         N2685551 N2684059 R_NOISELESS 4.75K
R_R_INN         N2685469 IN- R_NOISELESS 1E-6
R_R_INP         N2683953 IN+ R_NOISELESS 1E-6
R_R_IP         N2683551 N2683557 R_NOISELESS 4.75K
V_VCM_MAX         VCM_MAX GND 80.5
V_VCM_MIN         VCM_MIN GND -4.3
V_V_GRN         N2682753 GND -8.52
V_V_GRP         N2680507 GND 7.2
V_V_ISCN         N2682793 GND -4.2
V_V_ISCP         N2680649 GND 2
X_AOL_1         N2683557 N2684059 GND N2683571 AOL_1_INA240-SEP 
X_AOL_2         N2683571 GND GND CLAMP AOL_2_INA240-SEP PARAMS:  GAIN=1E-2 IPOS=6.54E-2
+  INEG=-6.45E-2
X_CLAWN         GND VIMON2 GND N2682237 CLAWN_INA240-SEP 
X_CLAWP         VIMON2 GND N2680979 VS_B CLAWP_INA240-SEP 
X_CLAW_AMP         VS_CLP GND_CLP VOUT_S GND N2681817 N2682299 CLAMP_AMP_LO_INA240-SEP 
X_CLAW_SRC         N2681845 N2682313 CLAW_CLAMP GND CLAW_SRC_INA240-SEP PARAMS:  GAIN=1
+  IPOS=1.44E-2 INEG=-1.7E-2
X_CL_AMP         N2680649 N2682793 VIMON GND N2681553 N2682033 CLAMP_AMP_LO_INA240-SEP 
X_CL_SRC         N2681581 N2682047 CL_CLAMP GND CL_SRC_INA240-SEP PARAMS:  GAIN=1
+  IPOS=2.88E-2 INEG=-3.41E-2
X_DC_REJ_SUB_CMR         VICM GND N2679663 GND DC_REJ_SUB_INA240-SEP PARAMS:  DC_REJ=127
+  R=1
X_DC_REJ_SUB_PSR         VS_B GND N2680359 GND DC_REJ_SUB_INA240-SEP PARAMS:  DC_REJ=103.1
+  R=1
X_GR_AMP         N2680507 N2682753 N2681417 GND N2681421 N2681925 CLAMP_AMP_HI_INA240-SEP 
X_GR_SRC         N2681449 N2681939 CLAMP GND GR_SRC_INA240-SEP PARAMS:  GAIN=1
+  IPOS=1.31E-1 INEG=-1.31E-1
X_H3    OUT N2685669 N2685095 GND 08_COMPLETE_A1_H3_INA240-SEP 
X_IBN_VCM         N2685469 GND VICM IBN_VCM_INA240-SEP 
X_IBP_VCM         N2683953 GND VICM IBP_VCM_INA240-SEP 
X_P1_1         VGROSS GND N2685043 GND P1_INA240-SEP PARAMS:  GAIN=1 FP=2E6 R=1E6
X_P1_2         N2685043 GND N2685049 GND P1_INA240-SEP PARAMS:  GAIN=1 FP=2.2E6 R=1E6
X_P1_3         N2685049 GND N2685055 GND P1_INA240-SEP PARAMS:  GAIN=1 FP=2.2E6 R=1E6
X_P1_4         N2685055 GND N2685061 GND P1_INA240-SEP PARAMS:  GAIN=1 FP=2.3E6 R=1E6
X_PZ1_7         N2691316 GND N2691324 GND GND PZ1_INA240-SEP PARAMS:  GAIN=1 FP=11.4K
+  FZ=85E3 R=1E4
X_PZ1_8         N2691324 GND N2691330 GND GND PZ1_INA240-SEP PARAMS:  GAIN=1 FP=11.4K
+  FZ=87E3 R=1E5
X_PZ1_9         N2691330 GND N2691336 GND GND PZ1_INA240-SEP PARAMS:  GAIN=1 FP=11.4K
+  FZ=87E3 R=1E5
X_U108         REF_B GND N2687067 GND DC_REJ_SUB_INA240-SEP PARAMS:  DC_REJ=96.5 R=1
X_U113         REF_MID N2683557 GAIN_RES_DRIFT_INA240-SEP PARAMS:  G_RES=70.075K
+  DRIFT_RES_ROOM=950 RES_DRIFT=250E-6 POL=1
X_U120         N2686703 N2684059 GAIN_RES_DRIFT_INA240-SEP PARAMS:  G_RES=70.075K
+  DRIFT_RES_ROOM=950 RES_DRIFT=250E-6 POL=1
X_U121         N2687067 GND RVR GND P1_INA240-SEP PARAMS:  GAIN=1 FP=1.5E6 R=1E6
X_U5         N2691336 GND N2691342 GND GND ZP1_INA240-SEP PARAMS:  GAIN=1 FP=150K FZ=85E3
+  R=1E6
X_U6         N2691342 GND N2691604 GND P1_INA240-SEP PARAMS:  GAIN=1 FP=280K R=1E6
X_VCM_CLAMPN         N2685665 GND N2686469 GND VCM_MAX VCM_MIN VCM_CLAMP_INA240-SEP 
X_VCM_CLAMPP         N2684013 GND N2683521 GND VCM_MAX VCM_MIN VCM_CLAMP_INA240-SEP 
X_VNOISE         N2683985 VN VNOISE_INA240-SEP PARAMS:  NV=40
X_VOS_DRIFT         N2683985 N2683953 VOS_DRIFT_INA240-SEP PARAMS:  DC=20E-6 DRIFT=250E-9
+  POL=1
X_ZOUT_DC_SUB1         ACL N2691612 N2691316 N2685669 GND ZOUT_DC_SUB_INA240-SEP PARAMS: 
+  ZOUT_DC=0.39 ZOUT_MAX=600
X_ZP1LIM1         N2691604 GND N2691612 GND GND ZP1LIM_INA240-SEP PARAMS:  GAIN=1 FZ=600K
+  FP=1E11 R=1E8 IPOS=2.4E2 INEG=-5.04E2
X_ZP1_1         N2679663 GND CMR GND GND ZP1_INA240-SEP PARAMS:  GAIN=1 FP=1E8 FZ=800
+  R=1E6
X_ZP1_6         N2680359 GND PSR GND GND ZP1_INA240-SEP PARAMS:  GAIN=1 FP=1E8 FZ=2.1K
+  R=1E6
.ENDS  INA240-SEP
*
.SUBCKT 08_COMPLETE_A1_H3_INA240-SEP 1 2 3 4  
H_H3         3 4 VH_H3 -1E3
VH_H3         1 2 0V
.ENDS  08_COMPLETE_A1_H3_INA240-SEP
*
.SUBCKT AOL_1_INA240-SEP VC+ VC- IOUT+ IOUT-
+ PARAMS:
+ GAIN = 1E-4
+ IPOS = .5
+ INEG = -.5
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}
.ENDS  AOL_1_INA240-SEP
*
.SUBCKT AOL_2_INA240-SEP VC+ VC- IOUT+ IOUT-
+ PARAMS:
+ GAIN = 1E-2
+ IPOS = 2.66E-02
+ INEG = -2.66E-02
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}
.ENDS  AOL_2_INA240-SEP
*
.SUBCKT CLAMP_AMP_HI_INA240-SEP VC+ VC- VIN COM VO+ VO-
.PARAM G = 10
GVO+ COM VO+ VALUE = {IF(V(VIN,COM)>V(VC+,COM),((V(VIN,COM)-V(VC+,COM))*G),0)}
GVO- COM VO- VALUE = {IF(V(VIN,COM)<V(VC-,COM),((V(VC-,COM)-V(VIN,COM))*G),0)}
.ENDS  CLAMP_AMP_HI_INA240-SEP
*
.SUBCKT CLAMP_AMP_LO_INA240-SEP VC+ VC- VIN COM VO+ VO-
.PARAM G = 1
GVO+ COM VO+ VALUE = {IF(V(VIN,COM)>V(VC+,COM),((V(VIN,COM)-V(VC+,COM))*G),0)}
GVO- COM VO- VALUE = {IF(V(VIN,COM)<V(VC-,COM),((V(VC-,COM)-V(VIN,COM))*G),0)}
.ENDS  CLAMP_AMP_LO_INA240-SEP
*
.SUBCKT CLAWN_INA240-SEP VC+ VC- IOUT+ IOUT-
G1 IOUT+ IOUT- TABLE {(V(VC+,VC-))} =
+(0, 5E-6)
+(1, 7.5E-5)
+(2, 1.75E-4)
+(2.82, 3.3E-4)
+(3, 4.0E-4)
+(3.3, 6.0E-4)
+(3.73, 1.2E-3)
+(3.98, 1.8E-3)
+(4.0, 2.45E-3)
+(4.2, 2.99E-3)
.ENDS  CLAWN_INA240-SEP
*
.SUBCKT CLAWP_INA240-SEP VC+ VC- IOUT+ IOUT-
G1 IOUT+ IOUT- TABLE {(V(VC+,VC-))} =
+(0, 5E-5)
+(0.48, 1.40E-4)
+(0.88, 1.6E-4)
+(1, 2.3E-4)
+(1.72, 3.00E-4)
+(1.824, 3.94E-4)
+(2.02, 1.2E-3)
+(2.1, 2.90E-3)
.ENDS  CLAWP_INA240-SEP
*
.SUBCKT CLAW_SRC_INA240-SEP VC+ VC- IOUT+ IOUT-
+ PARAMS:
+ GAIN = 1
+ IPOS = 7E-2
+ INEG = -8.8E-2
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}
.ENDS  CLAW_SRC_INA240-SEP
*
.SUBCKT CL_SRC_INA240-SEP VC+ VC- IOUT+ IOUT-
+ PARAMS:
+ GAIN = 1
+ IPOS = 1.4E-1
+ INEG = -1.76E-1
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}
.ENDS  CL_SRC_INA240-SEP
*
.SUBCKT DC_REJ_SUB_INA240-SEP VC+ VC- OUT+ OUT-
+ PARAMS:
+ DC_REJ = 120
+ R = 1
.MODEL R_NOISELESS RES (T_ABS=-273.15)
.PARAM GG1 = {PWR(10, (-(DC_REJ)/20))}
G1 OUT- OUT+ VC+ VC- {GG1}
R1 OUT+ OUT- R_NOISELESS  {R}
.ENDS  DC_REJ_SUB_INA240-SEP
*
.SUBCKT GAIN_RES_DRIFT_INA240-SEP 1 2
+ PARAMS:
+ G_RES = 20E3
+ DRIFT_RES_ROOM = 100
+ RES_DRIFT = 1E-6
+ POL = 1
.MODEL R_NOISELESS RES (T_ABS=-273.15)
.MODEL R_DRIFT RES (TC1={RES_DRIFT})
R1 1 3 R_NOISELESS {G_RES-DRIFT_RES_ROOM}
R2 2 3 R_DRIFT {DRIFT_RES_ROOM}
.ENDS  GAIN_RES_DRIFT_INA240-SEP
*
.SUBCKT GR_SRC_INA240-SEP VC+ VC- IOUT+ IOUT-
+ PARAMS:
+ GAIN = 1
+ IPOS = 5.32E-2
+ INEG = -5.32E-2
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}
.ENDS  GR_SRC_INA240-SEP
*
.SUBCKT IBN_VCM_INA240-SEP VINN GND VCM
G1 VINN GND TABLE {(V(VCM,GND))} =
+(-4.8, -100E-6)
+(-4.2, -15.1E-6)
+(0, -3.1E-6)
+(1, -0.1E-6)
+(4.9, 14.9E-6)
+(5.2, 69.9E-6)
+(12, 89.1E-6)
+(70, 199.9E-6)
+(80.3, 219.9E-6)
+(90.1, 260E-6)
+(90.5, 500E-6)
.ENDS  IBN_VCM_INA240-SEP
*
.SUBCKT IBP_VCM_INA240-SEP VINP GND VCM
G1 VINP GND TABLE {(V(VCM,GND))} =
+(-4.8, -100E-6)
+(-4.2, -15E-6)
+(0, -3E-6)
+(1, 0E-6)
+(4.9, 15E-6)
+(5.2, 70E-6)
+(12, 90E-6)
+(70, 200E-6)
+(80.3, 220E-6)
+(90.1, 260E-6)
+(90.5, 500E-6)
.ENDS  IBP_VCM_INA240-SEP
*
.SUBCKT P1_INA240-SEP VC+ VC- OUT+ OUT-
+ PARAMS: 
+ GAIN = 1
+ FP = 1
+ R = 1E6
.MODEL R_NOISELESS RES (T_ABS=-273.15)
.PARAM CC1 = {1/(6.2831853 * FP * R)}
.PARAM GG1 = {GAIN / R}
G1 OUT- OUT+ VC+ VC- {GG1}
R1 OUT+ OUT- R_NOISELESS {R}
C1 OUT+ OUT- {CC1}
.ENDS  P1_INA240-SEP
*
.SUBCKT PZ1_INA240-SEP VC+ VC- OUT+ OUT- 1
+ PARAMS: 
+ GAIN = 1
+ FP = 1E3
+ FZ = 1E4
+ R = 1E6
.MODEL R_NOISELESS RES (T_ABS=-273.15)
.PARAM CC1 = {1/(6.2831853 * FZ * R)}
.PARAM RR1 = {(1/(6.2831853 * FP * CC1)) - R}
C1 2 1 {CC1}
G1 OUT- OUT+ 3 1 {GAIN}
R1 VC+ 3 R_NOISELESS {RR1}
R2 3 2 R_NOISELESS {R}
R3 OUT+ OUT- R_NOISELESS 1
.ENDS  PZ1_INA240-SEP
*
.SUBCKT VCM_CLAMP_INA240-SEP VIN+ VIN- IOUT- IOUT+ VP+ VP-
.PARAM GAIN = 1
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VIN+,VIN-),V(VP-,VIN-), V(VP+,VIN-))}
.ENDS  VCM_CLAMP_INA240-SEP
*
.SUBCKT VNOISE_INA240-SEP 1 2
+ PARAMS:
+ NV = 1E3
.PARAM RNV={1.184*PWR(NV,2)}
R4 5 0 {RNV}
R5 5 0 {RNV}
E3 1 2 5 0 10
.ENDS  VNOISE_INA240-SEP
*
.SUBCKT VOS_DRIFT_INA240-SEP VOS+ VOS-
+ PARAMS:
+ DC = 20E-6
+ DRIFT = 1E-6
+ POL = 1
E1 VOS+ VOS- VALUE={DC+POL*DRIFT*(TEMP-27)}
.ENDS  VOS_DRIFT_INA240-SEP
*
.SUBCKT ZOUT_DC_SUB_INA240-SEP INA INB OUTA OUTB COM
+ PARAMS:
+ ZOUT_DC = 1
+ ZOUT_MAX = 1E3
.MODEL R_NOISELESS RES (T_ABS=-273.15)
.PARAM BETA = 1
.PARAM RDUMMY = {10*ZOUT_MAX}
.PARAM RX = {100*ZOUT_MAX}
.PARAM G1 = {RX/(ZOUT_DC*BETA)}
G1 COM OUTA INA OUTB {G1}
R1 OUTA COM R_NOISELESS 1
RDUMMY OUTB COM R_NOISELESS {RDUMMY}
RX INB OUTB R_NOISELESS {RX}
.ENDS  ZOUT_DC_SUB_INA240-SEP
*
.SUBCKT ZP1_INA240-SEP VC+ VC- OUT+ OUT- 1
+ PARAMS:
+ GAIN = 1
+ FZ = 1E3
+ FP = 1E4
+ R = 1E6
.MODEL R_NOISELESS RES (T_ABS=-273.15)
.PARAM GG1 = {GAIN * FP/FZ}
.PARAM CC1 = {1/(6.2831853 * FZ * R)}
.PARAM RR1 = {R/(FP/FZ - 1)}
C1 VC+ 2 {CC1}
G1 OUT- OUT+ 2 1 {GG1}
R1 VC+ 2 R_NOISELESS {R}
R2 2 1 R_NOISELESS {RR1}
R3 OUT+ OUT- R_NOISELESS 1
.ENDS  ZP1_INA240-SEP
*
.SUBCKT ZP1LIM_INA240-SEP VC+ VC- OUT+ OUT- 1
+ PARAMS:
+ GAIN = 1
+ FZ = 1E3
+ FP = 1E4
+ R = 1E6
+ IPOS = 1.72E3
+ INEG = -2.9E3
.MODEL R_NOISELESS RES (T_ABS=-273.15)
.PARAM GG1 = {GAIN * FP/FZ}
.PARAM CC1 = {1/(6.2831853 * FZ * R)}
.PARAM RR1 = {R/(FP/FZ - 1)}
C1 VC+ 2 {CC1}
G1 OUT- OUT+ VALUE={LIMIT(GG1 * V(2, 1), INEG, IPOS)}
R1 VC+ 2 R_NOISELESS {R}
R2 2 1 R_NOISELESS {RR1}
R3 OUT+ OUT- R_NOISELESS 1
.ENDS  ZP1LIM_INA240-SEP
*