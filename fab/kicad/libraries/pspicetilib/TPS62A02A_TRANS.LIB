*$
* TPS62A02A
*****************************************************************************
* (C) Copyright 2022 Texas Instruments Incorporated. All rights reserved.                                            
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.
** TI and its licensors and suppliers make no warranties, either expressed
** or implied, with respect to this model, including the warranties of 
** merchantability or fitness for a particular purpose.  The model is
** provided solely on an "as is" basis.  The entire risk as to its quality
** and performance is with the customer
*****************************************************************************
*
* This model is subject to change without notice. Texas Instruments
* Incorporated is not responsible for updating this model.
*
*****************************************************************************
*
** Released by: Texas Instruments Inc.
* Part: TPS62A02A
* Date: 25JUL2022
* Model Type: TRANSIENT 
* Simulator: PSPICE
* Simulator Version: 17.4-2019-S024
* EVM Order Number: TPS62A02AEVM-197
* EVM Users Guide: SLUUCJ8 – MAY 2022
* Datasheet: SLUSEG9B – JULY 2022 – REVISED JULY 2022 
* Topologies Supported: Buck
*
* Model Version: Final 1.00
*
*****************************************************************************
*
* Updates:
*
* Final 1.00
* Release to Web.
*
*****************************************************************************
*
* Model Usage Notes:
*
* A. Features have been modelled
*     1. Switching Characteristics and variation with VIN
*     2. Power Good functionality and delay.
*     3. VIN UVLO and high side Current limit.
*	   4. Zero current detection and FPWM mode.
*	   5. Hiccup and foldback during current limit.
*     6. Low side valley current limit is implemented.
*
* B. Features have not been modelled
*	  1. Operating Quiescent Current
*    2. Shutdown Current 
*    3. Temperature dependent characteristics
*    4. Current through Pins EN,MODE_SYNC,COMP_FSET,FB are not modelled.
*
* C. Application Notes
*	  1. The parameter SS has been used to reach the steady state faster. 
*      Keep SS = 0 to observe startup behaviour. 
*      Keep SS = 1 and appropriate IC on Inductor and capacitor to observe for faster Steady state.
*    2. Ground pins have been tied to 0V internally. 
*      Therefore, this model cannot be used for inverting topologies
*
*****************************************************************************
.SUBCKT TPS62A02A_TRANS EN FB GND PG SW VIN PARAMS: SS=0
X_U7_U627         PAUSE PWM U7_N16786454 NOR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U7_U8         0 U7_N16808630 LDRV U7_NMOS_CTRL MUX2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.8
C_U7_C77         U7_N16818924 0  20n  
R_U7_R144         U7_N16831630 U7_N16818544  1  
X_U7_H1    VIN U7_N16795596 ISW 0 Driver_U7_H1 
R_U7_R5         U7_N16808677 U7_N16808630  1  
C_U7_C78         U7_N16818544 0  20n  
R_U7_R143         U7_N16831622 U7_N16818924  1  
C_U7_C3         0 U7_N16808630  1n  
X_U7_S32    U7_PMOS_CTRL 0 U7_N16795596 SW Driver_U7_S32 
C_U7_C2         0 U7_N16810523  1n  
X_U7_H2    U7_N16796761 0 ISENSE_LS 0 Driver_U7_H2 
X_U7_U630         U7_N16803234 U7_N16803765 HDRV AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U7_U626         PWM U7_N16818924 U7_N16803234 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
D_U7_D14         U7_N16796761 SW D_D1 
D_U7_D15         SW U7_N16795596 D_D1 
X_U7_U7         0 U7_N16810523 HDRV U7_PMOS_CTRL MUX2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.8
E_U7_ABM170         U7_N16831622 0 VALUE { {IF(V(LDRV) > 0.8,0,1)}    }
X_U7_U629         PAUSE U7_N16803765 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U7_U628         U7_N16786454 U7_N16818544 LDRV AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
R_U7_R4         U7_N16810572 U7_N16810523  1  
E_U7_ABM171         U7_N16831630 0 VALUE { {IF(V(HDRV) > 0.8,0,1)}    }
E_U7_ABM5         U7_N16808677 0 VALUE { 1m*((296.576/(V(VIN)
+  -13.462))+843.558)    }
X_U7_S31    U7_NMOS_CTRL 0 SW U7_N16796761 Driver_U7_S31 
E_U7_ABM4         U7_N16810572 0 VALUE { 1m*((-146.5/(V(VIN) +0.179))+800.1389)
+     }
D_D64         PG_INT PG_DLY D_D1 
X_U39         N16827061 N16827641 N16828051 OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
E_U3_ABM181         U3_N16784630 0 VALUE { IF(V(SDWN) > 0.5,1,0)    }
V_U3_V3         U3_N16784183 0 3
R_U3_R16         U3_N16784630 U3_N16784633  1  
R_U3_R17         U3_N16784242 U3_N16785317  1  
X_U3_S69    U3_N16784633 0 SS_TR 0 SoftStart_U3_S69 
E_U3_E2         U3_N16784242 0 VALUE { LIMIT(V(SS_TR, 0),0,1) }
C_U3_C19         0 U3_N16785317  1n IC={SS*1} 
E_U3_E11         INT_REF 0 U3_N16785317 0 600m
G_U3_ABMII2         0 SS_TR VALUE { {IF(V(SDWN) > 0.5,0,1u)}    }
C_U3_C18         0 U3_N16784633  1n  
D_U3_D72         SS_TR U3_N16784183 D_D2 
C_U3_C20         SS_TR 0  1n IC={SS*3} TC=0,0 
X_U46         CLIM N16830161 INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
R_U30_R4         U30_N16626311 U30_N16626295  1  
R_U30_R11         EN_LOGIC U30_EN_LOGIC_IN  273.6k  
X_U30_U34         UVLO_OUT U30_EN_LOGIC_IN SDWN_N AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U30_U5         EN U30_N16626295 EN_LOGIC COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
C_U30_C11         0 U30_EN_LOGIC_IN  1n  
X_U30_U33         SDWN_N SDWN INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
C_U30_C5         0 U30_N16626295  1n  
E_U30_ABM1         U30_N16625613 0 VALUE { ((V(UVLO_OUT) * -100m) + 2.45)    }
R_U30_R10         U30_N16625613 U30_N16625631  1  
D_U30_D1         U30_EN_LOGIC_IN EN_LOGIC D_D1 
C_U30_C10         0 U30_N16625631  1n  
E_U30_ABM4         U30_N16626311 0 VALUE { (V(U30_EN_LOGIC_IN) * -0.1) + 0.9   
+  }
X_U30_S1    H_END 0 U30_EN_LOGIC_IN 0 Enable_U30_S1 
X_U30_U30         VIN U30_N16625631 UVLO_OUT COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
D_D15         GND PG D_D1 
X_U40         N16828051 N16830033 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
C_C1         GND PG_DLY  1.443n IC=0 
X_U44         N16830599 PWM_INT N16830161 PWM MUX2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.8
V_V47         SET0 GND 0Vdc
X_S1    N16787860 GND PG GND TPS62A02A_TRANS_S1 
X_U14         HDRV N16827671 N16827641 N16827674 SRLATCHRHP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
V_V54         VLCL GND 2.6
X_U11_U14         U11_S0_Z U11_S1_Z U11_RESET_Z U11_SKIP_REQUEST_Z
+  U11_N16601049 AND4_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U11_U8         U11_S1 U11_S1_Z INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U11_U32         U11_SKIP_REQUEST_Z U11_SKIP_REQUEST_INT INV_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
C_U11_C148         0 U11_N16666627  1n  
X_U11_U31         U11_ZERO_COMP_Z U11_ZERO_COMP_INT INV_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U11_U12         U11_S0 U11_S1 U11_RESET_Z U11_ZERO_COMP_Z U11_N16599900
+  AND4_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U11_U27         U11_N16603849 U11_S1 BUF_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5 DELAY=10n
X_U11_U33         U11_SKIP_REQUEST_INT U11_N16666627 U11_SKIP_TIMER_Z
+  NAND2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U11_U25         U11_S1 U11_S0 U11_SKIP_REQUEST_INT U11_N16597961
+  AND3_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U11_U24         U11_S0 U11_S1 U11_RESET_Z U11_TOFF_COMP_Z U11_N16598475
+  AND4_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U11_U23         U11_N16598498 U11_N16598475 U11_N16597961 U11_N16627508
+  OR3_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U11_U35         TOFF_COMP U11_TOFF_COMP_Z INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U11_U21         U11_S1_Z PAUSE BUF_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
R_U11_R257         U11_SKIP_REQUEST_INT U11_N16666627  5.76k  
X_U11_U13         U11_S0_Z U11_S1 U11_RESET_Z U11_SKIP_TIMER_Z U11_N16603042
+  AND4_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U11_U5         U11_S0 U11_S0_Z INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U11_U15         U11_S0 U11_S1 U11_RESET_Z U11_SKIP_REQUEST_Z U11_N16601414
+  AND4_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U11_U19         U11_S1 U11_S0_Z U11_RESET_Z ISENSE_COMP U11_N16598498
+  AND4_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U11_U26         U11_N16627508 U11_S0 BUF_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5 DELAY=10n
X_U11_U18         U11_N16603460 U11_N16601970 U11_N16603849 OR2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U11_U17         U11_N16599687 U11_N16599900 U11_N16603042 U11_N16601049
+  U11_N16603460 OR4_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U11_U28         SS_END U11_FPWM_ON_Z INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U11_U29         COMP_HIGH U11_FPWM_ON_Z U11_SKIP_REQUEST_Z NAND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U11_U34         SDWN U11_RESET_Z INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
D_U11_D60         U11_N16666627 U11_SKIP_REQUEST_INT D_D1 
X_U11_U11         U11_S1 U11_S0_Z U11_RESET_Z ISENSE_COMP U11_N16599687
+  AND4_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U11_U16         U11_N16601414 TOFF_COMP U11_N16601970 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U11_U30         ZERO_COMP U11_FPWM_ON_Z U11_ZERO_COMP_Z NAND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U11_U20         U11_S1 U11_S0_Z PWM_INT AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_HICCUP_TPS62A01_U612         HICCUP_TPS62A01_N16777862
+  HICCUP_TPS62A01_N16777897 HICCUP_TPS62A01_N16777878 COMP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
X_HICCUP_TPS62A01_U613         HICCUP_TPS62A01_N16777550
+  HICCUP_TPS62A01_N16777588 HICCUP_TPS62A01_N16777580 OR2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_HICCUP_TPS62A01_U30         HICCUP_TPS62A01_N16777435
+  HICCUP_TPS62A01_N16777476 HICCUP HICCUP_TPS62A01_HICCUP_N SRLATCHRHP_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_HICCUP_TPS62A01_S3    HICCUP_TPS62A01_N16778041 0 HICCUP_TPS62A01_N16777862 0
+  HICCUP_NEW_HICCUP_TPS62A01_S3 
X_HICCUP_TPS62A01_U614         CLIM PWM HICCUP_TPS62A01_HICCUP_N
+  HICCUP_TPS62A01_N16777381 AND3_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
R_HICCUP_TPS62A01_R4         0 HICCUP_TPS62A01_N16777585  1e8  
X_HICCUP_TPS62A01_S4    HICCUP_TPS62A01_HICCUP_N 0 HICCUP_TPS62A01_N16777769 0
+  HICCUP_NEW_HICCUP_TPS62A01_S4 
V_HICCUP_TPS62A01_V1         HICCUP_TPS62A01_N16777483 0 42
X_HICCUP_TPS62A01_U611         HICCUP_TPS62A01_H_END HICCUP_TPS62A01_N16778155
+  HICCUP_TPS62A01_N16778014 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_HICCUP_TPS62A01_U25         HICCUP_TPS62A01_N16777381
+  HICCUP_TPS62A01_N16777373 HICCUP_TPS62A01_N16777432 MONONEG_PS PARAMS:
+  PW=50e-9
V_HICCUP_TPS62A01_V2         HICCUP_TPS62A01_N16777456 0 42
R_HICCUP_TPS62A01_R7         0 HICCUP_TPS62A01_N16777875  1e8  
V_HICCUP_TPS62A01_V5         HICCUP_TPS62A01_N16778059 0 0.1
G_HICCUP_TPS62A01_G5         0 HICCUP_TPS62A01_N16777769 HICCUP 0 1u
X_HICCUP_TPS62A01_U618         HICCUP_TPS62A01_N16778014 H_TIM
+  HICCUP_TPS62A01_N16778041 OR2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
D_HICCUP_TPS62A01_D10         HICCUP_TPS62A01_N16777404
+  HICCUP_TPS62A01_N16777483 D_D1 
G_HICCUP_TPS62A01_G3         0 HICCUP_TPS62A01_N16777404
+  HICCUP_TPS62A01_N16777373 0 1
X_HICCUP_TPS62A01_U610         HICCUP_TPS62A01_H_END HICCUP_TPS62A01_N16778155
+  INV_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY=10u
X_HICCUP_TPS62A01_S2    HICCUP_TPS62A01_N16777580 0 HICCUP_TPS62A01_N16777404 0
+  HICCUP_NEW_HICCUP_TPS62A01_S2 
V_HICCUP_TPS62A01_V3         HICCUP_TPS62A01_N16777938 0 40
X_HICCUP_TPS62A01_U609         HICCUP_TPS62A01_N16777404
+  HICCUP_TPS62A01_N16777456 HICCUP_TPS62A01_N16777435 COMP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
R_HICCUP_TPS62A01_R2         HICCUP_TPS62A01_N16777486 HICCUP  1  
C_HICCUP_TPS62A01_C2         0 HICCUP_TPS62A01_N16777486  1n  
V_HICCUP_TPS62A01_V4         HICCUP_TPS62A01_N16777897 0 32.5
C_HICCUP_TPS62A01_C3         0 HICCUP_TPS62A01_N16777862  50n IC=0 
X_HICCUP_TPS62A01_U622         HICCUP CLIM PWM HICCUP_TPS62A01_N16777839
+  AND3_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_HICCUP_TPS62A01_U608         HICCUP_TPS62A01_N16777486
+  HICCUP_TPS62A01_N16777697 HICCUP_TPS62A01_N16777588 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
C_HICCUP_TPS62A01_C4         0 H_END  1n  
D_HICCUP_TPS62A01_D11         HICCUP_TPS62A01_N16777862
+  HICCUP_TPS62A01_N16777938 D_D1 
C_HICCUP_TPS62A01_C5         0 HICCUP_TPS62A01_N16777769  1n  
X_HICCUP_TPS62A01_U27         HICCUP_TPS62A01_N16777839
+  HICCUP_TPS62A01_N16777830 HICCUP_TPS62A01_N16777875 MONONEG_PS PARAMS:
+  PW=50e-9
R_HICCUP_TPS62A01_R6         0 HICCUP_TPS62A01_N16777432  1e8  
X_HICCUP_TPS62A01_U616         CLIM HICCUP_TPS62A01_N16777577 INV_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
R_HICCUP_TPS62A01_R3         H_END HICCUP_TPS62A01_N16777878  1  
X_HICCUP_TPS62A01_U621         H_TIM HICCUP HICCUP_TPS62A01_H_END
+  AND2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
G_HICCUP_TPS62A01_G4         0 HICCUP_TPS62A01_N16777862
+  HICCUP_TPS62A01_N16777830 0 1
C_HICCUP_TPS62A01_C1         0 HICCUP_TPS62A01_N16777404  36n IC=0 
X_HICCUP_TPS62A01_U607         HICCUP_TPS62A01_N16777486
+  HICCUP_TPS62A01_N16777697 INV_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
+  DELAY=100u
X_HICCUP_TPS62A01_U26         HICCUP_TPS62A01_N16777577
+  HICCUP_TPS62A01_N16777550 HICCUP_TPS62A01_N16777585 MONONEG_PS PARAMS: PW=.5u
X_HICCUP_TPS62A01_U617         HICCUP_TPS62A01_N16777769
+  HICCUP_TPS62A01_N16778059 H_TIM COMP_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_HICCUP_TPS62A01_U615         H_TIM HICCUP_TPS62A01_H_END
+  HICCUP_TPS62A01_N16777476 OR2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U43         N16830596 ISENSE_COMP N16830599 N16830605 SRLATCHRHP_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U24         N16827653 N16827690 BUF_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5 DELAY=5n
X_U35         N16737739 VIN VIN_LOW COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
E_U4_ABM182         U4_N16797636 0 VALUE { IF(V(SDWN) > 0.5,1,0)    }
E_U4_ABM156         U4_N16806432 0 VALUE { IF(V(HICCUP)<0.5,1.14,0.7675)    }
D_U4_D9         U4_A2 COMP D_D1 
R_U4_R17         U4_N16806432 U4_ILIM  1k  
C_U4_Cc1         COMP U4_N167721961  40p  
R_U4_R11         U4_N7414368 U4_N7414364  1  
C_U4_Cc2         COMP 0  500f  
X_U4_U615         U4_N16781719 PFM_MODE COMP_HIGH AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
C_U4_C15         0 U4_N16797639  1n  
C_U4_C16         0 U4_ILIM  10.8n  
R_U4_R16         U4_N16797636 U4_N16797639  1  
E_U4_ABM183         U4_A1 0 VALUE { IF(V(SDWN) > 0.5,0,IF(V(SS_END) > 0.5, 0,
+  0.765))    }
X_U4_U625         FB INT_REF U4_N16781719 COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
X_U4_U614         U4_N7414364 U4_SDWN_N CLIM AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
C_U4_C9         0 U4_N7414364  1n  
E_U4_ABM8         U4_N7414368 0 VALUE { {IF(V(COMP) > V(U4_ILIM),1,0)}    }
R_U4_R15         U4_A1 U4_A2  1  
X_U4_S68    U4_N16797639 0 COMP 0 ErrorAmp_U4_S68 
E_U4_ABM181         U4_N16794381 0 VALUE { IF((V(U4_A1)-V(U4_A2)) > 100n, 1,0 )
+     }
D_U4_D10         COMP U4_ILIM D_D1 
C_U4_C11         0 PFM_MODE  1n  
R_U4_Rc1         0 U4_N167721961  200k  
R_U4_R13         U4_N16794381 PFM_MODE  1  
G_U4_ABM2I3         0 COMP VALUE { {LIMIT((V(INT_REF) - V(FB))*40u, -2u,2u)}   
+  }
X_U4_U624         SDWN U4_SDWN_N INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
D_U5_D58         U5_N16489275 U5_N16489395 D_D1 
X_U5_U13         LDRV U5_N16788510 U5_N16788570 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
E_U5_ABM152         U5_ISWF 0 VALUE { {IF(V(U5_N16489275) > 0.5,  
+ V(ISW),-1)}   }
X_U5_U12         0 ISENSE_LS U5_N16788510 COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
X_U5_U600         U5_ISWF U5_ICTRL ISENSE_COMP COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
E_U5_ABM151         U5_N16489395 0 VALUE { {IF(V(HDRV) > 0.5, 1,0)}    }
E_U5_ABM155         U5_ICTRL 0 VALUE { LIMIT(((V(COMP)-0.61)/3.5k)*20000,0,3.5)
+     }
C_U5_C146         0 U5_N16489275  1n  
R_U5_R255         U5_N16489395 U5_N16489275  28.8  
X_U5_U14         U5_N16788570 HDRV ZERO_COMP N16788580 SRLATCHRHP_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U23         ISENSE_COMP N16827653 one_shot PARAMS:  T=45  
E_ABM1         SS_END 0 VALUE { IF(V(INT_REF)>0.595,1,0)    }
X_U2         FB N16781315 N16781349 PG_INT COMPHYS_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=100u
V_V50         N16737739 GND 1.4
E_ABM2         N16827671 0 VALUE { IF(V(N16827653)<0.5 & V(N16827690)>0.5,1,0) 
+    }
X_U45         N16830033 N16830596 one_shot PARAMS:  T=20  
G_G1         PG_INT PG_DLY VALUE { V(PG_INT,PG_DLY)/((9.959*V(VIN)+2.7)*1K) }
X_U36         PG_DLY UVLO_OUT EN_LOGIC N16783732 AND3_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
V_V53         N16781349 GND 25m
E_E4         N16781315 GND INT_REF GND .96
X_U37         N16783732 SS_END N16794820 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U38         ISENSE_LS VLCL N16827061 COMP_BASIC_GEN PARAMS: VDD=1.8 VSS=0
+  VTHRESH=1
R_U10_R5         0 U10_N16782235  519.2k  
X_U10_U20         U10_N16863003 LDRV TOFF_COMP AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
G_U10_ABM2I4         U10_N16839301 U10_TOFF_CAP VALUE { min(V(U10_IMAX),
+  max((8.7002*V(U10_I_VOUT)-1e-7),0))    }
E_U10_ABM3         U10_TOFF_REF 0 VALUE {
+  (V(U10_I_VIN)-(0.5*V(U10_I_VOUT)))*648.68k    }
V_U10_V2         U10_N16839301 0 3
R_U10_R7         0 U10_VIN_DIV  259.68k  
V_U10_V3         U10_N16839338 0 3
X_U10_U19         U10_LS_ON_Z LDRV INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
E_U10_ABM2         U10_I_VIN 0 VALUE { V(U10_VIN_DIV)  / 648.68k    }
C_U10_C6         0 U10_SW_REP_RC  2.5p  
R_U10_R3         U10_N16782235 U10_SW_REPLICA  2.076MEG  
E_U10_ABM4         U10_IMAX 0 VALUE { max((0.5129*V(VIN)-0.0214)*1e-6,0)    }
C_U10_C8         0 U10_TOFF_CAP  0.8p  
X_U10_U13         U10_TOFF_CAP U10_TOFF_REF U10_N16863003 COMP_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U10_U17         LDRV U10_LS_ON_Z INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_U10_R6         U10_SW_REP_RC U10_N16782235  623k  
E_U10_ABM1         U10_I_VOUT 0 VALUE { V(U10_SW_REP_RC)  / 324.36k    }
D_U10_D9         U10_TOFF_CAP U10_N16839338 D_D1 
X_U10_S5    U10_LS_ON_Z 0 U10_TOFF_CAP 0 MinToff_U10_S5 
E_U10_ABM5         U10_SW_REPLICA 0 VALUE { V(SW)    }
X_U10_S4    CLIM 0 U10_N16782235 U10_SW_REP_RC MinToff_U10_S4 
R_U10_R2         U10_VIN_DIV VIN  1.038MEG  
C_U10_C7         0 U10_VIN_DIV  70f  
X_U34         N16794820 VIN_LOW N16787860 OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
.IC         V(PAUSE )=0
.ENDS TPS62A02A_TRANS
*$
.subckt Driver_U7_H1 1 2 3 4  
H_U7_H1         3 4 VH_U7_H1 1
VH_U7_H1         1 2 0V
.ends Driver_U7_H1
*$
.subckt Driver_U7_S32 1 2 3 4  
S_U7_S32         3 4 1 2 _U7_S32
RS_U7_S32         1 2 1G
.MODEL         _U7_S32 VSWITCH Roff=1e6 Ron=100m Voff=0.2 Von=0.8
.ends Driver_U7_S32
*$
.subckt Driver_U7_H2 1 2 3 4  
H_U7_H2         3 4 VH_U7_H2 -1
VH_U7_H2         1 2 0V
.ends Driver_U7_H2
*$
.subckt Driver_U7_S31 1 2 3 4  
S_U7_S31         3 4 1 2 _U7_S31
RS_U7_S31         1 2 1G
.MODEL         _U7_S31 VSWITCH Roff=1e6 Ron=67m Voff=0.2 Von=0.8
.ends Driver_U7_S31
*$
.subckt SoftStart_U3_S69 1 2 3 4  
S_U3_S69         3 4 1 2 _U3_S69
RS_U3_S69         1 2 1G
.MODEL         _U3_S69 VSWITCH Roff=100e6 Ron=1 Voff=0.2 Von=0.8
.ends SoftStart_U3_S69
*$
.subckt Enable_U30_S1 1 2 3 4  
S_U30_S1         3 4 1 2 _U30_S1
RS_U30_S1         1 2 1G
.MODEL         _U30_S1 VSWITCH Roff=100e6 Ron=1m Voff=0.25 Von=0.5
.ends Enable_U30_S1
*$
.subckt TPS62A02A_TRANS_S1 1 2 3 4  
S_S1         3 4 1 2 _S1
RS_S1         1 2 1G
.MODEL         _S1 VSWITCH Roff=100meg Ron=70 Voff=.8 Von=.2
.ends TPS62A02A_TRANS_S1
*$
.subckt HICCUP_NEW_HICCUP_TPS62A01_S3 1 2 3 4  
S_HICCUP_TPS62A01_S3         3 4 1 2 _HICCUP_TPS62A01_S3
RS_HICCUP_TPS62A01_S3         1 2 1G
.MODEL         _HICCUP_TPS62A01_S3 VSWITCH Roff=100e6 Ron=1m Voff=0.25
+  Von=0.75
.ends HICCUP_NEW_HICCUP_TPS62A01_S3
*$
.subckt HICCUP_NEW_HICCUP_TPS62A01_S4 1 2 3 4  
S_HICCUP_TPS62A01_S4         3 4 1 2 _HICCUP_TPS62A01_S4
RS_HICCUP_TPS62A01_S4         1 2 1G
.MODEL         _HICCUP_TPS62A01_S4 VSWITCH Roff=100e6 Ron=1m Voff=0.25
+  Von=0.75
.ends HICCUP_NEW_HICCUP_TPS62A01_S4
*$
.subckt HICCUP_NEW_HICCUP_TPS62A01_S2 1 2 3 4  
S_HICCUP_TPS62A01_S2         3 4 1 2 _HICCUP_TPS62A01_S2
RS_HICCUP_TPS62A01_S2         1 2 1G
.MODEL         _HICCUP_TPS62A01_S2 VSWITCH Roff=100e6 Ron=1m Voff=0.25
+  Von=0.75
.ends HICCUP_NEW_HICCUP_TPS62A01_S2
*$
.subckt ErrorAmp_U4_S68 1 2 3 4  
S_U4_S68         3 4 1 2 _U4_S68
RS_U4_S68         1 2 1G
.MODEL         _U4_S68 VSWITCH Roff=100e6 Ron=1 Voff=0.2 Von=0.8
.ends ErrorAmp_U4_S68
*$
.subckt MinToff_U10_S5 1 2 3 4  
S_U10_S5         3 4 1 2 _U10_S5
RS_U10_S5         1 2 1G
.MODEL         _U10_S5 VSWITCH Roff=100e6 Ron=1 Voff=0.2 Von=0.8
.ends MinToff_U10_S5
*$
.subckt MinToff_U10_S4 1 2 3 4  
S_U10_S4         3 4 1 2 _U10_S4
RS_U10_S4         1 2 1G
.MODEL         _U10_S4 VSWITCH Roff=100e6 Ron=1 Voff=0.2 Von=0.8
.ends MinToff_U10_S4
*$
.model D_D1 d
+ is=1e-15
+ tt=1e-11
+ rs=0.05
+ n=0.1
*$
.model D_D2 d
+ is=1e-15
+ tt=1e-11
+ rs=0.001
+ n=0.1
*$
.subckt one_shot in out params:  t=100
s_s1         meas 0 reset2 0 s1
e_abm1         ch 0 value { if( v(in)>0.5 | v(out)>0.5,1,0)    }
r_r2         reset2 reset  0.1  
e_abm3         out 0 value { if( v(meas)<0.5 & v(ch)>0.5,1,0)    }
r_r1         meas ch  {t} 
c_c2         0 reset2  1.4427n  
c_c1         0 meas  1.4427n  
e_abm2         reset 0 value { if(v(ch)<0.5,1,0)    }
.model s1 vswitch
+ roff=1e+09
+ ron=1
+ voff=0.25
+ von=0.75
.ends one_shot
*$
.SUBCKT AND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND2_BASIC_GEN
*$
.SUBCKT AND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND3_BASIC_GEN
*$
.SUBCKT AND4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH} &
+ V(D) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND4_BASIC_GEN
*$
.SUBCKT NAND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND2_BASIC_GEN
*$
.SUBCKT NAND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND3_BASIC_GEN
*$
.SUBCKT NAND4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH} &
+ V(D) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND4_BASIC_GEN
*$
.SUBCKT OR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR2_BASIC_GEN
*$
.SUBCKT OR3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR3_BASIC_GEN
*$
.SUBCKT OR4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR4_BASIC_GEN
*$
.SUBCKT NOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR2_BASIC_GEN
*$
.SUBCKT NOR3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR3_BASIC_GEN
*$
.SUBCKT NOR4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR4_BASIC_GEN
*$
.SUBCKT NOR5_BASIC_GEN A B C D E Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH} |
+ V(E) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR5_BASIC_GEN
*$
.SUBCKT NOR6_BASIC_GEN A B C D E F Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH} |
+ V(E) > {VTHRESH} |
+ V(F) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR6_BASIC_GEN
*$
.SUBCKT INV_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS INV_BASIC_GEN
*$
.SUBCKT XOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(A) > {VTHRESH}  ^  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS XOR2_BASIC_GEN
*$
.SUBCKT XNOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(A) > {VTHRESH}  ^  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS XNOR2_BASIC_GEN
*$
.SUBCKT MUX2_BASIC_GEN A B S Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(S) > {VTHRESH},  
+ V(B),V(A))}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS MUX2_BASIC_GEN
*$
.SUBCKT INV_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS INV_DELAY_BASIC_GEN
*$
.SUBCKT BUF_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS BUF_DELAY_BASIC_GEN
*$
.SUBCKT BUF_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS BUF_BASIC_GEN
*$
.SUBCKT SRLATCHSHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(S) > {VTHRESH},5,IF(V(R)>{VTHRESH},-5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n 
.IC V(Qint) {VSS}
.ENDS SRLATCHSHP_BASIC_GEN
*$
.SUBCKT SRLATCHRHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,IF(V(S)>{VTHRESH},5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n
.IC V(Qint) {VSS}
.ENDS SRLATCHRHP_BASIC_GEN
*$
.SUBCKT SBRBLATCHRHP_BASIC_GEN SB RB Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(RB) < {VTHRESH},-5,IF(V(SB) < {VTHRESH},5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
.IC V(Qint) {VSS}
.ENDS SBRBLATCHRHP_BASIC_GEN
*$
.SUBCKT SBRBLATCHSHP_BASIC_GEN SB RB Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(SB) < {VTHRESH},5,IF(V(RB) < {VTHRESH},-5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
.IC V(Qint) {VSS}
.ENDS SBRBLATCHSHP_BASIC_GEN
*$
.SUBCKT DFFSBRB_SHPBASIC_GEN Q QB CLK D RB SB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
GQ 0 Qint VALUE = {IF(V(SB) < {VTHRESH},5,IF(V(RB)<{VTHRESH},-5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSBRB_SHPBASIC_GEN
*$
.SUBCKT DFFSR_SHPBASIC_GEN Q QB CLK D R S PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} 
GQ 0 Qint VALUE = {IF(V(S) > {VTHRESH},5,IF(V(R) > {VTHRESH},-5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSR_SHPBASIC_GEN
*$
.subckt dffsbrb_rhpbasic_gen q qb clk d rb sb params: vdd=1 vss=0 vthresh=0.5
x1 clk clkdel inv_delay_basic_gen params: vdd={vdd} vss={vss} vthresh=
+ {vthresh} delay = 15n
x2 clk clkdel clkint and2_basic_gen params: vdd={vdd} vss={vss} vthresh=
+ {vthresh}
gq 0 qint value = {if(v(rb) < {vthresh},-1,if(v(sb)< {vthresh},1,
+  if(v(clkint)> {vthresh},
+ if(v(d)> {vthresh},1,-1),0)))}
cqint qint 0 1n
rqint qint 0 1000meg
d_d10 qint my5 d_d1
v1 my5 0 1
d_d11 0 qint d_d1
eq qqq 0 qint 0 1
x3 qqq qqqd1 buf_delay_basic_gen params: vdd={vdd} vss={vss} vthresh={vthresh}
+  delay = 20n
rqq qqqd1 q 1
eqb qbr 0 value = {if( v(q) > {vthresh}, {vss},{vdd})}
rqb qbr qb 1
cdummy1 q 0 1nf
cdummy2 qb 0 1nf
.ic v(qint) {vss}
.model d_d1 d
+ is=1e-015
+ n=0.1
.ends dffsbrb_rhpbasic_gen
*$
.SUBCKT DFFSR_RHPBASIC_GEN Q QB CLK D R S PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}  
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,IF(V(S) > {VTHRESH},5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSR_RHPBASIC_GEN
*$
.SUBCKT COMP_BASIC_GEN INP INM Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
E_ABM Yint 0 VALUE {IF (V(INP) > 
+ V(INM), {VDD},{VSS})}
R1 Yint Y 1
C1 Y 0 1n
.ENDS COMP_BASIC_GEN
*$
.SUBCKT COMPHYS_BASIC_GEN INP INM HYS OUT PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
EIN INP1 INM1 INP INM 1 
EHYS INP1 INP2 VALUE { IF( V(1) > {VTHRESH},-V(HYS),0) }
EOUT OUT 0 VALUE { IF( V(INP2)>V(INM1), {VDD} ,{VSS}) }
R1 OUT 1 1
C1 1 0 5n
RINP1 INP1 0 1K
.ENDS COMPHYS_BASIC_GEN
*$
.SUBCKT COMPHYS2_BASIC_GEN INP INM HYS OUT PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
+ T=10
EIN INP1 INM1 INP INM 1 
EHYS INM2 INM1 VALUE { IF( V(1) > {VTHRESH},-V(HYS)/2,V(HYS)/2) }
EOUT OUT 0 VALUE { IF( V(INP1)>V(INM2), {VDD} ,{VSS}) }
R1 OUT 1 1
C1 1 0 {T*1e-9} 
RINP1 INP1 0 10K
RINM2 INM2 0 10K
.IC V(1) {VSS}
.ENDS COMPHYS2_BASIC_GEN
*$
.subckt d_d 1 2
d1 1 2 dd
.model dd d
+ is=1e-015
+ n=0.01
+ tt=1e-011
.ends d_d
*$
.SUBCKT AND2_PS Y A B PARAMS: vhi=1 vlo=0 vthresh=500e-3 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
VS VSUP 0 DC 1
EAND2 Ypp 0 VALUE={IF(V(A) > {vthresh} & V(B) > {vthresh}, 1, 0)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*({vhi} - {vlo})+{vlo}}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS AND2_PS
*$
.SUBCKT AND2WS_PS Y A B VDD VSS PARAMS: tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9 relthr=0.5
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
VS VSUP 0 DC 1
Etemp vthresh 0 VALUE = {(V(VDD) - V(VSS)) *{relthr}}
EAND2 Ypp 0 VALUE={IF(V(A,VSS) > V(vthresh) & V(B,VSS) > V(vthresh), 1, 0)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={(V(OUTr)*(V(VDD) - V(VSS)))}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS AND2WS_PS
*$
.SUBCKT DIFFERENTIATE_PS OUT IN PARAMS: INDUCT=1n
E1 OUT 0 VALUE={DDT(V(IN))*{INDUCT}}
.ENDS DIFFERENTIATE_PS
*$
.SUBCKT INTEGRATE_PS OUT IN PARAMS: INIT_OUT=0 GAIN=1 
E1 OUT 0 VALUE={{GAIN} * SDT(V(IN,0))+ {INIT_OUT}}
.ENDS INTEGRATE_PS
*$
.SUBCKT AND3_PS Y A B C PARAMS: vhi=1 vlo=0 vthresh=500e-3 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
RC C 0 1e11
CC C 0 0.01pF
VS VSUP 0 DC 1
EAND3 Ypp 0 VALUE={IF(V(A) > {vthresh} & V(B) > {vthresh} & V(C) > {vthresh}, 1, 0)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*({vhi} - {vlo})+{vlo}}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS AND3_PS
*$
.SUBCKT AND3WS_PS Y A B C VDD VSS PARAMS: tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9 relthr=0.5
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
RC C 0 1e11
CC C 0 0.01pF
VS VSUP 0 DC 1
Etemp vthresh 0 VALUE = {(V(VDD) - V(VSS)) *{relthr}}
EAND3 Ypp 0 VALUE={IF(V(A,VSS) > V(vthresh) & V(B,VSS) > V(vthresh) & V(C,VSS) > V(vthresh), 1, 0)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*(V(VDD) - V(VSS))}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS AND3WS_PS
*$
.SUBCKT AND4_PS Y A B C D PARAMS: vhi=1 vlo=0 vthresh=500e-3 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
RC C 0 1e11
CC C 0 0.01pF
RD D 0 1e11
CD D 0 0.01pF
VS VSUP 0 DC 1
EAND4 Ypp 0 VALUE={IF(V(A) > {vthresh} & V(B) > {vthresh} & V(C) > {vthresh} & V(D) > {vthresh}, 1, 0)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*({vhi} - {vlo})+{vlo}}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS AND4_PS
*$
.SUBCKT AND4WS_PS Y A B C D VDD VSS PARAMS: tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9 relthr=0.5
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
RC C 0 1e11
CC C 0 0.01pF
RD D 0 1e11
CD D 0 0.01pF
VS VSUP 0 DC 1
Etemp vthresh 0 VALUE = {(V(VDD) - V(VSS)) *{relthr}}
EAND4 Ypp 0 VALUE={IF(V(A,VSS) > V(vthresh) & V(B,VSS) > V(vthresh) & V(C,VSS) > V(vthresh)& V(D,VSS) > V(vthresh), 1, 0)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*(V(VDD) - V(VSS))}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS AND4WS_PS
*$
.SUBCKT I2VAR_PS INP INM OUT PARAMS: GAIN=1
ROUT OUT 0 1e11
R1 INP 0 1e11
R2 INM 0 1e11
VFLOW INP INM DC 0
F1 OUT 0 VFLOW {GAIN}
.ENDS I2VAR_PS
*$
.SUBCKT VAR2I_PS IN OUTP OUTM PARAMS: GAIN=1
ROUT1 OUTP 0 1e11
ROUT2 OUTM 0 1e11
R1 IN 0 1e11
G1 OUTP OUTM VALUE={V(IN)*{GAIN}}
.ENDS VAR2I_PS
*$
.SUBCKT D2VAR_PS IN OUT PARAMS: OUT_L=0 OUT_H=1 TDELAY=16N tr=1N tf=1N
RIN IN 0 1e11
CIN IN 0 0.01pF
VS VSUP 0 DC 1
EBUF1 Ypp 0 VALUE={IF(V(IN) > 0.5 , 1, 0)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(TDELAY+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(TDELAY+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*({OUT_H} - {OUT_L})+ {OUT_L}}
RDR OUTf OUT  10
RO OUT 0 1e11
.ENDS D2VAR_PS
*$
.SUBCKT VAR2D_PS IN OUT PARAMS: THRESH=0.5 TD=16N 
RIN IN 0 1e11
CIN IN 0 0.01pF
VS VSUP 0 DC 1
EBUF1 Ypp 0 VALUE={IF(V(IN) > {THRESH} , 1, 0)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(TD+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(TD+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={IF(V(OUTr) > 0.5, 1, 0)}
RDR OUTf OUT  10
RO OUT 0 1e11
.ENDS VAR2D_PS
*$
.SUBCKT MIN2GAIN_PS A B Y PARAMS: K=1
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
EMX Yp 0 VALUE={IF(V(A)< V(B), V(A)*{K}, V(B)*{K})}
RDR Yp Y 1
RO Y 0 1e11
.ENDS MIN2GAIN_PS
*$
.SUBCKT MAX2GAIN_PS A B Y PARAMS: K=1
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
EMX Yp 0 VALUE={IF(V(A)> V(B), V(A)*{K}, V(B)*{K})}
RDR Yp Y 1
RO Y 0 1e11
.ENDS MAX2GAIN_PS
*$
.subckt SUBTRACT_PS OUTMINUS OUTPLUS INMINUS INPLUS   PARAMS: GAIN=1
R1 INMINUS 0 1e11
R2 INPLUS 0 1e11
EOUT1 OUTP 0 VALUE = {0.5*{GAIN}*(V(INPLUS) - V(INMINUS))}
EOUT2 OUTM 0 VALUE = {-0.5*{GAIN}*(V(INPLUS) - V(INMINUS))}
REOM1 OUTPLUS OUTP 1
CEOM1 OUTPLUS 0 1n
REOM2 OUTMINUS OUTM 1
CEOM2 OUTMINUS 0 1n
.ENDS SUBTRACT_PS
*$
.SUBCKT DFF1_PS Q QB CLK D RB SB PARAMS: vhi=1 vlo=0 vthresh=500e-3 tdelay=1e-9 trise=1e-9 tfall=1e-9 initval=0
X_U1          N00150 SB N00273 N00171  NAND3_PS PARAMS: vhi={vhi} vlo={vlo} vthresh={vthresh} tplh={tdelay} 
+ tphl={tdelay} tr={trise} tf={tfall}
X_U2         N00171 N00150 RB CLK  NAND3_PS PARAMS: vhi={vhi} vlo={vlo} vthresh={vthresh} tplh={tdelay} 
+ tphl={tdelay} tr={trise} tf={tfall}
X_U3         N00212 N00171 CLK N00273  NAND3_PS PARAMS: vhi={vhi} vlo={vlo} vthresh={vthresh} tplh={tdelay} 
+ tphl={tdelay} tr={trise} tf={tfall}
X_U4         N00273 N00212 RB D  NAND3_PS PARAMS: vhi={vhi} vlo={vlo} vthresh={vthresh} tplh={tdelay} 
+ tphl={tdelay} tr={trise} tf={tfall}
X_U5         Q SB N00171 QB  NAND3_PS PARAMS: vhi={vhi} vlo={vlo} vthresh={vthresh} tplh={tdelay} 
+ tphl={tdelay} tr={trise} tf={tfall}
X_U6         QB Q RB N00212  NAND3_PS PARAMS: vhi={vhi} vlo={vlo} vthresh={vthresh} tplh={tdelay} 
+ tphl={tdelay} tr={trise} tf={tfall}
Cdummy1 Q 0 0.01pF IC={vlo}
Cdummy2 QB 0 0.01pF IC={vhi}
.IC V(N00171) = {vhi}
.IC V(N00212) = {vlo}
.ENDS DFF1_PS	
*$
.SUBCKT DFF_PS Q QB RB CLK D SB PARAMS: vhi=1 vlo=0 vthresh=500e-3 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9 initval=0
X1 Dtemp1 CLKtemp1inv Q0int QNint SBint RBint DLATCHSR_PS PARAMS: vhi=1 vlo=0 vthresh=0.5 tplh=1e-9 tphl=1e-9
+ tr=1e-9 tf=1e-9 initval={initval}  
X2 Q0int CLKtemp1 Q QB SBint RBint DLATCHSR_PS PARAMS: vhi={vhi} vlo={vlo} vthresh=0.5 tplh={tplh} tphl={tphl}
+ tr={tr} tf={tf} initval={initval}  
X3 D Dtemp1 BUFFER_PS PARAMS: vhi=1 vlo=0 vthresh={vthresh} tphl=1e-9 tplh=1e-9 tr=1e-9 tf=1e-9
X4 CLK CLKtemp1 BUFFER_PS PARAMS: vhi=1 vlo=0 vthresh={vthresh} tphl=1e-9 tplh=1e-9 tr=1e-9 tf=1e-9
X6 RB RBint BUFFER_PS PARAMS: vhi=1 vlo=0 vthresh={vthresh} tphl=1e-9 tplh=1e-9 tr=1e-9 tf=1e-9
X7 SB SBint BUFFER_PS PARAMS: vhi=1 vlo=0 vthresh={vthresh} tphl=1e-9 tplh=1e-9 tr=1e-9 tf=1e-9
X5 CLKtemp1inv CLKtemp1  INV_PS PARAMS: vhi=1 vlo=0 vthresh=0.5 tphl=1e-9 tplh=1e-9 tr=1e-9 tf=1e-9
.ENDS DFF_PS
*$
.SUBCKT DLATCHSR_PS D CLK Q0 QN SB RB PARAMS: vhi=1 vlo=0 vthresh=0.5 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9 initval=0
X1 Sint Rint Q0 QN NORLATCHDFF_PS PARAMS: vhi={vhi} vlo={vlo} vthresh=0.5 tplh={tplh} tphl={tphl} 
+ tr={tr} tf={tf} initval={initval}  
X3 D Dtemp1 BUFFER_PS PARAMS: vhi=1 vlo=0 vthresh={vthresh} tphl=1e-9 tplh=1e-9 tr=1e-9 tf=1e-9
X4 CLK CLKtemp1 BUFFER_PS PARAMS: vhi=1 vlo=0 vthresh={vthresh} tphl=1e-9 tplh=1e-9 tr=1e-9 tf=1e-9
X2 Dinv Dtemp1 INV_PS PARAMS: vhi=1 vlo=0 vthresh=0.5 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
X5 Sint1 Dtemp1  CLKtemp1 AND2_PS PARAMS: vhi=1 vlo=0 vthresh=0.5 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
X6 Rint1 Dinv CLKtemp1 AND2_PS PARAMS: vhi=1 vlo=0 vthresh=0.5 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
X7 Setlogic SB INV_PS PARAMS: vhi=1 vlo=0 vthresh={vthresh} tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
X8 Resetlogic RB INV_PS PARAMS: vhi=1 vlo=0 vthresh={vthresh} tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
X9 Sint Sint1 Setlogic OR2_PS  PARAMS: vhi=1 vlo=0 vthresh=0.5 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
X10 Rint Rint1 Resetlogic OR2_PS  PARAMS: vhi=1 vlo=0 vthresh=0.5 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
.ENDS DLATCHSR_PS
*$
.SUBCKT NORLATCHDFF_PS SET RESET Q0 QN PARAMS: vhi=1 vlo=0 vthresh=500e-3 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9 initval=0
C1 Q0int 0 0.01p IC={initval*vhi}
C2 QNint 0 0.01p IC={(1-initval)*vhi}
XN1 QNint SET Q0int NOR2_PS PARAMS: vhi={vhi} vlo={vlo} vthresh={vthresh} tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9 
XN2 Q0int RESET QNint NOR2_PS PARAMS: vhi={vhi} vlo={vlo} vthresh={vthresh} tplh=2e-9 tphl=2e-9 tr=1e-9 tf=1e-9 
XN3 Q0int Q0 BUFFER_PS PARAMS: vhi={vhi} vlo={vlo} vthresh={vthresh} tplh={tplh} tphl={tphl} tr={tr} tf={tf}
XN4 QNint QN BUFFER_PS PARAMS: vhi={vhi} vlo={vlo} vthresh={vthresh} tplh={tplh} tphl={tphl} tr={tr} tf={tf}
.ENDS NORLATCHDFF_PS
*$
.SUBCKT DFFRS_PS Q QB CLK D RB SB PARAMS: vhi=1 vlo=0 vthresh=500e-3 tdelay=1e-9 tr=1e-9 tf=1e-9 initval=0
X1 Dtemp1 CLKtemp1inv Q0int QNint SBint RBint DLATCHSR_PS PARAMS: vhi=1 vlo=0 vthresh=0.5 tplh=1e-9 tphl=1e-9
+ tr=1e-9 tf=1e-9 initval={initval}  
X2 Q0int CLKtemp1 Q QB SBint RBint DLATCHSR_PS PARAMS: vhi={vhi} vlo={vlo} vthresh=0.5 tplh={tdelay} tphl={tdelay}
+ tr={tr} tf={tf} initval={initval}  
X3 D Dtemp1 BUFFER_PS PARAMS: vhi=1 vlo=0 vthresh={vthresh} tphl=1e-9 tplh=1e-9 tr=1e-9 tf=1e-9
X4 CLK CLKtemp1 BUFFER_PS PARAMS: vhi=1 vlo=0 vthresh={vthresh} tphl=1e-9 tplh=1e-9 tr=1e-9 tf=1e-9
X6 RB RBint BUFFER_PS PARAMS: vhi=1 vlo=0 vthresh={vthresh} tphl=1e-9 tplh=1e-9 tr=1e-9 tf=1e-9
X7 SB SBint BUFFER_PS PARAMS: vhi=1 vlo=0 vthresh={vthresh} tphl=1e-9 tplh=1e-9 tr=1e-9 tf=1e-9
X5 CLKtemp1inv CLKtemp1  INV_PS PARAMS: vhi=1 vlo=0 vthresh=0.5 tphl=1e-9 tplh=1e-9 tr=1e-9 tf=1e-9
.ENDS DFFRS_PS
*$
.SUBCKT INV_PS Y A PARAMS: vhi=1 vlo=0 vthresh=500e-3 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
RA A 0 1e11
CA A 0 0.01pF
VS VSUP 0 DC 1
EINV1 Ypp 0 VALUE={IF(V(A) > ({vthresh}), 0, 1)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*({vhi} - {vlo})+{vlo}}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS INV_PS
*$
.SUBCKT INVWS_PS Y A VDD VSS PARAMS: tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9 relthr=0.5
RA A 0 1e11
CA A 0 0.01pF
VS VSUP 0 DC 1
Etemp vthresh 0 VALUE = {(V(VDD) - V(VSS)) *{relthr}}
EINV1 Ypp 0 VALUE={IF(V(A,VSS) > V(vthresh), 0, 1)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*(V(VDD) - V(VSS))}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS INVWS_PS
*$
.SUBCKT NAND2_PS Y A B PARAMS: vhi=1 vlo=0 vthresh=500e-3 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
VS VSUP 0 DC 1
ENAND2 Ypp 0 VALUE={IF(V(A) > {vthresh} & V(B) > {vthresh}, 0, 1)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*({vhi} - {vlo})+{vlo}}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS NAND2_PS
*$
.SUBCKT NAND2WS_PS Y A B VDD VSS PARAMS: tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9 relthr=0.5
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
VS VSUP 0 DC 1
Etemp vthresh 0 VALUE = {(V(VDD) - V(VSS)) *{relthr}}
EAND2 Ypp 0 VALUE={IF(V(A,VSS) > V(vthresh) & V(B,VSS) > V(vthresh), 0, 1)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={(V(OUTr)*(V(VDD) - V(VSS)))}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS NAND2WS_PS
*$
.SUBCKT NAND3_PS Y A B C PARAMS: vhi=1 vlo=0 vthresh=500e-3 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
RC C 0 1e11
CC C 0 0.01pF
VS VSUP 0 DC 1
ENAND3 Ypp 0 VALUE={IF(V(A) > {vthresh} & V(B) > {vthresh} & V(C) > {vthresh}, 0, 1)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*({vhi} - {vlo})+{vlo}}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS NAND3_PS
*$
.SUBCKT NAND3WS_PS Y A B C VDD VSS PARAMS: tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9 relthr=0.5
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
RC C 0 1e11
CC C 0 0.01pF
VS VSUP 0 DC 1
Etemp vthresh 0 VALUE = {(V(VDD) - V(VSS)) *{relthr}}
EAND3 Ypp 0 VALUE={IF(V(A,VSS) > V(vthresh) & V(B,VSS) > V(vthresh) & V(C,VSS) > V(vthresh), 0, 1)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*(V(VDD) - V(VSS))}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS NAND3WS_PS
*$
.SUBCKT NAND4_PS Y A B C D PARAMS: vhi=1 vlo=0 vthresh=500e-3 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
RC C 0 1e11
CC C 0 0.01pF
RD D 0 1e11
CD D 0 0.01pF
VS VSUP 0 DC 1
ENAND4 Ypp 0 VALUE={IF(V(A) > {vthresh} & V(B) > {vthresh} & V(C) > {vthresh}  & V(D) > {vthresh}, 0, 1)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*({vhi} - {vlo})+{vlo}}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS NAND4_PS
*$
.SUBCKT NAND4WS_PS Y A B C D VDD VSS PARAMS: tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9 relthr=0.5
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
RC C 0 1e11
CC C 0 0.01pF
RD D 0 1e11
CD D 0 0.01pF
VS VSUP 0 DC 1
Etemp vthresh 0 VALUE = {(V(VDD) - V(VSS)) *{relthr}}
EAND4 Ypp 0 VALUE={IF(V(A,VSS) > V(vthresh) & V(B,VSS) > V(vthresh) & V(C,VSS) > V(vthresh)& V(D,VSS) > V(vthresh), 0, 1)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*(V(VDD) - V(VSS))}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS NAND4WS_PS
*$
.SUBCKT NOR2_PS Y A B PARAMS: vhi=1 vlo=0 vthresh=500e-3 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
VS VSUP 0 DC 1
ENOR2 Ypp 0 VALUE={IF(V(A) > {vthresh} | V(B) > {vthresh}, 0, 1)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*({vhi} - {vlo})+{vlo}}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS NOR2_PS
*$
.SUBCKT NOR2WS_PS Y A B VDD VSS PARAMS: tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9 relthr=0.5
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
VS VSUP 0 DC 1
Etemp vthresh 0 VALUE = {(V(VDD) - V(VSS)) *{relthr}}
ENOR2 Ypp 0 VALUE={IF(V(A,VSS) > V(vthresh) | V(B,VSS) > V(vthresh), 0, 1)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*(V(VDD) - V(VSS))}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS NOR2WS_PS
*$
.SUBCKT NOR3_PS Y A B C PARAMS: vhi=1 vlo=0 vthresh=500e-3 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
RC C 0 1e11
CC C 0 0.01pF
VS VSUP 0 DC 1
ENOR3 Ypp 0 VALUE={IF(V(A) > {vthresh} | V(B) > {vthresh} | V(C) > {vthresh}, 0, 1)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*({vhi} - {vlo})+{vlo}}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS NOR3_PS
*$
.SUBCKT NOR3WS_PS Y A B C VDD VSS PARAMS: tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9 relthr=0.5
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
RC C 0 1e11
CC C 0 0.01pF
VS VSUP 0 DC 1
Etemp vthresh 0 VALUE = {(V(VDD) - V(VSS)) *{relthr}}
ENOR3 Ypp 0 VALUE={IF(V(A,VSS) > V(vthresh) | V(B,VSS) > V(vthresh)| V(C,VSS) > V(vthresh), 0, 1)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*(V(VDD) - V(VSS))}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS NOR3WS_PS
*$
.SUBCKT NOR4_PS Y A B C D PARAMS: vhi=1 vlo=0 vthresh=500e-3 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
RC C 0 1e11
CC C 0 0.01pF
RD D 0 1e11
CD D 0 0.01pF
VS VSUP 0 DC 1
ENOR4 Ypp 0 VALUE={IF(V(A) > {vthresh} | V(B) > {vthresh} | V(C) > {vthresh}  | V(D) > {vthresh}, 0, 1)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*({vhi} - {vlo})+{vlo}}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS NOR4_PS
*$
.SUBCKT NOR4WS_PS Y A B C D VDD VSS PARAMS: tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9 relthr=0.5
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
RC C 0 1e11
CC C 0 0.01pF
RD C 0 1e11
CD C 0 0.01pF
VS VSUP 0 DC 1
Etemp vthresh 0 VALUE = {(V(VDD) - V(VSS)) *{relthr}}
ENOR3 Ypp 0 VALUE={IF(V(A,VSS) > V(vthresh) | V(B,VSS) > V(vthresh)| V(C,VSS) > V(vthresh)| V(D,VSS) > V(vthresh), 0, 1)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*(V(VDD) - V(VSS))}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS NOR4WS_PS
*$
.SUBCKT OR2_PS Y A B PARAMS: vhi=1 vlo=0 vthresh=500e-3 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
VS VSUP 0 DC 1
EOR2 Ypp 0 VALUE={IF(V(A) > {vthresh} | V(B) > {vthresh}, 1, 0)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*({vhi} - {vlo})+{vlo}}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS OR2_PS
*$
.SUBCKT OR2WS_PS Y A B VDD VSS PARAMS: tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9 relthr=0.5
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
VS VSUP 0 DC 1
Etemp vthresh 0 VALUE = {(V(VDD) - V(VSS)) *{relthr}}
ENOR2 Ypp 0 VALUE={IF(V(A,VSS) > V(vthresh) | V(B,VSS) > V(vthresh), 1, 0)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*(V(VDD) - V(VSS))}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS OR2WS_PS
*$
.SUBCKT OR3_PS Y A B C PARAMS: vhi=1 vlo=0 vthresh=500e-3 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
RC C 0 1e11
CC C 0 0.01pF
VS VSUP 0 DC 1
EOR3 Ypp 0 VALUE={IF(V(A) > {vthresh} | V(B) > {vthresh}  | V(C) > {vthresh}, 1, 0)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*({vhi} - {vlo})+{vlo}}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS OR3_PS
*$
.SUBCKT OR3WS_PS Y A B C VDD VSS PARAMS: tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9 relthr=0.5
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
RC C 0 1e11
CC C 0 0.01pF
VS VSUP 0 DC 1
Etemp vthresh 0 VALUE = {(V(VDD) - V(VSS)) *{relthr}}
ENOR3 Ypp 0 VALUE={IF(V(A,VSS) > V(vthresh) | V(B,VSS) > V(vthresh)| V(C,VSS) > V(vthresh), 1, 0)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*(V(VDD) - V(VSS))}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS OR3WS_PS
*$
.SUBCKT OR4_PS Y A B C D PARAMS: vhi=1 vlo=0 vthresh=500e-3 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
RC C 0 1e11
CC C 0 0.01pF
RD D 0 1e11
CD D 0 0.01pF
VS VSUP 0 DC 1
EOR4 Ypp 0 VALUE={IF(V(A) > {vthresh} | V(B) > {vthresh}  | V(C) > {vthresh}  | V(D) > {vthresh}, 1, 0)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*({vhi} - {vlo})+{vlo}}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS OR4_PS
*$
.SUBCKT OR4WS_PS Y A B C D VDD VSS PARAMS: tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9 relthr=0.5
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
RC C 0 1e11
CC C 0 0.01pF
VS VSUP 0 DC 1
Etemp vthresh 0 VALUE = {(V(VDD) - V(VSS)) *{relthr}}
ENOR3 Ypp 0 VALUE={IF(V(A,VSS) > V(vthresh) | V(B,VSS) > V(vthresh)| V(C,VSS) > V(vthresh)| V(D,VSS) > V(vthresh), 1, 0)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*(V(VDD) - V(VSS))}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS OR4WS_PS
*$
.SUBCKT MONONEG_PS in Q Qn PARAMS: PW=1u 
VS VSUP 0 DC 1
GIN VSUP YA VALUE={IF(V(IN)<0.5, V(VSUP)/1000K, 0)}
GDIS YA 0 VALUE={IF(V(IN)<0.5,0, V(YA)/1m)}
CIN YA 0 1n IC=0
RIN YA 0 1e11
EABM1 YTD 0 VALUE={IF(V(YA)> {PW*1000}, 0, 1)}
RYTD YTD 0 1e11
EXOR P 0 VALUE={IF(V(YTD) > 0.5 ^ V(IN) > .5, 1, 0)}
ROUTpp2 P 0 1e11
EAND1 Q1 0 VALUE={ IF(V(P)>0.5 & V(YTD)>0.5, 1, 0)}
Ro1 Q1 Q 1m
Co1 Q 0 1p IC=0
ROUT2 Q 0 1e11
EAND2 Qn1 0 VALUE={ IF(V(Q)>0.5, 0, 1)}
Ro2 Qn1 Qn 1m
Co2 Qn 0 1p
ROUT4 Qn 0 1e11
.ENDS MONONEG_PS
*$
.SUBCKT MONOPOS_PS in Q Qn PARAMS: PW=1u 
VS VSUP 0 DC 1
GIN VSUP YA VALUE={IF(V(IN)>0.5, V(VSUP)/1000K, 0)}
GDIS YA 0 VALUE={IF(V(IN)>0.5,0, V(YA)/1m)}
CIN YA 0 1n IC=0
RIN YA 0 1e11
EABM1 YTD 0 VALUE={IF(V(YA)> {PW*1000}, 1, 0)}
RYTD YTD 0 1e11
EXOR P 0 VALUE={IF(V(YTD) > 0.5 ^ V(IN) > .5, 1, 0)}
ROUTpp2 P 0 1e11
EAND1 Q1 0 VALUE={ IF(V(P)>0.5 & V(IN)>0.5, 1, 0)}
Ro1 Q1 Q 1m
Co1 Q 0 1p
ROUT2 Q 0 1e11
EAND2 Qn1 0 VALUE={ IF(V(Q)>0.5, 0, 1)}
Ro2 Qn1 Qn 1m
Co2 Qn 0 1p
ROUT4 Qn 0 1e11
.ENDS MONOPOS_PS
*$
.SUBCKT LDO_PS IN OUT PARAMS: VTH=6.7 DROP=0.2
RA A 0 1e11
CA A 0 0.01pF
EOUT OUT 0 VALUE={IF(V(IN) > {VTH}, ({VTH}-{DROP}), IF(V(IN)< {DROP}, 0, V(IN)-{DROP}))}
.ENDS LDO_PS 
*$
.SUBCKT ADDER_PS A B CI S CO PARAMS: vhi=1 vlo=0 vthresh=0.5 tplh=5n tphl=5n tr=5n tf=5n
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
RC CI 0 1e11
CC CI 0 0.01pF
VS VSUP 0 DC 1
ES YppS 0 VALUE={IF(V(A) > {vthresh} ^ V(B) > {vthresh} ^ V(CI) > {vthresh},  1, 0)}
ECO YppCO 0 VALUE={IF(V(A)>{vthresh} & V(B)>{vthresh} | (V(CI) > {vthresh}& (V(A) > {vthresh} | V(B) > {vthresh})), 1 ,0)}
RCOpp YppCO 0 1e11 
RSpp YppS 0 1e11
XNSW1 OUTSp YppS 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTSp YppS VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTSp 0 1pF
ETHRESH1 YSp 0 VALUE={IF(V(OUTSp) > 0.5, 1, 0)}
ROUTSp YSp 0 1e11
XNSW2 OUTSr YSp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTSr YSp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTSr 0 1pF
EOUTS OUTSf 0 VALUE={V(OUTSr)*({vhi} - {vlo})+{vlo}}
RDR1 OUTSf S  1000
RO1 S 0 1e11
XNSW3 OUTCOp YppCO 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW3 OUTCOp YppCO VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL3 OUTCOp 0 1pF
ETHRESH2 YCOp 0 VALUE={IF(V(OUTCOp) > 0.5, 1, 0)}
ROUTCOp YCOp 0 1e11
XNSW4 OUTCOr YCOp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW4 OUTCOr YCOp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL4 OUTCOr 0 1pF
EOUTCO OUTCOf 0 VALUE={V(OUTCOr)*({vhi} - {vlo})+{vlo}}
RDR2 OUTCOf CO  1000
RO2 CO 0 1e11
.ends adder_ps
*$
.SUBCKT BANGBANG_PS A Y PARAMS: cout=1 thres=1
RA A 0 1e11
ETH1 Ypp 0 VALUE={IF(V(A)>thres, 1, 0)}
ETH2 Yp 0 VALUE={IF(V(A)<-thres, -1, 0)}
ECO Y 0 VALUE={(V(Ypp)+V(Yp))*cout}
RO Y 0 1e11
.ENDS BANGBANG_PS
*$
.SUBCKT BUFFER_PS A Y PARAMS: vhi=1 vlo=0 vthresh=500e-3 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
RA A 0 1e11
CA A 0 0.01pF
VS VSUP 0 DC 1
EBUF1 Ypp 0 VALUE={IF(V(A) > ({vthresh}), 1, 0)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*({vhi} - {vlo})+{vlo}}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS BUFFER_PS
*$
.SUBCKT BUFFEREN_PS A EN Y PARAMS: vhi=1 vlo=0 vthresh=500e-3 tplh=1e-9 tphl=1e-9 tt=2e-9
RA A 0 1e11
CA A 0 0.01pF
VS VSUP 0 DC 1
EBUF1 Ypp 0 VALUE={IF(V(A) > ({vthresh}), 1, 0)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tt+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tt+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
RDR OUTf Y  1
RO Y 0 1e11
S_SPMOS         VDDSUP OUTf PMC 0 _S1
S_SNMOS         OUTf VSSSUP NMC 0 _S2
RS_SPMOS         VDDSUP OUTf 1G
RS_SNMOS         OUTf VSSSUP 1G
Vpos   VDDSUP 0 {vhi}
Vneg   VSSSUP 0 {vlo}
X4 EN ENtemp1 BUFFER_PS PARAMS: vhi=1 vlo=0 vthresh={vthresh} tphl={tphl} tplh={tplh} tr=1e-9 tf=1e-9
X1  PMC OUTr ENtemp1 AND2_PS PARAMS: vhi=1 vlo=0 vthresh=0.5 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
X2  NMC OUTrinv ENtemp1 AND2_PS PARAMS: vhi=1 vlo=0 vthresh=0.5 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
X3 OUTrinv OUTr INV_PS PARAMS: vhi=1 vlo=0 vthresh=0.5 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
.MODEL         _S1 VSWITCH Roff=1000e6 Ron=1000 Voff=0.4V Von=0.5V
.MODEL         _S2 VSWITCH Roff=1000e6 Ron=1000 Voff=0.4V Von=0.5V
.ENDS BUFFEREN_PS
*$
.SUBCKT BUFFERWS_PS Y A VDD VSS PARAMS: tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9 relthr=0.5
RA A 0 1e11
CA A 0 0.01pF
VS VSUP 0 DC 1
Etemp vthresh 0 VALUE = {(V(VDD) - V(VSS)) *{relthr}}
EINV1 Ypp 0 VALUE={IF(V(A,VSS) > V(vthresh), 1, 0)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*(V(VDD) - V(VSS))}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS BUFFERWS_PS
*$
.SUBCKT CAP_PS A B PARAMS: c=1000 ic=0
C1 A B {c} ic={ic}
.ENDS CAP_PS
*$
.SUBCKT CCCS_PS OUTP OUTN CTRLP CTRLN PARAMS: gain=1
ROUTP OUTP 0 1e11
ROUTN OUTN 0 1e11
RCTRLP CTRLP 0 1e11
RCTRLN CTRLN 0 1e11
VFLOW CTRLP CTRLN DC 0
F1 OUTP OUTN VFLOW {gain}
.ENDS CCCS_PS
*$
.SUBCKT CCVS_PS OUTP OUTN CTRLP CTRLN PARAMS: k=1
ROUTP OUTP 0 1e11
ROUTN OUTN 0 1e11
RCTRLP CTRLP 0 1e11
RCTRLN CTRLN 0 1e11
VFLOW CTRLP CTRLN DC 0
H1 OUTP OUTN VFLOW {k}
.ENDS CCVS_PS
*$
.SUBCKT CLAMPV_PS M P PARAMS: vhigh=2 vlow=1 g=1e6
GOUT P M VALUE = {IF(V(P,M) < {vlow}, {g} *(V(P,M)-{vlow}),
+ IF(V(P,M) > {vhigh}, {g}*(V(P,M)-{vhigh}),0))}
.ENDS CLAMPV_PS
*$
.SUBCKT COMPEN_PS POS NEG EN Y PARAMS: td=1e-9 tt=1e-9 offset1=0 offset2=0 hys=0
RP POS 0 1e11
CP POS 0 0.01pF
RN NEG 0 1e11
CN NEG 0 0.01pF
RE EN 0 1e11
CE EN 0 0.01pF
RED EN END {({tt}+100e-9)/(1e-12*0.693)}
CED END 0 1pF
VS VSUP 0 DC 1
EPR POSr 0 VALUE={V(POS)+{offset1}}
RPR POSr 0 1e11
ENR NEGr 0 VALUE={V(NEG)+{offset2}}
RNR NEGr 0 1e11
EHOUT HYShi 0 VALUE={IF (V(EN) > 0.5 & V(Ypp) > 0.5, 1, 0)}
RH HYShi 0 1e11
RHD HYShi HYShid 100 
CH HYShid 0 1pF
ECOUT Ypp 0 VALUE={IF (V(POSr) > (V(NEGr)-{hys}*V(HYShid)) & V(EN) > 0.5, 1, 0)}
RYPP Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(td+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(td+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5 | V(END) < 0.5, 1, 0)} 
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tt+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tt+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS COMPEN_PS
*$
.SUBCKT COMPIDEAL_PS Y NEG POS PARAMS: td=1e-9 tt=1e-9
RP POS 0 1e11
CP POS 0 0.01pF
RN NEG 0 1e11
CN NEG 0 0.01pF
VS VSUP 0 DC 1
ECOUT Ypp 0 VALUE={IF (V(POS) > V(NEG), 1, 0)}
RYPP Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(td+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(td+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)} 
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tt+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tt+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)}
RDR OUTf Y 1000
RO Y 0 1e11
.ENDS COMPIDEAL_PS
*$
.subckt DIFF_PS IN1 IN2 OUT PARAMS: K1=1 K2=1
R1 IN1 0 1e11
R2 IN2 0 1e11
EOUT OUT1 0 VALUE = {{K1}*V(IN1,0) - {K2}*V(IN2,0)}
REOM OUT1 OUT 1
CEOM OUT 0 1n
.ENDS DIFF_PS
*$
.SUBCKT DIDEAL_PS A C PARAMS: ron=1e-3 roff=1e9 
RA A 0 1e11
RC C 0 1e11
RAC A C 1e11
CAC A C 0.01pF ic=0
GD A B VALUE={LIMIT((0.01/{roff})*EXP((V(A,B)- 0.01)*{5}/0.026),-10u,40)}
RB B 0 1e9
RD B C {ron}
CC C 0 0.1pF 
.ENDS DIDEAL_PS
*$
.SUBCKT DPWLD_PS A C PARAMS: von=.7 Imax=1 gon=250 goff=1e-9 n=5
RA A 0 1e11
RC C 0 1e11
RAC A C 1e11
CAC A C 0.01pF
GD A B VALUE={min({von}*{goff}*EXP((V(A,B)-{von})*{n}/0.026),{IMAX})}
RD B C {1/{gon}}
CC C 0 0.1pF 
.ENDS DPWLD_PS
*$
.SUBCKT DLATCH_PS D CLK Q0 QN PARAMS: vhi=1 vlo=0 vthresh=0.5 tdelay=1e-9 tr=1e-9 tf=1e-9 initval=0
X1 Sint Rint Q0 QN NORLATCH_PS PARAMS: vhi={vhi} vlo={vlo} vthresh=0.5 tdelay={tdelay} 
+ tr={tr} tf={tf} initval={initval}  
X3 D Dtemp1 BUFFER_PS PARAMS: vhi=1 vlo=0 vthresh={vthresh} tphl=1e-9 tplh=1e-9 tr=1e-9 tf=1e-9
X4 CLK CLKtemp1 BUFFER_PS PARAMS: vhi=1 vlo=0 vthresh={vthresh} tphl=1e-9 tplh=1e-9 tr=1e-9 tf=1e-9
X2 Dinv Dtemp1 INV_PS PARAMS: vhi=1 vlo=0 vthresh=0.5 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
X5 Sint Dtemp1  CLKtemp1 AND2_PS PARAMS: vhi=1 vlo=0 vthresh=0.5 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
X6 Rint Dinv CLKtemp1 AND2_PS PARAMS: vhi=1 vlo=0 vthresh=0.5 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
.ENDS DLATCH_PS
*$
.SUBCKT DFFPOS_PS D CLK Q0 QN PARAMS: vhi=1 vlo=0 vthresh=0.5 vthreshclk=0.5 tdelay=1e-9 tr=1e-9 tf=1e-9 initval=0
X1 Dtemp1 CLKtemp1inv Q0int QNint DLATCH_PS PARAMS: vhi=1 vlo=0 vthresh=0.5 tdelay=1e-9 
+ tr=1e-9 tf=1e-9 initval={initval}  
X2 Q0int CLKtemp1 Q0 QN DLATCH_PS PARAMS: vhi={vhi} vlo={vlo} vthresh=0.5 tdelay={tdelay}
+ tr={tr} tf={tf} initval={initval}  
X3 D Dtemp1 BUFFER_PS PARAMS: vhi=1 vlo=0 vthresh={vthresh} tphl=1e-9 tplh=1e-9 tr=1e-9 tf=1e-9
X4 CLK CLKtemp1 BUFFER_PS PARAMS: vhi=1 vlo=0 vthresh={vthreshclk} tphl=1e-9 tplh=1e-9 tr=1e-9 tf=1e-9
X5 CLKtemp1inv CLKtemp1  INV_PS PARAMS: vhi=1 vlo=0 vthresh=0.5 tphl=1e-9 tplh=1e-9 tr=1e-9 tf=1e-9
.ENDS DFFPOS_PS
*$
.SUBCKT DFFNEG_PS D CLK Q0 QN PARAMS: vhi=1 vlo=0 vthresh=0.5 vthreshclk=0.5 tdelay=1e-9 tr=1e-9 tf=1e-9 initval=0
X1 Dtemp1 CLKtemp1 Q0int QNint DLATCH_PS PARAMS: vhi=1 vlo=0 vthresh=0.5 tdelay=1e-9 
+ tr=1e-9 tf=1e-9 initval={initval}  
X2 Q0int CLKtemp1inv Q0 QN DLATCH_PS PARAMS: vhi={vhi} vlo={vlo} vthresh=0.5 tdelay={tdelay}
+ tr={tr} tf={tf} initval={initval}  
X3 D Dtemp1 BUFFER_PS PARAMS: vhi=1 vlo=0 vthresh={vthresh} tphl=1e-9 tplh=1e-9 tr=1e-9 tf=1e-9
X4 CLK CLKtemp1 BUFFER_PS PARAMS: vhi=1 vlo=0 vthresh={vthreshclk} tphl=1e-9 tplh=1e-9 tr=1e-9 tf=1e-9
X5 CLKtemp1inv CLKtemp1  INV_PS PARAMS: vhi=1 vlo=0 vthresh=0.5 tphl=1e-9 tplh=1e-9 tr=1e-9 tf=1e-9
.ENDS DFFNEG_PS
*$
.SUBCKT ELEC2VAR_PS POS NEG Y PARAMS: gain=1
RINP POS 0 1e11
RINN NEG 0 1e11
E1 Y 0 VALUE={gain*(V(POS)-V(NEG))}
RO Y 0 1e11
.ENDS ELEC2VAR_PS
*$
.SUBCKT IDC_PS OUT GRND PARAMS: i_dc=1
ROUT OUT 0 1e11
I1 OUT GRND DC {i_dc}
.ENDS IDC_PS
*$
.SUBCKT NMOSIDEAL_PS D G S PARAMS: k=1 vth=0
RDDUM D 0 1e11
RSDUM S 0 1e11
RGDUM G 0 1e11
EON Yp 0 VALUE={IF(V(G,S) > {vth}, 1, 0)}
GOUT D S VALUE={IF(V(D,S) >= (V(G,S)-{vth}), V(Yp)*({k}/2)*(V(G,S)-{vth})**2, V(Yp)*({k})*(V(G,S)-{vth}-V(D,S)/2)*V(D,S))}
.ENDS NMOSIDEAL_PS
*$
.SUBCKT PMOSIDEAL_PS D G S PARAMS: k=1 vth=0 
RDDUM D 0 1e11
RSDUM S 0 1e11
RGDUM G 0 1e11
EON Yp 0 VALUE={IF(V(S,G) > {vth}, -1, 0)}
GOUT D S VALUE={IF(V(S,D) >= (V(S,G)-{vth}), V(Yp)*({k}/2)*(V(S,G)-{vth})**2, V(Yp)*({k})*(V(S,G)-{vth}-V(S,D)/2)*V(S,D))}
.ENDS PMOSIDEAL_PS
*$
.SUBCKT PSW_PS D G S PARAMS: RONval=10k VTHval=0.7 VCHARval=0.01 CGval=0.01pF CDval=0.01pF 
RDDUM D 0 1e11
RSDUM S 0 1e11
RGDUM G 0 1e11
CG G D {CGval}
CD D S {CDval}
Etest test 0 VALUE={IF(V(S) > V(D), V(S,G), V(D,G))}
GOUT S D VALUE={V(S,D)/(RONval*(1+EXP(-LIMIT(((V(test)-VTHval)/VCHARval),-80,80))))}
.ENDS PSW_PS
*$
.SUBCKT L_PS A B PARAMS: l=1u
L1 A B {l}
.ENDS L_PS
*$
.SUBCKT LAG_PS A Y PARAMS: gain=1 freq=1e6
RA A 0 1e11
EG FIRST 0 VALUE={gain*V(A)}
EPOLE Y 0 LAPLACE {V(FIRST)}={(1/(1+s/(2*3.1415*{freq})))}
RY Y 0 1e11
.ENDS LAG_PS
*$
.SUBCKT LEAD_LAG_PS IN OUT PARAMS: gain=1 z1=1 p1=10
RIN IN 0 1e11
EG FIRST 0 VALUE={gain*V(IN)}
EFUNC OUT 0 LAPLACE {V(FIRST)}={((1+s/(2*3.1415*{z1}))/(1+s/(2*3.1415*{p1})))}
RY OUT 0 1e11
.ENDS LEAD_LAG_PS
*$
.SUBCKT LIMIT_PS A Y PARAMS: lim=1 lim_m=-1 slope=1 slope_m=0
EY1 Yp 0 VALUE={IF(V(A)>lim, (V(A)-lim)*slope_m+slope*lim, 0)}
EY2 Ypp 0 VALUE={IF(V(A)<lim_m, (lim_m*slope+(V(A)-lim_m)*slope_m), 0)} 
EY3 Yppp 0 VALUE={IF(V(A)<=lim & V(A)>=lim_m, V(A)*slope, 0)}
EO Y 0 VALUE={V(Yp) + V(Ypp)+ V(Yppp)}
.ENDS LIMIT_PS
*$
.SUBCKT MAX2_PS A B Y PARAMS: voff=0
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
EMX Yp 0 VALUE={IF(V(A)> V(B)+{voff}, V(A), V(B))}
RDR Yp Y 1
RO Y 0 1e11
.ENDS MAX2_PS
*$
.SUBCKT MIN2_PS A B Y PARAMS: voff=0
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
EMX Yp 0 VALUE={IF(V(A)< V(B)+{voff}, V(A), V(B))}
RDR Yp Y 1
RO Y 0 1e11
.ENDS MIN2_PS
*$
.SUBCKT MULT_PS M1 M2 MO PARAMS: K=1
RM1 M1 0 1e11
RM2 M2 0 1e11
EMO MO 0 VALUE={K*V(M1)*V(M2)}
RO MO 0 1e11
.ENDS MULT_PS
*$
.SUBCKT MULT1_PS OUTM OUTP INM INP PARAMS: GAIN=1
RM1 OUTM 0 1e11
RM2 OUTP 0 1e11
RM3 INM 0 1e11
RM4 INP 0 1e11
EMO OUTP 0 VALUE={0.5*{GAIN}*V(INP)*V(INM)}
EM1 OUTM 0 VALUE={-0.5*{GAIN}*V(INP)*V(INM)}
.ENDS MULT1_PS
*$
.SUBCKT MUX4_PS D0 D1 D2 D3 C0 C1 Y PARAMS: vhi=1 vlo=0 vthresh=0.5 tdelay=1e-9 trise=1e-9 tfall=1e-9
E1 node1 0 VALUE={IF(V(C0) < {vthresh} & V(C1) < {vthresh},V(d0int),0)}
E2 node2 0 VALUE={IF(V(C0) > {vthresh} & V(C1) < {vthresh},V(d1int),0)}
E3 node3 0 VALUE={IF(V(C0) < {vthresh} & V(C1) > {vthresh},V(d2int),0)}
E4 node4 0 VALUE={IF(V(C0) > {vthresh} & V(C1) > {vthresh},V(d3int),0)}
E5 node5 0 VALUE= { IF((V(node1) > 0.5) |(V(node2) > 0.5) | (V(node3) > 0.5) | (V(node4) > 0.5), 1,0)}
E6 d0int 0 VALUE =  {IF(V(D0) > {vthresh},1,0)}
E7 d1int 0 VALUE =  {IF(V(D1) > {vthresh},1,0)}
E8 d2int 0 VALUE =  {IF(V(D2) > {vthresh},1,0)}
E9 d3int 0 VALUE =  {IF(V(D3) > {vthresh},1,0)}
R1 node5 node5del 1
C1 node5del 0 1n
XBUF node5del Y BUFFER_PS PARAMS: vhi={vhi} vlo={vlo} vthresh=0.5 tplh={tdelay} tphl={tdelay} tr={trise} tf={tfall}
.ENDS MUX4_PS
*$
.SUBCKT DMUX4_PS Y0 Y1 Y2 Y3 A0 A1 D PARAMS: tdelay=1e-9 initval=0
ED Dint 0 VALUE =  {IF(V(D) > 0.5 ,1,0)}
E1 node1 0 VALUE={IF(V(A0) < 0.5 & V(A1) < 0.5,V(Dint), {initval} )}
E2 node2 0 VALUE={IF(V(A0) > 0.5 & V(A1) < 0.5,V(Dint), {initval} )}
E3 node3 0 VALUE={IF(V(A0) < 0.5 & V(A1) > 0.5,V(Dint), {initval} )}
E4 node4 0 VALUE={IF(V(A0) > 0.5 & V(A1) > 0.5,V(Dint), {initval} )}
R1 node1 node1del 1
C1 node1del 0 1n
R2 node2 node2del 1
C2 node2del 0 1n
R3 node3 node3del 1
C3 node3del 0 1n
R4 node4 node4del 1
C4 node4del 0 1n
XBUF1 node1del Y0 BUFFER_PS PARAMS: vhi=1 vlo=0 vthresh=0.5 tplh={tdelay} tphl={tdelay} tr=1n tf=1n
XBUF2 node2del Y1 BUFFER_PS PARAMS: vhi=1 vlo=0 vthresh=0.5 tplh={tdelay} tphl={tdelay} tr=1n tf=1n
XBUF3 node3del Y2 BUFFER_PS PARAMS: vhi=1 vlo=0 vthresh=0.5 tplh={tdelay} tphl={tdelay} tr=1n tf=1n
XBUF4 node4del Y3 BUFFER_PS PARAMS: vhi=1 vlo=0 vthresh=0.5 tplh={tdelay} tphl={tdelay} tr=1n tf=1n
.ENDS DMUX4_PS
*$
.SUBCKT DMUX8_PS Y0 Y1 Y2 Y3 Y4 Y5 Y6 Y7 A0 A1 A2 D PARAMS: tdelay=1e-9 initval=0
ED Dint 0 VALUE =  {IF(V(D) > 0.5 ,1,0)}
E1 node1 0 VALUE={IF(V(A0) < 0.5 & V(A1) < 0.5 & V(A2) < 0.5,V(Dint), {initval})}
E2 node2 0 VALUE={IF(V(A0) > 0.5 & V(A1) < 0.5 & V(A2) < 0.5,V(Dint), {initval})}
E3 node3 0 VALUE={IF(V(A0) < 0.5 & V(A1) > 0.5 & V(A2) < 0.5,V(Dint), {initval})}
E4 node4 0 VALUE={IF(V(A0) > 0.5 & V(A1) > 0.5 & V(A2) < 0.5,V(Dint), {initval})}
E5 node5 0 VALUE={IF(V(A0) < 0.5 & V(A1) < 0.5 & V(A2) > 0.5,V(Dint), {initval})}
E6 node6 0 VALUE={IF(V(A0) > 0.5 & V(A1) < 0.5 & V(A2) > 0.5,V(Dint), {initval})}
E7 node7 0 VALUE={IF(V(A0) < 0.5 & V(A1) > 0.5 & V(A2) > 0.5,V(Dint), {initval})}
E8 node8 0 VALUE={IF(V(A0) > 0.5 & V(A1) > 0.5 & V(A2) > 0.5,V(Dint), {initval})}
R1 node1 node1del 1
C1 node1del 0 1n
R2 node2 node2del 1
C2 node2del 0 1n
R3 node3 node3del 1
C3 node3del 0 1n
R4 node4 node4del 1
C4 node4del 0 1n
R5 node5 node5del 1
C5 node5del 0 1n
R6 node6 node6del 1
C6 node6del 0 1n
R7 node7 node7del 1
C7 node7del 0 1n
R8 node8 node8del 1
C8 node8del 0 1n
XBUF1 node1del Y0 BUFFER_PS PARAMS: vhi=1 vlo=0 vthresh=0.5 tplh={tdelay} tphl={tdelay} tr=1n tf=1n
XBUF2 node2del Y1 BUFFER_PS PARAMS: vhi=1 vlo=0 vthresh=0.5 tplh={tdelay} tphl={tdelay} tr=1n tf=1n
XBUF3 node3del Y2 BUFFER_PS PARAMS: vhi=1 vlo=0 vthresh=0.5 tplh={tdelay} tphl={tdelay} tr=1n tf=1n
XBUF4 node4del Y3 BUFFER_PS PARAMS: vhi=1 vlo=0 vthresh=0.5 tplh={tdelay} tphl={tdelay} tr=1n tf=1n
XBUF5 node5del Y4 BUFFER_PS PARAMS: vhi=1 vlo=0 vthresh=0.5 tplh={tdelay} tphl={tdelay} tr=1n tf=1n
XBUF6 node6del Y5 BUFFER_PS PARAMS: vhi=1 vlo=0 vthresh=0.5 tplh={tdelay} tphl={tdelay} tr=1n tf=1n
XBUF7 node7del Y6 BUFFER_PS PARAMS: vhi=1 vlo=0 vthresh=0.5 tplh={tdelay} tphl={tdelay} tr=1n tf=1n
XBUF8 node8del Y7 BUFFER_PS PARAMS: vhi=1 vlo=0 vthresh=0.5 tplh={tdelay} tphl={tdelay} tr=1n tf=1n
.ENDS DMUX8_PS
*$
.SUBCKT MUX8_PS Y C0 C1 C2 D0 D1 D2 D3 D4 D5 D6 D7 PARAMS: vhi=1 vlo=0 vthresh=0.5 tdelay=1e-9 trise=1e-9 tfall=1e-9
E1 node1 0 VALUE={IF(V(C0) < {vthresh} & V(C1) < {vthresh} & V(C2) < {vthresh},V(d0int),0)}
E2 node2 0 VALUE={IF(V(C0) > {vthresh} & V(C1) < {vthresh} & V(C2) < {vthresh},V(d1int),0)}
E3 node3 0 VALUE={IF(V(C0) < {vthresh} & V(C1) > {vthresh} & V(C2) < {vthresh},V(d2int),0)}
E4 node4 0 VALUE={IF(V(C0) > {vthresh} & V(C1) > {vthresh} & V(C2) < {vthresh},V(d3int),0)}
E5 node5 0 VALUE={IF(V(C0) < {vthresh} & V(C1) < {vthresh} & V(C2) > {vthresh},V(d4int),0)}
E6 node6 0 VALUE={IF(V(C0) > {vthresh} & V(C1) < {vthresh} & V(C2) > {vthresh},V(d5int),0)}
E7 node7 0 VALUE={IF(V(C0) < {vthresh} & V(C1) > {vthresh} & V(C2) > {vthresh},V(d6int),0)}
E8 node8 0 VALUE={IF(V(C0) > {vthresh} & V(C1) > {vthresh} & V(C2) > {vthresh},V(d7int),0)}
E9 node9 0 VALUE= { IF((V(node1) > 0.5) |(V(node2) > 0.5) | 
+ (V(node3) > 0.5) | (V(node4) > 0.5) |
+ (V(node5) > 0.5) | (V(node6) > 0.5) |
+ (V(node7) > 0.5) | (V(node8) > 0.5)
+ , 1,0)}
E10 d0int 0 VALUE =  {IF(V(D0) > {vthresh},1,0)}
E11 d1int 0 VALUE =  {IF(V(D1) > {vthresh},1,0)}
E12 d2int 0 VALUE =  {IF(V(D2) > {vthresh},1,0)}
E13 d3int 0 VALUE =  {IF(V(D3) > {vthresh},1,0)}
E14 d4int 0 VALUE =  {IF(V(D4) > {vthresh},1,0)}
E15 d5int 0 VALUE =  {IF(V(D5) > {vthresh},1,0)}
E16 d6int 0 VALUE =  {IF(V(D6) > {vthresh},1,0)}
E17 d7int 0 VALUE =  {IF(V(D7) > {vthresh},1,0)}
R1 node9 node9del 1
C1 node9del 0 1n
XBUF node9del Y BUFFER_PS PARAMS: vhi={vhi} vlo={vlo} vthresh=0.5 tplh={tdelay} tphl={tdelay} tr={trise} tf={tfall}
.ENDS MUX8_PS
*$
.SUBCKT NANDLATCH_PS SET RESET Q0 QN PARAMS: vhi=1 vlo=0 vthresh=500e-3 tdelay=1e-9 tr=1e-9 tf=1e-9 initval=0
C1 Q0int 0 0.01p IC={initval*vhi}
C2 QNint 0 0.01p IC={(1-initval)*vhi}
XN1 Q0int SET QNint NAND2_PS PARAMS: vhi={vhi} vlo={vlo} vthresh={vthresh} tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9 
XN2 QNint RESET Q0int NAND2_PS PARAMS: vhi={vhi} vlo={vlo} vthresh={vthresh} tplh=2e-9 tphl=2e-9 tr=1e-9 tf=1e-9 
XN3 Q0int Q0 BUFFER_PS PARAMS: vhi={vhi} vlo={vlo} vthresh={vthresh} tplh={tdelay} tphl={tdelay} tr={tr} tf={tf}
XN4 QNint QN BUFFER_PS PARAMS: vhi={vhi} vlo={vlo} vthresh={vthresh} tplh={tdelay} tphl={tdelay} tr={tr} tf={tf}
.ENDS NANDLATCH_PS
*$
.SUBCKT NORLATCH_PS SET RESET Q0 QN PARAMS: vhi=1 vlo=0 vthresh=500e-3 tdelay=1e-9 tr=1e-9 tf=1e-9 initval=0
C1 Q0int 0 0.01p IC={initval*vhi}
C2 QNint 0 0.01p IC={(1-initval)*vhi}
XN1 QNint SET Q0int NOR2_PS PARAMS: vhi={vhi} vlo={vlo} vthresh={vthresh} tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9 
XN2 Q0int RESET QNint NOR2_PS PARAMS: vhi={vhi} vlo={vlo} vthresh={vthresh} tplh=2e-9 tphl=2e-9 tr=1e-9 tf=1e-9 
XN3 Q0int Q0 BUFFER_PS PARAMS: vhi={vhi} vlo={vlo} vthresh={vthresh} tplh={tdelay} tphl={tdelay} tr={tr} tf={tf}
XN4 QNint QN BUFFER_PS PARAMS: vhi={vhi} vlo={vlo} vthresh={vthresh} tplh={tdelay} tphl={tdelay} tr={tr} tf={tf}
.ENDS NORLATCH_PS
*$
.SUBCKT RSLATCHRDOM_PS SET RESET Q0 QN PARAMS: vhi=1 vlo=0 vthresh=500e-3 tdelay=1e-9 tr=1e-9 tf=1e-9 initval=0
C1 Q0int 0 0.01p IC={initval*vhi}
C2 QNint 0 0.01p IC={(1-initval)*vhi}
XN1 QNint SET Q0int NOR2_PS PARAMS: vhi={vhi} vlo={vlo} vthresh={vthresh} tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9 
XN2 Q0int RESET QNint NOR2_PS PARAMS: vhi={vhi} vlo={vlo} vthresh={vthresh} tplh=2e-9 tphl=2e-9 tr=1e-9 tf=1e-9 
XN3 Q0int Q0 BUFFER_PS PARAMS: vhi={vhi} vlo={vlo} vthresh={vthresh} tplh={tdelay} tphl={tdelay} tr={tr} tf={tf}
XN4 QNint QN BUFFER_PS PARAMS: vhi={vhi} vlo={vlo} vthresh={vthresh} tplh={tdelay} tphl={tdelay} tr={tr} tf={tf}
.ENDS RSLATCHRDOM_PS
*$
.SUBCKT RSLATCHSDOM_PS SET RESET Q0 QN PARAMS: vhi=1 vlo=0 vthresh=500e-3 tdelay=1e-9 tr=1e-9 tf=1e-9 initval=0
C1 Q0int 0 0.01p IC={initval*vhi}
C2 QNint 0 0.01p IC={(1-initval)*vhi}
XN1 QNint SET Q0int NOR2_PS PARAMS: vhi={vhi} vlo={vlo} vthresh={vthresh} tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9 
XN2 Q0int RESET QNint NOR2_PS PARAMS: vhi={vhi} vlo={vlo} vthresh={vthresh} tplh=2e-9 tphl=2e-9 tr=1e-9 tf=1e-9 
XN5  Yint SET RESET AND2_PS PARAMS: vhi={vhi} vlo={vlo} vthresh={vthresh} tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9 
XN6 QNint1 Yint QNint OR2_PS PARAMS: vhi={vhi} vlo={vlo} vthresh={vthresh} tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9 
XN7 Q0int1 Yint Q0int OR2_PS PARAMS: vhi={vhi} vlo={vlo} vthresh={vthresh} tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9 
XN3 Q0int1 Q0 BUFFER_PS PARAMS: vhi={vhi} vlo={vlo} vthresh={vthresh} tplh={tdelay} tphl={tdelay} tr={tr} tf={tf}
XN4 QNint1 QN BUFFER_PS PARAMS: vhi={vhi} vlo={vlo} vthresh={vthresh} tplh={tdelay} tphl={tdelay} tr={tr} tf={tf}
.ENDS RSLATCHSDOM_PS
*$
.SUBCKT XNOR2_PS Y A B PARAMS: vhi=1 vlo=0 vthresh=500e-3 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
VS VSUP 0 DC 1
ENXOR2 Ypp 0 VALUE={IF(V(A) > {vthresh} ^ V(B) > {vthresh}, 0, 1)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*({vhi} - {vlo})+{vlo}}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS XNOR2_PS
*$
.SUBCKT OPAMP_PS POS NEG AVDD AVSS Y PARAMS: ip=40e-6 gain=5e3 freq=1e6 slewrate=6e5 Voffset=0 rout=0
EVSS  AVSSn 0 VALUE={V(AVSS)-10}
E1    POSoff POS VALUE={Voffset}
Q1	5 POSoff	7	NPN
Q2	6 NEG	8	NPN
RC1	AVDD	5	{slewrate/(6.28*freq*ip)}
RC2	AVDD	6	{slewrate/(6.28*freq*ip)}
RE1	7	4	{(slewrate/(6.28*freq*ip))-2*0.026/ip}
RE2	8	4	{(slewrate/(6.28*freq*ip))-2*0.026/ip}
GEE	4	AVSSn	VALUE={ip}
G1	100 10	6 5 {freq*6.28*ip/slewrate}
RP1	10	100	{slewrate*gain/(6.28*freq*ip)}
CP1	10	100	{ip/slewrate}
RREF1	AVDD	103	100K
RREF2	103	AVSSn	100K
EREF	100 0	103 0 1
R100	100	0	1MEG
EOUT	80 100	10 100	1
RO	80	Y	{Rout+0.001}
.MODEL NPN  NPN(BF=50000)
.ENDS OPAMP_PS
*$
.SUBCKT RES_PS A B PARAMS: r=1000
R1 A B {r}
.ENDS RES_PS
*$
.SUBCKT CLK_PS CK PARAMS: vlo=0.0  vhi=1.0 tdelay=1p per=1.0 pw=0.5 
V1 CK 0 
+ PULSE {vlo} {vhi} {tdelay} 1p 1p {pw} {per}
.ENDS CLK_PS
*$
.SUBCKT SDR_PS A Y PARAMS: vhi=1 vlo=0 vth=500e-3 tdel=1e-9 initval=0
RA A 0 1e11
CA A 0 0.01pF
VS VSUP 0 DC 1
EBUF1 Ypp 0 VALUE={IF(V(A) > ({vth}), {1-initval}, {initval})}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tdel+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tdel+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
EOUT OUTf 0 VALUE={V(Yp)*({vhi} - {vlo})+{vlo}}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS SDR_PS
*$
.SUBCKT SET0_PS Y
VDC Y 0 DC 0
.ENDS SET0_PS
*$
.SUBCKT SET1_PS Y
VDC Y 0 DC 1
.ENDS SET1_PS
*$
.SUBCKT SUM_PS IN1 IN2 OUT PARAMS: K1=1 K2=1
EOUT OUT1 0 VALUE={{K1}*V(IN1)+ {K2}*V(IN2)}
R1 OUT1 OUT 1
C1 OUT 0 1n
.ENDS SUM_PS
*$
.SUBCKT SW1P2T_PS A SWC SWD1 SWD2 PARAMS: vth=500e-3 ron=100 roff=1e6 tdelay=1e-9 trise=1e-9 tfall=1e-9 initval=0
VS VSUP 0 DC 1
EBUF1 Ypp 0 VALUE={IF(V(A) > ({vth}), {initval}, {1-initval})}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tdelay+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tdelay+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(trise+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tfall+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT1 VG1 test1 VALUE={V(OUTr)}
Etest1 test1 0 VALUE {IF(V(SWD1) < V(SWC), V(SWD1), V(SWC))}
Etest2 test2 0 VALUE {IF(V(SWD2) < V(SWC), V(SWD2), V(SWC))}
EOUT2 VG2 test2 VALUE={1-V(OUTr)}
XNSW3 SWD1 VG1 SWC NSW_PS PARAMS: RONval={ron} VTHval=0.5
XNSW4 SWD2 VG2 SWC NSW_PS PARAMS: RONval={ron} VTHval=0.5
.ENDS SW1P2T_PS
*$
.SUBCKT SWITCH_PS A SWD SWC PARAMS: vth=500e-3 ron=1e3 roff=1e6 tdelay=1e-9 trise=1e-9 tfall=1e-9 initval=0
VS VSUP 0 DC 1
EBUF1 Ypp 0 VALUE={IF(V(A) > ({vth}), {1-initval}, {initval})}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tdelay+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tdelay+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(trise+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tfall+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT VG1 SWC VALUE={V(OUTr)}
XNSW3 SWD VG1 SWC NSW_PS PARAMS: RONval={ron} VTHval=0.5
.ENDS SWITCH_PS
*$
.SUBCKT VAR2ELEC_PS IN OUTP OUTN PARAMS: gain=1
RIN IN 0 1e11
ROUTP OUTP 0 1e11
ROUTN OUTN 0 1e11
E1 OUTP OUTN VALUE={gain*V(IN)}
RO OUTP 0 1e11
.ENDS VAR2ELEC_PS
*$
.SUBCKT VCCS_PS OUTP OUTN CTRLP CTRLN PARAMS: gm=1
ROUTP OUTP 0 1e11
ROUTN OUTN 0 1e11
RCTRLP CTRLP 0 1e11
RCTRLN CTRLN 0 1e11
G1 OUTP OUTN CTRLP CTRLN {gm}
.ENDS VCCS_PS
*$
.SUBCKT CCCS_MOS_PS IOUT_P IOUT_N IIN_P IIN_N PARAMS: GAIN=1 VMAX=5 VTH=1
RCTRLP IIN_P 0 1e11
RCTRLN IIN_N 0 1e11
V1 IIN_P IIN_N 0
GOUT IOUT_P IOUT_N VALUE={IF(V(IOUT_P, IOUT_N)< {VTH}, I(V1)*{GAIN}*V(IOUT_P,IOUT_N)/{VTH}, I(V1)*
+ {GAIN})}
DCLAMP IOUT_P INT1  DD
V2 INT1 IOUT_N {VMAX} 
ROUTP IOUT_P 0 1e11
ROUTN IOUT_N 0 1e11
.MODEL DD D( IS=1F N=0.01 TT = 10p )
.ENDS CCCS_MOS_PS
*$
.SUBCKT VCCS_MOS_PS IOUT_P IOUT_N VIN_P VIN_N PARAMS: GM=1 VTH=1
RCTRLP VIN_P 0 1e11
RCTRLN VIN_N 0 1e11
GOUT IOUT_P IOUT_N VALUE={IF(V(IOUT_P, IOUT_N)>{VTH}, V(VIN_P,VIN_N)*{GM}, V(IOUT_P, IOUT_N)*
+ V(VIN_P,VIN_N)*{GM}/{VTH})}
ROUTP IOUT_P 0 1e11
ROUTN IOUT_N 0 1e11
.ends VCCS_MOS_PS
*$
.SUBCKT VCCS_CLIP_PS IOUT_P IOUT_N VIN_P VIN_N PARAMS: GM=1 IOMAX=1 IOMIN=-1
RCTRLP VIN_P 0 1e11
RCTRLN VIN_N 0 1e11
GOUT IOUT_P IOUT_N VALUE={LIMIT({GM}*V(VIN_P,VIN_N), {IOMIN},{IOMAX})}
ROUTP IOUT_P 0 1e11
ROUTN IOUT_N 0 1e11
.ends VCCS_CLIP_PS
*$
.SUBCKT VCVS_PS OUTP OUTN CTRLP CTRLN PARAMS: GAIN=1
ROUTP OUTP 0 1e11
ROUTN OUTN 0 1e11
RCTRLP CTRLP 0 1e11
RCTRLN CTRLN 0 1e11
E1 OUTP OUTN CTRLP CTRLN {GAIN}
.ENDS VCVS_PS
*$
.SUBCKT VCVSCLIP_PS YP YN POS NEG PARAMS: gain=1 vomax=1 vomin=-1
RP POS 0 1e11
CP POS 0 0.01pF
RN NEG 0 1e11
CN NEG 0 0.01pF
ROUTN YN 0 1e11
COUTN YN 0 0.01pF
EVCLP YP YN VALUE={LIMIT((V(POS)-V(NEG))*{gain},{vomin},{vomax})}
RO YP 0 1e11
.ENDS VCVSCLIP_PS
*$
.SUBCKT VDC_PS OUT GRND PARAMS: dc=1
ROUT OUT 0 1e11
V1 OUT GRND DC {dc}
.ENDS VDC_PS
*$
.SUBCKT XFR_PS PP PM SP SM PARAMS: LP=1U LS=1U M=1
RTERM PP PM 1MEG
RTERM2 SP SM 1MEG
RIN PP PP1 1M
RO SP SP1 1M
L1 PP1 PM {LP}
L2 SP1 SM {LS}
K1 L1 L2 {M}
.ENDS XFR_PS
*$
.SUBCKT XOR2_PS Y A B PARAMS: vhi=1 vlo=0 vthresh=500e-3 tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
VS VSUP 0 DC 1
EXOR2 Ypp 0 VALUE={IF(V(A) > {vthresh} ^ V(B) > {vthresh}, 1, 0)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*({vhi} - {vlo})+{vlo}}
RDR OUTf Y 1
RO Y 0 1e11
.ENDS XOR2_PS
*$
.SUBCKT NSW_PS D G S PARAMS: RONval=10k VTHval=0.7 VCHARval=0.01 CGval=0.01pF CDval=0.01pF CSval=0.01pf
RDDUM D 0 1e11
RSDUM S 0 1e11
RGDUM G 0 1e11
CG G D {CGval}
CD D S {CDval}
CS G S {CSval}
Etest test 0 VALUE={IF(V(D) > V(S), V(G,S), V(G,D))}
GOUT D S VALUE={V(D,S)/(RONval*(1+EXP(-LIMIT(((V(test)-VTHval)/VCHARval),-80,80))))}
.ENDS NSW_PS
*$
.SUBCKT HBRIDGE_PS DH DL VIN PGRND SW PARAMS: RonH=20e-3 RonL=10e-3 Roff=1e9 vth1=2 vth2=3 Cp=10e-12 Rcp=10 RgH=1 
+CgsH=500e-12 CgdH=50e-12 CdsH=250e-12 RgL=1 CgsL=1e-9 CgdL=100e-12 CdsL=500e-12
XG1 DHp DH DLb AND2_PS  PARAMS: vhi=1 vlo=0 vthresh=500e-3 tplh=10e-9 tphl=1e-9 tr=1e-9 tf=1e-9
XG2 DLb DL INV_PS  PARAMS: vhi=1 vlo=0 vthresh=500e-3 tplh=10e-9 tphl=1e-9 tr=1e-9 tf=1e-9
XG3 DLp DL DHb AND2_PS  PARAMS: vhi=1 vlo=0 vthresh=500e-3 tplh=10e-9 tphl=1e-9 tr=1e-9 tf=1e-9
XG4 DHb DH INV_PS  PARAMS: vhi=1 vlo=0 vthresh=500e-3 tplh=10e-9 tphl=1e-9 tr=1e-9 tf=1e-9
ETOP TG SW DHp 0 5
EBOT LG PGRND DLp 0 5
RGH TG TGp {RgH}
RGL LG LGp {RgL}
RSW SW NP {Rcp}
CSW NP PGRND {Cp}
CGH TGp SW {CgsH}
CGL LGp PGRND {CgsL}
CDH TGp VIN {CgdH}
CDL LGp SW {CgdL}
CBH VIN SW {CdsH}
CBL SW PGRND {CdsL}
XMT VIN TGp SW NSW_PS PARAMS: RONval={RonH} VTHval={vth1} VCHARval=0.01 CGval=0.01pF CDval=0.01pF 
XMB SW LGp PGRND NSW_PS PARAMS: RONval={RonL} VTHval={vth2} VCHARval=0.01 CGval=0.01pF CDval=0.01pF 
DBT SW VIN DCLAMP
DBB PGRND SW DCLAMP
.MODEL DCLAMP D IS=1e-10 Rs=10m
.ENDS HBRIDGE_PS
*$
.SUBCKT SWITCH1_PS G Y A PARAMS: vth=500e-3 ron=1e3 roff=1e6 tdelay=1e-9 trise=1e-9 tfall=1e-9 initval=0
RG G 0 1e11
CG G 0 0.0001pF
VS VSUP 0 DC 1
EINV1 Ypp 0 VALUE={IF(V(G) < ({vth}), 1-{initval}, {initval})}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tdelay+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tdelay+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF IC={initval}
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTd Yp 0 NSW_PS PARAMS: RONval={(trise+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW2 OUTd Yp VSUP PSW_PS PARAMS: RONval={(tfall+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL2 OUTd 0 1pF
EOUTf OUTf 0 VALUE={IF (V(OUTd) >= 0.5 , {roff}-(1-V(OUTd))*2*({roff}+{ron}), {ron})}
EOUTr OUTr 0 VALUE={IF (V(OUTd) < 0.5 , {roff}, {ron}-(V(OUTd)*2*({ron}-{roff})))}
EOUT OUTe 0 VALUE={(V(OUTr)*(1-V(Yp))+V(OUTf)*V(Yp))}
ROUT OUTe 0 1e11
GOUT Y A VALUE={V(Y,A)/V(OUTe)}
.ENDS SWITCH1_PS
*$
.SUBCKT SWITCH2_PS G Y A PARAMS: vth=500e-3 ron=1e3 roff=1e6 tdelay=1e-9 trise=1e-9 tfall=1e-9 initval=0
RG G 0 1e11
CG G 0 0.0001pF
VS VSUP 0 DC 1
EINV1 Ypp 0 VALUE={IF(V(G) < ({vth}), 1-{initval}, {initval})}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tdelay+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tdelay+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF IC={initval}
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
.MODEL SSWITCH VSWITCH (VON=1 VOFF=0 RON={ron} ROFF={roff})
S1 Y A Yp 0 SSWITCH
.ENDS SWITCH2_PS
*$
.SUBCKT SWITCH3_PS G Y A PARAMS: vth=500e-3 ron=1e3 roff=1e6 tdelay=1e-9 trise=1e-9 tfall=1e-9 initval=0
RG G 0 1e11
CG G 0 0.0001pF
VS VSUP 0 DC 1
EINV1 Ypp 0 VALUE={IF(V(G) < ({vth}), 1-{initval}, {initval})}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tdelay+1e-15)/(1e-12*0.693)} VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tdelay+1e-15)/(1e-12*0.693)} VTHval=0.5
CDEL1 OUTp 0 1pF IC={initval}
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
R1 Y A 1E12
G1 Y A POLY(2) Y A Yp 0 0 0 0 0 1
.ENDS SWITCH3_PS
*$
.SUBCKT ADD_PS OUTMINUS OUTPLUS INMINUS INPLUS PARAMS: GAIN=1
EOP OUTPLUSINT 0 VALUE = {0.5*{GAIN}*(V(INPLUS) + V(INMINUS))}
EOM OUTMINUSINT 0 VALUE = {-0.5*{GAIN}*(V(INPLUS) + V(INMINUS))}
REOP OUTPLUSINT OUTPLUS 1
CEOP OUTPLUS 0 1n
REOM OUTMINUSINT OUTMINUS 1
CEOM OUTMINUS 0 1n
.ENDS ADD_PS
*$
.SUBCKT DIVIDE_PS OUTMINUS OUTPLUS DENOMINATOR NUMERATOR PARAMS: GAIN=1 MIN_VALUE=1e-9
EDINT DENI1 0 VALUE={MAX(V(DENOMINATOR),{MIN_VALUE})}
RDINT DENI1 DENINT 1
CDINT DENINT 0 1n
EOP OUTPLUSINT 0 VALUE = {0.5*{GAIN}*(V(NUMERATOR) / V(DENINT))}
EOM OUTMINUSINT 0 VALUE = {-0.5*{GAIN}*(V(NUMERATOR) / V(DENINT))}
REOP OUTPLUSINT OUTPLUS 1
CEOP OUTPLUS 0 1n
REOM OUTMINUSINT OUTMINUS 1
CEOM OUTMINUS 0 1n
.ENDS DIVIDE_PS
*$
.MODEL N_IDL  NMOS 
*$
.MODEL P_IDL  PMOS 
*$
.subckt nmos nd ng ns nb params: w1=100u l1=1u
m1 nd ng ns nb nm l={l1} w={w1}
.model nm nmos
+ vto=0.7
+ kp=0.000184225
.ends nmos
*$
.SUBCKT PMOS ND NG NS NB PARAMS: W1=1u L1=1u
m1 ND NG NS NB pm L={L1} W={W1}
.model pm pmos LEVEL=3 VTO=-0.7 kp=1.84225306543914E-04 
.ends PMOS
*$
