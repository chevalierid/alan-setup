***
*$
*  UCC25230 Model
*****************************************************************************
*  (C) Copyright 2011 Texas Instruments Incorporated. All rights reserved.
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.
** TI and its licensors and suppliers make no warrenties, either expressed
** or implied, with respect to this model, including the warranties of 
** merchantability or fitness for a particular purpose.  The model is
** provided solely on an "as is" basis.  The entire risk as to its quality
** and performance is with the customer
*****************************************************************************
*
** Released by: Analog eLab Design Center, Texas Instruments Inc.
* Part: UCC25230
* Date: 10/31/2011
* Model Type: TRANSIENT
* Simulator: PSPICE
* Simulator Version: 16.0.0.p001
* EVM Order Number: UCC25230EVM-754
* EVM Users Guide: SLUU670 – NOVEMBER 2011
* Datasheet: SLUSAQ6 – NOVEMBER 2011
*
* Model Version: Final 1.00
*
*****************************************************************************
*
* Updates:
*
* Final 1.00
* Release to Web.
*
*****************************************************************************
* source UCC25230
.SUBCKT UCC25230
+ FB
+ COMP
+ UV/OV
+ VDD
+ VIN
+ PHASE
+ VIN_G
+ BOOT
+ GND
+ PARAMS: mode=0
X_U5_D1 0 U5_N87087 Z_IDEAL PARAMS: RS=1 VTH=3.6
X_U5_U1 U5_N87119 U5_N87087 U5_N87103 0 COMP_BOB
V_U5_V1 U5_N87103 0 2.5Vdc
E_U5_ABM1 SS 0 VALUE { MIN(V(U5_N87087), 2.5) }
I_U5_I1 0 U5_N87087 DC 10u
E_U5_ABM2 U5_FBGZ 0 VALUE { IF( V(ENB) > 0.5 &
+ V(FB) < 1.5 &
+ V(U5_N87119) > 0.5, 1, 0) }
C_U5_C1 U5_N87087 U5_N87119 7.9n IC={mode*2.6}
E_U5_ABM3 U5_START 0 VALUE { IF( V(HS_ILIM) > 0.5 |
+ V(ENB) < 0.5 |
+ V(U5_FBGZ) > 0.5, 1, 0) }
X_U5_S1 U5_N87684 0 U5_N87087 0 SS_Logic_U5_S1
X_U5_U2 U5_START U5_N87684 DELAY PARAMS: RINP=100K DELAY=10u
R_R1 BOOT 0 10MEG
X_D1 VDD BOOT D_IDEAL PARAMS: RS=100 VTH=0.7
G_U1_G1 VIN U1_N66526 U1_N66526 VDD 0.40
E_U1_ABM1 U1_N66526 0 VALUE { MAX(0, MIN(V(VIN)-1,
+ MIN(9+86e-6*V(VIN),
+ V(VDD)+0.015))) }
R_U1_R1 U1_N66526 VDD 2.5
E_U2_ABM2 U2_N65379 0 
+ VALUE { IF(V(VDD) + 0.7*V(ENB) > 7.5, 1, 0) }
R_U2_R1 U2_N65379 ENB 1
C_U2_C1 ENB 0 1n
R_U4_R4 U4_N84026 U4_DISCHARGE 1k
R_U4_R1 U4_N83946 U4_Q 1
R_U4_R2 U4_N83950 U4_QB 1
E_U4_ABM4 U4_N83950 0 VALUE { IF(V(RAMP) < 0.15
+ | V(U4_Q) < 0.6, 1, 0) }
C_U4_C1 0 U4_Q 1n
C_U4_C2 0 U4_QB 1n
X_U4_U1 ENB U4_N83642 CLK AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+ VTHRESH=500E-3
E_U4_ABM3 U4_N83946 0 VALUE { IF(V(RAMP) > 0.06*V(VIN)
+ | V(U4_QB) < 0.4, 1, 0) }
X_U4_U2 ENB U4_QB U4_N84026 NAND2_BASIC_GEN 
+ PARAMS: VDD=1 VSS=0
+ VTHRESH=500E-3
G_U4_G1 VDD RAMP VIN 0 490e-9
X_U4_U5_U2 U4_U5_N17259 U4_N83642 BUF_BASIC_GEN 
+ PARAMS: VDD=1 VSS=0
+ VTHRESH=0.5
X_U4_U5_U1 U4_N83642 U4_Q U4_U5_N17251 OR2_BASIC_GEN 
+ PARAMS: VDD=1
+ VSS=0 VTHRESH=500E-3
R_U4_U5_R1 0 U4_U5_N17259 1k
C_U4_U5_C1 U4_U5_N17251 U4_U5_N17259 230p
X_U4_U5_U17 0 U4_U5_N17259 D_IDEAL PARAMS: RS=1 VTH=0
X_U4_S1 U4_DISCHARGE 0 RAMP 0 OSC_U4_S1
C_U4_C3 0 RAMP 22p
C_U4_C4 U4_DISCHARGE 0 2.5p
C_U6_C2 U6_N67651 0 1n
R_U6_R4 U6_N67295 COMP 5
R_U6_R3 SS U6_SOFT 10
C_U6_C3 U6_SOFT 0 100p
E_U6_ABM1 U6_N66169 0 
+ VALUE { LIMIT(10000*(V(U6_SOFT)-V(FB))+2.5,
+ V(GND), V(VDD)) }
R_U6_R1 U6_N66169 U6_N66189 2.65MEG
C_U6_C1 U6_N66189 0 133p IC={mode*1.5}
E_U6_ABM3 U6_N67295 0 
+ VALUE { LIMIT(V(U6_N67651), V(COMP) - 0.025,
+ V(COMP) + 0.025) }
R_U6_R2 U6_N69683 U6_N67651 12.37
E_U6_ABM4 U6_N69683 0 
+ VALUE { LIMIT(V(U6_N66189), 0.044*V(VDD, GND),
+ 0.922*V(VDD, GND)) }
E_U9_ABM6 U9_N81237 0 VALUE { IF(V(U9_Q) > 0.5 &
+ V(CLK) < 0.4, 1, 0) }
R_U9_R1 U9_N81117 U9_Q 1
R_U9_R2 U9_N81135 U9_QB 1
C_U9_C1 0 U9_Q 1n
C_U9_C2 0 U9_QB 1n
E_U9_ABM3 U9_N81117 0 
+ VALUE { IF((V(CLK) > 0.5 & V(U9_RST) < .6)
+ | V(U9_QB) < 0.4, 1, 0) }
E_U9_ABM4 U9_N81135 0 VALUE { IF(V(U9_RST) > 0.6
+ | V(U9_Q) < 0.6, 1, 0) }
E_U9_ABM5 U9_RST 0 VALUE { IF(V(RAMP) + 0.7 >
+ V(COMP), 1, 0) }
R_U9_R3 U9_N81237 PWM 1
C_U9_C3 0 PWM 1n
E_U7_ABM2 UV 0 VALUE { IF(V(UV/OV) < 1.0, 1, 0) }
G_U7_G1 VDD UV/OV OV 0 22u
G_U7_G2 UV/OV 0 UV 0 11u
E_U7_ABM1 OV 0 VALUE { IF(V(UV/OV) > 5.0, 1, 0) }
X_U8_S1 U8_N66428 0 VIN_G GND VIN_G_2_U8_S1
X_U8_U1 OV UV U8_N66428 OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+ VTHRESH=500E-3
E_U10_ABM1 U10_DRV 0 VALUE { IF( V(ENB) > 0.5 &
+ V(PWM) > 0.5 &
+ V(HS_ILIM) < 0.5, 1, 0) }
X_U10_H1 VIN U10_N73540 U10_DET 0 HSD_2_U10_H1
R_U10_R1 U10_DRV U10_GATE 1k
C_U10_U1_C2 0 U10_U1_QB 1n
X_U10_U1_U1 ENB U10_U1_Q HS_ILIM AND2_BASIC_GEN 
+ PARAMS: VDD=1 VSS=0
+ VTHRESH=500E-3
E_U10_U1_ABM1 U10_U1_N68247 0 
+ VALUE { IF( V(U10_U1_QB) < 0.4 |
+ (V(U10_BLANK) > 0.5 & V(U10_DET) > 0.40), 1, 0) }
E_U10_U1_ABM2 U10_U1_N68251 0 
+ VALUE { IF( V(U10_U1_Q) < 0.6 | V(PWM) <
+ 0.5 | V(ENB) < 0.5, 1, 0) }
R_U10_U1_R1 U10_U1_N68247 U10_U1_Q 1
R_U10_U1_R2 U10_U1_N68251 U10_U1_QB 1
C_U10_U1_C1 0 U10_U1_Q 1n
C_U10_C1 U10_GATE 0 30.5p
X_U10_U3 U10_DRV UGSENSE DELAY PARAMS: RINP=1K DELAY=1n
X_U10_S1 U10_GATE 0 U10_N73540 PHASE HSD_2_U10_S1
X_U10_D1 PHASE VIN D_IDEAL PARAMS: RS=1 VTH=0.7
C_U10_C2 VIN PHASE 100p
X_U10_U4 UGSENSE U10_BLANK DELAY PARAMS: RINP=1K DELAY=75n
R_U11_R1 U11_DRV U11_GATE 1k
X_U11_D1 GND PHASE D_IDEAL PARAMS: RS=1 VTH=0.7
X_U11_S1 U11_GATE 0 U11_N74114 GND LSD_2_U11_S1
X_U11_U4 U11_PWM_BAR U11_N74236 DELAY 
+ PARAMS: RINP=1K DELAY=2n
C_U11_C1 U11_GATE 0 25p
X_U11_U3 PWM U11_PWM_BAR INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+ VTHRESH=500E-3
X_U11_U6 U11_N74358 U11_BLANK DELAY 
+ PARAMS: RINP=1K DELAY=20n
E_U11_ABM1 U11_DRV 0 VALUE { IF( V(ENB) > 0.5 &
+ V(U11_N74236) > 0.5 &
+ V(UGSENSE) < 0.5 &
+ V(LS_ILIM) < 0.5, 1, 0) }
C_U11_C2 PHASE GND 100p
X_U11_H1 PHASE U11_N74114 U11_DET 0 LSD_2_U11_H1
X_U11_U5 U11_N74358 U11_GATE U11_N74422 U11_N74434 COMP_BOB
V_U11_V1 U11_N74422 0 .90Vdc
V_U11_V2 U11_N74434 0 0.5Vdc
C_U11_U1_C2 0 U11_U1_QB 1n
X_U11_U1_U1 ENB U11_U1_Q LS_ILIM AND2_BASIC_GEN 
+ PARAMS: VDD=1 VSS=0
+ VTHRESH=500E-3
E_U11_U1_ABM1 U11_U1_N68247 0 
+ VALUE { IF( V(U11_U1_QB) < 0.4 |
+ (V(U11_BLANK) > 0.5 & V(U11_DET) > 0.40), 1, 0) }
E_U11_U1_ABM2 U11_U1_N68251 0 
+ VALUE { IF( V(U11_U1_Q) < 0.6 |
+ V(U11_PWM_BAR) < 0.5 | V(ENB) < 0.5, 1, 0) }
R_U11_U1_R1 U11_U1_N68247 U11_U1_Q 1
R_U11_U1_R2 U11_U1_N68251 U11_U1_QB 1
C_U11_U1_C1 0 U11_U1_Q 1n
R_U11_R2 VDD GND 10MEG

.ENDS UCC25230  

.subckt SS_Logic_U5_S1 1 2 3 4
S_U5_S1 3 4 1 2 _U5_S1
RS_U5_S1 1 2 1G
.MODEL _U5_S1 VSWITCH Roff=10e6 Ron=100 Voff=0.0V Von=1.0V
.ends SS_Logic_U5_S1

.subckt OSC_U4_S1 1 2 3 4
S_U4_S1 3 4 1 2 _U4_S1
RS_U4_S1 1 2 1G
.MODEL _U4_S1 VSWITCH Roff=10e6 Ron=300 Voff=0.7V Von=0.90V
.ends OSC_U4_S1

.subckt VIN_G_2_U8_S1 1 2 3 4
S_U8_S1 3 4 1 2 _U8_S1
RS_U8_S1 1 2 1G
.MODEL _U8_S1 VSWITCH Roff=10e6 Ron=40 Voff=0.5V Von=0.9V
.ends VIN_G_2_U8_S1

.subckt HSD_2_U10_H1 1 2 3 4
H_U10_H1 3 4 VH_U10_H1 1
VH_U10_H1 1 2 0V
.ends HSD_2_U10_H1

.subckt HSD_2_U10_S1 1 2 3 4
S_U10_S1 3 4 1 2 _U10_S1
RS_U10_S1 1 2 1G
.MODEL _U10_S1 VSWITCH Roff=6MEG Ron=6 Voff=0.55V Von=0.60V
.ends HSD_2_U10_S1

.subckt LSD_2_U11_S1 1 2 3 4
S_U11_S1 3 4 1 2 _U11_S1
RS_U11_S1 1 2 1G
.MODEL _U11_S1 VSWITCH Roff=6MEG Ron=5 Voff=0.55V Von=0.60V
.ends LSD_2_U11_S1

.subckt LSD_2_U11_H1 1 2 3 4
H_U11_H1 3 4 VH_U11_H1 1
VH_U11_H1 1 2 0V
.ends LSD_2_U11_H1
*
*
* Vsec = N*Vpri
* Ipri = N*Isec
*$
.SUBCKT TFMR_3 P1A P1B S1A S1B PARAMS: NP1=1 NS1=2 RP1=25E-3
+ RS1=95E-3 LLEAK=0.125E-6 LM=2.7E-6 RCORE=5E3 CINT=22p
R_R3 P1B 2 {RCORE}
L_L1 P1A 1 {LLEAK}
R_R1 1 2 {RP1}
L_L2 P1B 2 {LM} IC=0
E_E1 3 S1B 2 P1B {NS1/NP1}
R_R2 3 4 {RS1}
F_F1 2 P1B VF_F1 {NS1/NP1}
VF_F1 4 S1A 0V
C_C1 P1B S1B {CINT}
.ends TFMR_3
*$
.SUBCKT TFMR_BOB P1A P1B S1A S1B
+ PARAMS: LP=220u LS=220u RP=1 RS=1 CP=2p CS=2p KPS=0.98
*
* Primary Parasitics
RP1 P1A P1X {RP/2}
RP2 P1B P1Y {RP/2}
CP1 P1X P1Y {CP}
*
* Secondary Parasitics
RS1 S1A S1X {RS/2}
RS2 S1B S1Y {RS/2}
CS1 S1X S1Y {CS}
*
* Transformer
LP1 P1X P1Y {LP}
LS1 S1X S1Y {LP}
KX1 LP1 LS1 {KPS}
.ends TFMR_BOB
*$
.SUBCKT COMP_BOB VOUT VINP VINN VHYS
E1 YINT 0 
+ VALUE {IF(V(VINP) + V(VOUT)*V(VHYS) > V(VINN), 1, 0)}
R1 YINT VOUT 1
C1 VOUT 0 1n
.ENDS COMP_BOB
*$
.SUBCKT BUF_BOB A Y VDD VSS PARAMS: VTHRESH = 0.5
EINT YINT 0 VALUE {IF(V(A) > { VTHRESH }, V(VDD), V(VSS))}
RINT YINT Y 1
CINT Y VSS 1n
.ENDS BUF_BOB
*$
.SUBCKT INV_BOB A Y VDD VSS PARAMS: VTHRESH = 0.5
EINT YINT 0 VALUE {IF(V(A) < { VTHRESH }, V(VDD), V(VSS))}
RINT YINT Y 1
CINT Y VSS 1n
.ENDS INV_BOB
*$
.SUBCKT INV_DELAY_BOB A Y VDD VSS PARAMS: DELAY = 10n
E1 YINT1 0 VALUE {IF(V(A) > 0.5, 1, 0)}
R1 YINT1 YINT2 1
C1 YINT2 0 {DELAY*1.443}
E2 YINT3 0 VALUE {IF(V(YINT2) > 0.5, V(VSS), V(VDD))}
R2 YINT3 Y 1
C2 Y VSS 1n
.ENDS INV_DELAY_BOB
*$
.SUBCKT BUF_DELAY_BOB A Y VDD VSS PARAMS: DELAY = 10n
E1 YINT1 0 VALUE {IF(V(A) > 0.5, 1, 0)}
R1 YINT1 YINT2 1
C1 YINT2 0 {DELAY*1.443}
E2 YINT3 0 VALUE {IF(V(YINT2) > 0.5, V(VDD), V(VSS))}
R2 YINT3 Y 1
C2 Y 0 1n
.ENDS BUF_DELAY_BOB
*$
.SUBCKT DELAY INP OUT PARAMS: RINP = 1k DELAY = 10n
R1 INP 101 {RINP}
C1 101 102 { 1.4427 * DELAY / RINP }
E1 102 0 OUT 0 0.5
E2 103 0 VALUE {IF(V(101) > 0.5, 1, 0)}
R2 103 OUT 1
C2 OUT 0 1n
.ENDS DELAY
*$
.SUBCKT DLATCH_BOB Q1 Q0 D CLK RST0
E1 W 0 
+ VALUE { IF( V(RST0) < 0.5, 0, IF( V(CLK) < 0.5, IF( V(D) > 0.5, 1, 0 ), IF( V(X) > 0.5, 1, 0 ) ) ) }
R1 W X 1
C1 X 0 1n
E2 Y 0 
+ VALUE { IF( V(RST0) < 0.5, 0, IF( V(CLK) > 0.5, IF( V(X) > 0.5, 1, 0 ), IF( V(Z) > 0.5, 1, 0 ) ) ) }
R2 Y Z 1
C2 Z 0 1n
E3 Z1 0 VALUE { IF( V(Z) > 0.5, 1, 0 ) }
R3 Z1 Q1 1
C3 Q1 0 1n
E4 Z0 0 VALUE { IF( V(Z) > 0.5, 0, 1 ) }
R4 Z0 Q0 1
C4 Q0 0 1n
.ENDS DLATCH_BOB
*$
.SUBCKT D_IDEAL A C PARAMS: RS = 1 VTH = 0.7
G1 A C VALUE { MAX(0, ( V(A) - V(C) - { VTH }) / { RS } ) }
R1 A C 100G
.ENDS D_IDEAL
*$
.SUBCKT Z_IDEAL A C PARAMS: RS = 1 VTH = 0.7 CP=100p CIC=0
G1 A C VALUE { MIN(0, (V(A) - V(C) + { VTH }) / { RS }) }
R1 A C 100G
C1 C A { CP } IC={ CIC }
.ENDS Z_IDEAL
*$
.model PMOS01 PMOS
+ VTO = -0.70
+ KP = 9m
*$
.model NMOS01 NMOS
+ VTO = 0.80
+ KP = 21m
*$
.model NMOS02 NMOS
+ VTO = 1.70
+ KP = 8u
+ LAMBDA = 0.001
+ TOX = 50n
+ RS = 1
*$
.model DIODE01 D
+ IS = 1E-15
+ N = 1
+ TT = 1E-11
+ RS = 0.5
+ XTI = 0.0
*$
.model ZENER01 D
+ IS = 1E-15
+ N = 1
+ TT = 1E-11
+ RS = 0.5
+ XTI = 0.0
+ BV = 6
*$
.SUBCKT AND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_ABMGATE YINT 0 VALUE {{IF(V(A) > {VTHRESH} &
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND2_BASIC_GEN
*$
.SUBCKT OR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_ABMGATE YINT 0 VALUE {{IF(V(A) > {VTHRESH} |
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR2_BASIC_GEN
*$
.SUBCKT INV_BASIC_GEN A Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_ABMGATE YINT 0 VALUE {{IF(V(A) > {VTHRESH} ,
+ {VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS INV_BASIC_GEN
*$
.SUBCKT NAND2_BASIC_GEN A B Y 
+ PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_ABMGATE YINT 0 VALUE {{IF(V(A) > {VTHRESH} &
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND2_BASIC_GEN
*$
.SUBCKT BUF_BASIC_GEN A Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_ABMGATE YINT 0 VALUE {{IF(V(A) > {VTHRESH} ,
+ {VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS BUF_BASIC_GEN
*$