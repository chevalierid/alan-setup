* TPA3130D2
*****************************************************************************
* (C) Copyright 2012 Texas Instruments Incorporated. All rights reserved.
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.
** TI and its licensors and suppliers make no warranties, either expressed
** or implied, with respect to this model, including the warranties of 
** merchantability or fitness for a particular purpose.  The model is
** provided solely on an "as is" basis.  The entire risk as to its quality
** and performance is with the customer.
*****************************************************************************
*
** Released by: WEBENCH(R) Design Center, Texas Instruments Inc.
* Part: TPA3130D2
* Date: 05/03/2012
* Model Type: All In One
* Simulator: Pspice
* Simulator Version: 16.2
* EVM Order Number: N/A 
* EVM Users Guide:  N/A 
* Datasheet: SLOS708 - April 2012
*
* Model Version: 1.0
*
*****************************************************************************
*
* Updates:
*
* Version 1.0 : Release to Web
*
*****************************************************************************
* Notes:
* 1. The following parameters/functionalities are modeled: 
*    Icc, Isd, RDSon, Gain Setting, Oscillator Frequency, Input Impendance, 
*    Mute, Plimit, PBTL, MODSEL, Efficiency.
*
* 2. The following parameters/functionalities are not modeled:
*    The slave function
*
*****************************************************************************
.subckt TPA3130D2 AM0 AM1 AM2 AVCC GAINSLV GND GVDD INNL INNR INPL INPR MODSEL
+ MUTE OUTNL OUTNR OUTPL OUTPR PLIMIT PVCC SDZ

XI0 AM0 AM1 AM2 AVCC GAINSLV GND GVDD INNL INNR INPL INPR MODSEL MUTE OUTNL
+ OUTNR OUTPL OUTPR PLIMIT PVCC SDZ TPA3116D2_HT2

.ends









.subckt HPA_MUXANALOG A B S VDD VSS Y
XAHDLINV9 SZ S VDD VSS IV110
SXI127 B Y S 0 VSWITCH1
SXI2 A Y SZ 0 VSWITCH1
.ends HPA_MUXANALOG


.subckt TPA3116D2_CLASSD_FRONTEND_FDA_AMP_HT1 VN VOUT VP
EAHDLI0 NET20 0 VALUE { LIMIT(V(VP,VN)*10e3, -25, 25) }
R2 NET20 VOUT 1e-3
R0 VP VN 1e9
R1 NET20 0 1e9
.ends TPA3116D2_CLASSD_FRONTEND_FDA_AMP_HT1


.subckt ANALOG_BUFFER VOUT VIN
R0 VIN 0 1e9
R1 VOUT 0 1e9
E0 VOUT 0 VIN 0 1
.ends ANALOG_BUFFER


.subckt TPA3116D2_CLASSD_FRONTEND_FDA_HT1 PVCC VN VOUTN VOUTP VP
XI7 NET19 NET46 VDDX TPA3116D2_CLASSD_FRONTEND_FDA_AMP_HT1
XI30 NET21 NET50 VDDX TPA3116D2_CLASSD_FRONTEND_FDA_AMP_HT1
XI13 NET19 NET47 VSSX TPA3116D2_CLASSD_FRONTEND_FDA_AMP_HT1
XI31 NET21 NET51 VSSX TPA3116D2_CLASSD_FRONTEND_FDA_AMP_HT1
R0 VP VN 1e9
R17 NET25 NET19 1e3
R18 NET30 NET21 1e3
E2 NET25 NET29 VP VN 5e3
E3 NET29 NET30 VP VN 5e3
XI25 NET29 PVCC ANALOG_BUFFER
XI22 VOUTN NET21 ANALOG_BUFFER
XI21 VOUTP NET19 ANALOG_BUFFER
C1 NET21 0 100e-12
C0 NET19 0 100e-12
V1 VSSX 0 DC -25
V0 VDDX 0 DC 25
D4 NET19 NET46 DDEFAULT
D0 NET47 NET19 DDEFAULT
D2 NET21 NET50 DDEFAULT
D1 NET51 NET21 DDEFAULT
.ends TPA3116D2_CLASSD_FRONTEND_FDA_HT1


.subckt SETODIFF V VCM VN VP
E0 VP VCM V 0 500e-3
E1 VN VCM V 0 -500e-3
.ends SETODIFF


.subckt TPA3116D2_CLASSD_FRONTEND_VCLIP_HT1 VCC VEE VIN VOUT
VC VCC NET33 DC 860e-3
VE NET16 VEE DC 860e-3
VRO1 NET46 VOUT DC 0
GB 0 VC VIN 0 20e-3
D3 VOUT NET33 DCLIP
D4 NET16 VOUT DCLIP
D1 VC NET37 DCURLIM
D2 NET37 VC DCURLIM
RO2 VC 0 50
RO1 VC NET46 5
ERCGC NET37 0 VOUT 0 1
.ends TPA3116D2_CLASSD_FRONTEND_VCLIP_HT1


.subckt TPA3116D2_CLASSD_FRONTEND_HT1 GAIN20DB GAIN20DBINV GAIN26DB GAIN26DBINV
+ GAIN32DB GAIN32DBINV GAIN36DB GAIN36DBINV PLIMIT PVCC VDD VINM VINP VOUTM VOUTP
+ 
XI28 NET080 NET48 NET36 NET30 NET32 TPA3116D2_CLASSD_FRONTEND_FDA_HT1
V4 NET080 0 DC 3
XI13 NET067 PVCC VOUTM VOUTP SETODIFF
XI3 NET14 NET15 NET0100 NET067 TPA3116D2_CLASSD_FRONTEND_VCLIP_HT1
E2 NET15 0 PLIMIT 0 -4
E1 NET14 0 PLIMIT 0 4
E0 NET0100 0 NET36 NET30 -1
R0 VDD 0 1e6
R10 NET48 NET30 600e3
R4 NET71 NET32 60e3
R5 NET67 NET48 60e3
R8 NET32 NET36 600e3
R7 NET51 NET48 15e3
R6 NET55 NET32 15e3
R3 NET59 NET48 30e3
R2 NET63 NET32 30e3
R11 NET75 NET32 9.5e3
R15 NET79 NET48 9.5e3
SXI30 NET51 VINM GAIN32DB 0 VSWITCH1
SXI29 NET55 VINP GAIN32DB 0 VSWITCH1
SXI24 NET59 VINM GAIN26DB 0 VSWITCH1
SXI20 NET63 VINP GAIN26DB 0 VSWITCH1
SXI11 NET67 VINM GAIN20DB 0 VSWITCH1
SXI12 NET71 VINP GAIN20DB 0 VSWITCH1
SXI32 NET75 VINP GAIN36DB 0 VSWITCH1
SXI35 NET79 VINM GAIN36DB 0 VSWITCH1
.ends TPA3116D2_CLASSD_FRONTEND_HT1


.subckt TPA3116D2_CLASSD_FEEDBACKCAP_HT1 N400K N500K N600K N1000K N1200K N1800K
+ N3000K CNT1 CNT2 CNT3 CNT4 VDD VSS

C58 NET8 CNT2 500e-15
C57 NET96 CNT2 1.5e-12
C56 NET16 CNT2 1e-12
C55 NET92 CNT2 3e-12
C54 NET24 CNT2 500e-15
C53 NET28 CNT2 1e-12
C51 NET104 CNT2 6e-12
C50 NET100 CNT2 4.5e-12
C48 NET152 CNT2 2.5e-12
C47 NET148 CNT2 2e-12
C46 NET48 CNT2 500e-15
C45 NET52 CNT2 500e-15
C44 NET56 CNT2 1e-12
C43 NET168 CNT2 5e-12
C42 NET172 CNT4 1e-12
C41 NET140 CNT4 500e-15
C40 NET144 CNT4 500e-15
C38 NET060 CNT4 1e-12
C37 NET080 CNT4 500e-15
C36 NET136 CNT4 1e-12
C35 NET132 CNT4 500e-15
C0 N500KINV 0 1e-15
C2 N600KINV 0 1e-15
C3 N1800KINV 0 1e-15
C4 N3000KINV 0 1e-15
C6 N1200KINV 0 1e-15
C7 N1000KINV 0 1e-15
C5 N400KINV 0 1e-15
XAHDLINV0 N500KINV N500K VDD VSS IV110
XAHDLINV3 N600KINV N600K VDD VSS IV110
XAHDLINV1 N400KINV N400K VDD VSS IV110
XAHDLINV4 N1800KINV N1800K VDD VSS IV110
XAHDLINV5 N3000KINV N3000K VDD VSS IV110
XAHDLINV6 N1200KINV N1200K VDD VSS IV110
XAHDLINV7 N1000KINV N1000K VDD VSS IV110
SXI19 NET144 CNT3 N1200K 0 VSWITCH1
SXI11 NET56 CNT3 N3000K 0 VSWITCH1
SXI10 NET48 CNT3 N1200K 0 VSWITCH1
SXI15 NET132 CNT3 N1000K 0 VSWITCH1
SXI9 NET16 CNT3 N600K 0 VSWITCH1
SXI18 NET172 CNT3 N3000K 0 VSWITCH1
SXI16 NET080 CNT3 N500K 0 VSWITCH1
SXI32 NET100 CNT1 N400K 0 VSWITCH1
SXI20 NET136 CNT3 N600K 0 VSWITCH1
SXI21 NET060 CNT3 N400K 0 VSWITCH1
SXI2 NET104 CNT1 N600K 0 VSWITCH1
SXI17 NET140 CNT3 N1800K 0 VSWITCH1
SXI14 NET8 CNT3 N1000K 0 VSWITCH1
SXI12 NET52 CNT3 N1800K 0 VSWITCH1
SXI13 NET24 CNT3 N500K 0 VSWITCH1
SXI4 NET152 CNT1 N1200K 0 VSWITCH1
SXI6 NET168 CNT1 N3000K 0 VSWITCH1
SXI8 NET28 CNT3 N400K 0 VSWITCH1
SXI5 NET148 CNT1 N1800K 0 VSWITCH1
SXI1 NET92 CNT1 N500K 0 VSWITCH1
SXI3 NET96 CNT1 N1000K 0 VSWITCH1
.ends TPA3116D2_CLASSD_FEEDBACKCAP_HT1




.subckt TPA3116D2_CLASSD_FDA1_HT2 VDD VN VOUTN VOUTP VP VSS
XI13 NET078 NET045 VSSX TINACIR1
XI14 NET080 NET039 VSSX TINACIR1
XI15 NET080 NET038 VDDX TINACIR1
XI7 NET078 NET062 VDDX TINACIR1

RNET038 NET038 0 1G
RNET039 NET039 0 1G
RNET045 NET045 0 1G
RNET062 NET062 0 1G

C0 NET078 0 380e-12
C1 NET080 0 380e-12
E2 NET048 NET057 VP VN 50e3
E3 NET057 NET056 VP VN 50e3
V1 VSSX VSS DC 0
V0 VDD VDDX DC 0
D5 NET080 NET038 DDEFAULT
D3 NET039 NET080 DDEFAULT
D0 NET045 NET078 DDEFAULT
D4 NET078 NET062 DDEFAULT
XI16 NET057 NET050 ANALOG_BUFFER
XI6 VOUTN NET080 ANALOG_BUFFER
XI5 VOUTP NET078 ANALOG_BUFFER
R5 NET048 NET078 5e6
R6 NET056 NET080 5e6
R10 VSS NET050 1e6
R9 VDD NET050 1e6
R0 VP VN 1e9
.ends TPA3116D2_CLASSD_FDA1_HT2




.subckt TPA3116D2_CLASSD_FDA2_HT2 MOD_SEL PVCC VDD VN VOUTN VOUTP VP VSS
XMUX0 NET88 NET047 MOD_SEL VDD VSS NET060 HPA_MUXANALOG
R6 NET72 NET49 1e6
R0 VP VN 1e9
R5 NET75 NET51 1e6
XI16 NET71 NET060 ANALOG_BUFFER
XI6 VOUTN NET49 ANALOG_BUFFER
XI5 VOUTP NET51 ANALOG_BUFFER
V1 VSSX 0 DC 0
V0 VDDX 0 DC 7
V4 NET88 0 DC 3
E1 NET79 0 VDD 0 500e-3
E2 NET75 NET71 VP VN 5e3
E3 NET71 NET72 VP VN 5e3
E5 NET047 NET79 PVCC 0 43.75e-3
C0 NET51 0 75e-12
C1 NET49 0 75e-12
D2 NET91 NET49 DDEFAULT
D0 NET97 NET51 DDEFAULT
D4 NET51 NET96 DDEFAULT
D1 NET49 NET94 DDEFAULT
XI7 NET51 NET96 VDDX TINACIR1
XI13 NET51 NET97 VSSX TINACIR1
XI22 NET49 NET94 VDDX TINACIR1
XI23 NET49 NET91 VSSX TINACIR1

RNET91 NET91 0 1G
RNET94 NET94 0 1G
RNET96 NET96 0 1G
RNET97 NET97 0 1G

.ends TPA3116D2_CLASSD_FDA2_HT2


.subckt TPA3116D2_CLASSD_HDRIVER_CHANNEL_DELAY_HT1 VIN VOUT
T0 NET20 0 NET17 0 Z0=75 TD=25e-9
XI3 NET20 VIN ANALOG_BUFFER
XI5 VOUT NET17 ANALOG_BUFFER
R0 NET17 0 75
.ends TPA3116D2_CLASSD_HDRIVER_CHANNEL_DELAY_HT1


.subckt TPA3116D2_CLASSD_HDRIVER_CHANNEL_HT1 VDD VSS VIN VOUTNEG VOUTPOS
XAHDLI8 VIN NET17 VDD VSS HPA_INV_IDEAL
XAHDLAND1 VIN NET021 VOUTPOS VDD VSS HPA_AND2_IDEAL
XAHDLAND0 NET17 NET019 VOUTNEG VDD VSS HPA_AND2_IDEAL
XI2 VIN NET021 TPA3116D2_CLASSD_HDRIVER_CHANNEL_DELAY_HT1
XI3 NET17 NET019 TPA3116D2_CLASSD_HDRIVER_CHANNEL_DELAY_HT1
.ends TPA3116D2_CLASSD_HDRIVER_CHANNEL_HT1


.subckt TPA3116D2_CLASSD_HBRIDGE_TOPNMOS_HT1 D EN G GLOGICHIGH S VDD VSS
R0 D S 1e6
D4 S D DDEFAULT
C1 ENINV 0 1e-15
EBETA VBETA 0 POLY(1) GLOGICHIGH 0  1.389  0  0
XAHDLINV1 ENINV EN VDD VSS IV110
G1 D S POLY(3) D S G 0 VBETA 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0  0
.ends TPA3116D2_CLASSD_HBRIDGE_TOPNMOS_HT1


.subckt TPA3116D2_CLASSD_HBRIDGE_HT1 EN PVCC PVEE VDD VHA VHB VLA VLB VOA VOB VSS
XI3 VOA EN VLA PVCC PVEE VDD VSS TPA3116D2_CLASSD_HBRIDGE_TOPNMOS_HT1
XI2 VOB EN VLB PVCC PVEE VDD VSS TPA3116D2_CLASSD_HBRIDGE_TOPNMOS_HT1
XI1 PVCC EN VHB PVCC VOB VDD VSS TPA3116D2_CLASSD_HBRIDGE_TOPNMOS_HT1
XI0 PVCC EN VHA PVCC VOA VDD VSS TPA3116D2_CLASSD_HBRIDGE_TOPNMOS_HT1
.ends TPA3116D2_CLASSD_HBRIDGE_HT1


.subckt TPA3116D2_CLASSD_HT2 N400K N500K N600K N1000K N1200K N1800K N3000K EN
+ GVDD GVSS GAIN20DB GAIN26DB GAIN32DB GAIN36DB MOD_SEL PBTL PBTLFB PBTLIN PLIMIT
+ PVCC PVEE RAMP VDD VSS VXOUT VYOUT VINM VINP VOUTM VOUTP

SXI17 NET0270 VOUTM ENINV 0 VSWITCH1
SXI19 NET0110 VOUTP ENINV 0 VSWITCH1
SXI7 VOUTM NET0281 EN 0 VSWITCH1
SXI6 VOUTP NET0279 EN 0 VSWITCH1
XMUX0 VXOUT PBTLIN PBTL VDD VSS NET096 HPA_MUXANALOG
XMUX1 VYOUT PBTLFB PBTL VDD VSS NET0102 HPA_MUXANALOG
XI52 GAIN20DB GAIN20DBINV GAIN26DB GAIN26DBINV GAIN32DB GAIN32DBINV GAIN36DB
+ GAIN36DBINV PLIMIT PVCC VDD VINP VINM VYOUT VXOUT TPA3116D2_CLASSD_FRONTEND_HT1
+ 
XI41 N400K N500K N600K N1000K N1200K N1800K N3000K NET0259 NET0266 NET0257 VINT1
+ VDD VSS TPA3116D2_CLASSD_FEEDBACKCAP_HT1

XI42 N400K N500K N600K N1000K N1200K N1800K N3000K NET0248 NET47 NET0262 VINT2
+ VDD VSS TPA3116D2_CLASSD_FEEDBACKCAP_HT1

XAHDLI5 RAMP VINT2 VBIN VDD VSS HPA_COMP_IDEAL
XAHDLI4 RAMP VINT1 VAIN VDD VSS HPA_COMP_IDEAL
XI51 PVCC_INT PVCC ANALOG_BUFFER
XI2 VDD NET0248 NET0266 NET47 NET0259 VSS TPA3116D2_CLASSD_FDA1_HT2
XI9 MOD_SEL PVCC VDD NET0262 VINT1 VINT2 NET0257 VSS TPA3116D2_CLASSD_FDA2_HT2
XAHDLINV2 GAIN32DBINV GAIN32DB VDD VSS IV110
XAHDLINV4 GAIN26DBINV GAIN26DB VDD VSS IV110
XAHDLINV3 GAIN20DBINV GAIN20DB VDD VSS IV110
XAHDLINV0 GAIN36DBINV GAIN36DB VDD VSS IV110
XAHDLINV1 ENINV EN VDD VSS IV110
XI25 VDD VSS VAIN VLA VHA TPA3116D2_CLASSD_HDRIVER_CHANNEL_HT1
XI26 VDD VSS VBIN VLB VHB TPA3116D2_CLASSD_HDRIVER_CHANNEL_HT1
XI13 EN PVCC PVEE VDD VHA VHB VLA VLB NET0279 NET0281 VSS TPA3116D2_CLASSD_HBRIDGE_HT1
C13 GVSS 0 1e-12
C8 GAIN26DBINV 0 1e-15
C33 GVDD 0 1e-12
C7 GAIN20DBINV 0 1e-15
C11 PVCC_INT 0 1e-12
C6 GAIN32DBINV 0 1e-15
C4 GAIN36DBINV 0 1e-15
C5 ENINV 0 1e-15
R13 NET0270 0 2e3
R1 NET47 NET0262 500e3
R0 NET0266 NET0257 500e3
R2 NET096 NET0259 600e3
R3 NET0102 NET0248 600e3
R14 NET0110 0 2e3
R8 NET0259 NET0279 600e3
R10 NET0248 NET0281 600e3
.ends TPA3116D2_CLASSD_HT2


.subckt TPA3116D2_DECODER1_HT1 N400K N500K N600K N1000K N1200K N1800K N3000K AM0 AM1 AM2 VDD VSS
XAHDLNAND10 NET29 AMZ_2 AMZ_1 VDD VSS NA210
XAHDLNAND0 N600K NET29 NET19 VDD VSS NA210
XAHDLNAND4 N1800K NET61 NET9 VDD VSS NA210
XAHDLNAND3 NET9 AM_2 AMZ_1 VDD VSS NA210
XAHDLNAND2 N1200K NET65 NET45 VDD VSS NA210
XAHDLNAND1 NET19 AMZ_2 AMZ_0 VDD VSS NA210
XAHDLNOR2 N500K AM_2 AM_1 VDD VSS NO210
XAHDLNOR10 N400K AM_2 AM_1 AM_0 VDD VSS NO310
XAHDLNAND7 NET45 AM_2 AMZ_1 AMZ_0 VDD VSS NA310
V2 AM_1 AM1 DC 0
V3 AM_0 AM0 DC 0
V0 N3000K VDD DC 0
V1 AM_2 AM2 DC 0
XAHDLINV1 N1000K AM_2 VDD VSS IV110
XAHDLINV9 NET61 AMZ_2 VDD VSS IV110
XAHDLINV7 NET65 AMZ_2 VDD VSS IV110
XAHDLINV5_2 AMZ_2 AM_2 VDD VSS IV110
XAHDLINV5_1 AMZ_1 AM_1 VDD VSS IV110
XAHDLINV5_0 AMZ_0 AM_0 VDD VSS IV110
.ends TPA3116D2_DECODER1_HT1


.subckt TPA3116D2_RAMP_HT1 AM0 AM1 AM2 PVCC RAMP VDD VSS
R0 NET034 NET19 1
V3 NET14 0 PULSE -1e-3 1e-3 0 833.3e-9 833.3e-9 1e-15 1.6666e-6
V0 NET8 0 PULSE -1e-3 1e-3 0 1.25e-6 1.25e-6 1e-15 2.5e-6
V1 NET10 0 PULSE -1e-3 1e-3 0 1e-6 1e-6 1e-15 2e-6
V7 NET16 0 PULSE -1e-3 1e-3 0 416.7e-9 416.7e-9 1e-15 833.4e-9
V2 NET12 0 PULSE -1e-3 1e-3 0 500e-9 500e-9 1e-15 1e-6
SXI11 NET19 0 CLK1800K 0 VSWITCH1
SXI12 NET19 NET16 CLK1200K 0 VSWITCH1
SXI32 NET19 NET8 CLK400K 0 VSWITCH1
SXI8 NET19 NET10 CLK500K 0 VSWITCH1
SXI9 NET19 NET14 CLK600K 0 VSWITCH1
SXI10 NET19 NET12 CLK1000K 0 VSWITCH1
SXI13 NET19 0 CLK3000K 0 VSWITCH1
C6 CLK1200KINV 0 1e-15
C7 CLK1000KINV 0 1e-15
C5 CLK400KINV 0 1e-15
C1 AM2INV 0 1e-15
C8 AM0INV 0 1e-15
C9 AM1INV 0 1e-15
C0 CLK500KINV 0 1e-15
C2 CLK600KINV 0 1e-15
C3 CLK1800KINV 0 1e-15
C4 CLK3000KINV 0 1e-15
XAHDLINV7 CLK1000KINV CLK1000K VDD VSS IV110
XAHDLINV8 AM0INV AM0 VDD VSS IV110
XAHDLINV9 AM1INV AM1 VDD VSS IV110
XAHDLINV2 AM2INV AM2 VDD VSS IV110
XAHDLINV6 CLK1200KINV CLK1200K VDD VSS IV110
XAHDLINV0 CLK500KINV CLK500K VDD VSS IV110
XAHDLINV3 CLK600KINV CLK600K VDD VSS IV110
XAHDLINV1 CLK400KINV CLK400K VDD VSS IV110
XAHDLINV4 CLK1800KINV CLK1800K VDD VSS IV110
XAHDLINV5 CLK3000KINV CLK3000K VDD VSS IV110
E1 NET112 0 VDD 0 500e-3
E0 NET0141 0 NET034 0 -1e3
XAHDLAND22 CLK400K AM2INV AM1INV AM0INV VDD VSS AN310
XAHDLAND2 CLK1000K AM2INV AM1 AM0 VDD VSS AN310
XAHDLAND5 CLK1800K AM2 AM1INV AM0 VDD VSS AN310
XAHDLAND0 CLK500K AM2INV AM1INV AM0 VDD VSS AN310
XAHDLAND4 CLK1200K AM2 AM1INV AM0INV VDD VSS AN310
XAHDLAND1 CLK600K AM2INV AM1 AM0INV VDD VSS AN310
XAHDLAND3 CLK3000K AM2 AM1 VDD VSS AN210
E8 RAMP NET112 POLY(2) NET0141 0 PVCC 0  0  0  0  0  62.5e-3
.ends TPA3116D2_RAMP_HT1


.subckt TPA3116D2_PBTLDETECTION_HT2 INNL INPL PBTL VDD VSS
XAHDLNOR2 PBTL NET18 NET12 VDD VSS NO210
*V0 VDD0P62V 0 DC 620e-3
V0 VDD0P62V 0 DC 10e-3
XAHDLI1 INPL NET12 VDD0P62V VSS VDD VSS DIGLEVSHIFT
XAHDLI4 INNL NET18 VDD0P62V VSS VDD VSS DIGLEVSHIFT
.ends TPA3116D2_PBTLDETECTION_HT2


.subckt TPA3116D2_GAINSLV_HT1 GAINSLV GVDD GAIN20DB GAIN26DB GAIN32DB GAIN36DB SLAVE VDD VSS
XMUX0 COMP_0_4 COMP_2_6 GAIN_B1 VDD VSS GAIN_B0 HPA_MUXANALOG
XMUX3 COMP_2 COMP_6 COMP_3 VDD VSS COMP_2_6 HPA_MUXANALOG
XMUX1 COMP_0 COMP_4 COMP_3 VDD VSS COMP_0_4 HPA_MUXANALOG
XMUX2 COMP_1 COMP_5 COMP_3 VDD VSS GAIN_B1 HPA_MUXANALOG
XAHDLAND2 GAIN36DB GAIN_B1 GAIN_B0 VDD VSS AN210
XAHDLAND1 GAIN32DB GAIN_B1 GAIN_B0INV VDD VSS AN210
XAHDLAND0 GAIN26DB GAIN_B1INV GAIN_B0 VDD VSS AN210
XAHDLAND22 GAIN20DB GAIN_B1INV GAIN_B0INV VDD VSS AN210
XAHDLINV9 GAIN_B0INV GAIN_B0 VDD VSS IV110
XAHDLINV2 GAIN_B1INV GAIN_B1 VDD VSS IV110
V0 COMP_3 SLAVE DC 0
C9 GAIN_B0INV 0 1e-15
C1 GAIN_B1INV 0 1e-15
C0 TAP_7 0 1e-15
XAHDLI6 GAINSLV TAP_4 COMP_4 VDD VSS HPA_COMP_1ns
XAHDLI5 GAINSLV TAP_5 COMP_5 VDD VSS HPA_COMP_1ns
XAHDLI4 GAINSLV TAP_6 COMP_6 VDD VSS HPA_COMP_1ns
XAHDLI1 GAINSLV TAP_1 COMP_1 VDD VSS HPA_COMP_1ns
XAHDLI2 GAINSLV TAP_3 COMP_3 VDD VSS HPA_COMP_1ns
XAHDLI3 GAINSLV TAP_2 COMP_2 VDD VSS HPA_COMP_1ns
XAHDLI0 GAINSLV TAP_0 COMP_0 VDD VSS HPA_COMP_1ns
R17 GVDD TAP_7 50e3
R16 TAP_4 TAP_3 100e3
R15 TAP_5 TAP_4 100e3
R14 TAP_7 TAP_6 150e3
R13 TAP_6 TAP_5 100e3
R12 TAP_2 TAP_1 100e3
R11 TAP_3 TAP_2 100e3
R10 TAP_1 TAP_0 100e3
R0 TAP_0 VSS 100e3
.ends TPA3116D2_GAINSLV_HT1


.subckt TPA3116D2_LOGICSHIFT_HT1 AM0 AM0_INT AM1 AM1_INT AM2 AM2_INT MODSEL
+ MODSEL_INT MUTE MUTE_INT SDZ SDZ_INT VDD VSS

V0 VDD2V 0 DC 2
XAHDLI0 MODSEL MODSEL_INT VDD2V VSS VDD VSS DIGLEVSHIFT
XAHDLI4 AM2 AM2_INT VDD2V VSS VDD VSS DIGLEVSHIFT
XAHDLI7 AM1 AM1_INT VDD2V VSS VDD VSS DIGLEVSHIFT
XAHDLI8 AM0 AM0_INT VDD2V VSS VDD VSS DIGLEVSHIFT
XAHDLI17 SDZ SDZ_INT VDD2V VSS VDD VSS DIGLEVSHIFT
XAHDLI18 MUTE MUTE_INT VDD2V VSS VDD VSS DIGLEVSHIFT
.ends TPA3116D2_LOGICSHIFT_HT1


.subckt TPA3116D2_POWERSUPPLY_HT1 AVCC AVDD GVDD PVCC
EAHDLI3 GVDD 0 VALUE { LIMIT(V(PVCC,0)*1, 0, 7) }
EAHDLI0 AVDD 0 VALUE { LIMIT(V(AVCC,0)*1, 0, 6) }
.ends TPA3116D2_POWERSUPPLY_HT1


.subckt TPA3116D2_HT2 AM0 AM1 AM2 AVCC GAINSLV GND GVDD INNL INNR INPL INPR
+ MODSEL MUTE OUTNL OUTNR OUTPL OUTPR PLIMIT PVCC SDZ

XMUX1 OUTPL_INT OUTNR_INT PBTL VDD VSS OUTPL HPA_MUXANALOG
XMUX0 OUTNR_INT OUTPL_INT PBTL VDD VSS OUTNR HPA_MUXANALOG
XI10 N400K N500K N600K N1000K N1200K N1800K N3000K EN GVDD VSS GAIN20DB GAIN26DB
+ GAIN32DB GAIN36DB MODSEL_INT PBTL VYOUT VXOUT PLIMIT PVCC VSS RAMP VDD VSS NET078
+ NET077 INNL INPL OUTNL OUTPL_INT TPA3116D2_CLASSD_HT2

XI1 N400K N500K N600K N1000K N1200K N1800K N3000K EN GVDD VSS GAIN20DB GAIN26DB
+ GAIN32DB GAIN36DB MODSEL_INT PBTL VYOUT VXOUT PLIMIT PVCC VSS RAMP VDD VSS VXOUT
+ VYOUT INNR INPR OUTNR_INT OUTPR TPA3116D2_CLASSD_HT2

XI0 N400K N500K N600K N1000K N1200K N1800K N3000K AM0_INT AM1_INT AM2_INT VDD
+ VSS TPA3116D2_DECODER1_HT1

XI3 AM0_INT AM1_INT AM2_INT PVCC RAMP VDD VSS TPA3116D2_RAMP_HT1
XI12 INNL INPL PBTL VDD VSS TPA3116D2_PBTLDETECTION_HT2
XI20 GAINSLV GVDD GAIN20DB GAIN26DB GAIN32DB GAIN36DB SLAVE VDD VSS TPA3116D2_GAINSLV_HT1
XI19 AM0 AM0_INT AM1 AM1_INT AM2 AM2_INT MODSEL MODSEL_INT MUTE MUTE_INT SDZ
+ SDZ_INT VDD VSS TPA3116D2_LOGICSHIFT_HT1

XI16 AVCC VDD GVDD PVCC TPA3116D2_POWERSUPPLY_HT1
R11 NET038 NET062 100e6
R2 NET077 0 10e6
R1 NET078 0 10e6
R0 NET063 NET048 100e6
SXI25 NET063 PVCC SDZ_INT 0 VSWITCH1
SXI23 NET063 0 SDZ_INTINV 0 VSWITCH1
SXI54 NET062 0 SDZ_INTINV 0 VSWITCH1
SXI53 NET062 GND SDZ_INT 0 VSWITCH1
SXI51 NET038 0 SDZ_INTINV 0 VSWITCH1
SXI52 NET038 AVCC SDZ_INT 0 VSWITCH1
SXI24 NET048 GND SDZ_INT 0 VSWITCH1
SXI22 NET048 0 SDZ_INTINV 0 VSWITCH1
D0 GND AVCC DDEFAULT
D2 GND PVCC DDEFAULT
V0 VSS GND DC 0
XAHDLAND22 EN SDZ_INT NET040 VDD VSS AN210
XAHDLINV1 NET040 MUTE_INT VDD VSS IV110
XAHDLINV0 SDZ_INTINV SDZ_INT VDD VSS IV110
C2 SLAVE 0 1e-15
I7 PVCC GND DC 60e-6
I8 NET063 NET048 DC 13e-3
I5 AVCC GND DC 60e-6
I6 NET038 NET062 DC 13e-3
.ends TPA3116D2_HT2




.SUBCKT HPA_AND2_IDEAL 1 2 3 VDD VSS
E1 3 0 VALUE = { IF( ((V(1)> (V(VDD)+V(VSS))/2 ) & (V(2)> (V(VDD)+V(VSS))/2 )), V(VDD), V(VSS) ) }
.ENDS


.SUBCKT HPA_INV_IDEAL 1 2 VDD VSS
E1 2 0 VALUE = { IF( V(1)> (V(VDD)+V(VSS))/2, V(VSS), V(VDD) ) }
.ENDS


.SUBCKT DIGLEVSHIFT 1 2 VDD_OLD VSS_OLD VDD_NEW VSS_NEW
E1 3 0 VALUE = { IF( V(1) < (V(VDD_OLD)+V(VSS_OLD))/2, V(VSS_NEW), V(VDD_NEW) ) }
R1 3 2 1
C1 2 0 1e-12
.ENDS


.SUBCKT HPA_COMP_IDEAL INP INN OUT VDD VSS
E1 OUT 0 VALUE = { IF( (V(INP) > V(INN)), V(VDD), V(VSS) ) }
.ENDS


.SUBCKT HPA_COMP_1ns INP INN OUT VDD VSS
E1 4 0 VALUE = { IF( (V(INP) > V(INN)), V(VDD), V(VSS) ) }
R1 4 OUT 1
C1 OUT 0 0.5n
.ENDS


.SUBCKT IV110 2 1 VDD VSS
E1 3 0 VALUE = { IF( V(1) > (V(VDD)+V(VSS))/2, V(VSS), V(VDD) ) }
R1 3 2 1
C1 2 0 1n
.ENDS


.SUBCKT AN210 3 1 2 VDD VSS
E1 4 0 VALUE = { IF( ((V(1) > (V(VDD)+V(VSS))/2 ) & (V(2) > (V(VDD)+V(VSS))/2 )), V(VDD), V(VSS) ) }
R1 4 3 1
C1 3 0 1n
.ENDS


.SUBCKT AN310 4 1 2 3 VDD VSS
E1 5 0 VALUE = { IF( ( ( V(1) > (V(VDD)+V(VSS))/2 ) & ( V(2) > (V(VDD)+V(VSS))/2
+ ) & ( V(3) > (V(VDD)+V(VSS))/2 ) ), V(VDD), V(VSS) ) }

R1 5 4 1
C1 4 0 1n
.ENDS


.SUBCKT NO210 3 1 2 VDD VSS
E1 4 0 VALUE = { IF( ((V(1) < (V(VDD)+V(VSS))/2 ) & (V(2) < (V(VDD)+V(VSS))/2 )), V(VDD), V(VSS) ) }
R1 4 3 1
C1 3 0 1n
.ENDS


.SUBCKT NO310 4 1 2 3 VDD VSS
E1 5 0 VALUE = { IF( ( ( V(1) < (V(VDD)+V(VSS))/2 ) & ( V(2) < (V(VDD)+V(VSS))/2
+ ) & ( V(3) < (V(VDD)+V(VSS))/2 ) ), V(VDD), V(VSS) ) }

R1 5 4 1
C1 4 0 1n
.ENDS


.SUBCKT NA210 3 1 2 VDD VSS
E1 4 0 VALUE = { IF( ((V(1) > (V(VDD)+V(VSS))/2 ) & (V(2) > (V(VDD)+V(VSS))/2 )), V(VSS), V(VDD) ) }
R1 4 3 1
C1 3 0 1n
.ENDS


.SUBCKT NA310 4 1 2 3 VDD VSS
E1 5 0 VALUE = { IF( ( ( V(1) > (V(VDD)+V(VSS))/2 ) & ( V(2) > (V(VDD)+V(VSS))/2
+ ) & ( V(3) > (V(VDD)+V(VSS))/2 ) ), V(VSS), V(VDD) ) }

R1 5 4 1
C1 4 0 1n
.ENDS


.MODEL VSWITCH1 VSWITCH Roff=1e9 Ron=0.005 Voff=0 Von=1.1


.MODEL DDEFAULT D N=1E-3 IS=8E-16 RS=1E-3
.MODEL DCLIP D IS=8E-16 RS=1m
.MODEL DCURLIM D IS=1E-13
.MODEL DBLOCK D IS=8E-16 BV=7


.SUBCKT TINACIR1 VN VOUT VP
E1 OUT 0 VP VN 100e3
.ENDS




















