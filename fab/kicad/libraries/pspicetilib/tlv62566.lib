* PSpice Model Editor - Version 16.2.0
*$
*TLV62566
*****************************************************************************
* (C) Copyright 2014 Texas Instruments Incorporated. All rights reserved.                                            
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.                                             
** TI and its licensors and suppliers make no warranties, either expressed                                           
** or implied, with respect to this model, including the warranties of                                                    
** merchantability or fitness for a particular purpose. The model is                                                      
** provided solely on an "as is" basis. The entire risk as to its quality                                                    
** and performance is with the customer.                                                                                         
*****************************************************************************
*
* Released by: WEBENCH Design Center, Texas Instruments Inc.
* Part: TLV62566
* Date: 05/01/2014
* Model Type: Transient 
* Simulator: PSpice 
* Simulator Version: 16.2
* EVM Order Number: TLV62565EVM-179
* EVM Users Guide: SLVU808–October 2013
* Datasheet: SLVSBC1 –OCTOBER 2013
* Model Version: Final 1.0
* Release to Web.
*A*A 
***************************************************************************
.SUBCKT TLV62566 PG FB SW VIN PGND PARAMS: SS=0
X_U32         EN SHDN INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U7         0 N16645665 d_d PARAMS:
X_S7    EN 0 N16645665 N16645199 TLV62566_S7 
X_U8         N16645835 VIN d_d PARAMS:
X_U65         N16651725 UVLO N16653244 OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_R18         0 PGND  1m  
X_U59         PGATE N16644703 BUF_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
C_C21         N16645191 VIN  1000n  
R_R21         0 N16680836  170m  
R_R20         N16645191 VREF  170m  
X_U34         PGOOD N16651725 INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
R_R17         0 PGND  1m  
X_U35         ISENSE N16645501 N16644493 COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
X_U33         NGATE N16644771 INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_S5    SHDN 0 0 N16645665 TLV62566_S5 
X_S4    GATE_LS 0 N16645199 0 TLV62566_S4 
X_U60         N16644703 VIN GATE_HS MULTIPLIER 
V_V12         EN_CTL 0 4
X_S3    GATE_HS 0 N16645199 VIN TLV62566_S3 
C_C19         0 SET  20n  
X_S6    EN 0 N16645199 N16645835 TLV62566_S6 
X_S9    N16653244 0 PG 0 TLV62566_S9 
R_R22         N166448352 SET  1  
X_H3    N16645199 SW ISENSE 0 TLV62566_H3 
X_U61         N16644777 VIN GATE_HS_Z MULTIPLIER 
R_U_TON_DET_R21         U_TON_DET_N26589 U_TON_DET_N25818  1  
R_U_TON_DET_R1         U_TON_DET_N16012 VIN  400k TC=0,0 
V_U_TON_DET_V14         U_TON_DET_N27874 0 0
X_U_TON_DET_U34         U_TON_DET_AA U_TON_DET_BB TON_DB U_TON_DET_N26589
+  2TO1MUX PARAMS: VTHRESH=0.5
C_U_TON_DET_C2         VIN U_TON_DET_AA  1.0p  TC=0,0 
X_U_TON_DET_S1    SLEEPZ 0 U_TON_DET_N19687 0 X_Ton_Det_U_TON_DET_S1 
X_U_TON_DET_U35         U_TON_DET_N11224 U_TON_DET_N25818 U_TON_DET_N27874
+  TON_DB COMP_HYS
C_U_TON_DET_C18         0 U_TON_DET_N25818  1n  
C_U_TON_DET_C1         VIN U_TON_DET_N11224  2.5p  TC=0,0 
R_U_TON_DET_R2         U_TON_DET_N16036 U_TON_DET_N16012  80k TC=0,0 
R_U_TON_DET_R5         U_TON_DET_N16036 U_TON_DET_BB  5000k TC=0,0 
R_U_TON_DET_R4         U_TON_DET_N16012 U_TON_DET_AA  5000k TC=0,0 
R_U_TON_DET_R3         U_TON_DET_N19687 U_TON_DET_N16036  3520000 TC=0,0 
C_U_TON_DET_C3         VIN U_TON_DET_BB  1.0p  TC=0,0 
R_U_TON_DET_R7         GATE_HS_Z U_TON_DET_N11224  4000k TC=0,0 
X_USTATRT_D1         STARTUP USTATRT_N00223 d_d PARAMS: 
X_USTATRT_S1    SHDN 0 STARTUP 0 X_START_UP_USTATRT_S1 
V_USTATRT_V2         USTATRT_N01607 0 0.607Vdc
V_USTATRT_V1         USTATRT_N00223 0 1Vdc
E_USTATRT_ABM11         VREF 0 VALUE { IF(V(STARTUP)<0.6, V(STARTUP),
+  V(USTATRT_N01607))    }
I_USTATRT_I1         USTATRT_N00223 STARTUP DC 1mAdc  
X_U36         UVLO EN INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U64         N16644883 GATE_LS N166448352 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_S8    SHDN 0 N16645835 VIN TLV62566_S8 
X_U31         ZCRT SLEEPZ INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
*************************************************
****************************************************************
X_U62         N16644771 VIN GATE_LS MULTIPLIER 
V_U_TonCAL_V9         U_TonCAL_N06132 0 1Vdc
X_U_TonCAL_U22         TON_DB U_TonCAL_S_BB INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U_TonCAL_U26         U_TonCAL_PGATEZ U_TonCAL_N16578105 INV_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U_TonCAL_U25         PGOOD U_TonCAL_N18238 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_U_TonCAL_R3         U_TonCAL_CC U_TonCAL_N03514  499.2k TC=0,0 
R_U_TonCAL_R4         U_TonCAL_BB U_TonCAL_CC  499.2k TC=0,0 
V_U_TonCAL_V13         U_TonCAL_N16568074 U_TonCAL_N22919 2.3
R_U_TonCAL_R22         U_TonCAL_N16561305 N16645083  1  
R_U_TonCAL_R2         SW U_TonCAL_N03514  499.2k TC=0,0 
X_U_TonCAL_U7         0 U_TonCAL_N16568074 d_d PARAMS:
R_U_TonCAL_R6         U_TonCAL_N03102 U_TonCAL_N03316  4.2meg TC=0,0 
C_U_TonCAL_C2         U_TonCAL_POS U_TonCAL_N13940  3p  TC=0,0 
X_U_TonCAL_S1    U_TonCAL_S_CC 0 U_TonCAL_CC U_TonCAL_N03102
+  X_Ton_Cal_U_TonCAL_S1 
C_U_TonCAL_C1         U_TonCAL_POS 0  1.5p  TC=0,0 
X_U_TonCAL_U23         U_TonCAL_S_BB U_TonCAL_S_CC INV_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
R_U_TonCAL_R5         0 U_TonCAL_BB  499.2k TC=0,0 
C_U_TonCAL_C19         0 N16645083  20n  
R_U_TonCAL_R7         U_TonCAL_N03316 U_TonCAL_NEG  7.6meg TC=0,0 
I_U_TonCAL_I1         U_TonCAL_N06132 U_TonCAL_N18324 DC 1uAdc  
C_U_TonCAL_C3         U_TonCAL_NEG 0  1.5p  TC=0,0 
X_U_TonCAL_S6    U_TonCAL_N18238 0 U_TonCAL_N18324 U_TonCAL_N03514
+  X_Ton_Cal_U_TonCAL_S6 
X_U_TonCAL_U24         GATE_HS U_TonCAL_PGATEZ INV_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U_TonCAL_S4    SKIPZ 0 U_TonCAL_N13940 0 X_Ton_Cal_U_TonCAL_S4 
X_U_TonCAL_S2    U_TonCAL_S_BB 0 U_TonCAL_BB U_TonCAL_N03316
+  X_Ton_Cal_U_TonCAL_S2 
X_U_TonCAL_U14         U_TonCAL_POS U_TonCAL_NEG U_TonCAL_N16561305
+  COMP_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
R_U_TonCAL_R1         U_TonCAL_N03628 SW  535.5k TC=0,0 
X_U_TonCAL_S7    EN 0 U_TonCAL_N22919 0 X_Ton_Cal_U_TonCAL_S7 
X_U_TonCAL_S5    U_TonCAL_PGATEZ 0 U_TonCAL_POS 0 X_Ton_Cal_U_TonCAL_S5 
X_U_TonCAL_U8         U_TonCAL_N18324 U_TonCAL_N06132 d_d PARAMS:
X_U_TonCAL_S3    U_TonCAL_N16578105 0 U_TonCAL_N03628 U_TonCAL_POS
+  X_Ton_Cal_U_TonCAL_S3 
X_U_PFM_U42         FB U_PFM_N16563157 U_PFM_N16577607 U_PFM_N16563015
+  COMPHYS_BASIC_GEN_NORC PARAMS:  VDD=1 VSS=0 VTHRESH=0.5
R_U_PFM_R8         U_PFM_C_HI U_PFM_N16589789  1  
V_U_PFM_V5         U_PFM_N06771 0 45m
V_U_PFM_V12         U_PFM_HYST 0 200m
V_U_PFM_V15         U_PFM_N16576469 0 200m
X_U_PFM_U14         U_PFM_N06771 VCOMP ZCRT COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
V_U_PFM_V16         U_PFM_N16577607 0 0
V_U_PFM_V14         U_PFM_N16576437 0 0.41246
X_U_PFM_U39         U_PFM_N16588417 U_PFM_N16569969 U_PFM_HYST COMP_HI
+  COMPHYS_BASIC_GEN_NORC PARAMS:  VDD=1 VSS=0 VTHRESH=0.5
C_U_PFM_C14         0 U_PFM_N16588417  45n  
X_U_PFM_U24         FB U_PFM_N16576437 U_PFM_N16576469 U_PFM_C_HI
+  COMPHYS_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
V_U_PFM_V13         U_PFM_N16569969 0 1
R_U_PFM_R7         U_PFM_N16563015 U_PFM_N16588417  1  
C_U_PFM_C15         0 U_PFM_N16589789  90n  
V_U_PFM_V10         U_PFM_N16563157 0 0.61246
C_C20         0 N16645191  100n  
X_ULogic_U100_S6    ULogic_U100_N04254 0 ULogic_U100_N02118 ULogic_U100_N02122
+  X_LAC20_ULogic_U100_S6 
X_ULogic_U100_U26         ULogic_U100_N02934 ULogic_U100_N118290 INV_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_ULogic_U100_S7    ULogic_U100_EN 0 ULogic_U100_N02122 ULogic_U100_N02277
+  X_LAC20_ULogic_U100_S7 
X_ULogic_U100_S3    ULogic_U100_EN 0 ULogic_U100_N02277 ULogic_U100_N02439
+  X_LAC20_ULogic_U100_S3 
X_ULogic_U100_U25         ULogic_N07083 ULogic_U100_N04254 INV_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_ULogic_U100_U22         ULogic_U100_N02277 ULogic_U100_N03210 INV_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_ULogic_U100_U27         ULogic_U100_N118290 ULogic_N03081 INV_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
V_ULogic_U100_V9         ULogic_U100_N02118 0 5
X_ULogic_U100_U23         ULogic_U100_N02934 N16645291 INV_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_ULogic_U100_U24         ULogic_N07289 ULogic_U100_EN INV_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_ULogic_U100_S5    ULogic_N07289 0 ULogic_U100_N02277 ULogic_U100_N02934
+  X_LAC20_ULogic_U100_S5 
X_ULogic_U100_S4    ULogic_N07083 0 ULogic_U100_N02439 0 X_LAC20_ULogic_U100_S4
+  
X_ULogic_U100_U28         ULogic_N07083 ULogic_U100_N03210 ULogic_U100_N02934
+  NAND2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_ULogic_U24         SET ULogic_N07289 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_ULogic_U69         ULogic_N00950 ULogic_N00950 NGATE NAND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_ULogic_U71         CLIM_HS CLIM_HS ULogic_N02134 NOR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_ULogic_U68         N16645083 ULogic_N01736 ULogic_N02099 NAND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_ULogic_U20         EN EN ULogic_ENB OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_ULogic_U22         ULogic_N00753 SKIPZ INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_ULogic_U70         ULogic_N02099 ULogic_N02134 ULogic_N11607 NAND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_ULogic_U23         SKIPZ ULogic_N07083 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_ULogic_U19         ULogic_N03081 ULogic_N03081 ULogic_N01041 OR2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_ULogic_U26         ULogic_ENB ULogic_N02807 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_ULogic_U65         ULogic_ENB ULogic_N01041 NGATE PGATE AND3_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_ULogic_U73         N16645291 SET ULogic_N02807 ULogic_N11898 OR3_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_ULogic_U55         COMP_HI ZCRT ULogic_N00753 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_ULogic_U101         ULogic_N11898 ULogic_N11607 ULogic_N01594 N10206
+  SRLATCHSHP_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_ULogic_U67         ULogic_N01594 ULogic_N01594 ULogic_N00950 NAND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_ULogic_U25         N16645291 ULogic_N01736 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_UAMP_U22         EN_CTL UAMP_N27738 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_UAMP_U10         VCOMP UAMP_N27592 d_d PARAMS:
X_UAMP_S4    UAMP_N27738 0 VCOMP 0 X_ERROR_AMP_UAMP_S4 
V_UAMP_V11         UAMP_N27592 0 1.8
G_UAMP_ABM2I1         0 VCOMP VALUE { {LIMIT((V(N16645191) -
+  V(FB))*V(UAMP_VGM), -8u,8u)}    }
C_UAMP_C10         VCOMP 0  5.87f  TC=0,0 
R_UAMP_R3         VCOMP UAMP_N27558  108k TC=0,0 
R_UAMP_R2         VCOMP 0  677meg TC=0,0 
C_UAMP_C9         UAMP_N27558 0  30p  TC=0,0 
E_UAMP_ABM1         UAMP_VGM 0 VALUE { (V(UAMP_ISENSE) * (57e-6))+(350e-6)    }
R_UAMP_R4         ISENSE UAMP_ISENSE  1m TC=0,0 
V_UAMP_V12         UAMP_N27640 0 40m
X_UAMP_U7         UAMP_N27640 VCOMP d_d PARAMS:
V_UPG_V4         UPG_N231875 0 0.57
V_UPG_V5         UPG_N234230 0 30m
X_UPG_U11         FB UPG_N231875 UPG_N234230 PGOOD COMP_HYS
X_UPG_U9         0 PGOOD d_d PARAMS:
X_U63         N16644493 GATE_HS CLIM_HS AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
C_UVLO_C18         0 UVLO_N16579105  1n  
R_UVLO_R21         UVLO_N16579099 UVLO_N16579105  1  
X_UVLO_U70         VIN UVLO_UVLO_TH UVLO_N16579077 UVLO_N16579099 COMP_HYS
V_UVLO_V10         UVLO_N16579077 0 200m
V_UVLO_V7         UVLO_UVLO_TH 0 2.4
X_UVLO_U69         UVLO_N16579105 UVLO INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_COMP3         VCOMP ISENSE N16644883 COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
V_V11         N16645501 0 2
*C5 is a dummy 
C_C5         0 N16680836  600n 
X_U30         GATE_HS N16644777 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
.IC         V(N16645199 )=0
.IC         V(STARTUP )= {0.6*SS}
C_C4         STARTUP  0 400n  
.IC         V(EN )=0
.IC         V(U_TonCAL_S_BB )=1
.ENDS TLV62566
*$
**************************************************************************
**************************************************************************
**************************************************************************
**************************************************************************
.subckt TLV62566_S7 1 2 3 4  
S_S7         3 4 1 2 _S7
RS_S7         1 2 1G
.MODEL         _S7 VSWITCH Roff=1e6 Ron=0.1m Voff=0.1 Von=1
.ends TLV62566_S7
*$
.subckt TLV62566_S5 1 2 3 4  
S_S5         3 4 1 2 _S5
RS_S5         1 2 1G
.MODEL         _S5 VSWITCH Roff=1e6 Ron=0.1m Voff=0.1 Von=1
.ends TLV62566_S5
*$
.subckt TLV62566_S4 1 2 3 4  
S_S4         3 4 1 2 _S4
RS_S4         1 2 1G
.MODEL         _S4 VSWITCH Roff=1e6 Ron=105m Voff=0.2 Von=0.8
.ends TLV62566_S4
*$
.subckt TLV62566_S3 1 2 3 4  
S_S3         3 4 1 2 _S3
RS_S3         1 2 1G
.MODEL         _S3 VSWITCH Roff=1e6 Ron=173m Voff=0.2 Von=0.8
.ends TLV62566_S3
*$
.subckt TLV62566_S6 1 2 3 4  
S_S6         3 4 1 2 _S6
RS_S6         1 2 1G
.MODEL         _S6 VSWITCH Roff=1e6 Ron=0.1m Voff=0.1 Von=1
.ends TLV62566_S6
*$
.subckt TLV62566_S9 1 2 3 4  
S_S9         3 4 1 2 _S9
RS_S9         1 2 1G
.MODEL         _S9 VSWITCH Roff=1e6 Ron=0.1m Voff=0.1 Von=1
.ends TLV62566_S9
*$
.subckt TLV62566_H3 1 2 3 4  
H_H3         3 4 VH_H3 1
VH_H3         1 2 0V
.ends TLV62566_H3
*$
.subckt X_Ton_Det_U_TON_DET_S1 1 2 3 4  
S_U_TON_DET_S1         3 4 1 2 _U_TON_DET_S1
RS_U_TON_DET_S1         1 2 1G
.MODEL         _U_TON_DET_S1 VSWITCH Roff=1e6 Ron=1.0 Voff=0.0V Von=1.0V
.ends X_Ton_Det_U_TON_DET_S1
*$
.subckt X_START_UP_USTATRT_S1 1 2 3 4  
S_USTATRT_S1         3 4 1 2 _USTATRT_S1
RS_USTATRT_S1         1 2 1G
.MODEL         _USTATRT_S1 VSWITCH Roff=1e6 Ron=1.0 Voff=0.2V Von=0.8V
.ends X_START_UP_USTATRT_S1
*$
.subckt TLV62566_S8 1 2 3 4  
S_S8         3 4 1 2 _S8
RS_S8         1 2 1G
.MODEL         _S8 VSWITCH Roff=1e6 Ron=0.1m Voff=0.1 Von=1
.ends TLV62566_S8
*$
.subckt X_Ton_Cal_U_TonCAL_S1 1 2 3 4  
S_U_TonCAL_S1         3 4 1 2 _U_TonCAL_S1
RS_U_TonCAL_S1         1 2 1G
.MODEL         _U_TonCAL_S1 VSWITCH Roff=1e6 Ron=1.0 Voff=0.0V Von=1.0V
.ends X_Ton_Cal_U_TonCAL_S1
*$
.subckt X_Ton_Cal_U_TonCAL_S6 1 2 3 4  
S_U_TonCAL_S6         3 4 1 2 _U_TonCAL_S6
RS_U_TonCAL_S6         1 2 1G
.MODEL         _U_TonCAL_S6 VSWITCH Roff=1e6 Ron=1.0 Voff=0.0V Von=1.0V
.ends X_Ton_Cal_U_TonCAL_S6
*$
.subckt X_Ton_Cal_U_TonCAL_S4 1 2 3 4  
S_U_TonCAL_S4         3 4 1 2 _U_TonCAL_S4
RS_U_TonCAL_S4         1 2 1G
.MODEL         _U_TonCAL_S4 VSWITCH Roff=1e6 Ron=1.0 Voff=0.1V Von=0.25
.ends X_Ton_Cal_U_TonCAL_S4
*$
.subckt X_Ton_Cal_U_TonCAL_S2 1 2 3 4  
S_U_TonCAL_S2         3 4 1 2 _U_TonCAL_S2
RS_U_TonCAL_S2         1 2 1G
.MODEL         _U_TonCAL_S2 VSWITCH Roff=1e6 Ron=1.0 Voff=0.0V Von=1.0V
.ends X_Ton_Cal_U_TonCAL_S2
*$
.subckt X_Ton_Cal_U_TonCAL_S7 1 2 3 4  
S_U_TonCAL_S7         3 4 1 2 _U_TonCAL_S7
RS_U_TonCAL_S7         1 2 1G
.MODEL         _U_TonCAL_S7 VSWITCH Roff=1e6 Ron=1.0 Voff=0.0V Von=1.0V
.ends X_Ton_Cal_U_TonCAL_S7
*$
.subckt X_Ton_Cal_U_TonCAL_S5 1 2 3 4  
S_U_TonCAL_S5         3 4 1 2 _U_TonCAL_S5
RS_U_TonCAL_S5         1 2 1G
.MODEL         _U_TonCAL_S5 VSWITCH Roff=1e6 Ron=1.0 Voff=0.2V Von=0.8V
.ends X_Ton_Cal_U_TonCAL_S5
*$
.subckt X_Ton_Cal_U_TonCAL_S3 1 2 3 4  
S_U_TonCAL_S3         3 4 1 2 _U_TonCAL_S3
RS_U_TonCAL_S3         1 2 1G
.MODEL         _U_TonCAL_S3 VSWITCH Roff=1e6 Ron=1.0 Voff=0.2V Von=0.8V
.ends X_Ton_Cal_U_TonCAL_S3
*$
.subckt X_LAC20_ULogic_U100_S6 1 2 3 4  
S_ULogic_U100_S6         3 4 1 2 _ULogic_U100_S6
RS_ULogic_U100_S6         1 2 1G
.MODEL         _ULogic_U100_S6 VSWITCH Roff=1e6 Ron=1.0 Voff=0.0V Von=1.0V
.ends X_LAC20_ULogic_U100_S6
*$
.subckt X_LAC20_ULogic_U100_S7 1 2 3 4  
S_ULogic_U100_S7         3 4 1 2 _ULogic_U100_S7
RS_ULogic_U100_S7         1 2 1G
.MODEL         _ULogic_U100_S7 VSWITCH Roff=1e6 Ron=1.0 Voff=0.0V Von=1.0V
.ends X_LAC20_ULogic_U100_S7
*$
.subckt X_LAC20_ULogic_U100_S3 1 2 3 4  
S_ULogic_U100_S3         3 4 1 2 _ULogic_U100_S3
RS_ULogic_U100_S3         1 2 1G
.MODEL         _ULogic_U100_S3 VSWITCH Roff=1e6 Ron=1.0 Voff=0.0V Von=1.0V
.ends X_LAC20_ULogic_U100_S3
*$
.subckt X_LAC20_ULogic_U100_S5 1 2 3 4  
S_ULogic_U100_S5         3 4 1 2 _ULogic_U100_S5
RS_ULogic_U100_S5         1 2 1G
.MODEL         _ULogic_U100_S5 VSWITCH Roff=1e6 Ron=1.0 Voff=0.0V Von=1.0V
.ends X_LAC20_ULogic_U100_S5
*$
.subckt X_LAC20_ULogic_U100_S4 1 2 3 4  
S_ULogic_U100_S4         3 4 1 2 _ULogic_U100_S4
RS_ULogic_U100_S4         1 2 1G
.MODEL         _ULogic_U100_S4 VSWITCH Roff=1e6 Ron=1.0 Voff=0.0V Von=1.0V
.ends X_LAC20_ULogic_U100_S4
*$
.subckt X_ERROR_AMP_UAMP_S4 1 2 3 4  
S_UAMP_S4         3 4 1 2 _UAMP_S4
RS_UAMP_S4         1 2 1G
.MODEL         _UAMP_S4 VSWITCH Roff=1e6 Ron=1.0 Voff=0.1V Von=0.25
.ends X_ERROR_AMP_UAMP_S4
*$
***************************************************************************************************
** Wrapper definitions for AA legacy support **
.subckt d_d 1 2
d1 1 2 dd
.model dd d
+ is=1e-015
+ n=0.01
+ tt=1e-011
.ends d_d
*$
.MODEL D_D1 D( IS=1e-15 TT=10p Rs=0.05 N=.1  )
*********************************************************************************
*$
.SUBCKT D_D1special 1 2
D1 1 2 DD1spec
.MODEL DD1spec D( IS=1e-15 TT=10p Rs=0.23 N=.1  )
.ENDS D_D1special
*$
.SUBCKT COMP_BASIC_GEN INP INM Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
E_ABM Yint 0 VALUE {IF (V(INP) > 
+ V(INM), {VDD},{VSS})}
R1 Yint Y 1
C1 Y 0 1n
.ENDS COMP_BASIC_GEN
*$
.SUBCKT COMPHYS_BASIC_GEN INP INM HYS OUT PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
EIN INP1 INM1 INP INM 1 
EHYS INP1 INP2 VALUE { IF( V(1) > {VTHRESH},-V(HYS),0) }
EOUT OUT 0 VALUE { IF( V(INP2)>V(INM1), {VDD} ,{VSS}) }
R1 OUT 1 1
C1 1 0 5.0n
RINP1 INP1 0 1K
.ENDS COMPHYS_BASIC_GEN
*$
.SUBCKT COMPHYS2_BASIC_GEN INP INM HYS OUT PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
+ T=10
EIN INP1 INM1 INP INM 1 
EHYS INM2 INM1 VALUE { IF( V(1) > {VTHRESH},-V(HYS)/2,V(HYS)/2) }
EOUT OUT 0 VALUE { IF( V(INP1)>V(INM2), {VDD} ,{VSS}) }
R1 OUT 1 1
C1 1 0 {T*1e-9}
RINP1 INP1 0 10K
RINM2 INM2 0 10K
.ENDS COMPHYS2_BASIC_GEN
*$
.SUBCKT AND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND2_BASIC_GEN
*$
.SUBCKT AND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND3_BASIC_GEN
*$
.SUBCKT AND4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH} &
+ V(D) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND4_BASIC_GEN
*$
.SUBCKT NAND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND2_BASIC_GEN
*$
.SUBCKT NAND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND3_BASIC_GEN
*$
.SUBCKT NAND4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH} &
+ V(D) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND4_BASIC_GEN
*$
.SUBCKT OR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR2_BASIC_GEN
*$
.SUBCKT OR3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR3_BASIC_GEN
*$
.SUBCKT OR4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR4_BASIC_GEN
*$
.SUBCKT NOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR2_BASIC_GEN
*$
.SUBCKT NOR3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR3_BASIC_GEN
*$
.SUBCKT NOR4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR4_BASIC_GEN
*$
.SUBCKT NOR5_BASIC_GEN A B C D E Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH} |
+ V(E) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR5_BASIC_GEN
*$
.SUBCKT NOR6_BASIC_GEN A B C D E F Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH} |
+ V(E) > {VTHRESH} |
+ V(F) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR6_BASIC_GEN
*$
.SUBCKT INV_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS INV_BASIC_GEN
*$
.SUBCKT XOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(A) > {VTHRESH}  ^  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS XOR2_BASIC_GEN
*$
.SUBCKT XNOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(A) > {VTHRESH}  ^  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS XNOR2_BASIC_GEN
*$
.SUBCKT MUX2_BASIC_GEN A B S Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(S) > {VTHRESH},  
+ V(B),V(A))}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS MUX2_BASIC_GEN
*$
.SUBCKT INV_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS INV_DELAY_BASIC_GEN
*$
.SUBCKT BUF_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS BUF_DELAY_BASIC_GEN
*$
.SUBCKT BUF_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS BUF_BASIC_GEN
*$
**Set has higher priority in this latch
.SUBCKT SRLATCHSHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(S) > {VTHRESH},5,IF(V(R)>{VTHRESH},-5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n 
.IC V(Qint) {VSS}
.ENDS SRLATCHSHP_BASIC_GEN
*$
**Reset has higher priority in this latch
.SUBCKT SRLATCHRHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,IF(V(S)>{VTHRESH},5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n
.IC V(Qint) {VSS}
.ENDS SRLATCHRHP_BASIC_GEN
*$
**Reset has higher priority in this latch and active low set and reset - basically NAND based SR latch
.SUBCKT SBRBLATCHRHP_BASIC_GEN SB RB Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(RB) < {VTHRESH},-5,IF(V(SB) < {VTHRESH},5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
.IC V(Qint) {VSS}
.ENDS SBRBLATCHRHP_BASIC_GEN
*$
**Reset has higher priority in this latch and active low set and reset - basically NAND based SR latch
.SUBCKT SBRBLATCHSHP_BASIC_GEN SB RB Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(SB) < {VTHRESH},5,IF(V(RB) < {VTHRESH},-5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
.IC V(Qint) {VSS}
.ENDS SBRBLATCHSHP_BASIC_GEN
*$
.SUBCKT DFFSBRB_SHPBASIC_GEN Q QB CLK D RB SB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
GQ 0 Qint VALUE = {IF(V(SB) < {VTHRESH},5,IF(V(RB)<{VTHRESH},-5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSBRB_SHPBASIC_GEN
*$
.SUBCKT DFFSR_SHPBASIC_GEN Q QB CLK D R S PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} 
GQ 0 Qint VALUE = {IF(V(S) > {VTHRESH},5,IF(V(R) > {VTHRESH},-5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSR_SHPBASIC_GEN
*$
.SUBCKT DFFSBRB_RHPBASIC_GEN Q QB CLK D RB SB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} 
GQ 0 Qint VALUE = {IF(V(RB) < {VTHRESH},-5,IF(V(SB)< {VTHRESH},5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 5
D_D11 0 Qint D_D1 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSBRB_RHPBASIC_GEN
*$
.SUBCKT DFFSR_RHPBASIC_GEN Q QB CLK D R S PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}  
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,IF(V(S) > {VTHRESH},5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSR_RHPBASIC_GEN
*$
$
**** SPM_Mono_POS  ***************************************************************************************
* FUNCTION: SHORT TIME PULSE GENERATOR AT NEG INPUT EDGE
* INPUTS/OUTPUTS: ONE DIGITAL INPUT: A, TWO DIG OUTPUT PINS: Q Qn
* DESCRIPTION: CREATE A PW PULSE WIDTH AT -VE EDGE OF INPUT, PULSE WIDTH OF INPUT NEEDS TO BE GREATER THAN PW PARAMETER VALUE
**********************
.SUBCKT MONOPOS_PS in Q Qn PARAMS: PW=1u 
****buffer*********
*RA in 0 1e11
*CA in 0 0.01pF
*VS VSUP 0 DC 1
**** boolean ************
*EBUF1 Y1 0 VALUE={IF(V(in) > .5 , 1, 0)}
*ROUTpp1 Y1 0 1e11
**** add delay lines ****
*XNSW1 Y2 Y1  0 NSW_PS PARAMS: RONval={(PW+1e-15)/(1e-12*0.693)} VTHval=0.5
*XPSW1 Y2 Y1 VSUP PSW_PS PARAMS: RONval={(PW+1e-15)/(1e-12*0.693)} VTHval=0.5
*CDEL1 Y2 0 1pF
*ETHRESH Y3 0 VALUE={IF(V(Y2) > 0.5, 0, 1)}
*ROUTp Y3 0 1e11
* ************add rise and fall *****
**XNSW2 Y4 Y3 0 NSW_PS PARAMS: RONval=(1e-12/1e-12*2.3) VTHval=0.5
**XPSW2 Y4 Y3 VSUP PSW_PS PARAMS: RONval=(1e-12/1e-12*2.3) VTHval=0.5
**CDEL2 Y4 0 1pF
************XOR2***********
*EXOR2 P 0 VALUE={IF(V(in) > 0.5 ^ V(Y3) > .5, 1, 0)}
*ROUTpp2 P 0 1e11
**********AND************
*EAND2 Y5 0 VALUE={IF(V(in) > 0.5 & V(P) > 0.5 , 0, 1)}
*ROUTpp3 Y5 0 1e11
* add rise and fall *****
*XNSW3 Q Y5 0 NSW_PS PARAMS: RONval=(1e-9/1e-12*2.3) VTHval=0.5
*XPSW3 Q Y5 VSUP PSW_PS PARAMS: RONval=(1e-9/1e-12*2.3) VTHval=0.5
*ROUTq Q 0 1e11
***********end of AND2********************
* add rise and fall + inversion *****
*XNSW4 Qn Q 0 NSW_PS PARAMS: RONval=(1e-9/1e-12*2.3) VTHval=0.5
*XPSW4 Qn Q VSUP PSW_PS PARAMS: RONval=(1e-9/1e-12*2.3) VTHval=0.5
*ROUTqn Qn 0 1e11
*******************************new take on delay*************
VS VSUP 0 DC 1
GIN VSUP YA VALUE={IF(V(IN)>0.5, V(VSUP)/1000K, 0)}
GDIS YA 0 VALUE={IF(V(IN)>0.5,0, V(YA)/1m)}
CIN YA 0 1n IC=0
RIN YA 0 1e11
EABM1 YTD 0 VALUE={IF(V(YA)> {PW*1000}, 1, 0)}
RYTD YTD 0 1e11
EXOR P 0 VALUE={IF(V(YTD) > 0.5 ^ V(IN) > .5, 1, 0)}
ROUTpp2 P 0 1e11
EAND1 Q1 0 VALUE={ IF(V(P)>0.5 & V(IN)>0.5, 1, 0)}
Ro1 Q1 Q 1m
Co1 Q 0 1p
ROUT2 Q 0 1e11
EAND2 Qn1 0 VALUE={ IF(V(Q)>0.5, 0, 1)}
Ro2 Qn1 Qn 1m
Co2 Qn 0 1p
ROUT4 Qn 0 1e11
.ENDS MONOPOS_PS
*$
.SUBCKT LDCR 1 2 PARAMS: L=1u DCR=20m
L1 1 INT1 {L}
R1 INT1 2 {DCR}
.ENDS LDCR
*$
.SUBCKT CESR 1 2 PARAMS: C=10u ESR=2m ESL=1n
C1 1 INT1 {C}
R1 INT1 INT2 {ESR}
L1 INT2 2 {ESL}
.ENDS CESR
*$
.SUBCKT multiplier V1 V2  OUT    
E_MULT    OUT 0 VALUE = { V(V1) *V(V2) }
.ENDS multiplier
*$
.SUBCKT 2to1MUX V1 V2  A  out    PARAMS:  VTHRESH=0.5 
E_MUX    OUT 0 VALUE = {IF (  V(A) > {VTHRESH} ,V(V1),V(V2) ) }
.ENDS 2to1MUX
*$
.SUBCKT VI_HL Vin VDD Vout 
E_out  Vout 0 VALUE = {if ( V(Vin) > V(VDD)*0.7, V(VDD),
+ if ( V(Vin) < V(VDD)*0.3, 0 , V(VDD)/2 ))} 
.ends  
*$
.SUBCKT COMPHYS_BASIC_GEN_NORC INP INM HYS OUT PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
EIN INP1 INM1 INP INM 1 
EHYS INP1 INP2 VALUE { IF( V(1) > {VTHRESH},-V(HYS),0) }
EOUT OUT 0 VALUE { IF( V(INP2)>V(INM1), {VDD} ,{VSS}) }
R1 OUT 1 1
C1 1 0 1n
*RINP1 INP1 0 1K
RINP1 INP1 0 1000K
.ENDS COMPHYS_BASIC_GEN_NORC
*$
.SUBCKT COMP_HYS IN_POS IN_NEG HYS OUT 
X_U1         IN_POS N00153 OUT COMP_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_ABM2         N00234 0 VALUE { V(IN_NEG)+  
+ +(-V(OUT)*V(HYS))   }
R_R1         N00234 N00153  1  
C_C1         0 N00153  1n  
.ENDS COMP_HYS
*$
