
*****************************************************************************
* DRV8814
*****************************************************************************
* (C) Copyright 2017 Texas Instruments Incorporated. All rights reserved.                                            
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.
** TI and its licensors and suppliers make no warranties, either expressed
** or implied, with respect to this model, including the warranties of 
** merchantability or fitness for a particular purpose.  The model is
** provided solely on an "as is" basis.  The entire risk as to its quality
** and performance is with the customer
*****************************************************************************
*
* This model is subject to change without notice. Texas Instruments
* Incorporated is not responsible for updating this model.
*
*****************************************************************************
*
** Released by: WEBENCH Design Center, Texas Instruments Inc.
* Part: DRV8814
* Date: 9OCTOBER2017
* Model Type: TRANSIENT 
* Simulator: PSPICE
* Simulator Version: 16.2.0-S003
* EVM Order Number: CPG004 DRV88xxEVM
* EVM Users Guide: SLVU361B–April 2010–Revised October 2013
* Datasheet: SLVSAB9E –MAY 2010–REVISED NOVEMBER 2015
* Topologies Supported: NA
*
* Model Version: Final 1.00
*
*****************************************************************************
*
* Updates:
*
* Final 1.00
* Release to Web.
*
*****************************************************************************
.SUBCKT DRV8814_TRANS AENBL AI0 AI1 AOUT1 AOUT2 APHASE AVREF BENBL BI0 BI1
+  BOUT1 BOUT2 BPHASE BVREF CP1 CP2 DECAY GND_0 GND_1 GND_2 ISENA ISENB nFAULT
+  nRESET nSLEEP V3P3OUT VCP VMA VMB  
R_R23         GND_0 DECAY  1m TC=0,0 
X_U200_U949         U200_N16781042 U200_N16781031 one_shot PARAMS:  T=100
E_U200_ABM33         U200_N16780950 0 VALUE { ABS(V(B_MON))    }
X_U200_U944         U200_N16780950 U200_N16781058 U200_N16781045 COMP_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_U200_ABM21         U200_N16779677 0 VALUE { IF(V(BENBL) > 2.5, 1, 0)    }
R_U200_R5         U200_N16779262 U200_N16779359  1 TC=0,0 
X_U200_U963         B_MON U200_N16781283 B_IPOS COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
C_U200_C2         0 U200_N16779281  1n  
R_U200_R6         U200_N16779607 U200_N16779635  1 TC=0,0 
X_U200_U948         U200_N16781045 BENBL U200_N16781025 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
C_U200_C5         0 U200_N16779588  1n  
X_U200_U866         U200_N16779607 U200_N16779588 B_DECAY OR2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U200_U962         A_MON U200_N16781217 A_IPOS COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
R_U200_R7         U200_N16779588 U200_N16779677  1 TC=0,0 
R_U200_R4         U200_N16779281 U200_N16779319  1 TC=0,0 
E_U200_ABM18         U200_N16779319 0 VALUE { IF((V(A_MON) < 100e-3 & V(A_MON)
+  > -100e-3) , 0 ,1)    }
X_U200_U947         U200_N16781025 U200_N16781028 one_shot PARAMS:  T=100
E_U200_ABM20         U200_N16779635 0 VALUE { IF((V(B_MON) < 100e-3 & V(B_MON)
+  > -100e-3) , 0 ,1)    }
X_U200_U946         U200_N16781028 U200_N16781031 B_IMON_OUT N16781034
+  srlatchrhp_basic_gen PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U200_U950         BENBL U200_N16781042 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
C_U200_C4         0 U200_N16779607  1n  
C_U200_C3         0 U200_N16779262  1n  
E_U200_ABM53         U200_N16781283 0 VALUE { 0    }
E_U200_ABM34         U200_N16781058 0 VALUE { IDC_B    }
X_U200_U865         U200_N16779281 U200_N16779262 A_DECAY OR2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
E_U200_ABM52         U200_N16781217 0 VALUE { 0    }
E_U200_ABM19         U200_N16779359 0 VALUE { IF(V(AENBL) > 2.5, 1, 0)    }
X_U200_U964         U200_N16784521 U200_N16784628 U200_N16784615 COMP_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_U200_ABM54         U200_N16784521 0 VALUE { ABS(V(A_MON))    }
X_U200_U968         U200_N16784615 AENBL U200_N16784597 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U200_U967         U200_N16784612 U200_N16784604 one_shot PARAMS:  T=100
X_U200_U966         U200_N16784597 U200_N16784601 one_shot PARAMS:  T=100
X_U200_U965         U200_N16784601 U200_N16784604 A_IMON_OUT N16784607
+  srlatchrhp_basic_gen PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U200_U969         AENBL U200_N16784612 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
E_U200_ABM55         U200_N16784628 0 VALUE { IDC_A    }
R_R11         GND_0 AVREF  1m TC=0,0 
R_R22         GND_0 AI0  1m TC=0,0 
R_R9         GND_0 ISENB  1m TC=0,0 
R_R13         GND_0 BVREF  1m TC=0,0 
R_R30         GND_0 NRESET  1m TC=0,0 
R_R20         GND_0 AI1  1m TC=0,0 
R_R19         GND_0 AI1  1m TC=0,0 
R_R21         GND_0 AI0  1m TC=0,0 
R_R4         GND_0 CP2  1m TC=0,0 
R_R6         GND_0 VCP  1m TC=0,0 
R_R8         GND_0 ISENA  1m TC=0,0 
R_R25         GND_0 NFAULT  1m TC=0,0 
R_R2         GND_0 CP1  1m TC=0,0 
R_R7         GND_0 ISENA  1m TC=0,0 
R_R17         GND_0 BI0  1m TC=0,0 
R_R5         GND_0 VCP  1m TC=0,0 
R_R16         GND_0 BI1  1m TC=0,0 
R_R28         GND_0 NSLEEP  1m TC=0,0 
X_U300_U900         U300_B_RAMP U300_N16782223 B_PWM COMP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
E_U300_ABM31         U300_A_DUTY 0 VALUE { (IDC_A*Rmotor_A + V(VMA))/(2*V(VMA))
+     }
X_U300_D14         U300_B_RAMP U300_N16782174 d_d1 PARAMS: 
X_U300_U897         U300_N16778758 U300_N16778773 U300_N16778866 OR2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
E_U300_ABM32         U300_B_DUTY 0 VALUE { (IDC_B*Rmotor_B + V(VMB))/(2*V(VMB))
+     }
X_U300_U903         U300_N16782269 U300_N16782325 INV_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U300_U898         A_PWM U300_N16778773 BUF_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=10n
E_U300_E3         0 U300_N16782361 B_PWM 0 2.5
C_U300_C2         0 U300_A_RAMP  2p IC=0 
E_U300_E2         0 U300_N16778996 A_PWM 0 2.5
C_U300_C3         0 U300_B_RAMP  2p IC=0 
X_U300_U902         B_PWM U300_N16782172 BUF_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=10n
X_U300_D13         U300_A_RAMP U300_N16778775 d_d1 PARAMS: 
G_U300_ABMII7         U300_N16782174 U300_B_RAMP VALUE {
+  (V(U300_N16782325)*(5E-12*Freq/(1-V(U300_B_DUTY))))    }
V_U300_V50         U300_N16778831 U300_N16778996 3.75
V_U300_V54         U300_N16782161 0 0Vdc
G_U300_ABMII5         U300_N16778775 U300_A_RAMP VALUE {
+  (V(U300_N16778953)*(5E-12*Freq/(1-V(U300_A_DUTY))))    }
X_U300_U901         U300_N16782161 U300_N16782172 U300_N16782269 OR2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
V_U300_V49         U300_N16778775 0 5
V_U300_V51         U300_N16778758 0 0Vdc
G_U300_ABMII6         U300_B_RAMP 0 VALUE {
+  (V(U300_N16782269)*(5E-12*Freq/V(U300_B_DUTY)))    }
V_U300_V53         U300_N16782223 U300_N16782361 3.75
X_U300_U896         U300_A_RAMP U300_N16778831 A_PWM COMP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
G_U300_ABMII4         U300_A_RAMP 0 VALUE {
+  (V(U300_N16778866)*(5E-12*Freq/V(U300_A_DUTY)))    }
X_U300_U899         U300_N16778866 U300_N16778953 INV_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
V_U300_V52         U300_N16782174 0 5
R_R14         GND_0 BVREF  1m TC=0,0 
R_R29         GND_0 NRESET  1m TC=0,0 
R_R32         GND_0 V3P3OUT  1m TC=0,0 
R_R27         GND_0 NSLEEP  1m TC=0,0 
R_R26         GND_0 NFAULT  1m TC=0,0 
R_R15         GND_0 BI1  1m TC=0,0 
R_R3         GND_0 CP2  1m TC=0,0 
R_R1         GND_0 CP1  1m TC=0,0 
R_R24         GND_0 DECAY  1m TC=0,0 
X_U400_U954         U400_N16788588 U400_N16788571 INV_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
E_U400_ABM67         U400_N16788588 0 VALUE { IF(V(B_IPOS)>0.5 , 0,1)    }
E_U400_ABM75         U400_N167887260 0 VALUE { IF(V(U400_N16788770)>0.5 ,
+  V(VMB) +2,0)    }
X_U400_U953         U400_N16785223 U400_N16785220 INV_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
E_U400_ABM77         U400_B_PWM_O 0 VALUE { IF(V(BPHASE)>2.5, V(B_PWM) ,V
+  (U400_N16790430))    }
E_U400_ABM73         U400_N167853830 0 VALUE { IF(V(U400_N16785390)>0.5 ,
+  V(VMA) +2,0)    }
C_U400_C4         0 A1  1n  
X_U400_U934         U400_N16785661 A_DECAY U400_N16785390 AND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U400_U928         U400_A_PWM_O U400_N16785652 INV_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
C_U400_C8         0 B1  1n  
R_U400_R12         B3 U400_N167887260  1 TC=0,0 
E_U400_ABM33         U400_N16785658 0 VALUE { IF(V(AENBL)>2.5,
+  V(U400_N16785449) ,V (U400_N16785223))    }
C_U400_C6         0 A3  1n  
C_U400_C10         0 B3  1n  
X_U400_U957         U400_N16789035 B_DECAY U400_N16788914 AND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
E_U400_ABM76         U400_N167887630 0 VALUE { IF(V(U400_N16788756)>0.5 ,
+  V(VMB) +2,0)    }
E_U400_ABM65         U400_N16789035 0 VALUE { IF(V(BENBL)>2.5,
+  V(U400_N16788815) ,V (U400_N16788588))    }
E_U400_ABM68         U400_N16788838 0 VALUE { IF(V(B_IMON_OUT)>0.5,
+  V(U400_N16789029) ,V (U400_N16789001))    }
E_U400_ABM39         U400_N16785469 0 VALUE { IF(V(A_IMON_OUT)>0.5,
+  V(U400_N16785649) ,V (U400_N16785616))    }
X_U400_U933         U400_N16785664 A_DECAY U400_N16785393 AND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
R_U400_R13         B4 U400_N167887630  1 TC=0,0 
X_U400_U12         A_PWM U400_N16785982 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
E_U400_ABM13         U400_A_PWM_O 0 VALUE { IF(V(APHASE)>2.5, V(A_PWM) ,V
+  (U400_N16785982))    }
E_U400_ABM55         U400_A_PHASE_O 0 VALUE { IF(V(APHASE)>2.5 ,1,0)    }
X_U400_U952         U400_N16785223 U400_N16785206 INV_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U400_U963         U400_B_PWM_O U400_N16789026 INV_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
R_U400_R6         A1 U400_N167852831  1 TC=0,0 
R_U400_R7         A2 U400_N167853310  1 TC=0,0 
X_U400_U956         U400_N16788609 B_DECAY U400_N16788773 AND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U400_U961         U400_B_PHASE_O U400_N16788993 INV_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
E_U400_ABM61         U400_N167886641 0 VALUE { IF(V(U400_N16788914)>0.5 ,
+  V(VMB) +2,0)    }
R_U400_R8         A3 U400_N167853490  1 TC=0,0 
R_U400_R11         B2 U400_N167887150  1 TC=0,0 
R_U400_R9         A4 U400_N167853830  1 TC=0,0 
X_U400_U932         U400_N16785244 A_DECAY U400_N16785396 AND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U400_U960         U400_B_PHASE_O U400_N16789001 INV_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
R_U400_R10         B1 U400_N167886641  1 TC=0,0 
E_U400_ABM58         U400_N16788609 0 VALUE { IF(V(BENBL)>2.5,
+  V(U400_N16788838) ,V (U400_N16788571))    }
E_U400_ABM59         U400_N16789041 0 VALUE { IF(V(BENBL)>2.5,
+  V(U400_N16788846) ,V (U400_N16788585))    }
C_U400_C9         0 B2  1n  
E_U400_ABM53         U400_N16785223 0 VALUE { IF(V(A_IPOS)>0.5 , 0,1)    }
E_U400_ABM20         U400_N167852831 0 VALUE { IF(V(U400_N16785537)>0.5 ,
+  V(VMA) +2,0)    }
X_U400_U951         U400_A_PHASE_O U400_N16785616 INV_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
E_U400_ABM45         U400_N16785664 0 VALUE { IF(V(AENBL)>2.5,
+  V(U400_N16785469) ,V (U400_N16785220))    }
X_U400_U955         U400_N16788588 U400_N16788585 INV_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
C_U400_C11         0 B4  1n  
E_U400_ABM47         U400_N16785661 0 VALUE { IF(V(AENBL)>2.5,
+  V(U400_N16785477) ,V (U400_N16785223))    }
C_U400_C5         0 A2  1n  
X_U400_U929         U400_A_PWM_O U400_N16785649 INV_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
E_U400_ABM71         U400_N167853310 0 VALUE { IF(V(U400_N16785396)>0.5 ,
+  V(VMA) +2,0)    }
X_U400_U959         U400_N16789038 B_DECAY U400_N16788756 AND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U400_U962         U400_B_PWM_O U400_N16789029 INV_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
E_U400_ABM78         U400_B_PHASE_O 0 VALUE { IF(V(BPHASE)>2.5 ,1,0)    }
E_U400_ABM57         U400_N16788854 0 VALUE { IF(V(B_IMON_OUT)>0.5,
+  V(U400_B_PWM_O) ,V (U400_B_PHASE_O))    }
C_U400_C7         0 A4  1n  
X_U400_U657         U400_N16785658 A_DECAY U400_N16785537 AND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
E_U400_ABM43         U400_N16785244 0 VALUE { IF(V(AENBL)>2.5,
+  V(U400_N16785461) ,V (U400_N16785206))    }
E_U400_ABM66         U400_N16788815 0 VALUE { IF(V(B_IMON_OUT)>0.5,
+  V(U400_B_PWM_O) ,V (U400_B_PHASE_O))    }
E_U400_ABM54         U400_N16785461 0 VALUE { IF(V(A_IMON_OUT)>0.5,
+  V(U400_N16785652) ,V (U400_N16785624))    }
E_U400_ABM56         U400_N16788846 0 VALUE { IF(V(B_IMON_OUT)>0.5,
+  V(U400_N16789026) ,V (U400_N16788993))    }
E_U400_ABM74         U400_N167887150 0 VALUE { IF(V(U400_N16788773)>0.5 ,
+  V(VMB) +2,0)    }
X_U400_U950         U400_A_PHASE_O U400_N16785624 INV_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
E_U400_ABM14         U400_N16785449 0 VALUE { IF(V(A_IMON_OUT)>0.5,
+  V(U400_A_PWM_O) ,V (U400_A_PHASE_O))    }
E_U400_ABM72         U400_N167853490 0 VALUE { IF(V(U400_N16785393)>0.5 ,
+  V(VMA) +2,0)    }
E_U400_ABM40         U400_N16785477 0 VALUE { IF(V(A_IMON_OUT)>0.5,
+  V(U400_A_PWM_O) ,V (U400_A_PHASE_O))    }
X_U400_U958         U400_N16789041 B_DECAY U400_N16788770 AND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U400_U964         B_PWM U400_N16790430 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
E_U400_ABM60         U400_N16789038 0 VALUE { IF(V(BENBL)>2.5,
+  V(U400_N16788854) ,V (U400_N16788588))    }
R_R31         GND_0 V3P3OUT  1m TC=0,0 
X_U100_M2         U100_B_VM_OK B2 BOUT2 dmg4800lsd PARAMS:
X_U100_U964         VMB U100_N16773849 U100_N16773817 COMP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
E_U100_ABM55         U100_N16773685 0 VALUE { 7.2    }
X_U100_M5         U100_A_VM_OK A2 AOUT2 dmg4800lsd PARAMS:
X_U100_M3         BOUT2 B4 0 dmg4800lsd PARAMS:
X_U100_M6         AOUT2 A4 0 dmg4800lsd PARAMS:
E_U100_ABM56         U100_B_VM_OK 0 VALUE { IF(V(U100_N16773817)>0.5 , V(VMB)
+  ,0)    }
X_U100_U963         VMA U100_N16773685 U100_N16773653 COMP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
X_U100_M1         U100_B_VM_OK B1 U100_N16770736 dmg4800lsd PARAMS:
X_U100_M4         U100_N16770736 B3 0 dmg4800lsd PARAMS:
X_U100_M8         U100_A_VM_OK A1 U100_N16769742 dmg4800lsd PARAMS:
X_U100_H1    U100_N16770736 BOUT1 B_MON 0 H_Bridge_half_U100_H1 
X_U100_M7         U100_N16769742 A3 0 dmg4800lsd PARAMS:
E_U100_ABM57         U100_N16773849 0 VALUE { 7.2    }
X_U100_H2    U100_N16769742 AOUT1 A_MON 0 H_Bridge_half_U100_H2 
E_U100_ABM54         U100_A_VM_OK 0 VALUE { IF(V(U100_N16773653)>0.5 , V(VMA)
+  ,0)    }
R_R10         GND_0 ISENB  1m TC=0,0 
R_R18         GND_0 BI0  1m TC=0,0 
R_R12         GND_0 AVREF  1m TC=0,0
X_1001 A_DECAY NODE_1 INV_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_1002 B_DECAY NODE_2 INV_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
S_SW1 AOUT1 0 NODE_1 0 S_VSWITCH_1
S_SW2 AOUT2 0 NODE_1 0 S_VSWITCH_1
S_SW3 BOUT1 0 NODE_2 0 S_VSWITCH_1
S_SW4 BOUT2 0 NODE_2 0 S_VSWITCH_1
.MODEL S_VSWITCH_1 VSWITCH (RON=1e-3 ROFF=1G VON=0.8 VOFF=0.2)
.ENDS DRV8814_TRANS
*$
.subckt H_Bridge_half_U100_H1 1 2 3 4  
H_U100_H1         3 4 VH_U100_H1 1
VH_U100_H1         1 2 0V
.ends H_Bridge_half_U100_H1
*$
.subckt H_Bridge_half_U100_H2 1 2 3 4  
H_U100_H2         3 4 VH_U100_H2 1
VH_U100_H2         1 2 0V
.ends H_Bridge_half_U100_H2
*$
.subckt one_shot in out
+ params:  t=100
s_s1         meas 0 reset2 0 s1
e_abm1         ch 0 value { if( v(in)>0.5 | v(out)>0.5,1,0)    }
r_r2         reset2 reset  0.1  
e_abm3         out 0 value { if( v(meas)<0.5 & v(ch)>0.5,1,0)    }
r_r1         meas ch  {t} 
c_c2         0 reset2  1.4427n  
c_c1         0 meas  1.4427n  
e_abm2         reset 0 value { if(v(ch)<0.5,1,0)    }
.model s1 vswitch
+ roff=1e+009
+ ron=1
+ voff=0.25
+ von=0.75
.ends one_shot
*$
.SUBCKT SRLATCHRHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,IF(V(S)>{VTHRESH},5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n
.IC V(Qint) {VSS}
.MODEL D_D1 D( IS=1e-15 TT=10p Rs=0.05 N=.1 )
.ENDS SRLATCHRHP_BASIC_GEN
*$
.subckt d_d1 1 2
d1 1 2 dd1
.model dd1 d
+ is=1e-015
+ tt=1e-011
+ rs=0.05
+ n=0.01
.ends d_d1
*$
.subckt dmg4800lsd   d g s
m1   1  g  3  3  nmos l=0.6u w=2.304672
rd  d  1  2m
rs  s  3  4m
cgs  g  3  1f
egd 12  0  g  1  1
vfb 14  0  0
ffb  g  1  vfb  1
r1  13  0  1.00
d1  12 13  dlim
ddg 15 14  dcgd
r2  12 15  1.00
d2  15  0  dlim
dsd  3 d  dsub
.model nmos nmos
+ level=3
+ u0=400
+ vmax=40000
+ vto=1.62
+ tox=6e-008
.model dcgd d
+ cjo=4.88e-010
+ vj=0.45
+ m=0.42
.model dsub d
+ is=3.61e-008
+ n=1.5
+ rs=0.0218
+ bv=30
+ cjo=4.8e-011
+ vj=0.95
+ m=0.92
.model dlim d
+ is=0.0001
.ends dmg4800lsd
*$
.SUBCKT COMP_BASIC_GEN INP INM Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
E_ABM Yint 0 VALUE {IF (V(INP) > 
+ V(INM), {VDD},{VSS})}
R1 Yint Y 1
C1 Y 0 1n
.ENDS COMP_BASIC_GEN
*$
.SUBCKT AND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND2_BASIC_GEN
*$
.SUBCKT OR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR2_BASIC_GEN
*$
.SUBCKT INV_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS INV_BASIC_GEN
*$
.SUBCKT BUF_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS BUF_DELAY_BASIC_GEN
*$
.SUBCKT BUF_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS BUF_BASIC_GEN
*$
