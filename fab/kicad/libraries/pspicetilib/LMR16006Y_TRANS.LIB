*$
* LMR16006Y
*****************************************************************************
* (C) Copyright 2016 Texas Instruments Incorporated. All rights reserved.                                            
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.
** TI and its licensors and suppliers make no warranties, either expressed
** or implied, with respect to this model, including the warranties of 
** merchantability or fitness for a particular purpose.  The model is
** provided solely on an "as is" basis.  The entire risk as to its quality
** and performance is with the customer
*****************************************************************************
*
* This model is subject to change without notice. Texas Instruments
* Incorporated is not responsible for updating this model.
*
*****************************************************************************
*
** Released by: WEBENCH Design Center, Texas Instruments Inc.
* Part: LMR16006Y
* Date: 10FEB2017
* Model Type: TRANSIENT
* Simulator: PSPICE
* Simulator Version: 16.2.0.p001	
* EVM Order Number: LMR16006YEVM - Buck
*                   N/A - Inverting Buck Boost
* EVM Users Guide: SNVU449–October 2014 - Buck
*                  N/A - Inverting Buck Boost
* Datasheet: SNVSA24 –OCTOBER 2014
*
* Model Version: Final 1.10
*
*****************************************************************************
*
* Updates:
*
* Final 1.10
* Model functionality is corrected to make compatible for IBB
*
* Final 1.00
* Release to Web.
*
*****************************************************************************
*
* Model Usage Notes:
*
* 1. The following features have been modeled
*      a. Over voltage protection
*      b. ECO mode operation
*      c. Min duty cycle
*      d. Current limit
*      e. Boot UVLO
*      f. Soft Start
* 2. Temperature and Quiescent current effects are not modeled.
* 3. Topologies Supported: Buck and Inverting Buck Boost. 
*
*****************************************************************************
.SUBCKT LMR16006Y_TRANS CB FB GND SHDN SW VIN  PARAMS: SS=0
E_E1         VSENSE_DIFF 0 FB GND 1
V_V47         SET1 0 1
X_U9_U615         SS U9_N16723697 ss2gm
G_U9_ABM2I1         0 COMP VALUE { {LIMIT((V(VREF) - V(VSENSEINT))*V(U9_GM),
+  -10u,10u)}    }
D_U9_D10         COMP U9_N16513008 D_D1 
X_U9_U614         U9_N16513186 U9_N16513124 U9_N16513160 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
R_U9_R294         0 COMP  125Meg  
V_U9_V5         U9_N16513014 0 555.201m
R_U9_R4         U9_N16512974 COMP  150k  
X_U9_S5    UVLO 0 COMP 0 ErrorAmp_U9_S5 
R_U9_R290         U9_N16723697 U9_GM  1  
C_U9_C172         0 COMP  1.15749p  
C_U9_C9         0 OCB  1n  
D_U9_D11         U9_N16513014 COMP D_D1 
V_U9_V6         U9_N16513008 0 1.945
R_U9_R11         U9_N16513160 OCB  1  
E_U9_ABM8         U9_N16513186 0 VALUE { {IF(V(COMP) > 2.1,1,0)}    }
X_U9_U603         SDWN U9_N16513124 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
C_U9_C5         0 U9_N16512974  180p  
C_U9_C166         0 U9_GM  1n  
V_U4_V70         U4_N7397984 0 1.7
G_U4_ABMI5         SS 0 VALUE { {IF(V(SS_DISCH) >0.5, 1.25m,0)}    }
C_U4_C15         0 U4_N7398492  1n  
G_U4_ABMII1         U4_N7397984 SS VALUE { {IF(V(U4_N7406804) > 0.5,2u,0)}    }
E_U4_ABM178         U4_N7398284 0 VALUE { IF(V(SS) < 0.765, V(SS),0.765)    }
X_U4_U1         SDWN U4_N7406804 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
E_U4_ABM180         U4_N7398466 0 VALUE { IF(V(OCB) > 0.5 & V(SS) >
+  V(VSENSEINT)+10m,1,0)    }
R_U4_R15         U4_N7398466 U4_N7398492  1  
C_U4_C14         0 VREF  1n  
R_U4_R14         U4_N7398284 VREF  1  
D_U4_D62         SS U4_N7397984 D_D1 
D_U4_D63         0 SS D_D1 
X_U4_S68    U4_N7398492 0 SS 0 SoftStart_U4_S68 
C_U4_C8         0 SS  9.8n  
V_U12_V64         U12_N6045018 0 3.6
C_U12_C164         U12_N16580305 U12_N16580367  140.5p  
X_U12_U601         U12_N16496294 UVLO SDWN OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U12_U604         ENAB U12_N16496294 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
V_U12_V65         U12_N165821200 0 0.3
X_U12_U615         U12_N6045018 VIN U12_N165821200 UVLO COMPHYS_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_U12_ABM173         SS_DISCH 0 VALUE { {IF(V(SS)  < 40m,0,  
+ IF(V(U12_N16580305) > 0.5,1,0))}   }
R_U12_R287         U12_N16580305 0  1k  
X_U12_U603         SDWN U12_N16580367 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_R1         GND GND  1m  
V_U13_V79         U13_N16489001 0 .8262
C_U13_C146         0 U13_N16489275  5p  
E_U13_ABM148         U13_VRAMP 0 VALUE { {V(U13_VRAMPIN)*0.001}    }
E_U13_ABM164         U13_N16488977 0 VALUE { {((V(COMP) /100k)  - 5u)*3}    }
V_U13_V82         U13_N16691658 0 0.55
X_U13_U600         U13_ICTRL U13_ISWF U13_COM_PULSE COMP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
X_U13_U598         MUXCLK U13_N16489527 U13_N16564386 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
C_U13_C147         0 U13_ICTRL  1n  
R_U13_R255         U13_N16489395 U13_N16489275  14.4k  
E_U13_ABM163         U13_N16502082 0 VALUE { LIMIT(((V(U13_N16488977) -
+  V(U13_VRAMP)) * 10)  
+ -9u,11u,144u)   }
E_U13_ABM165         U13_N16531938 0 VALUE { (V(U13_N16502082) * 8.33k)    }
E_U13_ABM151         U13_N16489395 0 VALUE { {IF(V(PWM_FINAL) > 0.5, 1,0)}    }
X_U13_U606         PWM_CLK N16614086 U13_CLK_WIDER SET1 U13_PWM SET1
+  DFFSBRB_NODELAY PARAMS:  VDD=1 VSS=0 VTHRESH=0.5
X_U13_U615         COMP U13_N16691658 U13_N16691692 U13_N16682943
+  COMPHYS_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_U13_ABM152         U13_ISWF 0 VALUE { {IF(V(U13_N16489275) > 0.5,  
+ V(ISW),0)}   }
X_U13_U599         MUXCLK U13_N16489527 INV_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5 DELAY=15n
G_U13_ABMI4         U13_VRAMPIN 0 VALUE { {V(IF2IA) * -1.0}    }
X_U13_U134         U13_N16564386 SDWN U13_N16543632 OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
V_U13_V83         U13_N16691692 0 0.01
D_U13_D58         U13_N16489275 U13_N16489395 D_D1 
C_U13_C134         0 U13_VRAMPIN  1n  
X_U13_U607         N16662685 N16662844 U13_N16661959 SET1 U13_N16661959 SET1
+  DFFSBRB_RHPBASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U13_U601         U13_N16489001 VSENSEINT U13_OVTP COMP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
X_U13_U602         U13_COM_PULSE BOOT_UVLO U13_OVTP U13_N16682956
+  AND3_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
V_U13_V81         U13_N16661959 0 0.56
X_U13_U608         U13_N16682956 U13_N16682943 U13_PWM AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
R_U13_R256         U13_N16531938 U13_ICTRL  1  
X_U13_S26    U13_N16543632 0 U13_VRAMPIN 0 GmIphase_U13_S26 
E_U13_ABM153         U13_CLK_WIDER 0 VALUE { {IF(V(MUXCLK) > 0.05, 1,0)}    }
E_U2_ABM173         U2_N7335522 0 VALUE { {IF(V(VIN) > 3.6,5,0)}    }
D_U2_D8         SHDN U2_N7335522 D_D1 
D_U2_D9         SHDN VIN D_D1 
E_U2_ABM1         U2_N7335540 0 VALUE { {IF(V(SHDN) <2.5,0,1)}    }
G_U2_ABMII1         VIN SHDN VALUE { {0.9u+ 2.9u*V(ENAB)}    }
C_U2_C1         0 ENAB  1n  
R_U2_R1         U2_N7335540 ENAB  1  
R_U2_R256         SHDN U2_N7335522  100MEG  
X_U14_S3    U14_N7274032 0 HDRV SW Driver_U14_S3 
C_U14_C140         0 BOOT_UVLO  1n  
E_U14_ABM169         U14_N7347010 0 VALUE { V(CB) - V(SW)    }
C_U14_C3         0 U14_N7345383  1n  
R_U14_R3         U14_N167117171 U14_N7345383  1  
X_U14_U607         U14_LDRV ENAB U14_BOOT_ON U14_SDWN_N U14_BOOT_SW_ON
+  AND4_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U14_S30    HDRV SW U14_N7273988 SW Driver_U14_S30 
X_U14_H1    VIN U14_N7273988 ISW 0 Driver_U14_H1 
X_U14_U5         U14_N7347010 U14_N7345383 U14_OUT COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
E_U14_ABM167         U14_N7274256 0 VALUE { {IF((V(CB) - V(SW)) < 3.0,0,1)}   
+  }
R_U14_R244         U14_N7274256 BOOT_UVLO  1  
E_U14_ABM2         U14_N167117171 0 VALUE { ((V(U14_OUT) *-500m)+ 6)    }
X_U14_U611         U14_HDRVIN U14_N7342498 BUF_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=10n
X_U14_U610         U14_HDRVIN U14_N7274198 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U14_U612         U14_N7274198 U14_N7343256 BUF_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=10n
D_U14_D12         SW U14_N7273988 D_D1 
X_U14_U606         SDWN U14_SDWN_N INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U14_U605         U14_HDRVIN U14_LDRV INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U14_U602         U14_OUT U14_BOOT_ON INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U14_S34    U14_BOOT_SW_ON 0 CB VIN Driver_U14_S34 
X_U14_U604         U14_N7365280 PWM_FINAL U14_HDRVIN AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U14_U609         U14_N7343256 U14_N7274198 U14_N7274032 AND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U14_U613         SDWN U14_N7365280 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U14_U608         U14_HDRVIN U14_N7342498 U14_N7274022 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U14_S2    U14_N7274022 0 CB HDRV Driver_U14_S2 
E_U22_ABM165         IF2IA 0 VALUE { V(I_RT)*3.28    }
V_U22_V1         VSENSE_DIFF VSENSEINT 0Vdc
X_U15_U620         U15_N16489522 U15_INDELAYED1 D_D
R_U15_R272         U15_N16489522 U15_INDELAYED1  8.125k  
C_U15_C172         0 U15_INDELAYED1  8p  
X_U15_U822         PWM_CLK U15_N16497188 INV_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=15n
X_U15_U824         U15_N16489522 U15_INDELAYED1 PWM_CLK PWM_FINAL OR3_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U15_U823         U15_N16497188 PWM_CLK U15_N16489522 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U16_U132         U16_N16518846 U16_N16517387 INV_DELAY_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5 DELAY=5n
D_U16_D11         U16_RAMP U16_N16490102 D_D1 
X_U16_U131         U16_RAMP U16_N16505459 MUXCLK COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
V_U16_V44         U16_N16670466 U16_N16669101 0
R_U16_R277         U16_N16489962 RT  1  
E_U16_E1         U16_N16669101 0 U16_N16668754 0 1
E_U16_ABM5         U16_N16668754 0 VALUE { (V(U16_N16664451)/100)*1.0976    }
X_U16_U2         VSENSE_DIFF U16_N16664451 vfb2freq
X_U16_S26    U16_N16517226 0 U16_RAMP 0 Oscillator_U16_S26 
R_U16_R278         I_RT 0  1  
X_U16_U133         MUXCLK U16_N16518846 INV_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5 DELAY=5n
V_U16_V46         U16_N16505459 0 2.5
R_U16_R276         0 U16_N16489962  500MEG  
C_U16_C79         U16_RAMP 0  2p  
X_U16_U134         SDWN U16_N16517387 U16_N16517226 OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
G_U16_ABMI3         U16_N16490102 U16_RAMP VALUE { {-( I(V_U16_V44)) }    }
V_U16_V45         U16_N16490102 0 5
X_U16_H1    U16_N16489962 U16_N16670466 I_RT 0 Oscillator_U16_H1 
R_U16_R9         0 RT  100k  
.IC         V(SS )={{SS}*1.7}
.IC         V(MUXCLK )=0
.IC         V(U16_RAMP )=0
.IC         V(U16_N16518846 )=1
.ENDS LMR16006Y_TRANS
*$
.subckt ErrorAmp_U9_S5 1 2 3 4  
S_U9_S5         3 4 1 2 _U9_S5
RS_U9_S5         1 2 1G
.MODEL         _U9_S5 VSWITCH Roff=1e12 Ron=1m Voff=0.1 Von=0.9
.ends ErrorAmp_U9_S5
*$
.subckt SoftStart_U4_S68 1 2 3 4  
S_U4_S68         3 4 1 2 _U4_S68
RS_U4_S68         1 2 1G
.MODEL         _U4_S68 VSWITCH Roff=1e9 Ron=1087 Voff=0.2 Von=0.8
.ends SoftStart_U4_S68
*$
.subckt GmIphase_U13_S26 1 2 3 4  
S_U13_S26         3 4 1 2 _U13_S26
RS_U13_S26         1 2 1G
.MODEL         _U13_S26 VSWITCH Roff=100e6 Ron=10m Voff=0.2 Von=0.8
.ends GmIphase_U13_S26
*$
.subckt Driver_U14_S3 1 2 3 4  
S_U14_S3         3 4 1 2 _U14_S3
RS_U14_S3         1 2 1G
.MODEL         _U14_S3 VSWITCH Roff=1e9 Ron=1.0 Voff=0.2 Von=0.8
.ends Driver_U14_S3
*$
.subckt Driver_U14_S30 1 2 3 4  
S_U14_S30         3 4 1 2 _U14_S30
RS_U14_S30         1 2 1G
.MODEL         _U14_S30 VSWITCH Roff=1e12 Ron=900m Voff=0.2 Von=0.8
.ends Driver_U14_S30
*$
.subckt Driver_U14_H1 1 2 3 4  
H_U14_H1         3 4 VH_U14_H1 1
VH_U14_H1         1 2 0V
.ends Driver_U14_H1
*$
.subckt Driver_U14_S34 1 2 3 4  
S_U14_S34         3 4 1 2 _U14_S34
RS_U14_S34         1 2 1G
.MODEL         _U14_S34 VSWITCH Roff=1000e6 Ron=107 Voff=0.2 Von=0.8
.ends Driver_U14_S34
*$
.subckt Driver_U14_S2 1 2 3 4  
S_U14_S2         3 4 1 2 _U14_S2
RS_U14_S2         1 2 1G
.MODEL         _U14_S2 VSWITCH Roff=1e9 Ron=1 Voff=0.2 Von=0.8
.ends Driver_U14_S2
*$
.subckt Oscillator_U16_S26 1 2 3 4  
S_U16_S26         3 4 1 2 _U16_S26
RS_U16_S26         1 2 1G
.MODEL         _U16_S26 VSWITCH Roff=100e6 Ron=1.0 Voff=0.2 Von=0.8
.ends Oscillator_U16_S26
*$
.subckt Oscillator_U16_H1 1 2 3 4  
H_U16_H1         3 4 VH_U16_H1 -1
VH_U16_H1         1 2 0V
.ends Oscillator_U16_H1
*$
.SUBCKT CESR IN OUT
+ PARAMs:  C=100u ESR=0.01 X=2 IC=0
C	IN 1  {C*X} IC={IC}
RESR	1 OUT {ESR/X}
.ENDS CESR
*$
.SUBCKT D_D 1 2
D1 1 2 DD1
.MODEL DD1 D( IS=1e-15 TT=10p Rs=0.05 N=.1   )
.ENDS D_D
*$
.SUBCKT myD_D1 1 2
D1 1 2 DD1
.MODEL DD1 D( IS=1e-15 TT=10p Rs=0.05 N=.1 VBE=10m  )
.ENDS myD_D1
*$
.MODEL D_D1 D( IS=1e-15 TT=10p Rs=0.05 N=.1  VJ=10m)
*$
.SUBCKT LDCR IN OUT
+ PARAMs:  L=1u DCR=0.01 IC=0
L	IN 1  {L} IC={IC}
RDCR	1 OUT {DCR}
.ENDS LDCR
*$
.SUBCKT COMP_BASIC_GEN INP INM Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
E_ABM Yint 0 VALUE {IF (V(INP) > 
+ V(INM), {VDD},{VSS})}
R1 Yint Y 1
C1 Y 0 1n
.ENDS COMP_BASIC_GEN
*$
.SUBCKT COMPHYS_BASIC_GEN INP INM HYS OUT PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
EIN INP1 INM1 INP INM 1 
EHYS INP1 INP2 VALUE { IF( V(1) > {VTHRESH},-V(HYS),0) }
EOUT OUT 0 VALUE { IF( V(INP2)>V(INM1), {VDD} ,{VSS}) }
R1 OUT 1 1
C1 1 0 5n
RINP1 INP1 0 1K
.ENDS COMPHYS_BASIC_GEN
*$
.SUBCKT NMOSIDEAL_PS  D G S PARAMS: k=1 vth=0.5
RDDUM D 0 1e11
RSDUM S 0 1e11
RGDUM G 0 1e11
CG G D 0.01pF
CD D S 0.01pF
EON Yp 0 VALUE={IF(V(G,S) > {vth}, 1, 0)}
GOUT D S VALUE={IF(V(D,S) > (V(G,S)-{vth}), V(Yp)*({k}/2)*
+(V(G,S)-{vth})**2,
+ V(Yp)*({k})*(V(G,S)-{vth}-(V(D,S)/2))*V(D,S))}
.ENDS
*$
.SUBCKT PMOSIDEAL_PS D G S PARAMS: k=1 vth=0 
RDDUM D 0 1e11
RSDUM S 0 1e11
RGDUM G 0 1e11
CG G D 0.01pF
CD D S 0.01pF
EON Yp 0 VALUE={IF(V(S,G) > {vth}, -1, 0)}
GOUT D S VALUE={IF(V(S,D) > (V(S,G)-{vth}), V(Yp)*({k}/2)*
+ (V(S,G)-{vth})**2,
+ V(Yp)*({k})*(V(S,G)-{vth}-(V(S,D)/2))*V(S,D))}
.ENDS PMOSIDEAL_PS
*$
.SUBCKT COMPHYS2_BASIC_GEN INP INM HYS OUT PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
+ T=10
EIN INP1 INM1 INP INM 1 
EHYS INM2 INM1 VALUE { IF( V(1) > {VTHRESH},-V(HYS)/2,V(HYS)/2) }
EOUT OUT 0 VALUE { IF( V(INP1)>V(INM2), {VDD} ,{VSS}) }
R1 OUT 1 1
C1 1 0 {T*1e-9}
RINP1 INP1 0 10K
RINM2 INM2 0 10K
.ENDS COMPHYS2_BASIC_GEN
*$
.SUBCKT AND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND2_BASIC_GEN
*$
.SUBCKT AND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND3_BASIC_GEN
*$
.SUBCKT AND4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH} &
+ V(D) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND4_BASIC_GEN
*$
.SUBCKT NAND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND2_BASIC_GEN
*$
.SUBCKT NAND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND3_BASIC_GEN
*$
.SUBCKT NAND4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH} &
+ V(D) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND4_BASIC_GEN
*$
.SUBCKT OR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR2_BASIC_GEN
*$
.SUBCKT OR3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR3_BASIC_GEN
*$
.SUBCKT OR4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR4_BASIC_GEN
*$
.SUBCKT NOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR2_BASIC_GEN
*$
.SUBCKT NOR3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR3_BASIC_GEN
*$
.SUBCKT NOR4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR4_BASIC_GEN
*$
.SUBCKT NOR5_BASIC_GEN A B C D E Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH} |
+ V(E) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR5_BASIC_GEN
*$
.SUBCKT NOR6_BASIC_GEN A B C D E F Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH} |
+ V(E) > {VTHRESH} |
+ V(F) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR6_BASIC_GEN
*$
.SUBCKT INV_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS INV_BASIC_GEN
*$
.SUBCKT XOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(A) > {VTHRESH}  ^  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS XOR2_BASIC_GEN
*$
.SUBCKT XNOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(A) > {VTHRESH}  ^  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS XNOR2_BASIC_GEN
*$
.SUBCKT MUX2_BASIC_GEN A B S Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(S) > {VTHRESH},  
+ V(B),V(A))}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS MUX2_BASIC_GEN
*$
.SUBCKT INV_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS INV_DELAY_BASIC_GEN
*$
.SUBCKT BUF_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS BUF_DELAY_BASIC_GEN
*$
.SUBCKT BUF_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS BUF_BASIC_GEN
*$
.SUBCKT SRLATCHSHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(S) > {VTHRESH},5,IF(V(R)>{VTHRESH},-5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n 
.IC V(Qint) {VSS}
.ENDS SRLATCHSHP_BASIC_GEN
*$
.SUBCKT SRLATCHRHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,IF(V(S)>{VTHRESH},5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n
.IC V(Qint) {VSS}
.ENDS SRLATCHRHP_BASIC_GEN
*$
.SUBCKT SBRBLATCHRHP_BASIC_GEN SB RB Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(RB) < {VTHRESH},-5,IF(V(SB) < {VTHRESH},5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
.IC V(Qint) {VSS}
.ENDS SBRBLATCHRHP_BASIC_GEN
*$
.SUBCKT SBRBLATCHSHP_BASIC_GEN SB RB Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(SB) < {VTHRESH},5,IF(V(RB) < {VTHRESH},-5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
.IC V(Qint) {VSS}
.ENDS SBRBLATCHSHP_BASIC_GEN
*$
.SUBCKT DFFSBRB_SHPBASIC_GEN Q QB CLK D RB SB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
GQ 0 Qint VALUE = {IF(V(SB) < {VTHRESH},5,IF(V(RB)<{VTHRESH},-5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSBRB_SHPBASIC_GEN
*$
.SUBCKT DFFSR_SHPBASIC_GEN Q QB CLK D R S PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} 
GQ 0 Qint VALUE = {IF(V(S) > {VTHRESH},5,IF(V(R) > {VTHRESH},-5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSR_SHPBASIC_GEN
*$
.SUBCKT DFFSBRB_RHPBASIC_GEN Q QB CLK D RB SB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} 
GQ 0 Qint VALUE = {IF(V(RB) < {VTHRESH},-5,IF(V(SB)< {VTHRESH},5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 5
D_D11 0 Qint D_D1 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSBRB_RHPBASIC_GEN
*$
.SUBCKT DFFSR_RHPBASIC_GEN Q QB CLK D R S PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}  
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,IF(V(S) > {VTHRESH},5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSR_RHPBASIC_GEN
*$
.SUBCKT MONONEG_PS in Q Qn PARAMS: PW=1u 
VS VSUP 0 DC 1
GIN VSUP YA VALUE={IF(V(IN)<0.5, V(VSUP)/1000K, 0)}
GDIS YA 0 VALUE={IF(V(IN)<0.5,0, V(YA)/1m)}
CIN YA 0 1n IC=0
RIN YA 0 1e11
EABM1 YTD 0 VALUE={IF(V(YA)> {PW*1000}, 0, 1)}
RYTD YTD 0 1e11
EXOR P 0 VALUE={IF(V(YTD) > 0.5 ^ V(IN) > .5, 1, 0)}
ROUTpp2 P 0 1e11
EAND1 Q1 0 VALUE={ IF(V(P)>0.5 & V(YTD)>0.5, 1, 0)}
Ro1 Q1 Q 1m
Co1 Q 0 1p IC=0
ROUT2 Q 0 1e11
EAND2 Qn1 0 VALUE={ IF(V(Q)>0.5, 0, 1)}
Ro2 Qn1 Qn 1m
Co2 Qn 0 1p
ROUT4 Qn 0 1e11
.ENDS MONONEG_PS
*$
.MODEL DI_B260 D  ( IS=6.08u RS=14.9m BV=60.0 IBV=500u
+ CJO=370p  M=0.333 N=1.55 TT=1.44n )
*$
.SUBCKT VCVSCLIP_PS YP YN POS NEG PARAMS: gain=1 vomax=1 vomin=-1
RP POS 0 1e11
CP POS 0 0.01pF
RN NEG 0 1e11
CN NEG 0 0.01pF
ROUTN YN 0 1e11
COUTN YN 0 0.01pF
EVCLP YP YN VALUE={LIMIT((V(POS)-V(NEG))*{gain},{vomax},{vomin})}
RO YP 0 1e11
.ENDS VCVSCLIP_PS
*$
.SUBCKT ss2gm SS_TR GM
EPOLY  GM 0 TABLE {V(SS_TR)} = (0.4,11u) (0.5,11.8u) (0.6,16.8u) (0.7,24.2u) (0.8,30.1u) 
+ (0.9,34.4u)(1.0,37.4u) (1.1,39.3u) (1.2,40.7u)
.ENDS
*$
.SUBCKT vfb2freq FB VOUT
EPOLY  VOUT 0 TABLE {V(FB)} = (0,12.69) (0.05,12.75) (0.1,13.04) (0.15,14.07) (0.2,16.95) 
+ (0.25,22.72)(0.3,31.85) (0.35,43.57) (0.4,56.99)(0.45, 69.53) (0.5,81.16) (0.55,89.51) 
+ (0.6,95.59) (0.65,98.53) (0.7,99.7) (0.75,100)
.ENDS
*$
.model d_dx d
+ is=1e-015
+ tt=1e-011
+ rs=0.05
+ n=0.1
+ vj=0.01
*$
.SUBCKT DFFSBRB_nodelay Q QB CLK D RB SB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 5n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} 
GQ 0 Qint VALUE = {IF(V(RB) < {VTHRESH},-5,IF(V(SB)< {VTHRESH},5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 5
D_D11 0 Qint D_D1 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 5n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSBRB_nodelay
*$