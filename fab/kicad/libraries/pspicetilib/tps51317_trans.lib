*$
* PSpice Model Editor - Version 16.0.0
* TPS51317
*****************************************************************************
* (C) Copyright 2011 Texas Instruments Incorporated. All rights reserved.                                            
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.                                             
** TI and its licensors and suppliers make no warranties, either expressed                                           
** or implied, with respect to this model, including the warranties of                                                    
** merchantability or fitness for a particular purpose. The model is                                                      
** provided solely on an "as is" basis. The entire risk as to its quality                                                    
** and performance is with the customer                                                                                          
*****************************************************************************
*
** Released by: Analog eLab(TM) Design Center, Texas Instruments Inc.
* Part: TPS51317
* Date: 16MAY2011
* Model Type: Transient 
* Simulator: PSpice 
* Simulator Version: 16.0.0.p001
* EVM Order Number: 
* EVM Users Guide: 
* Datasheet: SLUSAH9 – MARCH 2011
* Model Version: Final 1.00
*
*****************************************************************************
*
* Updates:
*
* Final 1.00
* Release to Web.
*
***************************************************************************
.SUBCKT TPS51317_TRANS VREF EN SW1 SW2 SW3 SW4 SW5 PGND1 PGND2 PGND3 VBST
+ MODE REFIN COMP PGOOD VIN1 VIN2 VOUT V5IN GND PARAMS: FASTSS=1
X_U210         N11743889 ENHI_TOGG BUFFER_PS PARAMS: VHI=1 VLO=0 VTHRESH=500E-3
+  TPLH=2n TPHL=20u TR=1E-9 TF=1E-9
E_ABM11         OCLHI 0 VALUE { if( V(OCLTHR)  
+ >V(LLO) ,1,0)   }
X_S20    ENCIRD GND COMP VREF TPS51317_TRANS_S20 
X_U288         UVLATCH SSEND UVP AND
X_U309         N11098932 DRL2 INV_PS PARAMS: VHI=1 VLO=0 VTHRESH=500E-3 TPLH=1n
+  TPHL=1E-9 TR=1E-9 TF=1E-9
X_U246         N12239510 TBLNKB INVERTER
X_U269         LOW_READY LOW_DELAY ONB ZC NAND3_PS PARAMS: VHI=1 VLO=0
+  VTHRESH=500E-3 TPLH=1E-9 TPHL=1E-9 TR=1E-9 TF=1E-9
R_R8         VREF VINT  4.4k  
X_U10         N17624978 NCL delay PARAMS: PARAMS: T=10
E_ABM9         N16947969 0 VALUE { if( V(DRVL)>2.5,  
+ V(SW1),  
+ V(PGND1) )  }
X_S12    DISCH GND SW1 GND TPS51317_TRANS_S12 
X_U282         HIDRIVE N11100818 N11102186 AND
V_V77         N11100662 GND 2.7
R_R30         GND ENHI_TOGG  1Meg  
R_R28         GND N16884087  1Meg  
X_U240         N168483390 NCLB INVERTER
X_U18         N11095838 V5FILT d_d1 PARAMS:
X_U266         N11095332 ON TOS ENCIRD NAND3_PS PARAMS: VHI=1 VLO=0
+  VTHRESH=500E-3 TPLH=1E-9 TPHL=1E-9 TR=1E-9 TF=1E-9
X_U272         NCLB OOB NCLbpwm AND
X_U242         BLNKM N11098982 OCLDIS OR
X_U255         N17264786 LUPB N17410162 AND
E_ABM64         N17790408 0 VALUE { if(V(SSEND)<0.5, 1, V(ENZC))    }
X_U249         ON ONB INVERTER
X_U300         ONG N122824771 INV_PS PARAMS: VHI=1 VLO=0 VTHRESH=500E-3
+  TPLH=1E-9 TPHL=1E-9 TR=1E-9 TF=1E-9
X_U22         N16884062 VINT d_d2 PARAMS:
X_U289         LOW_READY LOW_READY SSENDSET UVP N17289176 NOR4
X_U261         N16848263 N16848243 N16848243 ZC NAND3_PS PARAMS: VHI=1 VLO=0
+  VTHRESH=500E-3 TPLH=1E-9 TPHL=1E-9 TR=1E-9 TF=1E-9
V_V87         N17539338 N17539305 -2m
X_U20         SW1 VIN1 d_d1 PARAMS:
E_ABM2         SSEND 0 VALUE { if(V(N11095838)>V(REFIN)-.001, 1,0)    }
E_ABM26         ADD1 0 VALUE { if(V(MODESAMPLE)>4 | (V(MODESAMPLE) >0.49 &
+  V(MODESAMPLE)<0.5) ,1,0)    }
R_R20         GND ENPG  1e6  
R_R15         GND ENHI_TOGG  1E8  
X_U17         V5IN VBST d_d1 PARAMS:
X_U296         BLNKM TBLNKB N11102362 NAND2_PS PARAMS: VHI=1 VLO=0
+  VTHRESH=500E-3 TPLH=1E-9 TPHL=1E-9 TR=1E-9 TF=1E-9
E_ABM60         LOW_C 0 VALUE { if(V(VOUT)>V(REFIN)*0.84,1,0)    }
X_U259         N11099406 OCLDIS OCLDIS ONS2 NAND3_PS PARAMS: VHI=1 VLO=0
+  VTHRESH=500E-3 TPLH=1E-9 TPHL=1E-9 TR=1E-9 TF=1E-9
R_R37         GND N147234901  1Meg  
X_U283         N11099756 N110964421 N111007581 AND
E_ABM16         N17539305 0 VALUE { if( V(OOB)>0.5,  
+ 0.112,V(GND))   }
X_U262         ZC N16848263 TBLNKB ENCIRD NAND3_PS PARAMS: VHI=1 VLO=0
+  VTHRESH=500E-3 TPLH=1E-9 TPHL=1E-9 TR=1E-9 TF=1E-9
X_U9         N13334713 N13334441 delay PARAMS: PARAMS: T={1000000/(1+
+  FASTSS*7)}
X_U23         MODE V5FILT d_d1 PARAMS:
X_S9    L_PGOOD GND PGOOD GND TPS51317_TRANS_S9 
X_U263         SSENDSET ENCIRD ENCIRD N11095132 NAND3_PS PARAMS: VHI=1 VLO=0
+  VTHRESH=500E-3 TPLH=1E-9 TPHL=1E-9 TR=1E-9 TF=1E-9
X_S5    DRH1 GND VBST DRVH TPS51317_TRANS_S5 
X_U13         VINT N16884059 d_d2 PARAMS:
X_U276         N17289796 N17289796 LOWDRIVE OR
X_U270         N11098248 N110957122 ON1 NOR2
X_U204         N111007581 DRH2 BUFFER_PS PARAMS: VHI=1 VLO=0 VTHRESH=500E-3
+  TPLH=20E-9 TPHL=2E-9 TR=1E-9 TF=1E-9
X_U252         NCL OOB NCLPWM AND
X_S17    DRVH SW1 VIN1 SW1 TPS51317_TRANS_S17 
E_ABM49         N17010382 0 VALUE { ( V(ADD1)  
+ +V(ADD2) )    }
E_ABM12         N17624978 0 VALUE { if( V(LLO)  
+ >V(N17539338) ,1,0)   }
X_U578         N13334441 ENHI_TOGG UVLATCH N133343651 srlatchrhp_basic_gen
+  PARAMS: PARAMS: VDD=1 VSS=0 VTHRESH=.5
E_ABM19         N11101396 0 VALUE { if( V(N11100856)  
+ >V(TON) ,1,0)   }
X_U265         ON ONSET ONSET N11095332 NAND3_PS PARAMS: VHI=1 VLO=0
+  VTHRESH=500E-3 TPLH=1E-9 TPHL=1E-9 TR=1E-9 TF=1E-9
X_U576         DRVHPREBIAS N14723472 PREBIAS N147234901 srlatchrhp_basic_gen
+  PARAMS: PARAMS: VDD=1 VSS=0 VTHRESH=.5
X_U279         HIDRIVE N110964421 INVERTER
X_U277         ZC N11102690 N11102362 OR
E_ABM13         N13334699 0 VALUE { IF(V(VOUT) > V(REFIN)*1.2 &  
+ V(ENCIRD) >0.5,1,0)   }
X_U271         HI_DEL N12277012 LOW_DELAY NOR2
E_ABM54         N17010377 0 VALUE { (V(ADD3)  
+ +V(ADD4) )    }
C_C4         GND TON  10p IC=0 TC=0,0 
X_S13    ENCIR GND VREF GND TPS51317_TRANS_S13 
X_S6    DRH2 GND DRVH SW1 TPS51317_TRANS_S6 
X_U202         N110956321 DRL2 BUFFER_PS PARAMS: VHI=1 VLO=0 VTHRESH=500E-3
+  TPLH=20E-9 TPHL=2E-9 TR=1E-9 TF=1E-9
E_ABM30         ADD3 0 VALUE { if((V(MODESAMPLE) >.17 & V(MODESAMPLE) <0.19) |
+  (V(MODESAMPLE) >1 & V(MODESAMPLE)<1.08) ,0.83333,0)    }
V_V10         N16884059 0 2.5
X_U305         NCL N17790408 N168483390 AND
X_U280         LOWDRIVE N110956322 INVERTER
X_U248         HI_READY N12277012 INVERTER
X_U294         HI_READY ON ON1 NAND2_PS PARAMS: VHI=1 VLO=0 VTHRESH=500E-3
+  TPLH=1E-9 TPHL=1E-9 TR=1E-9 TF=1E-9
X_U191         N11102570 N11101836 BUFFER_PS PARAMS: VHI=1 VLO=0 VTHRESH=500E-3
+  TPLH=2n TPHL=50n TR=1E-9 TF=1E-9
E_ABM55         TSEL 0 VALUE { ( V(N17010382)  
+ +V(N17010377) )    }
X_U573         N13334699 N13334507 BUF_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=.5 DELAY=10u
E_E1         N17190036 GND VOUT GND 1
R_R26         GND N133343651  1Meg  
V_V11         N16884062 0 1.5
X_U295         N11095154 HI_DEL HIDRIVE NAND2_PS PARAMS: VHI=1 VLO=0
+  VTHRESH=500E-3 TPLH=1E-9 TPHL=1E-9 TR=1E-9 TF=1E-9
R_R21         GND N11095838  10Meg  
E_ABM24         N11102216 0 VALUE { if(V(ENCIRD)>0.5,1,0)    }
X_U220         N11579823 L_PGOOD INVERTER
X_U286         LOWDRIVE N11098932 N11102096 AND
G_ABM2I1         V5FILT TON VALUE { if(V(DQOS)<0.25, V(SW1)/100K,0)    }
G_ABMII3         V5FILT N11095838 VALUE { if(V(N11102216)>0.5, {.7u +
+  FASTSS*6u},0)    }
R_R18         V5IN V5FILT  3.32  
E_ABM14         ENCIR 0 VALUE { if( V(ENP)> 0.5 &  
+ V(V5INOK)>0.5,1,0)   }
X_U257         N11098890 LBB LBB ONS1 NAND3_PS PARAMS: VHI=1 VLO=0
+  VTHRESH=500E-3 TPLH=1E-9 TPHL=1E-9 TR=1E-9 TF=1E-9
E_ABM17         ENP 0 VALUE { if(V(EN)>1,1,0)    }
G_ABM2I3         VREF VINT VALUE { {LIMIT((V(N16884087) - V(LLO))*1m,
+  -80u,80u)}    }
X_U203         N11102186 DRH1 BUFFER_PS PARAMS: VHI=1 VLO=0 VTHRESH=500E-3
+  TPLH=20E-9 TPHL=2E-9 TR=1E-9 TF=1E-9
R_R40         GND N14723472  1Meg  
X_U275         DRVOFF DRVOFF HI_READY UVP HIDRIVE NOR4
R_R35         LLOAVG N17737096  1Meg  
G_G5         REF1 VREF TABLE { V(REF1, VREF) } 
+ ( (-10,-12m)(-2.4m,-2.5m)(0,0)(1m,2.4m)(10,2.5m) )
E_E6         N17007963 GND MODE GND 1
X_S11    EN GND MODE GND TPS51317_TRANS_S11 
E_ABM25         N13334713 0 VALUE { IF(V(VOUT) < V(REFIN)*0.7 &  
+ V(SSEND) >.5,1,0)   }
E_ABM65         N17699457 0 VALUE { if(V(LLOAVG)> -8m & V(count)<1 ,1,0)    }
E_ABM62         ENZC 0 VALUE { if(V(COUNT)>8,1,0)    }
R_R24         GND N17190036  1Meg  
X_U274         ENCIRD DRVOFF INVERTER
R_R22         GND SSEND  1Meg  
E_ABM31         N11579823 0 VALUE { if(V(AFTER_DELAY)>0.5,1,0)    }
C_C14         GND MODESAMPLE  10 IC=0 TC=0,0 
C_C18         LLOAVG GND  1p  TC=0,0 
R_R33         N17737096 N17732453  1Meg  
X_U201         N11102096 DRL1 BUFFER_PS PARAMS: VHI=1 VLO=0 VTHRESH=500E-3
+  TPLH=20E-9 TPHL=2E-9 TR=1E-9 TF=1E-9
X_U308         N11100028 DRL1 INV_PS PARAMS: VHI=1 VLO=0 VTHRESH=500E-3 TPLH=1n
+  TPHL=1E-9 TR=1E-9 TF=1E-9
X_U297         EN N11743889 ENHI_RECAL MONOPOS_PS PARAMS: PW=230u
G_ABMII4         V5FILT MODE VALUE { if(V(EN)>0.5, 15u,0)    }
E_ABM56         VSEL 0 VALUE { V(TSEL)  
+ * V(VOUT)   }
R_R9         LLO N16947969  100  
R_R36         GND MODE  1e8  
X_U21         N17189992 COMP d_d2 PARAMS:
X_U260         ONS2 N11099406 TBLNKB ENCIRD NAND3_PS PARAMS: VHI=1 VLO=0
+  VTHRESH=500E-3 TPLH=1E-9 TPHL=1E-9 TR=1E-9 TF=1E-9
X_U264         N11095132 SSENDSET N11095154 SSEND NAND3_PS PARAMS: VHI=1 VLO=0
+  VTHRESH=500E-3 TPLH=1E-9 TPHL=1E-9 TR=1E-9 TF=1E-9
X_U188         TBLNK N12239510 BUFFER_PS PARAMS: VHI=1 VLO=0 VTHRESH=500E-3
+  TPLH=2E-9 TPHL=30n TR=1E-9 TF=1E-9
C_C17         N17737096 GND  1p  TC=0,0 
X_S3    ENHITOGG GND N17007963 MODESAMPLE TPS51317_TRANS_S3 
X_F1    2V REF1 V5IN GND TPS51317_TRANS_F1 
G_ABM2I2         TON GND VALUE { if(V(DQOS) >.75, V(TON)/200,0)    }
C_C11         GND V5FILT  1u IC=0 
C_C13         LLO PGND1  20p  TC=0,0 
X_U19         PGND1 SW1 d_d1 PARAMS:
X_U299         N122824771 LOW_READY INV_PS PARAMS: VHI=1 VLO=0 VTHRESH=500E-3
+  TPLH=200n TPHL=10n TR=1E-9 TF=1E-9
X_U258         ONS1 N11098890 TBLNKB ENCIRD NAND3_PS PARAMS: VHI=1 VLO=0
+  VTHRESH=500E-3 TPLH=1E-9 TPHL=1E-9 TR=1E-9 TF=1E-9
X_S7    DRL1 GND V5IN DRVL TPS51317_TRANS_S7 
X_U245         N11098248 N11102690 INVERTER
V_V88         2V GND 2
E_ABM27         ADD2 0 VALUE { if(V(MODESAMPLE)<1m | (V(MODESAMPLE) >0.7 &
+  V(MODESAMPLE)<0.8) ,1.163,0)    }
E_ABM3         DRVHPREBIAS 0 VALUE { if(V(DRVH)>5,1,0)    }
R_R27         GND AFTER_DELAY  1e6  
X_U238         ENCIRD OCLHI N11098982 AND
E_ABM63         N17704028 0 VALUE { if(V(LLOAVG)<-10m & V(count)>8 ,1,0)    }
X_U12         COMP N17189989 d_d2 PARAMS:
X_U268         N11101694 ENCIRD ONG TBLNK NAND3_PS PARAMS: VHI=1 VLO=0
+  VTHRESH=500E-3 TPLH=1E-9 TPHL=1E-9 TR=1E-9 TF=1E-9
X_U575         N133366310 DISCH BUF_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=.5 DELAY=0.5u
X_S1    N17519238 GND N17519168 COUNT TPS51317_TRANS_S1 
E_ABM47         OOB 0 VALUE { if(V(VOUT) > V(REFIN)*1.08,  
+ 1,0)   }
X_U574         N13334507 ENHI_TOGG OVLATCH N133344671 srlatchrhp_basic_gen
+  PARAMS: PARAMS: VDD=1 VSS=0 VTHRESH=.5
X_U281         DRVHPREBIAS N11101836 HI_DEL AND
X_S8    DRL2 GND DRVL PGND1 TPS51317_TRANS_S8 
X_S19    DRVL PGND1 SW1 PGND1 TPS51317_TRANS_S19 
G_G1         V5FILT GND ENCIR GND 350u
X_U307         N11100818 DRH2 INV_PS PARAMS: VHI=1 VLO=0 VTHRESH=500E-3 TPLH=1n
+  TPHL=1E-9 TR=1E-9 TF=1E-9
X_U241         BLNKM LOOPB LBB OR
E_ABM22         PWM 0 VALUE { if(V(MODESAMPLE)> 1 & V(MODESAMPLE)<1.6, 1,0)   
+  }
X_U577         N17704028 N17699457 N17559606 N176994661 srlatchrhp_basic_gen
+  PARAMS: PARAMS: VDD=1 VSS=0 VTHRESH=.5
R_R31         GND N17519168  1e8 TC=0,0 
X_U208         ENCIR ENCIRD BUFFER_PS PARAMS: VHI=1 VLO=0 VTHRESH=500E-3
+  TPLH=250u TPHL=2E-9 TR=1E-9 TF=1E-9
X_U284         N17289176 PREBIAS N17289796 AND
V_V8         N17189989 0 2.4
X_U267         TBLNK N11101694 TOS TOS NAND3_PS PARAMS: VHI=1 VLO=0
+  VTHRESH=500E-3 TPLH=1E-9 TPHL=1E-9 TR=1E-9 TF=1E-9
E_ABM10         LUPB 0 VALUE { if( V(COMP)  
+ >(V(VINT)) ,1,0)   }
X_U304         NCL N17712847 NCLEVENT AND
X_U278         HI_READY N11102570 INVERTER
E_ABM29         ENPG 0 VALUE { if( V(HIGH_C)>0.5  
+ & V(LOW_C)>0.5   
+ & V(SSEND)>0.5, 1, 0)  }
C_C16         N17732453 GND  1p  TC=0,0 
E_ABM20         ONS3 0 VALUE { if( V(VOUT)  
+ >V(N11100662) ,1,0)   }
R_R34         GND OOB  1e6  
R_R14         GND ENHI_RECAL  1E8  
V_V9         N17189992 0 1.6
R_R25         GND N133344671  1Meg  
E_ABM32         OCLTHR 0 VALUE { if(V(ENCIRD)>0.5,-0.091,0)    }
R_R23         GND TON  10Meg TC=0,0 
X_S2    N17559606 GND COUNT GND TPS51317_TRANS_S2 
X_U216         N11101396 ENCIRD N11102424 AND
E_ABM61         N17519238 0 VALUE { if(V(NCLEVENT)>0.5  
+ & V(COUNT) <9 & V(SSEND) >0.5, 1,0)   }
R_R38         GND N176994661  1Meg  
X_U8         ENPG AFTER_DELAY delay PARAMS: PARAMS: T={1000000/(1+ FASTSS*7)}
X_U239         LUP LOOPB INVERTER
X_U193         HI_READY DQOS BUFFER_PS PARAMS: VHI=1 VLO=0 VTHRESH=500E-3
+  TPLH=2E-9 TPHL=2E-9 TR=1E-9 TF=1E-9
X_U243         BLNKM NCLB N16848243 OR
E_ABM52         N133366310 0 VALUE { if( V(OVP)>.5 |  
+ V(UVP) >.5 |  
+ V(ENCIR) <1.6,1,0)  }
X_U301         N17712847 NCL INV_PS PARAMS: VHI=1 VLO=0 VTHRESH=500E-3 TPLH=10n
+  TPHL=50n TR=1E-9 TF=1E-9
G_ABM2I5         VREF COMP VALUE { {LIMIT((V(VREFS) - V(N17190036))*1m,
+  -80u,80u)}    }
E_ABM33         ADD4 0 VALUE { if((V(MODESAMPLE) >.3 & V(MODESAMPLE) <0.35) |
+  (V(MODESAMPLE) >1.4 & V(MODESAMPLE)<1.6) ,0.667,0)    }
X_U247         LOW_READY N110957122 INVERTER
X_U192         DRVL N11098248 BUFFER_PS PARAMS: VHI=1 VLO=0 VTHRESH=2.5
+  TPLH=2E-9 TPHL=2E-9 TR=1E-9 TF=1E-9
X_U287         OVLATCH ENCIRD OVP AND
R_R32         N17732453 LLO  1Meg  
X_S10    N11102216 GND N11095838 GND TPS51317_TRANS_S10 
X_U256         OVP N17264786 INVERTER
V_V82         N11100856 VSEL 1m
X_U15          V5IN V5INOK COMP_HYS2 PARAMS:  TH=4.2 HYS=.3
G_ABMII5         V5FILT N17519168 VALUE { if(V(NCLEVENT)>0.5, .01,0)    }
X_U306         N11099756 DRH1 INV_PS PARAMS: VHI=1 VLO=0 VTHRESH=500E-3 TPLH=1n
+  TPHL=1E-9 TR=1E-9 TF=1E-9
X_U285         N11100028 N110956322 N110956321 AND
E_ABM21         VREFS 0 VALUE { if(V(N11095838)>V(REFIN), V(REFIN),
+  V(N11095838))    }
C_C3         GND N11095838  1n IC=0 TC=0,0 
X_U244         N17410162 NCLPWM LUP OR
E_ABM59         HIGH_C 0 VALUE { if(V(VOUT)<V(REFIN)*1.16,1,0)    }
X_U217         DQOS N11102424 TOS OR
X_U142         ONSET ONS3 ONS1 ONS2 TBLNK OR4_PS PARAMS: VHI=1 VLO=0
+  VTHRESH=500E-3 TPLH=1E-9 TPHL=1E-9 TR=1E-9 TF=1E-9
C_C15         GND COUNT  .5n IC=0 TC=0,0 
R_R29         GND ENHI_TOGG  1Meg  
.ENDS
*$
.subckt TPS51317_TRANS_S20 1 2 3 4  
S_S20         3 4 1 2 _S20
RS_S20         1 2 1G
.MODEL         _S20 VSWITCH Roff=1e11 Ron=1m Voff=.75 Von=.25
.ends TPS51317_TRANS_S20

.subckt TPS51317_TRANS_S12 1 2 3 4  
S_S12         3 4 1 2 _S12
RS_S12         1 2 1G
.MODEL         _S12 VSWITCH Roff=1e11 Ron=50 Voff=.4 Von=.6
.ends TPS51317_TRANS_S12

.subckt TPS51317_TRANS_S9 1 2 3 4  
S_S9         3 4 1 2 _S9
RS_S9         1 2 1G
.MODEL         _S9 VSWITCH Roff=1e6 Ron=1.0 Voff=0.25 Von=0.75
.ends TPS51317_TRANS_S9

.subckt TPS51317_TRANS_S5 1 2 3 4  
S_S5         3 4 1 2 _S5
RS_S5         1 2 1G
.MODEL         _S5 VSWITCH Roff=1e11 Ron=1.5 Voff=.25 Von=.75
.ends TPS51317_TRANS_S5

.subckt TPS51317_TRANS_S17 1 2 3 4  
S_S17         3 4 1 2 _S17
RS_S17         1 2 1G
.MODEL         _S17 VSWITCH Roff=1e11 Ron=30m Voff=1 Von=2
.ends TPS51317_TRANS_S17

.subckt TPS51317_TRANS_S13 1 2 3 4  
S_S13         3 4 1 2 _S13
RS_S13         1 2 1G
.MODEL         _S13 VSWITCH Roff=1e6 Ron=10K Voff=0.75V Von=0.25V
.ends TPS51317_TRANS_S13

.subckt TPS51317_TRANS_S6 1 2 3 4  
S_S6         3 4 1 2 _S6
RS_S6         1 2 1G
.MODEL         _S6 VSWITCH Roff=1e11 Ron=0.7 Voff=.25 Von=.75
.ends TPS51317_TRANS_S6

.subckt TPS51317_TRANS_S11 1 2 3 4  
S_S11         3 4 1 2 _S11
RS_S11         1 2 1G
.MODEL         _S11 VSWITCH Roff=1e11 Ron=10 Voff=.75 Von=.25
.ends TPS51317_TRANS_S11

.subckt TPS51317_TRANS_S3 1 2 3 4  
S_S3         3 4 1 2 _S3
RS_S3         1 2 1G
.MODEL         _S3 VSWITCH Roff=1e11 Ron=1.0e-8 Voff=.75 Von=.25
.ends TPS51317_TRANS_S3

.subckt TPS51317_TRANS_F1 1 2 3 4  
F_F1         3 4 VF_F1 1
VF_F1         1 2 0V
.ends TPS51317_TRANS_F1

.subckt TPS51317_TRANS_S7 1 2 3 4  
S_S7         3 4 1 2 _S7
RS_S7         1 2 1G
.MODEL         _S7 VSWITCH Roff=1e11 Ron=1 Voff=.25 Von=.75
.ends TPS51317_TRANS_S7

.subckt TPS51317_TRANS_S1 1 2 3 4  
S_S1         3 4 1 2 _S1
RS_S1         1 2 1G
.MODEL         _S1 VSWITCH Roff=1e11 Ron=10m Voff=0.0V Von=1.0V
.ends TPS51317_TRANS_S1

.subckt TPS51317_TRANS_S8 1 2 3 4  
S_S8         3 4 1 2 _S8
RS_S8         1 2 1G
.MODEL         _S8 VSWITCH Roff=1e11 Ron=0.5 Voff=.25 Von=.75
.ends TPS51317_TRANS_S8

.subckt TPS51317_TRANS_S19 1 2 3 4  
S_S19         3 4 1 2 _S19
RS_S19         1 2 1G
.MODEL         _S19 VSWITCH Roff=1e11 Ron=12m Voff=1 Von=2
.ends TPS51317_TRANS_S19

.subckt TPS51317_TRANS_S2 1 2 3 4  
S_S2         3 4 1 2 _S2
RS_S2         1 2 1G
.MODEL         _S2 VSWITCH Roff=1e11 Ron=1.0m Voff=0.0V Von=1.0V
.ends TPS51317_TRANS_S2

.subckt TPS51317_TRANS_S10 1 2 3 4  
S_S10         3 4 1 2 _S10
RS_S10         1 2 1G
.MODEL         _S10 VSWITCH Roff=1e11 Ron=10 Voff=.75 Von=.25
.ends TPS51317_TRANS_S10

.SUBCKT AND A B OUT  
EOUT OUT1 0 VALUE { IF( V(A)>0.5 & V(B)>0.5,1,0) }
R1 OUT1 OUT 1
C1 OUT 0 10p
.ends AND
*$
.SUBCKT OR A B OUT  
EOUT OUT1 0 VALUE { IF( V(A)>0.5 | V(B)>0.5,1,0) }
R1 OUT1 OUT 1
C1 OUT 0 10p
.ends OR
*$
.SUBCKT NOR2 A B OUT  
EOUT OUT1 0 VALUE { IF( V(A)>0.5 | V(B)>0.5,0,1) }
R1 OUT1 OUT 1
C1 OUT 0 10p
.ends NOR2
*$
.SUBCKT NOR3 A B C OUT  
EOUT OUT1 0 VALUE { IF( V(A)>0.5 | V(B)>0.5 | V(C)>0.5,0,1) }
R1 OUT1 OUT 1
C1 OUT 0 10p
.ends NOR3
*$
.SUBCKT NOR4 A B C D OUT  
EOUT OUT1 0 VALUE { IF( V(A)>0.5 | V(B)>0.5 | V(C)>0.5 | V(D)>0.5,0,1) }
R1 OUT1 OUT 1
C1 OUT 0 10p
.ends NOR4
*$
.SUBCKT NAND3 A B C OUT  
EOUT OUT1 0 VALUE { IF( V(A)<0.5 & V(B)<0.5 & V(C)<0.5,1,0) }
R1 OUT1 OUT 1
C1 OUT 0 10p
.ends NAND3
*$
.SUBCKT NAND2 A B OUT  
EOUT OUT1 0 VALUE { IF( V(A)<0.5 & V(B)<0.5,1,0) }
R1 OUT1 OUT 1
C1 OUT 0 10p
.ends NAND2
*$
.SUBCKT AND3 A B C OUT  
EOUT OUT1 0 VALUE { IF( V(A)>0.5 & V(B)>0.5 & V(C)>0.5,1,0) }
R1 OUT1 OUT 1
C1 OUT 0 10p
.ends AND3
*$
.SUBCKT INVERTER IN OUT  
EOUT OUT1 0 VALUE { IF( V(IN)<0.5,1,0) }
R1 OUT1 OUT 1
C1 OUT 0 10p
.ends INVERTER
*$
.SUBCKT COMP_HYS2 INP OUT 
+ PARAMs:  TH=.5 HYS=0.1
EIN INP1 0 INP 0 1 
EHYS INP1 INP2 VALUE { IF( V(1)>0.5,-(HYS)/2,HYS/2) }
EOUT OUT 0 VALUE { IF( V(INP2)>TH,1,0) }
R1 OUT 1 1
C1 1 0 1n
RINP1 INP1 0 10K
.ends COMP_HYS2
*$
.SUBCKT DELAY IN OUT
+ PARAMs:  T=100
S_S1         MEAS 0 RESET2 0 S1
E_ABM1         CH 0 VALUE { if( V(IN)>0.5,1,0)    }
E_ABM3         OUT 0 VALUE { if( V(MEAS)>0.5 & V(CH)>0.5,1,0)    }
R_R1         MEAS CH  {T} 
C_C1         0 MEAS  1.4427n  
E_ABM2         RESET 0 VALUE { if(V(CH)<0.5,1,0)    }
R_R2         RESET2 RESET  0.1  
C_C2         0 RESET2  1.4427n  
.MODEL         S1 VSWITCH Roff=1e9 Ron=1.0 Voff=0.25V Von=0.75V
.ENDS DELAY
*$
.SUBCKT NAND3_PS Y A B C PARAMS: vhi=1 vlo=0 vthresh=500e-3
+ tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
RC C 0 1e11
CC C 0 0.01pF
VS VSUP 0 DC 1
ENAND3 Ypp 0 VALUE={IF(V(A) > {vthresh} & V(B) > {vthresh} & V(C) >
+ {vthresh}, 0, 1)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)}
+ VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)}
+ VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*({vhi} - {vlo})+{vlo}}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS NAND3_PS
*$
.SUBCKT BUFFER_PS A Y PARAMS: vhi=1 vlo=0 vthresh=500e-3 tplh=1e-9
+ tphl=1e-9 tr=1e-9 tf=1e-9
RA A 0 1e11
CA A 0 0.01pF
VS VSUP 0 DC 1
EBUF1 Ypp 0 VALUE={IF(V(A) > ({vthresh}), 1, 0)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)}
+ VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)}
+ VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
** add rise and fall *****
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*({vhi} - {vlo})+{vlo}}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS BUFFER_PS
*$
.SUBCKT INV_PS Y A PARAMS: vhi=1 vlo=0 vthresh=500e-3
+ tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
RA A 0 1e11
CA A 0 0.01pF
VS VSUP 0 DC 1
EINV1 Ypp 0 VALUE={IF(V(A) > ({vthresh}), 0, 1)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)}
+ VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)}
+ VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*({vhi} - {vlo})+{vlo}}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS INV_PS
*$
.SUBCKT OR4_PS Y A B C D PARAMS: vhi=1 vlo=0 vthresh=500e-3 tplh=1e-9
+ tphl=1e-9 tr=1e-9 tf=1e-9
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
RC C 0 1e11
CC C 0 0.01pF
RD D 0 1e11
CD D 0 0.01pF
VS VSUP 0 DC 1
EOR4 Ypp 0 VALUE={IF(V(A) > {vthresh} | V(B) > {vthresh}  | V(C) >
+ {vthresh}  | V(D) > {vthresh}, 1, 0)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)}
+ VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)}
+ VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*({vhi} - {vlo})+{vlo}}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS OR4_PS
*$
.SUBCKT NAND2_PS Y A B PARAMS: vhi=1 vlo=0 vthresh=500e-3
+ tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
VS VSUP 0 DC 1
ENAND2 Ypp 0 VALUE={IF(V(A) > {vthresh} & V(B) > {vthresh}, 0, 1)}
ROUTpp Ypp 0 1e11
***** add delay lines ****
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)}
+ VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)}
+ VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
** add rise and fall *****
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*({vhi} - {vlo})+{vlo}}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS NAND2_PS
*$
.SUBCKT NSW_PS D G S PARAMS: RONval=10k VTHval=0.7 VCHARval=0.01
+ CGval=0.01pF CDval=0.01pF 
RDDUM D 0 1e11
RSDUM S 0 1e11
RGDUM G 0 1e11
CG G D {CGval}
CD D S {CDval}
EEXP F1 0 VALUE={LIMIT(((V(G,S)-VTHval)/VCHARval),-80,80)} 
GOUT D S VALUE={V(D,S)/(RONval*(1+EXP(-LIMIT(((V(G,S)-VTHval)/VCHARval)
+,-80,80))))}
.ENDS NSW_PS
*$
.SUBCKT PSW_PS D G S PARAMS: RONval=10k VTHval=0.7 VCHARval=0.01
+ CGval=0.01pF CDval=0.01pF 
RDDUM D 0 1e11
RSDUM S 0 1e11
RGDUM G 0 1e11
CG G D {CGval}
CD D S {CDval}
EEXP F1 0 VALUE={LIMIT(((V(S,G)-VTHval)/VCHARval),-80,80)} 
GOUT S D VALUE={V(S,D)/(RONval*(1+EXP(-LIMIT(((V(S,G)-VTHval)/VCHARval)
+,-80,80))))}
.ENDS PSW_PS
*$
.SUBCKT SRLATCHRHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
Rs S 0 1e11
Rr R 0 1e11
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,IF(V(S)>{VTHRESH},5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 buffer_ps
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 .1n 
Cdummy2 QB 0 .1n
.IC V(Qint) {VSS}
.MODEL D_D1 D( IS=1e-15 TT=10p Rs=0.01 N=.01  )
.ENDS SRLATCHRHP_BASIC_GEN
*$
.SUBCKT D_D1 1 2
D1 1 2 DD1
.MODEL DD1 D( IS=1e-15 TT=10p Rs=0.05 N=.1 )
.ENDS D_D1
*$
.SUBCKT D_D2 1 2
D1 1 2 DD2
.MODEL DD2 D( IS=1e-15 TT=10p Rs=0.01 N=.01  )
.ENDS D_D2
*$
.SUBCKT BUF_DELAY_BASIC_GEN A  Y PARAMS: VDD=5 VSS=0 VTHRESH=2.5
+ DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS BUF_DELAY_BASIC_GEN
*$
.SUBCKT MONOPOS_PS in Q Qn PARAMS: PW=250u 
VS VSUP 0 DC 1
r1 in 0 1e11
GIN VSUP YA VALUE={IF(V(IN)>0.5, V(VSUP)/1000K, 0)}
GDIS YA 0 VALUE={IF(V(IN)>0.5,0, V(YA)/1m)}
CIN YA 0 1n IC=0
RIN YA 0 1e11
EABM1 YTD 0 VALUE={IF(V(YA)> {PW*1000}, 1, 0)}
RYTD YTD 0 1e11
EXOR P 0 VALUE={IF(V(YTD) > 0.5 ^ V(IN) > .5, 1, 0)}
ROUTpp2 P 0 1e11
EAND1 Q1 0 VALUE={ IF(V(P)>0.5 & V(IN)>0.5, 1, 0)}
Ro1 Q1 Q 1m
Co1 Q 0 .1p
ROUT2 Q 0 1e11
EAND2 Qn1 0 VALUE={ IF(V(Q)>0.5, 0, 1)}
Ro2 Qn1 Qn 1m
Co2 Qn 0 .1p
ROUT4 Qn 0 1e11
.ENDS MONOPOS_PS
*$
.SUBCKT CESR IN OUT
+ PARAMs:  C=100u ESR=0.01 X=2 IC=0
C	IN 1  {C*X} IC={IC}
RESR	1 OUT {ESR/X}
.ENDS CESR
*$
.SUBCKT LDCR IN OUT
+ PARAMs:  L=1u DCR=0.01 IC=0
L	IN 1  {L} IC={IC}
RDCR	1 OUT {DCR}
.ENDS LDCR
*$
