*TPS57040-Q1
*$
***************************************************************************
* (C) Copyright 2013 Texas Instruments Incorporated. All rights reserved.  
***************************************************************************
** This model is designed as an aid for customers of Texas Instruments.
** TI and its licensors and suppliers make no warranties, either expressed
** or implied, with respect to this model, including the warranties of 
** merchantability or fitness for a particular purpose.  The model is
** provided solely on an "as is" basis.  The entire risk as to its quality
** and performance is with the customer                                    
***************************************************************************
* 
** Released by: WEBENCH Design Center, Texas Instruments Inc.
* Part: TPS57040-Q1
* Date: 25FEB2013
* Model Type: TRANSIENT
* Simulator: PSPICE
* Simulator Version: 16.2.0.p001
* EVM Order Number: N/A
* EVM Users Guide: N/A
* Datasheet: SLVSAP4C - REVISED OCTOBER 2012
*
* Model Version: Final 1.00
*
*****************************************************************************
*
* Updates:
*
* Final 1.00
* Release to Web.
*
***************************************************************************
.SUBCKT TPS57040-Q1_TRANS BOOT VIN EN SS_TR RT_CLK 
+ PWRGD VSENSE COMP GND PH DUMMY_TEMPIN
R_R149         0 N6036391  1k  
C_C165         0 PWMFFX  1n  
R_R265         PWMFF1 INDELAYED2  21.64k
E_ABM154         N161342291 0 VALUE { {
+ IF(V(MUXCLK) > 2.5,5,0)}    }
R_R248         0 N6035917  100MEG  
R_R272         N16387833 N16383919  1  
X_U575         CLKFLTLO CLKFLTHI CLKFLT OR2_BASIC
G_ABMI3         N6035523 RAMP VALUE { {(-( 
+ I(V_V44)*2.4) )* V(UPS)}    }
X_U213         SYSCLK SYSCLKBAR INV_BASIC
V_V15         N6036105 0 5.0
X_U114         N6035435 CLKFLTBAR N6035331 OR2_BASIC
C_C32         PBX1 AVDD  8p  
V_V14         N6035189 0 5.0
C_C150         0 N6036317  0.5u  
R_R241         0 N6035757  1  
I_I9         AVDD N2132367 DC 7.92u  
E_ABM7         N6035133 0 VALUE { {IF(V(SDWN) > 2.5,0,  
+ IF(V(VIN) <2, V(VIN), 5))}   }
X_U594         N6035257 VSENSEINT OVTP COMP_BASIC
R_R280         N161354411 N6035375  1k  
R_R255         N6035869 N6035859  10k  
V_V62         N6036173 0 2.0
E_ABM179         N7362527 0 VALUE { {IF(V(OCB) > 2.5 &  
+ V(SS_TR) > 54m,1,0)}   }
C_C159         0 VSENSEINT  1n  
R_R275         N6035657 SYSCLK  1  
V_V30         N6035579 0 5
C_C158         0 SDWN  1n  
C_C79         RAMP 0  2p  
X_U601         0 TIMER2 d_d 
E_ABM180         N6035299 0 VALUE { {IF (
+ V(N6035375) > 2.4,0,2.5)}    }
X_U556         N6036383 N6035173 FSBY2EN AND2_BASIC
C_C13         PBX2 AVDD  250f  
C_C160         0 N6035909  2n  
X_U59         N6035389 N6035427 INV_BASIC
X_S66    N2132079 0 PBX1 PBX2 SCHEMATIC1_S66 
E_ABM147         N6035457 0 VALUE { {IF(
+ V(N6035375) > 2.5, -1,1)}    }
E_ABM2         N6035217 0 VALUE { {IF(V(SDWN) > 2.5,0,  
+ IF(V(VIN) < 2.5, V(VIN), 2.5))}   }
D_D54         0 N2132091 D_D1 
X_U605         PWMFF1 INDELAYED2 d_d 
R_R11         N6035567 OCB  1  
I_I1         N6035757 0 DC -114u  
X_U561         FSBY8 N6036519 INV_BASIC
C_C149         0 N6034943  1n  
E_ABM181         N16387833 0 VALUE { {IF(
+ V(INDELAYED1) > 4.9,5,0)}    }
X_U298         FSBY2 N6035965 N6034943 N6035975 
+ ENAB SET5 DFF_BASIC
X_U192         PBX1 N2132367 N2132091 
+ NMOSIDEAL_PS PARAMS: K=1m VTH=0.8
R_R262         N6036629 N6036617  1  
G_ABMII4         N6035071 0 VALUE { {
+ ((V(COMP) /-132.8k)  + 3.64u)*3}    }
X_U579         N6034913 MCLK N6036189 
+ MUXCLK MUX2_BASIC
C_C167         0 N16383919  1n  
X_U91         RT_CLK N6035509 N6035355 COMP_BASIC
R_R155         0 N6035031  1k  
X_U52         N6035579 ENAB PWMFF HDRVIN AND3_BASIC
X_U586         SYSCLK N6036327 N6034999 AND2_BASIC
E_ABM162         N6035657 0 VALUE { IF(V(FSEN) > 2.5, V(MUXCLK),  
+ IF(V(FSBY2EN) > 2.5, V(FSBY2),  
+ IF(V(FSBY4EN) > 2.5, V(FSBY4),  
+ IF(V(FSBY8EN) > 2.5, V(FSBY8),0)))) }
G_ABMII1         VIN EN VALUE { {0.9u+ 580n*V(ENAB)}    }
R_R278         0 N6035071  1  
E_ABM6         N6821359 0 VALUE { IF(V(TIMER2) > 0.5,0,5)    }
C_C40         0 N2133963  2p  
X_S30    HDRV PH N6034949 PH SCHEMATIC1_S30 
E_ABM3         N6035269 0 VALUE { {IF(V(SDWN) > 2.5,0,  
+ IF(V(VIN) < 0.8, V(VIN), 0.8))}   }
X_U580         CLKFLT CLKFLTBAR INV_BASIC
R_R14         N7090407 VREF_GM  1  
V_V75         N6035119 0 3
X_U61         HDRVIN LDRV INV_BASIC
X_U568         ENABBAR N6036243 N6036091 OR2_BASIC
X_U599         LDRV N6036587 BOOT_SDWN AND2_BASIC
X_U572         RTCLK N6036243 INV_BASIC
C_C3         0 VREF  100u  
V_V44         N6034935 0 0.5
V_V61         AVDD 0 5
I_I19         N6034939 I_CLKFLTLO DC 1  
V_V5         N6036559 0 0.5
R_R276         0 N6034935  500MEG  
X_U553         FSBY8EN N6036041 INV_BASIC
D_D63         0 SS_TR D_D1 
V_V63         N2132377 0 1
C_C14         0 VREF_GM  1n  
X_U614         SYSCLK N16395244 N16400783 AND2_BASIC
X_U559         FSBY2 N6035975 INV_BASIC
V_V45         N6035523 0 5
C_C8         0 SS_TR  0.1p  
R_R2         N6035217 2P5  0.1m  
R_R290         N7125271 VGM  1  
X_U603         TIMERCTRL2 N6821359 d_d 
X_U2         PWMFF1 OR2OUT2 TIMERCTRL2 OUT2 
+ MUX2_BASIC_GEN PARAMS: VDD=5 VSS=0
+  VTHRESH=2.5
X_U3         PWMFF1 INDELAYED1 OR2OUT1 
+ OR2_BASIC_GEN PARAMS: VDD=5 VSS=0
+  VTHRESH=2500E-3
X_S52    N2132139 0 PBX2 PBX3 SCHEMATIC1_S52 
I_I20         N6035305 I_CLKFLTHI DC 1  
R_R243         0 ISW  1  
C_C147         0 N6036587  1n  
C_C15         0 N7362435  100n  
X_U228         START STARTN SYSCLK SET5 ENAB
+  SET5 DFF_BASIC
V_V8         N6036415 0 5.0
R_R244         N6036047 PWMANDI  1  
D_D65         I_CLKFLTLO N161362610 D_D1 
C_C156         0 N6036189  1n  
X_H1    N6035809 0 N6034961 0 SCHEMATIC1_H1 
R_R260         0 N6036539  100MEG  
R_R183         N6035299 N6035311  1  
X_U233         I_CLKFLTLO N6036221 N6036111 COMP_BASIC
X_U570         ENAB N6036109 CLKFLTHI AND2_BASIC
E_ABM161         N161352671 0 VALUE { {IF(V(N6036317) 
+ > 3.1,5,0)}    }
V_V47         SET0 0 0Vdc
X_U613         SYSCLK N16395244 
+ INV_DELAY_BASIC PARAMS: DELAY=20n
X_U299         FSBY4 N6036281 FSBY2 N6035153 ENAB SET5 DFF_BASIC
X_S65    STARTN 0 AVDD PBX1 SCHEMATIC1_S65 
G_ABMI1         1P7 SS_TR VALUE { {IF(V(ENAB) > 2.5,2u,0)}    }
E_ABM10         N6876528 0 VALUE { IF(V(COMP) <0.55 ,5,0)    }
X_U32         N6036105 N6035031 VSENSEINT 0 swhyste
+  PARAMS:  RON=1
+  ROFF=1MEG VT=0.6 VH=0.02
E_ABM164         N6035855 0 VALUE { V(VSENSE)    }
G_ABMII3         2P5 N6035809 VALUE { V(VRAMP) * 1u    }
C_C148         0 N6036617  1n  
X_S19    N6035219 0 PWRGD 0 SCHEMATIC1_S19 
X_U564         ENAB N6036111 CLKFLTLO AND2_BASIC
X_U1         PWMFF1 INDELAYED2 OR2OUT2 OR2_BASIC_GEN 
+ PARAMS: VDD=5 VSS=0
+  VTHRESH=2500E-3
X_S64    N2132139 0 N2133963 0 SCHEMATIC1_S64 
R_R284         N6035515 N6035909  10k  
X_F3    VIN N6034949 2P5 ISW SCHEMATIC1_F3 
R_R258         0 N6035965  100MEG  
X_U562         ENABBAR RTCLK N6036095 OR2_BASIC
C_C151         0 N6036641  1n  
E_ABM150         N161354411 0 VALUE { ( (V(RAMP) -V(N6035311))*  
+ 10000)   }
R_R266         N6821359 TIMERCTRL2  1k  
E_ABM167         N6036047 0 VALUE { {IF((V(BOOT) - V(PH)) < 2.1,0,5)}    }
V_V9         N6036469 0 5.0
X_U587         SYSCLK N6036327 INV_DELAY_BASIC PARAMS: DELAY=15n
X_U4         PWMFF1 OR2OUT1 TIMERCTRL1 OUT1 MUX2_BASIC_GEN 
+ PARAMS: VDD=5 VSS=0
+  VTHRESH=2.5
X_U597         N6036559 COMP d_d 
C_C157         0 SYSCLK  1n  
C_C153         0 TIMER1  1n  
G_ABMI2         0 TIMER2 VALUE { IF(V(PWMFF1) > 2.5 | V(or2out2) >
+  2.5,3.33m,-1)    }
X_U588         RTCLK N6034913 INV_BASIC
C_C2         0 2P5  100u  
X_U130         N2132367 N2132367 N2132377 NMOSIDEAL_PS 
+ PARAMS: K=1m VTH=0.8
X_U612         N16383919 N16401710 N16413798 N16410066 
+ SRNANDLATCHRHP_BASIC
X_S3    N6035389 0 HDRV PH SCHEMATIC1_S3 
X_S63    N2134071 0 N2132091 N2133963 SCHEMATIC1_S63 
E_ABM8         N6035567 0 VALUE { {IF(V(COMP) > 1.5,5,0)}    }
V_V76         N161362610 0 3
X_U611         N6035375 SET5 d_d 
V_V80         N6035235 0 182
X_U610         0 N6035375 d_d 
C_C9         0 OCB  100n  
G_ABMI7         0 TIMER1 VALUE { IF(V(PWMFF1) > 2.5 | 
+ V(or2out1) > 2.5,4.5m,-1)
+     }
R_R279         N6036237 SDWN  1  
C_C155         0 INDELAYED1  10p  
R_R263         N161342291 N6034943  1  
R_R204         N161352671 N6036189  1  
X_U174         START N2132079 N2134071 AND2_BASIC
C_C135         0 VRAMP  1n  
X_U566         TSDWN N6035291 N6035255 N6036237 OR3_BASIC
X_U57         HDRVIN N6035427 N6035379 AND2_BASIC
X_U122         ENAB N6035435 INV_BASIC
X_U555         N6036041 N6034957 FSBY4EN AND2_BASIC
C_C134         0 VRAMPIN  5.236n  
R_R15         N7362527 N7362435  1  
X_U567         DUMMY_TEMPIN N6035235 TSDWN COMP_BASIC
E_ABM11         N6939270 0 VALUE { IF(V(N6937197) > 
+ 2.5 ,5,0)    }
V_V12         N6036009 0 5.0
R_R154         0 N6035173  1k  
C_C28         PBX3 AVDD  18p  
X_U608         PWMFF1 INDELAYED1 d_d 
D_D28         N2132367 AVDD D_D1 
E_ABM165         N6035197 0 VALUE { {IF(V(CLKFLT) > 2.5,5,0)}    }
X_U60         N6035463 N6035627 N6035389 AND2_BASIC
R_R270         N6876528 N6868246  1  
E_ABM177         N7125271 0 VALUE { IF(V(N6035003) < 26u,
+  26u, IF(V(N6035003) >
+  97u, 97u,V(N6035003)))    }
C_C142         PH N6034949  10p  
E_ABM9         N6824893 0 VALUE { IF(V(TIMER1) > 0.5,0,5)    }
C_C166         0 VGM  1n  
X_U560         FSBY4 N6035153 INV_BASIC
X_U585         ENAB ENABBAR INV_BASIC
X_S68    N7362435 0 SS_TR 0 SCHEMATIC1_S68 
E_ABM174         N7090305 0 VALUE { IF(V(SS_TR) < 500m, 
+ V(SS_TR) - 34.4m,  
+ IF(V(SS_TR) > 1500m, 0.8,  
+ V(SS_TR) - ((0.6633*V(SS_TR)*V(SS_TR)) -(0.6493*
+ V(SS_TR)) + 0.1802)))  }
E_ABM169         N6036629 0 VALUE { {IF(V(SS_TR)  > 54m,5,0)}    }
C_C139         0 TIMER2  1n  
R_R203         N6035197 N6036317  1  
D_D58         N6035859 N6035869 D_D1 
R_R269         N6824893 TIMERCTRL1  1k  
X_S26    N6034999 0 VRAMPIN 0 SCHEMATIC1_S26 
X_S62    N6036091 0 I_CLKFLTHI 0 SCHEMATIC1_S62 
X_U606         0 TIMER1 d_d 
D_D64         I_CLKFLTHI N6035119 D_D1 
X_F8    N2132429 0 AVDD N2132101 SCHEMATIC1_F8 
C_C6         0 1P7  100u  
V_V64         N6035253 0 2.5
R_R201         N6035457 UPS  1  
G_G8         AVDD PBX1 AVDD PBX1 2u
V_V73         N6034939 0 5
X_F10    N2132363 N2132429 AVDD I_CLKFLTLO SCHEMATIC1_F10 
R_R259         0 N6036281  100MEG  
R_R153         0 N6034957  1k  
R_R267         0 IF2IA  1  
R_R150         0 N6036435  1k  
C_C5         0 COMP  5.72p  
C_C161         0 N6035219  1n  
V_V60         N6036221 0 2.0
X_U616         N6868246 N16400783 N16401710 AND2_BASIC
X_S34    BOOT_SDWN 0 BOOT VIN SCHEMATIC1_S34 
X_U609         VSGOOD SDWN N6035515 OR2_BASIC
E_ABM170         N6035453 0 VALUE { {IF(V(N6035909) > 3.3,5,0)}    }
G_ABMI4         VRAMPIN 0 VALUE { {V(IF2IA) * -1}    }
R_R256         EN N6036339  100MEG  
X_U551         ENAB N6036391 N6036435 VSGOOD NAND3_BASIC
X_U30         N6034977 N6034957 VSENSEINT 0 
+ swhyste PARAMS:  RON=1MEG
+  ROFF=1 VT=0.4 VH=0.02
R_R247         N6036593 N6036587  1  
V_V13         N6034977 0 5.0
E_ABM173         N6036339 0 VALUE { {IF(V(VIN) > 2.5,5,0)}    }
I_I16         AVDD PBX1 DC 7.92u  
R_R6         N6035133 VREG  1  
X_U29         N6036009 FSBY8EN VSENSEINT 0 
+ swhyste PARAMS:  RON=1MEG
+  ROFF=1 VT=0.2 VH=0.02
C_C140         0 PWMANDI  1n  
R_R285         N6035453 N6035219  1  
X_U31         N6035189 N6035173 VSENSEINT 0 
+ swhyste PARAMS:  RON=1MEG
+  ROFF=1 VT=0.6 VH=0.02
C_C164         0 N6868246  1n  
R_R286         N6036061 N6035003  1  
C_C1         0 ENAB  1n  
X_U120         N6035309 ENAB MCLK AND2_BASIC
X_U558         N6035237 N6035031 FSEN AND2_BASIC
X_U598         N6960003 PWMANDI OVTP PWM AND3_BASIC
G_G7         AVDD PBX1 AVDD PBX3 18u
I_I18         N2132091 0 DC 7.92u  
D_D62         SS_TR N6036661 D_D1 
X_F11    N2132453 N2132363 AVDD I_CLKFLTHI SCHEMATIC1_F11 
C_C154         0 TIMERCTRL1  3p  
X_U5         OUT1 OUT2 N6868246 N6937197 
+ MUX2_BASIC_GEN PARAMS: VDD=5 VSS=0
+  VTHRESH=2.5
X_U234         I_CLKFLTHI N6036173 N6036109 COMP_BASIC
G_ABMI5         SS_TR 0 VALUE { {IF(V(SS_DISCH) > 2.5, 1.25e-3,0)}    }
C_C12         0 N7090311  1n  
X_U294         N6035355 ENAB RTCLK AND2_BASIC
X_U56         HDRVIN N6035627 INV_BASIC
V_V6         N6036487 0 1.6
X_U191         START SYSCLK N2132079 NAND2_BASIC
X_U615         PWMFFX N16413798 PWMFF AND2_BASIC
X_U604         N6036609 N6036617 N6036635 AND2_BASIC
X_U27         N6036469 N6036435 VSENSEINT 0 
+ swhyste PARAMS:  RON=1MEG
+  ROFF=1 VT=0.864 VH=0.008
X_U48         N6035375 N6035309 INV_BASIC
E_ABM152         ISWF 0 VALUE { {IF(V(N6035859) > 3.1,  
+ V(ISW),-70m)}   }
X_U302         FSBY8 N6036539 FSBY4 N6036519 ENAB SET5 DFF_BASIC
X_U58         N6035379 N6035463 INV_BASIC
X_U296         PWMFF1 N6035917 SYSCLK SET5 PWM SET5 DFF_BASIC
E_ABM151         N6035869 0 VALUE { {IF(V(PWMFF) > 2.5, 5,0)}    }
R_R239         N6035953 VRAMP  1  
G_ABM2I2         2P5 N6035847 VALUE { {IF(V(N6035041) > V(N6035757),
+  8239*V(N6035757), 8239*V(N6035041))}    }
E_ABM168         N6036593 0 VALUE { {IF((V(BOOT) - V(PH)) > 6 | 
+  V(ENAB) < 2.5
+  | V(SDWN) > 2.5,0,5)}    }
X_S61    N6036095 0 I_CLKFLTLO 0 SCHEMATIC1_S61 
D_D53         PBX1 AVDD D_D1 
E_ABM149         N6960003 0 VALUE { {IF(V(ISWF) > V(N6035847),  
+ 0,5)}   }
R_R264         N6036649 N6036641  1  
X_F15    N2132101 0 AVDD IF2IA SCHEMATIC1_F15 
C_C37         0 I_CLKFLTLO  7.5u  
V_V79         N6035257 0 0.856
R_R288         0 N6036639  10MEG  
E_ABM1         N6035029 0 VALUE { {IF(V(EN) < 1.25,0,5)}    }
D_D10         COMP N6036487 D_D1 
E_ABM178         N7090407 0 VALUE { IF(V(N7090311) < 0.8, 
+ V(N7090311),0.8)    }
C_C39         0 N2132091  10p  
C_C120         0 N6035311  1n  
X_U565         N6035253 VIN N6035255 COMP_BASIC
D_D8         EN N6036339 D_D1 
C_C7         0 VREG  1u  
V_V21         N6035509 0 1.9
E_ABM148         N6035953 0 VALUE { {V(VRAMPIN)}    }
D_D61         IF2IA AVDD D_D1 
D_D13         PH N6034949 D_D1 
R_R268         PWMFF1 INDELAYED1  15.86k  
V_V70         N6036661 0 1.7
R_R291         0 N16410066  1k  
C_C163         N6036607 N6036609  140.5p  
R_R5         N6035615 1P7  0.1m  
R_R287         0 N6036609  1k  
R_R4         0 COMP  103.092MEG  
E_ABM172         N6036649 0 VALUE { {IF(V(SS_TR)  < 54m,5,0)}    }
C_C38         0 I_CLKFLTHI  7.5u  
C_C133         0 UPS  1n  
R_R3         N6035269 VREF  0.1m  
C_C138         0 INDELAYED2  10p  
X_U607         TIMERCTRL1 N6824893 d_d 
R_R13         N7090305 N7090311  1  
V_V46         SET5 0 5
X_S2    N6035379 0 BOOT HDRV SCHEMATIC1_S2 
D_D11         RAMP N6035523 D_D1 
X_U554         N6034957 N6036383 INV_BASIC
X_U602         N6036635 N6036641 SS_DISCH N6036639
+  SRNANDLATCHRHP_BASIC
X_U193         SYSCLKBAR START N2132139 NAND2_BASIC
X_S67    STARTN 0 AVDD PBX3 SCHEMATIC1_S67 
X_S25    N6035331 0 RAMP 0 SCHEMATIC1_S25 
G_ABM2I1         0 COMP VALUE { {LIMIT((V(VREF_GM) - 
+ V(VSENSEINT))*V(VGM),
+  -7u,7u)}    }
E_ABM163         N6035041 0 VALUE { {((V(N6035071) - 
+ V(N6034961)) * 10)  
+ -12.1u}   }
D_D55         N2132101 AVDD D_D1 
E_ABM5         N6035615 0 VALUE { {IF(V(SDWN) > 2.5,0,  
+ IF(V(VIN) < 1.7, V(VIN), 1.7))}   }
R_R271         N6939270 PWMFFX  1  
X_U600         SDWN N6036607 INV_BASIC
R_R1         N6035029 ENAB  1  
D_D9         EN VIN D_D1 
R_R242         0 N6035847  1  
R_R152         0 FSBY8EN  1k  
X_U26         N6036415 N6036391 VSENSEINT 0 swhyste PARAMS:  RON=1
+  ROFF=1MEG VT=0.744 VH=0.008
X_U557         N6035173 N6035237 INV_BASIC
V_V74         N6035305 0 5
C_C162         0 N6035003  1n  
C_C146         0 N6035859  5p  
G_G6         AVDD N2132453 AVDD PBX3 620m
C_C152         0 TIMERCTRL2  3p  
E_ABM171         N6036061 0 VALUE { {IF(V(SS_TR) < 
+ 0.7, 26u, 26u + (71u
+  *((V(SS_TR) -700m)/299m)))}    }
R_R282         N6035855 VSENSEINT  1  
X_U549         ENAB N6035291 INV_BASIC
X_S32    CLKFLT 0 N6034935 RT_CLK SCHEMATIC1_S32 
.IC         V(N6035311 )=1.4
.IC         V(HDRVIN )=0
.IC         V(RAMP )=0
.IC         V(IF2IA )=0
.IC         V(SS_TR )=0
.ENDS TPS54040_TRANS
*$
.subckt SCHEMATIC1_S66 1 2 3 4  
S_S66         3 4 1 2 _S66
RS_S66         1 2 1G
.MODEL         _S66 VSWITCH Roff=10e6 Ron=500 Voff=2.4V Von=2.5V
.ends SCHEMATIC1_S66
*$
.subckt SCHEMATIC1_S30 1 2 3 4  
S_S30         3 4 1 2 _S30
RS_S30         1 2 1G
.MODEL         _S30 VSWITCH Roff=10e6 Ron=300m Voff=0.4V Von=2.8
.ends SCHEMATIC1_S30
*$
.subckt SCHEMATIC1_S52 1 2 3 4  
S_S52         3 4 1 2 _S52
RS_S52         1 2 1G
.MODEL         _S52 VSWITCH Roff=10e6 Ron=500 Voff=2.4V Von=2.5V
.ends SCHEMATIC1_S52
*$
.subckt SCHEMATIC1_H1 1 2 3 4  
H_H1         3 4 VH_H1 1
VH_H1         1 2 0V
.ends SCHEMATIC1_H1
*$
.subckt SCHEMATIC1_S65 1 2 3 4  
S_S65         3 4 1 2 _S65
RS_S65         1 2 1G
.MODEL         _S65 VSWITCH Roff=10e6 Ron=500 Voff=2.4V Von=2.5V
.ends SCHEMATIC1_S65
*$
.subckt SCHEMATIC1_S19 1 2 3 4  
S_S19         3 4 1 2 _S19
RS_S19         1 2 1G
.MODEL         _S19 VSWITCH Roff=100e6 Ron=50 Voff=2.4V Von=2.5V
.ends SCHEMATIC1_S19
*$
.subckt SCHEMATIC1_S64 1 2 3 4  
S_S64         3 4 1 2 _S64
RS_S64         1 2 1G
.MODEL         _S64 VSWITCH Roff=10e6 Ron=500 Voff=2.4V Von=2.5V
.ends SCHEMATIC1_S64
*$
.subckt SCHEMATIC1_F3 1 2 3 4  
F_F3         3 4 VF_F3 1
VF_F3         1 2 0V
.ends SCHEMATIC1_F3
*$
.subckt SCHEMATIC1_S3 1 2 3 4  
S_S3         3 4 1 2 _S3
RS_S3         1 2 1G
.MODEL         _S3 VSWITCH Roff=1e6 Ron=1.0 Voff=1.0V Von=4.0V
.ends SCHEMATIC1_S3
*$
.subckt SCHEMATIC1_S63 1 2 3 4  
S_S63         3 4 1 2 _S63
RS_S63         1 2 1G
.MODEL         _S63 VSWITCH Roff=10e6 Ron=500 Voff=2.4V Von=2.5V
.ends SCHEMATIC1_S63
*$
.subckt SCHEMATIC1_S68 1 2 3 4  
S_S68         3 4 1 2 _S68
RS_S68         1 2 1G
.MODEL         _S68 VSWITCH Roff=100e6 Ron=3571 Voff=0.2 Von=0.8
.ends SCHEMATIC1_S68
*$
.subckt SCHEMATIC1_S26 1 2 3 4  
S_S26         3 4 1 2 _S26
RS_S26         1 2 1G
.MODEL         _S26 VSWITCH Roff=100e6 Ron=10m Voff=0.4 Von=4
.ends SCHEMATIC1_S26
*$
.subckt SCHEMATIC1_S62 1 2 3 4  
S_S62         3 4 1 2 _S62
RS_S62         1 2 1G
.MODEL         _S62 VSWITCH Roff=10e6 Ron=10m Voff=2.4V Von=2.5V
.ends SCHEMATIC1_S62
*$
.subckt SCHEMATIC1_F8 1 2 3 4  
F_F8         3 4 VF_F8 1
VF_F8         1 2 0V
.ends SCHEMATIC1_F8
*$
.subckt SCHEMATIC1_F10 1 2 3 4  
F_F10         3 4 VF_F10 1
VF_F10         1 2 0V
.ends SCHEMATIC1_F10
*$
.subckt SCHEMATIC1_S34 1 2 3 4  
S_S34         3 4 1 2 _S34
RS_S34         1 2 1G
.MODEL         _S34 VSWITCH Roff=1000e6 Ron=15 Voff=0.4V Von=2.8
.ends SCHEMATIC1_S34
*$
.subckt SCHEMATIC1_F11 1 2 3 4  
F_F11         3 4 VF_F11 1
VF_F11         1 2 0V
.ends SCHEMATIC1_F11
*$
.subckt SCHEMATIC1_S61 1 2 3 4  
S_S61         3 4 1 2 _S61
RS_S61         1 2 1G
.MODEL         _S61 VSWITCH Roff=10e6 Ron=10m Voff=2.4V Von=2.5V
.ends SCHEMATIC1_S61
*$
.subckt SCHEMATIC1_F15 1 2 3 4  
F_F15         3 4 VF_F15 1
VF_F15         1 2 0V
.ends SCHEMATIC1_F15
*$
.subckt SCHEMATIC1_S2 1 2 3 4  
S_S2         3 4 1 2 _S2
RS_S2         1 2 1G
.MODEL         _S2 VSWITCH Roff=1e6 Ron=2 Voff=2.4V Von=2.5V
.ends SCHEMATIC1_S2
*$
.subckt SCHEMATIC1_S67 1 2 3 4  
S_S67         3 4 1 2 _S67
RS_S67         1 2 1G
.MODEL         _S67 VSWITCH Roff=10e6 Ron=500 Voff=2.4V Von=2.5V
.ends SCHEMATIC1_S67
*$
.subckt SCHEMATIC1_S25 1 2 3 4  
S_S25         3 4 1 2 _S25
RS_S25         1 2 1G
.MODEL         _S25 VSWITCH Roff=50e6 Ron=100 Voff=2.4V Von=2.5V
.ends SCHEMATIC1_S25
*$
.subckt SCHEMATIC1_S32 1 2 3 4  
S_S32         3 4 1 2 _S32
RS_S32         1 2 1G
.MODEL         _S32 VSWITCH Roff=100e6 Ron=1 Voff=0.4V Von=4.8V
.ends SCHEMATIC1_S32
*$
.subckt d_d 1 2
d1 1 2 dd
.model dd d
+ is=1e-015
+ n=0.01
+ tt=1e-011
.ends d_d
*$
.SUBCKT AND2_BASIC A B Y 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > 2.5  &  
+ V(B) > 2.5,5,0)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND2_BASIC
*$
.SUBCKT AND3_BASIC A B C Y 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > 2.5  &  
+ V(B) > 2.5 &
+ V(C) > 2.5,5,0)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND3_BASIC
*$
.SUBCKT AND4_BASIC A B C D Y 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > 2.5  &  
+ V(B) > 2.5 &
+ V(C) > 2.5 &
+ V(D) > 2.5,5,0)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND4_BASIC
*$
.SUBCKT NAND2_BASIC A B Y 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > 2.5  &  
+ V(B) > 2.5,0,5)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND2_BASIC
*$
.SUBCKT NAND3_BASIC A B C Y 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > 2.5  &  
+ V(B) > 2.5 &
+ V(C) > 2.5,0,5)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND3_BASIC
*$
.SUBCKT NAND4_BASIC A B C D Y 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > 2.5  &  
+ V(B) > 2.5 &
+ V(C) > 2.5 &
+ V(D) > 2.5,0,5)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND4_BASIC
*$
.SUBCKT OR2_BASIC A B Y 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > 2.5  |  
+ V(B) > 2.5,5,0)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR2_BASIC
*$
.SUBCKT OR3_BASIC A B C Y 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > 2.5  |  
+ V(B) > 2.5 |
+ V(C) > 2.5,5,0)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR3_BASIC
*$
.SUBCKT OR4_BASIC A B C D Y 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > 2.5  |  
+ V(B) > 2.5 |
+ V(C) > 2.5 |
+ V(D) > 2.5,5,0)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR4_BASIC
*$
.SUBCKT NOR2_BASIC A B Y 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > 2.5  |  
+ V(B) > 2.5,0,5)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR2_BASIC
*$
.SUBCKT NOR3_BASIC A B C Y 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > 2.5  |  
+ V(B) > 2.5 |
+ V(C) > 2.5,0,5)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR3_BASIC
*$
.SUBCKT NOR4_BASIC A B C D Y 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > 2.5  |  
+ V(B) > 2.5 |
+ V(C) > 2.5 |
+ V(D) > 2.5,0,5)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR4_BASIC
*$
.SUBCKT NOR5_BASIC A B C D E Y 
E_ABMGATE YINT 0 VALUE {{IF(V(A) > 2.5  |  
+ V(B) > 2.5 |
+ V(C) > 2.5 |
+ V(D) > 2.5 |
+ V(E) > 2.5,0,5)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR5_BASIC
*$
.SUBCKT NOR6_BASIC A B C D E F Y 
E_ABMGATE YINT 0 VALUE {{IF(V(A) > 2.5  |  
+ V(B) > 2.5 |
+ V(C) > 2.5 |
+ V(D) > 2.5 |
+ V(E) > 2.5 |
+ V(F) > 2.5,0,5)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR6_BASIC
*$
.SUBCKT INV_BASIC A  Y 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > 2.5 , 
+ 0,5)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS INV_BASIC
*$
.SUBCKT XOR2_BASIC A B Y
E_ABMGATE  YINT 0 VALUE {{IF(V(A) > 2.5  ^  
+ V(B) > 2.5,5,0)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS XOR2_BASIC
*$
.SUBCKT XNOR2_BASIC A B Y
E_ABMGATE  YINT 0 VALUE {{IF(V(A) > 2.5  ^  
+ V(B) > 2.5,0,5)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS XNOR2_BASIC
*$
.SUBCKT MUX2_BASIC A B S Y
E_ABMGATE  YINT 0 VALUE {{IF(V(S) > 2.5,  
+ V(B),V(A))}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS MUX2_BASIC
*$
.SUBCKT INV_DELAY_BASIC A  Y PARAMS: DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > 2.5 , 
+ 5,0)}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > 2.5 , 
+ 0,5)}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS INV_DELAY_BASIC
*$
.SUBCKT SRNANDLATCH_BASICORIGINAL S R Q QB
X_U2         N04337 QB Q NAND2_BASIC
X_U3         Q N04379 QB NAND2_BASIC
X_U4         N04337 R N04379 NAND2_BASIC
X_U5         S N04337 INV_BASIC
Cdummy1 Q 0 0.01pF IC={0}
Cdummy2 QB 0 0.01pF IC={5}
.ENDS SRNANDLATCH_BASICORIGINAL
*$
**Set has higher priority in this latch
.SUBCKT SRNANDLATCHSHP_BASIC S R Q QB
GQ 0 Qint VALUE = {IF(V(S) > 2.5,5,IF(V(R)>2.5,-5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 5
D_D11 0 Qint D_D1 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > 2.5, 0,5)}
RQb Qbr QB 1 
Cdummy1 Q 0 1n IC={5}
Cdummy2 QB 0 1n IC={0}
.ENDS SRNANDLATCHSHP_BASIC
*$
.SUBCKT DFF_BASICORIGINAL Q QB CLK D R S
X_U1         S N00273 N00171 N00150 NAND3_BASIC
X_U2         N00150 R CLK N00171 NAND3_BASIC
X_U3         N00171 CLK N00273 N00212 NAND3_BASIC
X_U4         N00212 R D N00273 NAND3_BASIC
X_U5         S N00171 QB Q NAND3_BASIC
X_U6         Q R N00212 QB NAND3_BASIC
Cdummy1 Q 0 0.01pF IC={0}
Cdummy2 QB 0 0.01pF IC={5}
.IC V(N00171) = {5}
.IC V(N00212) = {0}
.ENDS DFF_BASICORIGINAL
*$
.SUBCKT DFF_BASIC Q QB CLK D R S
X1 CLK CLKdel INV_DELAY_BASIC PARAMS: DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC 
GQ 0 Qint VALUE = {IF(V(S) < 2.5,5,IF(V(R)<2.5,-5, IF(V(CLKint)>2.5, 
+ IF(V(D)>2.5,5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 5
D_D11 0 Qint D_D1 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC PARAMS: DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > 2.5, 0,5)}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) = 0
.ENDS DFF_BASIC
*$
.SUBCKT BUF_DELAY_BASIC A  Y PARAMS: DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > 2.5 , 
+ 5,0)}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > 2.5 , 
+ 5,0)}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS BUF_DELAY_BASIC
*$
.SUBCKT BUF_BASIC A  Y 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > 2.5 , 
+ 5,0)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS BUF_BASIC
*$
.SUBCKT DFF_BASICUNOPTIMIZED Q QB CLK D R S
X1 CLK CLKdel INV_DELAY_BASIC PARAMS: DELAY = 7n
X2 CLK CLKdel CLKint AND2_BASIC 
GQ 0 Qint VALUE = {IF(V(S) < 2.5,5,IF(V(R)<2.5,-5, IF(V(CLKint)>2.5, 
+ IF(V(D)>2.5,5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 100MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 5
D_D11 0 Qint D_D1 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 INV_DELAY_BASIC PARAMS: DELAY = 5n
X4 Qqqd1 Qqqd2 INV_DELAY_BASIC PARAMS: DELAY = 5n
RQq Qqqd2 Q 1
GQB 0 QBint VALUE = {IF(V(S) < 2.5,-5,IF(V(R)< 2.5,5, IF(V(CLKint)>2.5, 
+ IF(V(D)>2.5,-5,5),0)))}
CQBint QBint 0 1n
RQBint QBint 0 100MEG
D_D12 QBint MY52 D_D1
V2 MY52 0 5
D_D14 0 QBint D_D1 
EQB QqB 0 QBint 0 1
X5 QqB QqBd1 INV_DELAY_BASIC PARAMS: DELAY = 5n
X6 QqBd1 QqBd2 INV_DELAY_BASIC PARAMS: DELAY = 5n
RQb QqBd2 QB 1
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) = 0
.IC V(QBint) = 5
.ENDS DFF_BASICUNOPTMIZED
*$
.SUBCKT SRNANDLATCHRHP_BASIC S R Q QB
GQ 0 Qint VALUE = {IF(V(R) > 2.5,-5,IF(V(S)>2.5,5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 5
D_D11 0 Qint D_D1 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > 2.5, 0,5)}
RQb Qbr QB 1 
Cdummy1 Q 0 1n IC={5}
Cdummy2 QB 0 1n IC={0}
.ENDS SRNANDLATCHRHP_BASIC
*$
.SUBCKT SBRBNANDLATCHRHP_BASIC SB RB Q QB
GQ 0 Qint VALUE = {IF(V(RB) < 2.5,-5,IF(V(SB) < 2.5,5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 5
D_D11 0 Qint D_D1 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > 2.5, 0,5)}
RQb Qbr QB 1 
Cdummy1 Q 0 1n IC={5}
Cdummy2 QB 0 1n IC={0}
.ENDS SBRBNANDLATCHRHP_BASIC
*$
.SUBCKT COMP_BASIC INP INM Y
E_ABM Yint 0 VALUE {IF (V(INP) > 
+ V(INM), 5,0)}
R1 Yint Y 1
C1 Y 0 1n
.ENDS COMP_BASIC
*$
.MODEL D_D1 D( IS=1e-15 TT=10p Rs=0.05 N=.1  )
*$
.SUBCKT NMOSIDEAL_PS D G S PARAMS: k=1 vth=0
RDDUM D 0 1e11
RSDUM S 0 1e11
RGDUM G 0 1e11
EON Yp 0 VALUE={IF(V(G,S) > {vth}, 1, 0)}
GOUT D S VALUE={IF(V(D,S) >= (V(G,S)-{vth}), 
+ V(Yp)*({k}/2)*(V(G,S)-{vth})**2, V(Yp)
+ *({k})*(V(G,S)-{vth}-V(D,S)/2)*V(D,S))}
.ENDS NMOSIDEAL_PS
*$
.SUBCKT PMOSIDEAL_PS D G S PARAMS: k=1 vth=0 
RDDUM D 0 1e11
RSDUM S 0 1e11
RGDUM G 0 1e11
EON Yp 0 VALUE={IF(V(S,G) > {vth}, -1, 0)}
GOUT D S VALUE={IF(V(S,D) >= (V(S,G)-{vth}),
+  V(Yp)*({k}/2)*(V(S,G)-{vth})**2, V(Yp)*({k})
+ *(V(S,G)-{vth}-V(S,D)/2)*V(S,D))}
.ENDS PMOSIDEAL_PS
*$
.subckt SWHYSTE NodeMinus NodePlus Plus Minus PARAMS: RON=1 
+ ROFF=1MEG VT=5 VH=2
S5 NodePlus NodeMinus 8 0 smoothSW
EBcrtl 8 0 Value = { IF ( V(plus)-V(minus) > V(ref), 1, 0 ) }
EBref ref1 0 Value = { IF ( V(8) > 0.5, {VT-VH}, {VT+VH} ) }
Rdel ref1 ref 100
Cdel ref 0 100p  IC={VT+VH}
Rconv1 8 0 10Meg
Rconv2 plus 0 10Meg
Rconv3 minus 0 10Meg
.model smoothSW VSWITCH (RON={RON} ROFF={ROFF} VON=1 VOFF=0)
.ends SWHYSTE
*$
.SUBCKT AND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND2_BASIC_GEN
*$
.SUBCKT AND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND3_BASIC_GEN
*$
.SUBCKT AND4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH} &
+ V(D) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND4_BASIC_GEN
*$
.SUBCKT NAND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND2_BASIC_GEN
*$
.SUBCKT NAND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND3_BASIC_GEN
*$
.SUBCKT NAND4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH} &
+ V(D) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND4_BASIC_GEN
*$
.SUBCKT OR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR2_BASIC_GEN
*$
.SUBCKT OR3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR3_BASIC_GEN
*$
.SUBCKT OR4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR4_BASIC_GEN
*$
.SUBCKT NOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR2_BASIC_GEN
*$
.SUBCKT NOR3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR3_BASIC_GEN
*$
.SUBCKT NOR4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR4_BASIC_GEN
*$
.SUBCKT NOR5_BASIC_GEN A B C D E Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH} |
+ V(E) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR5_BASIC_GEN
*$
.SUBCKT NOR6_BASIC_GEN A B C D E F Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH} |
+ V(E) > {VTHRESH} |
+ V(F) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR6_BASIC_GEN
*$
.SUBCKT INV_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS INV_BASIC_GEN
*$
.SUBCKT XOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(A) > {VTHRESH}  ^  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS XOR2_BASIC_GEN
*$
.SUBCKT XNOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(A) > {VTHRESH}  ^  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS XNOR2_BASIC_GEN
*$
.SUBCKT MUX2_BASIC_GEN A B S Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(S) > {VTHRESH},  
+ V(B),V(A))}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS MUX2_BASIC_GEN
*$
.SUBCKT INV_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 
+ VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS INV_DELAY_BASIC_GEN
*$
.SUBCKT BUF_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 
+ VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS BUF_DELAY_BASIC_GEN
*$
.SUBCKT BUF_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS BUF_BASIC_GEN
*$
**Set has higher priority in this latch
.SUBCKT SRLATCHSHP_BASIC_GEN S R Q QB 
+ PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(S) > {VTHRESH},5,
+ IF(V(R)>{VTHRESH},-5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN 
+ PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n 
.IC V(Qint) {VSS}
.ENDS SRLATCHSHP_BASIC_GEN
*$
**Reset has higher priority in this latch
.SUBCKT SRLATCHRHP_BASIC_GEN S R Q QB 
+ PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,
+ IF(V(S)>{VTHRESH},5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} 
+ VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n
.IC V(Qint) {VSS}
.ENDS SRLATCHRHP_BASIC_GEN
*$
**Reset has higher priority in this latch and active low set and reset - basically NAND based SR latch
.SUBCKT SBRBLATCHRHP_BASIC_GEN SB RB Q QB 
+ PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(RB) < {VTHRESH},-5,
+ IF(V(SB) < {VTHRESH},5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN 
+ PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
.IC V(Qint) {VSS}
.ENDS SBRBLATCHRHP_BASIC_GEN
*$
**Reset has higher priority in this latch and active low set and reset - basically NAND based SR latch
.SUBCKT SBRBLATCHSHP_BASIC_GEN SB RB Q QB 
+ PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(SB) < {VTHRESH},5,IF(V(RB) < {VTHRESH},-5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} 
+ VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
.IC V(Qint) {VSS}
.ENDS SBRBLATCHSHP_BASIC_GEN
*$
.SUBCKT DFFSBRB_SHPBASIC_GEN Q QB CLK D RB SB 
+ PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} 
+ VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} 
+ VSS={VSS} VTHRESH={VTHRESH}
GQ 0 Qint VALUE = {IF(V(SB) < {VTHRESH},5,IF(V(RB)<{VTHRESH},-5, 
+ IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} 
+ VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSBRB_SHPBASIC_GEN
*$
.SUBCKT DFFSR_SHPBASIC_GEN Q QB CLK D R S 
+ PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} 
+ VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} 
+ VSS={VSS} VTHRESH={VTHRESH} 
GQ 0 Qint VALUE = {IF(V(S) > {VTHRESH},5,IF(V(R) > 
+ {VTHRESH},-5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN 
+ PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSR_SHPBASIC_GEN
*$
.SUBCKT DFFSBRB_RHPBASIC_GEN Q QB CLK D RB SB 
+ PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD}
+ VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} 
+ VSS={VSS} VTHRESH={VTHRESH} 
GQ 0 Qint VALUE = {IF(V(RB) < {VTHRESH},-5,IF(V(SB)< 
+ {VTHRESH},5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 5
D_D11 0 Qint D_D1 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} 
+ VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSBRB_RHPBASIC_GEN
*$
.SUBCKT DFFSR_RHPBASIC_GEN Q QB CLK D R S 
+ PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} 
+ VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD}
+  VSS={VSS} VTHRESH={VTHRESH}  
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,IF(V(S) > 
+ {VTHRESH},5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD}
+ VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSR_RHPBASIC_GEN
*$
.SUBCKT LDCR IN OUT
+ PARAMS:  L=1u DCR=0.01
L	1 OUT  {L}
RDCR	IN 1 {DCR}
.ENDS LDCR
*$
.SUBCKT CESR 1 2 PARAMS: C=10u ESR=2m
C1 1 INT1 {C}
R1 INT1 2 {ESR}
.ENDS CESR
*$