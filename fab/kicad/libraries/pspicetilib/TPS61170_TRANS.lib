***
*$
*TPS61170
*****************************************************************************
* (C) Copyright 2010 Texas Instruments Incorporated. All rights reserved.                                            
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.                                             
** TI and its licensors and suppliers make no warranties, either expressed                                           
** or implied, with respect to this model, including the warranties of                                                    
** merchantability or fitness for a particular purpose. The model is                                                      
** provided solely on an "as is" basis. The entire risk as to its quality                                                    
** and performance is with the customer                                                                                          
*****************************************************************************
*
** Released by: Analog eLab(TM) Design Center, Texas Instruments Inc.
* Part: TPS61170
* Date: 01/17/2011
* Model Type: Transient 
* Simulator: PSpice 
* Simulator Version: 16.0.0.p001
* EVM Order Number: TPS61170EVM-280
* EVM Users Guide: SLVU222C - December 2007 - Revised September 2009
* Datasheet: SLVS789B November 2007, Revised May 2009
* Model Version: Final 1.00
*
*****************************************************************************
*
* Updates:
*
* Final 1.00
* Release to Web.
*
***************************************************************************
.SUBCKT TPS61170_TRANS VIN CTRL COMP GND FB SW PwPD PARAMS: D0=1
+D1=1 D2=1 D3=1 D4=1 FAST_MODE=1
Rtemp PwPD 0 1m
E_ABM1         FAST_MODE_NET 0 VALUE { IF(V(N16557157) > 0.5,0,1)    }
C_U1_C1         0 U1_N7335546  100n  
R_U1_R5         U1_N16508546 U1_N16525173  180k  
R_U1_R2         0 CTRL  800k  
E_U1_GAIN1         U1_N16508462 0 VALUE {1 * V(VREF)}
D_U1_D2         U1_CTRL_NOFILT U1_N7335546 d_d1 
E_U1_ABM173         U1_CTRL_NOFILT 0 VALUE { {IF(V(CTRL) > 1.19,1,0)}    }
X_U1_U605         U1_OUT U1_N16498006 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_U1_R1         U1_CTRL_NOFILT U1_N7335546  3.6k  
X_U1_U5         VIN U1_N16498934 U1_OUT COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
X_U1_S2    U1_CTRL_NOFILT 0 U1_N16508462 U1_N16508546 Enable_U1_S2 
X_U1_U607         U1_CTRL_NOFILT U1_N16510574 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U1_U608         U1_N16508462 U1_N16525173 FAST_MODE_NET VREF_FILT
+  MUX2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
R_U1_R3         U1_N16499002 U1_N16499008  1  
X_U1_S1    FAST_MODE_NET 0 U1_N7335546 U1_N16521347 Enable_U1_S1 
X_U1_S3    U1_N16510574 0 U1_N16508546 0 Enable_U1_S3 
C_U1_C2         0 U1_N16499008  1n  
C_U1_C5         0 U1_N16525173  1n  
E_U1_ABM1         U1_N16499002 0 VALUE { (V(U1_OUT) * -70m)    }
E_U1_ABM2         U1_N164990381 0 VALUE { (V(U1_N16499008) + 2.27)    }
X_U1_U606         U1_N7335546 CTRL_LOGIC BUF_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
X_U1_U604         CTRL_LOGIC U1_N16498068 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_U1_R4         U1_N164990381 U1_N16498934  1  
X_U1_U601         U1_N16498068 U1_N16498006 SDWN OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
C_U1_C4         0 U1_N16521347  900n  
C_U1_C3         0 U1_N16498934  1n  
X_U7_U824         U7_N16489522 U7_INDELAYED1 PWM_CLK PWM_FINAL OR3_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U7_U822         PWM_CLK U7_N16497188 INV_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5 DELAY=15n
C_U7_C172         0 U7_INDELAYED1  10p  
R_U7_R272         U7_N16489522 U7_INDELAYED1  9.36k  
X_U7_U823         U7_N16497188 PWM_CLK U7_N16489522 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U7_U620         U7_N16489522 U7_INDELAYED1 d_d 
X_U3_U1         U3_N16541165 U3_N16541411 SYSCLK AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U3_U2         SDWN U3_N16541411 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
V_U3_V1         U3_N16541165 0  
+PULSE 0 1 100n 10n 10n 40n 833.3n
V_V46         SET1 0 1
E_U6_ABM163         U6_ICTRL 0 VALUE { (V(COMP_CLAMP) - V(VRAMPIN)  
+ )   }
E_U6_ABM165         U6_N16573109 0 VALUE {
+  LIMIT(0.56u/(V(U6_N16573389)+0.1m),0,11.2u)    }
R_U6_R257         U6_N16571205 U6_N16573389  220k  
X_U6_U605         PWM_FINAL U6_N16571205 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
V_U6_V1         U6_DUTY93P 0  
+PULSE 0 1 95n 5n 5n 774n 833.3n
X_U6_U603         PWM_CLK N16528816 SYSCLK SET1 U6_PWM SET1
+  DFFSBRB_RHPBASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U6_U604         U6_N16555184 U6_DUTY93P U6_PWM AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
D_U6_D4         U6_N16489275 U6_N16489399 d_d1  
R_U6_R255         U6_N16489399 U6_N16489275  28.8k  
X_U6_U600         U6_ICTRL U6_ISWF U6_N16555184 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
X_U6_U606         PWM_FINAL U6_N16543632 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
C_U6_C135         0 U6_N16573389  15p  
E_U6_ABM152         U6_ISWF 0 VALUE { {IF(V(U6_N16489275) > 0.5,  
+ V(ISW)+500m,500m)}   }
E_U6_ABM151         U6_N16489399 0 VALUE { {IF(V(PWM_FINAL) > 0.5, 1,0)}    }
C_U6_C134         0 VRAMPIN  10p  
G_U6_ABMII1         VRAMPIN 0 VALUE { V(U6_N16573109)*-1    }
X_U6_S26    U6_N16543632 0 VRAMPIN 0 GmIphase_U6_S26 
C_U6_C146         0 U6_N16489275  1p  
C_U5_C8         0 U5_N7417324  4.5p  
C_U5_C10         0 U5_EA_CLAMP  1n  
R_U5_R10         U5_N16591735 U5_N16591555  72k  
C_U5_C12         0 U5_N16591555  10n  
D_U5_D3         COMP U5_N16608201 d_d1  
D_U5_D4         U5_N16591555 U5_N16591735 d_d1
C_U5_C6         0 U5_N7411581  1n  
X_U5_U4         U5_N16599751 U5_N7417324 d_d 
D_U5_D2         U5_N7411581 COMP d_d1 
C_U5_C9         0 U5_ENVELOPE  3p  
X_U5_U2         COMP_CLAMP U5_N16596104 d_d
V_U5_V1         U5_N16608201 0 5.3
R_U5_R7         COMP COMP_CLAMP  400  
E_U5_E2         U5_N16599495 0 U5_N16600984 U5_N7417324 1e6
R_U5_R11         0 U5_N7417324  1MEG  
C_U5_C5         0 COMP  10p  
R_U5_R13         U5_N16599751 U5_N16599495  10n  
X_U5_U3         SDWN U5_N16591735 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_U5_R8         U5_N7417324 U5_ENVELOPE  250k  
E_U5_GAIN1         U5_N16600984 0 VALUE {1 * V(VRAMPIN)}
C_U5_C13         0 U5_N16596104  1n  
C_U5_C14         0 U5_N16599751  1n  
X_U5_S2    U5_FAST_MODE_NET 0 U5_N16591555 U5_N16591581 ErrorAmp_U5_S2 
C_U5_C11         0 U5_N16591581  90n  
G_U5_ABM2I1         0 COMP VALUE { {LIMIT((V(VREF_FILT) - V(FB))*320u,
+  -100u,100u)}    }
E_U5_ABM3         U5_N74225471 0 VALUE { V(U5_CLIMIT)  
+ +V(U5_ENVELOPE)   }
E_U5_E1         U5_N16598605 0 U5_EA_CLAMP COMP_CLAMP 1e6
R_U5_R4         0 COMP  10MEG  
R_U5_R12         U5_N16596104 U5_N16598605  10n  
R_U5_R9         U5_N74225471 U5_EA_CLAMP  1  
E_U5_ABM1         U5_N7411349 0 VALUE { IF(V(SDWN) > 0.5, 65m,265m)    }
E_U5_ABM2         U5_CLIMIT 0 VALUE { IF(V(U5_N16591555) > 0.5, 603.2m,560.2m) 
+    }
R_U5_R5         U5_N7411349 U5_N7411581  1  
X_U8_U604         U8_N7375083 PWM_FINAL U8_DRVH_PRE AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U8_U613         SDWN U8_N7375083 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
D_U8_D4         U8_N7375243 SW d_d1  
X_U8_S30    U8_DRVH_PRE 0 SW U8_N7375243 Driver_U8_S30 
X_U8_H1    U8_N7375243 0 ISW 0 Driver_U8_H1 
R_R1         GND 0  1m  
E_U4_ABM54         U4_N16780296 0 VALUE { IF(V(U4_DECIMAL1) >22.75 &
+  V(U4_DECIMAL1) < 23.5,639m,0)    }
V_U4_V7         U4_N16781086 0 {D1}
E_U4_ABM47         U4_N16779886 0 VALUE { IF(V(U4_DECIMAL1) >15.75 &
+  V(U4_DECIMAL1) < 16.5,381m,0)    }
E_U4_ABM40         U4_N16779614 0 VALUE { IF(V(U4_DECIMAL1) >8.75 &
+  V(U4_DECIMAL1) < 9.5,178m,0)    }
E_U4_SUM58         U4_N16779823 0 VALUE {V(U4_N16780343)+V(U4_N16780346)}
X_U4_U135         SDWN U4_SDWN_N INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
E_U4_SUM39         U4_N16779975 0 VALUE {V(U4_N16779820)+V(U4_N16779665)}
X_U4_U15         U4_Q3 U4_Q3_BAR U4_SYNC_CLK U4_Q3_PRE U4_SDWN_N SET1
+  DFFSBRB_RHPBASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
E_U4_SUM53         U4_N16780250 0 VALUE {V(U4_N16780105)+V(U4_N16780152)}
E_U4_SUM38         U4_N16779601 0 VALUE {V(U4_N16779614)+V(U4_N16779660)}
E_U4_ABM55         U4_N16780332 0 VALUE { IF(V(U4_DECIMAL1) >23.75 &
+  V(U4_DECIMAL1) < 24.5,713m,0)    }
X_U4_U26         U4_Q3 U4_D3_NET U4_N16780503 XOR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
E_U4_ABM41         U4_N16779660 0 VALUE { IF(V(U4_DECIMAL1) >9.75 &
+  V(U4_DECIMAL1) < 10.5,197m,0)    }
E_U4_SUM59         U4_N16779828 0 VALUE {V(U4_N16780369)+V(U4_N16780372)}
E_U4_ABM56         U4_N16780343 0 VALUE { IF(V(U4_DECIMAL1) >24.75 &
+  V(U4_DECIMAL1) < 25.5,787m,0)    }
E_U4_SUM32         U4_N16779910 0 VALUE {V(U4_N16779391)+V(U4_N16779394)}
V_U4_V46         U4_N16790270 0 2.5
E_U4_ABM48         U4_N16779883 0 VALUE { IF(V(U4_DECIMAL1) >16.75 &
+  V(U4_DECIMAL1) < 17.5,418m,0)    }
E_U4_ABM67         U4_D0_NET 0 VALUE { IF(V(U4_N16781129) > 0.5,1,0)    }
E_U4_ABM57         U4_N16780346 0 VALUE { IF(V(U4_DECIMAL1) >25.75 &
+  V(U4_DECIMAL1) < 26.5,860m,0)    }
V_U4_V4         U4_N16780884 0 {D4}
E_U4_ABM35         U4_N16779441 0 VALUE { IF(V(U4_DECIMAL1) >3.75 &
+  V(U4_DECIMAL1) < 4.5,86m,0)    }
X_U4_U1         U4_Q1_BAR U4_Q0 U4_N16779210 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
E_U4_SUM60         U4_N16779854 0 VALUE {V(U4_N16779319)+V(U4_N16779350)}
V_U4_V8         U4_N16781129 0 {D0}
X_U4_U137         SDWN U4_N16845303 U4_N16790249 U4_N16844400 OR3_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
E_U4_SUM33         U4_N16779394 0 VALUE {V(U4_N16779369)+V(U4_N16779441)}
E_U4_SUM40         U4_N16779994 0 VALUE {V(U4_N16779693)+V(U4_N16779716)}
E_U4_SUM47         U4_N16779665 0 VALUE {V(U4_N16779893)+V(U4_N16779886)}
X_U4_U31         U4_N16780651 U4_N16780656 U4_N16780552 OR2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
E_U4_ABM58         U4_N16780369 0 VALUE { IF(V(U4_DECIMAL1) >26.75 &
+  V(U4_DECIMAL1) < 27.5,934m,0)    }
E_U4_ABM64         U4_D3_NET 0 VALUE { IF(V(U4_N16781009) > 0.5,1,0)    }
E_U4_SUM46         U4_N16780105 0 VALUE {V(U4_N16779910)+V(U4_N16779896)}
E_U4_ABM42         U4_N16779696 0 VALUE { IF(V(U4_DECIMAL1) >10.75 &
+  V(U4_DECIMAL1) < 11.5,215m,0)    }
X_U4_U2         U4_N16779210 U4_N16779213 U4_Q1_PRE OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U4_U132         U4_N16790312 U4_N16790249 INV_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=50n
E_U4_SUM41         U4_N16779530 0 VALUE {V(U4_N16779696)+V(U4_N16779728)}
E_U4_ABM36         U4_N16779473 0 VALUE { IF(V(U4_DECIMAL1) >4.75 &
+  V(U4_DECIMAL1) < 5.5,104m,0)    }
E_U4_ABM10         U4_N167811400 0 VALUE { {V(U4_D0_NET)*1+V(U4_D1_NET)  
+ *2+V(U4_D2_NET)*4+V(U4_D3_NET)  
+ *8+V(U4_D4_NET)*16  
+ } }
E_U4_ABM63         U4_D4_NET 0 VALUE { IF(V(U4_N16780884) > 0.5,1,0)    }
E_U4_ABM49         U4_N16779997 0 VALUE { IF(V(U4_DECIMAL1) >17.75 &
+  V(U4_DECIMAL1) < 18.5,455m,0)    }
X_U4_U133         U4_TIMER_CLK U4_N16790312 INV_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=50n
X_U4_U19         U4_Q4 U4_Q4_BAR U4_SYNC_CLK U4_Q4_PRE U4_SDWN_N SET1
+  DFFSBRB_RHPBASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
E_U4_SUM35         U4_N16779508 0 VALUE {V(U4_N16779473)+V(U4_N16779481)}
E_U4_ABM59         U4_N16780372 0 VALUE { IF(V(U4_DECIMAL1) >27.75 &
+  V(U4_DECIMAL1) < 28.5,1.008,0)    }
X_U4_U16         U4_Q3 U4_Q2_BAR U4_N16780583 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U4_U29         U4_Q0 U4_D0_NET U4_N16780656 XOR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
E_U4_SUM48         U4_N16780152 0 VALUE {V(U4_N16779933)+V(U4_N16779975)}
E_U4_SUM34         U4_N16779896 0 VALUE {V(U4_N16779508)+V(U4_N16779476)}
E_U4_SUM54         U4_N16780239 0 VALUE {V(U4_N16780198)+V(U4_N16780201)}
C_U4_C49         0 U4_N16780821  1n  
E_U4_ABM50         U4_N16780010 0 VALUE { IF(V(U4_DECIMAL1) >18.75 &
+  V(U4_DECIMAL1) < 19.5,492m,0)    }
E_U4_ABM43         U4_N16779728 0 VALUE { IF(V(U4_DECIMAL1) >11.75 &
+  V(U4_DECIMAL1) < 12.5,234m,0)    }
R_U4_R103         U4_N167811400 U4_N16780821  1  
X_U4_U3         U4_Q1 U4_Q0_BAR U4_N16779213 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
E_U4_ABM11         U4_N167806880 0 VALUE { {V(U4_Q0)*1+V(U4_Q1)  
+ *2+V(U4_Q2)*4+V(U4_Q3)  
+ *8+V(U4_Q4)*16  
+ } }
X_U4_U30         U4_N16780457 U4_N16780503 U4_N16780545 U4_N16780552
+  U4_SS_COMPLETE OR4_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U4_U9         U4_Q2_BAR U4_Q1 U4_Q0 U4_N16780401 AND3_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
G_U4_ABMII1         U4_N16790370 U4_TIMER_RAMP VALUE { IF(V(FAST_MODE_NET) <
+  0.5,11.75m, 1.175m)    }
E_U4_ABM60         U4_N16779319 0 VALUE { IF(V(U4_DECIMAL1) >28.75 &
+  V(U4_DECIMAL1) < 29.5,1.082,0)    }
X_U4_U27         U4_Q2 U4_D2_NET U4_N16780545 XOR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U4_U23         U4_Q4 U4_N16781135 U4_N16781193 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U4_U6         U4_Q0_BAR U4_Q2 U4_N16780404 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
E_U4_SUM42         U4_N16780008 0 VALUE {V(U4_N16779752)+V(U4_N16779773)}
E_U4_ABM37         U4_N16779481 0 VALUE { IF(V(U4_DECIMAL1) >5.75 &
+  V(U4_DECIMAL1) < 6.5,123m,0)    }
X_U4_U131         U4_TIMER_RAMP U4_N16790270 U4_TIMER_CLK COMP_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U4_U4         U4_Q1 U4_Q1_BAR U4_SYNC_CLK U4_Q1_PRE U4_SDWN_N SET1
+  DFFSBRB_RHPBASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
C_U4_C50         0 U4_N16780695  1n  
E_U4_ABM44         U4_N16779778 0 VALUE { IF(V(U4_DECIMAL1) >12.75 &
+  V(U4_DECIMAL1) < 13.5,270m,0)    }
X_U4_U20         U4_Q3 U4_Q2 U4_Q1 U4_Q0 U4_N16780990 AND4_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
E_U4_ABM51         U4_N16780013 0 VALUE { IF(V(U4_DECIMAL1) >19.75 &
+  V(U4_DECIMAL1) < 20.5,528m,0)    }
X_U4_U7         U4_Q2 U4_Q2_BAR U4_SYNC_CLK U4_Q2_PRE U4_SDWN_N SET1
+  DFFSBRB_RHPBASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
R_U4_R104         U4_N167806880 U4_N16780695  1  
E_U4_ABM66         U4_D1_NET 0 VALUE { IF(V(U4_N16781086) > 0.5,1,0)    }
E_U4_ABM61         U4_N16779350 0 VALUE { IF(V(U4_DECIMAL1) >29.75 &
+  V(U4_DECIMAL1) < 30.5,1.155,0)    }
X_U4_U24         U4_N16781046 U4_N16781193 U4_Q4_PRE OR2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
D_U4_D2         U4_TIMER_RAMP U4_N16790370 d_d1  
E_U4_SUM49         U4_N16780198 0 VALUE {V(U4_N16779994)+V(U4_N16780008)}
X_U4_U11         U4_Q3 U4_Q1 U4_Q0_BAR U4_N16780586 AND3_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
E_U4_ABM38         U4_N16779520 0 VALUE { IF(V(U4_DECIMAL1) >6.75 &
+  V(U4_DECIMAL1) < 7.5,141m,0)    }
E_U4_ABM45         U4_N16779809 0 VALUE { IF(V(U4_DECIMAL1) >13.75 &
+  V(U4_DECIMAL1) < 14.5,307m,0)    }
E_U4_SUM55         U4_N16780265 0 VALUE {V(U4_N16780250)+V(U4_N16780239)}
X_U4_U21         U4_N16780990 U4_Q4_BAR U4_N16781046 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
E_U4_SUM36         U4_N16779933 0 VALUE {V(U4_N16779601)+V(U4_N16779530)}
E_U4_SUM50         U4_N16779693 0 VALUE {V(U4_N16779883)+V(U4_N16779997)}
E_U4_SUM37         U4_N16779476 0 VALUE {V(U4_N16779520)+V(U4_N16779551)}
E_U4_ABM62         U4_N16779878 0 VALUE { IF(V(U4_DECIMAL1) >30.75 &
+  V(U4_DECIMAL1) < 31.5,1.229,0)    }
X_U4_U13         U4_TIMER_CLK U4_SS_COMPLETE U4_SYNC_CLK AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
E_U4_SUM52         U4_N16780201 0 VALUE {V(U4_N16780049)+V(U4_N16780056)}
V_U4_V5         U4_N16781009 0 {D3}
E_U4_SUM51         U4_N16779716 0 VALUE {V(U4_N16780010)+V(U4_N16780013)}
R_U4_R2         U4_N16780265 VREF  100  
X_U4_U8         U4_Q0 U4_Q0_BAR U4_SYNC_CLK U4_Q0_BAR U4_SDWN_N SET1
+  DFFSBRB_RHPBASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U4_U17         U4_Q3_BAR U4_Q2 U4_Q1 U4_Q0 U4_N16780819 AND4_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U4_U25         U4_Q4 U4_D4_NET U4_N16780457 XOR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
E_U4_SUM43         U4_N16779820 0 VALUE {V(U4_N16779778)+V(U4_N16779809)}
E_U4_ABM52         U4_N16780278 0 VALUE { IF(V(U4_DECIMAL1) >20.75 &
+  V(U4_DECIMAL1) < 21.5,565m,0)    }
V_U4_V6         U4_N16781040 0 {D2}
X_U4_U10         U4_N16780361 U4_N16780401 U4_N16780404 U4_Q2_PRE OR3_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U4_U18         U4_N16780576 U4_N16780583 U4_N16780586 U4_N16780819 U4_Q3_PRE
+  OR4_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
E_U4_ABM32         U4_N16779324 0 VALUE { IF(V(U4_DECIMAL1) >0.75 &
+  V(U4_DECIMAL1) < 1.5,31m,0)    }
E_U4_ABM39         U4_N16779551 0 VALUE { IF(V(U4_DECIMAL1) >7.75 &
+  V(U4_DECIMAL1) < 8.5,160m,0)    }
X_U4_S26    U4_N16844400 0 U4_TIMER_RAMP 0 SoftStart_U4_S26 
C_U4_C2         0 VREF  1n  
X_U4_U136         U4_SS_COMPLETE U4_N16845303 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
E_U4_ABM65         U4_D2_NET 0 VALUE { IF(V(U4_N16781040) > 0.5,1,0)    }
E_U4_SUM44         U4_N16780049 0 VALUE {V(U4_N16779823)+V(U4_N16779828)}
E_U4_SUM56         U4_N16779752 0 VALUE {V(U4_N16780278)+V(U4_N16780291)}
X_U4_U32         U4_N16780821 U4_N16780695 U4_SS_COMPLETE U4_DECIMAL1
+  MUX2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_U4_ABM33         U4_N16779340 0 VALUE { IF(V(U4_DECIMAL1) >1.75 &
+  V(U4_DECIMAL1) < 2.5,49m,0)    }
X_U4_U5         U4_Q1_BAR U4_Q2 U4_N16780361 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U4_U12         U4_Q3 U4_Q1_BAR U4_N16780576 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
E_U4_ABM46         U4_N16779893 0 VALUE { IF(V(U4_DECIMAL1) >14.75 &
+  V(U4_DECIMAL1) < 15.5,344m,0)    }
C_U4_C79         U4_TIMER_RAMP 0  100n  
E_U4_ABM53         U4_N16780291 0 VALUE { IF(V(U4_DECIMAL1) >21.75 &
+  V(U4_DECIMAL1) < 22.5,602m,0)    }
E_U4_ABM34         U4_N16779369 0 VALUE { IF(V(U4_DECIMAL1) >2.75 &
+  V(U4_DECIMAL1) < 3.5,68m,0)    }
E_U4_SUM57         U4_N16779773 0 VALUE {V(U4_N16780296)+V(U4_N16780332)}
X_U4_U22         U4_Q3 U4_Q2 U4_Q1 U4_Q0 U4_N16781135 NAND4_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
E_U4_SUM45         U4_N16780056 0 VALUE {V(U4_N16779854)+V(U4_N16779878)}
X_U4_U28         U4_Q1 U4_D1_NET U4_N16780651 XOR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
E_U4_SUM31         U4_N16779391 0 VALUE {V(U4_N16779324)+V(U4_N16779340)}
V_U4_V45         U4_N16790370 0 5
V_V47         SET0 0 0Vdc
R_R2         0 FB  6.145MEG  
V_V48         N16557157 0 {FAST_MODE}
.ENDS TPS61170_TRANS
*$
.subckt Enable_U1_S2 1 2 3 4  
S_U1_S2         3 4 1 2 _U1_S2
RS_U1_S2         1 2 1G
.MODEL         _U1_S2 VSWITCH Roff=10e6 Ron=1.0 Voff=0.2 Von=0.8
.ends Enable_U1_S2
*$
.subckt Enable_U1_S1 1 2 3 4  
S_U1_S1         3 4 1 2 _U1_S1
RS_U1_S1         1 2 1G
.MODEL         _U1_S1 VSWITCH Roff=10e6 Ron=1.0 Voff=0.2 Von=0.8
.ends Enable_U1_S1
*$
.subckt Enable_U1_S3 1 2 3 4  
S_U1_S3         3 4 1 2 _U1_S3
RS_U1_S3         1 2 1G
.MODEL         _U1_S3 VSWITCH Roff=10e6 Ron=1.0 Voff=0.2 Von=0.8
.ends Enable_U1_S3
*$
.subckt GmIphase_U6_S26 1 2 3 4  
S_U6_S26         3 4 1 2 _U6_S26
RS_U6_S26         1 2 1G
.MODEL         _U6_S26 VSWITCH Roff=100e6 Ron=10m Voff=0.2 Von=0.8
.ends GmIphase_U6_S26
*$
.subckt ErrorAmp_U5_S2 1 2 3 4  
S_U5_S2         3 4 1 2 _U5_S2
RS_U5_S2         1 2 1G
.MODEL         _U5_S2 VSWITCH Roff=10e6 Ron=1.0 Voff=0.2 Von=0.8
.ends ErrorAmp_U5_S2
*$
.subckt Driver_U8_S30 1 2 3 4  
S_U8_S30         3 4 1 2 _U8_S30
RS_U8_S30         1 2 1G
.MODEL         _U8_S30 VSWITCH Roff=35e6 Ron=300m Voff=0.2 Von=0.8
.ends Driver_U8_S30
*$
.subckt Driver_U8_H1 1 2 3 4  
H_U8_H1         3 4 VH_U8_H1 86m
VH_U8_H1         1 2 0V
.ends Driver_U8_H1
*$
.subckt SoftStart_U4_S26 1 2 3 4  
S_U4_S26         3 4 1 2 _U4_S26
RS_U4_S26         1 2 1G
.MODEL         _U4_S26 VSWITCH Roff=100e6 Ron=10m Voff=0.2 Von=0.8
.ends SoftStart_U4_S26
*$
.SUBCKT AND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND2_BASIC_GEN
*$
.SUBCKT AND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND3_BASIC_GEN
*$
.SUBCKT AND4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH} &
+ V(D) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND4_BASIC_GEN
*$
.SUBCKT NAND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND2_BASIC_GEN
*$
.SUBCKT NAND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND3_BASIC_GEN
*$
.SUBCKT NAND4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH} &
+ V(D) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND4_BASIC_GEN
*$
.SUBCKT OR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR2_BASIC_GEN
*$
.SUBCKT OR3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR3_BASIC_GEN
*$
.SUBCKT OR4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR4_BASIC_GEN
*$
.SUBCKT NOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR2_BASIC_GEN
*$
.SUBCKT NOR3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR3_BASIC_GEN
*$
.SUBCKT NOR4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR4_BASIC_GEN
*$
.SUBCKT NOR5_BASIC_GEN A B C D E Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH} |
+ V(E) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR5_BASIC_GEN
*$
.SUBCKT NOR6_BASIC_GEN A B C D E F Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH} |
+ V(E) > {VTHRESH} |
+ V(F) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR6_BASIC_GEN
*$
.SUBCKT INV_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS INV_BASIC_GEN
*$
.SUBCKT XOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(A) > {VTHRESH}  ^  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS XOR2_BASIC_GEN
*$
.SUBCKT XNOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(A) > {VTHRESH}  ^  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS XNOR2_BASIC_GEN
*$
.SUBCKT MUX2_BASIC_GEN A B S Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(S) > {VTHRESH},  
+ V(B),V(A))}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS MUX2_BASIC_GEN
*$
.SUBCKT INV_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS INV_DELAY_BASIC_GEN
*$
.SUBCKT BUF_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS BUF_DELAY_BASIC_GEN
*$
.SUBCKT BUF_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS BUF_BASIC_GEN
*$
**Set has higher priority in this latch
.SUBCKT SRLATCHSHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(S) > {VTHRESH},5,IF(V(R)>{VTHRESH},-5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n 
.IC V(Qint) {VSS}
.ENDS SRLATCHSHP_BASIC_GEN
*$
**Reset has higher priority in this latch
.SUBCKT SRLATCHRHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,IF(V(S)>{VTHRESH},5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n
.IC V(Qint) {VSS}
.ENDS SRLATCHRHP_BASIC_GEN
*$
**Reset has higher priority in this latch and active low set and reset - basically NAND based SR latch
.SUBCKT SBRBLATCHRHP_BASIC_GEN SB RB Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(RB) < {VTHRESH},-5,IF(V(SB) < {VTHRESH},5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
.IC V(Qint) {VSS}
.ENDS SBRBLATCHRHP_BASIC_GEN
*$
**Reset has higher priority in this latch and active low set and reset - basically NAND based SR latch
.SUBCKT SBRBLATCHSHP_BASIC_GEN SB RB Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(SB) < {VTHRESH},5,IF(V(RB) < {VTHRESH},-5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
.IC V(Qint) {VSS}
.ENDS SBRBLATCHSHP_BASIC_GEN
*$
.SUBCKT DFFSBRB_SHPBASIC_GEN Q QB CLK D RB SB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
GQ 0 Qint VALUE = {IF(V(SB) < {VTHRESH},5,IF(V(RB)<{VTHRESH},-5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSBRB_SHPBASIC_GEN
*$
.SUBCKT DFFSR_SHPBASIC_GEN Q QB CLK D R S PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} 
GQ 0 Qint VALUE = {IF(V(S) > {VTHRESH},5,IF(V(R) > {VTHRESH},-5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSR_SHPBASIC_GEN
*$
.SUBCKT DFFSBRB_RHPBASIC_GEN Q QB CLK D RB SB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} 
GQ 0 Qint VALUE = {IF(V(RB) < {VTHRESH},-5,IF(V(SB)< {VTHRESH},5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 5
D_D11 0 Qint D_D1 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSBRB_RHPBASIC_GEN
*$
.SUBCKT DFFSR_RHPBASIC_GEN Q QB CLK D R S PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}  
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,IF(V(S) > {VTHRESH},5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSR_RHPBASIC_GEN
*$
.SUBCKT COMP_BASIC_GEN INP INM Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
E_ABM Yint 0 VALUE {IF (V(INP) > 
+ V(INM), {VDD},{VSS})}
R1 Yint Y 1
C1 Y 0 1n
.ENDS COMP_BASIC_GEN
*$
.subckt d_d 1 2
d1 1 2 dd
.model dd d
+ is=1e-015
+ n=0.01
+ tt=1e-011
.ends d_d
*$
.MODEL D_D1 D( IS=1e-15 TT=10p Rs=0.05 N=.1  )
*$

