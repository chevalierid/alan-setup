* REF4132 3.0V
*****************************************************************************
* (C) Copyright 2020 Texas Instruments Incorporated. All rights reserved.   
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.
** TI and its licensors and suppliers make no warranties, either expressed
** or implied, with respect to this model, including the warranties of
** merchantability or fitness for a particular purpose.  The model is
** provided solely on an "as is" basis.  The entire risk as to its quality
** and performance is with the customer
*****************************************************************************
*
* This model is subject to change without notice. Texas Instruments
* Incorporated is not responsible for updating this model.
*
*****************************************************************************
*
* Released by: Texas Instruments Inc.
* Part: REF4132 3.0V
* Date: 06/05/2020
* Model Type:  TRANSIENT
* Simulator: PSPICE
* Simulator Version: 17.4-2019
* Datasheet: SNAS794 â€“ June 2020
*
* Model Version: 1.00
*
*****************************************************************************
*$
.subckt REF4132_3V0 VIN EN VREF GND
E_U1_E4         VREF U1_N07140 U1_N07377 GND 1
X_U1_U4         U1_N02220 U1_N02234 DOUT AND2_BASIC_GEN_SAN_0 PARAMS:  VDD=1
+  VEE=0 VTH=0.5
E_U1_E2         U1_N06396 GND U1_N07742 GND 1
D_U1_D3         U1_N02234 U1_N02220 Dbreak 
D_U1_D4         U1_N07140 U1_N07133 Dbreak 
X_U1_U8         OUT2 OUTFINAL U1_N05935 AOL_0 
X_U1_U2         U1_N01371 VREF_DROPOUT U1_N02216 COMP_BASIC_GEN_1 PARAMS: 
+  VDD=1 VEE=0
C_U1_C5         GND OUT2  80n  TC=0,0 
C_U1_C4         GND U1_N02234  57.72m  TC=0,0 
E_U1_E3         U1_N06822 GND U1_N06460 GND 1
V_U1_V4         VREF_DROPOUT VDROPOUT 3
L_U1_L1         U1_N08272 U1_N08222  1meg  
X_U1_U5         ILOAD1 VDROPOUT DROPOUT_0 
X_U1_U16         DOUT GND GND VIN VCCS_IQ_0 
D_U1_D1         U1_N08075 GND Dbreak 
E_U1_E1         U1_N01371 GND VALUE { IF(V(U1_EN1)>0.5,V(VIN),0) }
X_U1_U1         EN U1_N00099 U1_N00201 U1_EN1 COMPHYS_BASIC_GEN_0 PARAMS: 
+  VDD=1 VSS=0 VTHRESH=0.5
R_U1_R1         U1_N02216 U1_N02220  1m TC=0,0 
X_U1_U15         VIN U1_N09764 PSR_0
X_U1_U10         U1_N06396 U1_N06460 vnse_0 PARAMS: 
E_U1_E5         U1_N21374 U1_N07742 U1_N08222 GND -1
R_U1_R2         U1_N02220 U1_N02234  10m TC=0,0 
I_U1_I2         U1_N07133 U1_N07140 DC 20m  
X_U1_U7         U1_N05383 GND ILOAD VCVS_LIMIT_0 
X_U1_U9         U1_N05935 OUTFINAL ILOAD VCCS_LIMIT_0 
X_U1_H2    OUTFINAL U1_N05127 ILOAD GND REF4132_3V0_U1_H2 
V_U1_V1         U1_N00099 GND 1.24
E_U1_E6         U1_N08272 GND VIN GND 0.638275u
R_U1_R4         EN U1_N08075  11.3meg TC=0,0 
R_U1_R3         U1_N06822 OUT2  1k TC=0,0 
V_U1_VHYST         U1_N00201 GND 50m
X_U1_H1    U1_N05127 U1_N07133 ILOAD1 GND REF4132_3V0_U1_H1 
C_U1_C6         U1_N09764 U1_N08222  1MEG  TC=0,0 
C_U1_C3         GND U1_N02220  1n  TC=0,0 
X_U1_U13         OUTFINAL VREF U1_N07377 COMP_BASIC_GEN_0 
E_U1_E7         U1_T1 GND VALUE { IF(V(DOUT)>0.5,(IF(TEMP<=150 & TEMP>=-55
+  ,(TEMP),0)),0) }
X_U1_U17          U1_T1 GND U1_N190432 U1_N05383 VDRIFT_0
E_U1_E8         U1_N21374 GND VALUE {
+  IF(V(DOUT)>0.5,((V(U1_N190432,GND)+216U)),0) }
.ends REF4132_3V0
*$
.subckt REF4132_3V0_U1_H2 1 2 3 4  
H_U1_H2         3 4 VH_U1_H2 1
VH_U1_H2         1 2 0V
.ends REF4132_3V0_U1_H2
*$
.subckt REF4132_3V0_U1_H1 1 2 3 4  
H_U1_H1         3 4 VH_U1_H1 1k
VH_U1_H1         1 2 0V
.ends REF4132_3V0_U1_H1
*$
.SUBCKT VDRIFT_0 IN+ IN- OUT+ OUT-
E_E1 OUT+ OUT- TABLE { (V(IN+,IN-)) }= (
+(-55,2.999892) (-52,2.999892) (-48,2.99989) (-42,2.999888) (-39.467,2.999885) (-38.282,2.999832)
+(-37.098,2.999814) (-36.111,2.999799) (-34.926,2.999782) (-33.939,2.999766) (-32.557,2.999753) (-31.372,2.999737) 
+(-29.99,2.999724) (-28.411,2.999712) (-26.634,2.999704) (-24.659,2.999702) (-22.883,2.999706) (-21.106,2.999714) 
+(-19.724,2.99972) (-18.144,2.999731) (-16.367,2.999741) (-14.788,2.999752) (-13.208,2.999762) (-11.826,2.999774) 
+(-10.247,2.999787) (-8.865,2.999799) (-7.285,2.999812) (-5.903,2.999824) (-4.324,2.999839) (-2.942,2.999851) 
+(-1.362,2.999861) (200M,2.999874) (1.797,2.999886) (3.376,2.999897) (4.956,2.999909) (6.535,2.99992) (7.917,2.999932) 
+(9.694,2.99994) (11.471,2.999947) (13.248,2.999955) (15.025,2.999963) (16.802,2.999967) (18.578,2.999973) 
+(20.355,2.999978) (22.33,2.999982) (24.107,2.999986) (26.081,2.999988) (28.055,2.99999) (30.03,2.99999) 
+(31.807,2.99999) (33.781,2.99999) (35.755,2.99999) (37.73,2.999988) (39.704,2.999986) (40.296,2.999986) 
+(42.27,2.999984) (44.245,2.999984) (46.219,2.999982) (47.996,2.999978) (49.97,2.999976) (51.747,2.999972) 
+(53.722,2.99997) (55.696,2.999966) (57.473,2.999963) (59.447,2.999961) (60.237,2.999961) (62.211,2.999959) 
+(64.186,2.999957) (65.962,2.999955) (67.937,2.999959) (69.714,2.999966) (71.491,2.999976) (73.268,2.999984) 
+(74.847,2.999995) (76.624,3.000003) (78.401,3.000013) (80.178,3.000024) (81.757,3.000034) (83.534,3.000043) 
+(85.114,3.000055) (86.693,3.000069) (88.075,3.000082) (89.457,3.000096) (90.642,3.000109) (91.826,3.000125) 
+(92.813,3.000142) (93.801,3.000159) (94.788,3.000175) (95.775,3.000192) (96.565,3.00021) (97.552,3.000227) 
+(98.342,3.000245) (99.329,3.000262) (100.118,3.000275) (101.106,3.000293) (102.093,3.000308) (103.277,3.000324) 
+(104.462,3.000339) (105.844,3.000355) (107.029,3.000368) (108.608,3.000382) (109.99,3.000395) (111.57,3.000407) 
+(113.149,3.000418) (114.729,3.000428) (116.308,3.00044) (117.887,3.000449) (119.467,3.000461) (120.059,3.000465) 
+(121.639,3.000474) (123.416,3.000486) (130,3.000486) (140,3.000486) (150,3.000486)
+)
.ENDS VDRIFT_0
*$
.SUBCKT PSR_0  VIN OUT1
R28         3 OUT1 180 
C28         3 OUT1 10N IC=0 
R27         OUT1 0 1 
C27         OUT1 0 1F IC=0 
EVCVS18     3 0 4 0  180
R26         5 4 180 
C26         5 4 10N IC=0 
R25         4 0 1 
C25         4 0 1F IC=0 
EVCVS17     5 0 6 0  180
R24         7 6 390 
C24         7 6 10N IC=0 
R23         6 0 1 
C23         6 0 1F IC=0 
EVCVS16     7 0 8 0  390
R22         9 8 390 
C22         9 8 10N IC=0 
R21         8 0 1 
C21         8 0 1F IC=0 
EVCVS15     9 0 10 0  390
C20         11 0 10N 
R20         12 11 1.3262K 
EVCVS14     12 0 13 0  1
R19         14 10 390 
C19         14 10 10N IC=0 
R18         10 0 1 
C18         10 0 1F IC=0 
EVCVS13     14 0 11 0  390
C17         13 0 10N 
R17         15 13 1.3262K 
EVCVS12     15 0 16 0  1
C16         16 0 10N 
R16         17 16 1.3262K 
EVCVS11     17 0 18 0  1
R15         19 18 7K 
C15         19 18 10N IC=0 
R14         18 0 1 
C14         18 0 1F IC=0 
EVCVS10     19 0 20 0  7K
R13         21 20 1.591549MEG 
C13         21 20 10N IC=0 
R12         20 0 1 
C12         20 0 7.524N IC=0 
EVCVS9      21 0 VIN 0  5.8532
.ENDS
*$
*VOLTAGE CONTROLLED SOURCE WITH LIMITS
.SUBCKT VCCS_LIMIT_0  VC+ VC- VIMON
ERES VC+ VC- VALUE = {1800*(V(VIMON) / SQRT((ABS(V(VIMON))/60000U)+1))}
.ENDS VCCS_LIMIT_0 
*$
.SUBCKT AOL_0  VP VN VO
R30         4 5 5.30516477 
C30         5 0 1U 
EVCVS20     4 0 6 0  1
EVCVS19     VO 0 7 0  1
EVCVS8      9 0 8 0  1
C11         7 0 1U 
R11         9 7 53.051647M 
R10         10 8 159.154943M 
C10         8 0 1U 
EVCVS7      10 0 11 0  1
C7          12 11 10N 
EVCVS4      12 0 5 0  318.3098862
R6          12 11 318.3098862 
R4          11 0 1 
C6          11 0  1.00000000000000E-0018 
EVCVS2      14 0 13 0  10.915494K
R8          14 6 10.915494K 
C9          14 6 10N 
R7          6 0 1 
C8          6 0  1.00000000000000E-0018 
C5          13 0 1U 
R3          15 13 2.2416K 
EVCVS1      15 0 VP VN  13.95214561K
.ENDS
*$
*VOLTAGE CONTROLLED SOURCE WITH LIMITS
.SUBCKT VCVS_LIMIT_0  VOUT+ VOUT- VIMON
*
E1 VOUT+ VOUT- VALUE={(IF(V(VIMON)<0,(120M*V(VIMON)+((100M*V(VIMON) / SQRT((ABS(V(VIMON))/60000U)+1)))),+
+(-16M*V(VIMON))+((130M*V(VIMON) / SQRT((ABS(V(VIMON))/60000U)+1)))))}
.ENDS VCVS_LIMIT_0 
*$
*TG IDEAL DIODE
.SUBCKT IDEAL_D_0  A C
D1 A C DNOM
.MODEL DNOM D (N=1.3 IS=1E-15)
.ENDS IDEAL_D_0 
*$
****
.SUBCKT COMP_BASIC_GEN_0  INP INM Y 
E_ABM 1 0 VALUE = {1E6*(V(INP)-V(INM))}
R1 1 Y 1M
C1 Y 0 1P
.ENDS COMP_BASIC_GEN_0 
*$
*TG IDEAL DIODE
.SUBCKT IDEAL_D_1  A C
D1 A C DNOM
.MODEL DNOM D (N=0.01 IS=1E-15)
.ENDS IDEAL_D_1 
*$
* VNSE - INPUT VOLTAGE NOISE IN NV/RT-HZ
.SUBCKT VNSE_0  1 2
* INPUT VARIABLES
* SET UP 1/F NOISE
* FLW = 1/F FREQUENCY IN HZ
.PARAM FLW=0.1
* NLF = VOLTAGE NOISE DENSITY AT 1/F FREQUENCY IN NV/RT(HZ)
.PARAM NLF=1930
* SET UP BROADBAND NOISE
* NVR = BROADBAND VOLTAGE NOISE DENSITY IN NV/RT(HZ)
.PARAM NVR=550
* CALCULATED VALUES
.PARAM GLF={PWR(FLW,0.25)*NLF/1164}
.PARAM RNV={1.184*PWR(NVR,2)}
.MODEL DVN D KF={PWR(FLW,0.5)/1E11} IS=1.0E-16
* CIRCUIT CONNECTIONS
I1 0 7 10E-3
I2 0 8 10E-3
D1 7 0 DVN
D2 8 0 DVN
E1 3 6 7 8 {GLF}
R1 3 0 1E9
R2 3 0 1E9
R3 3 6 1E9
E2 6 4 5 0 10
R4 5 0 {RNV}
R5 5 0 {RNV}
R6 3 4 1E9
R7 4 0 1E9
E3 1 2 3 4 1
.ENDS
*$
.SUBCKT VCCS_IQ_0  VC+ VC- VOUT+ VOUT-
.PARAM GAIN = 1E-6
GQ VOUT+ VOUT- VALUE ={IF(V(VC+)>0.5,(9.3E-17*(TEMP)**5 - 8E-15*(TEMP)**4 + 1.5E-13*(TEMP)**3 + 6.5E-11*(TEMP)**2 - 8.5E-09*(TEMP) + 7.24E-05),
+(-1.93E-19)*(TEMP)**6 + 5E-17*(TEMP)**5 - 2.21E-15*(TEMP)**4 - 7.9E-14*(TEMP)**3 + 6.2E-12*(TEMP)**2 + 5.2E-10*(TEMP) + 2.226E-06)}
.ENDS VCCS_IQ_0 
*$
.SUBCKT COMPHYS_BASIC_GEN_0  INP INM HYS OUT_0 PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
EIN INP1 INM1 INP INM 1 
EHYS INP1 INP2 VALUE { IF( V(1) > {VTHRESH},-V(HYS),0) }
EOUT OUT_0 0 VALUE { IF( V(INP2)>V(INM1), {VDD} ,{VSS}) }
R1 OUT_0 1 1
C1 1 0 5N
RINP1 INP1 0 1K
.ENDS COMPHYS_BASIC_GEN_0 
*$
.SUBCKT AND2_BASIC_GEN_SAN_0  IN1 IN2 Y PARAMS: VDD=1 VEE=0 VTH=0.5
E1 Y 0 VALUE ={(((VDD+VEE)/2)+ ((VDD-VEE)/2)*TANH((V(IN1,0)-VTH)*1E6))*(((VDD+VEE)/2)+ ((VDD-VEE)/2)*TANH((V(IN2,0)-VTH)*1E6))}
.ENDS AND2_BASIC_GEN_SAN_0 
*$
.SUBCKT COMP_BASIC_GEN_1  INP INM Y PARAMS: VDD=1 VEE=0 
E_ABM Y 0 VALUE = {((VDD+VEE)/2)+((VDD-VEE)/2)*TANH(10E12*(V(INP)-V(INM)))}
.ENDS COMP_BASIC_GEN_1 
*$
.SUBCKT DROPOUT_0  ILOAD VREF 
EDROP VREF 0 VALUE ={ IF(V(ILOAD)>1,(-122U*V(ILOAD)),(22.12M*V(ILOAD)+22.22M-1N))}  
.ENDS DROPOUT_0
*$
