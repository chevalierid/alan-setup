*$
* TPS54327
*****************************************************************************
* (C) Copyright 2015 Texas Instruments Incorporated. All rights reserved.                                            
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.
** TI and its licensors and suppliers make no warranties, either expressed
** or implied, with respect to this model, including the warranties of 
** merchantability or fitness for a particular purpose.  The model is
** provided solely on an "as is" basis.  The entire risk as to its quality
** and performance is with the customer
*****************************************************************************
*
* This model is subject to change without notice. Texas Instruments
* Incorporated is not responsible for updating this model.
*
*****************************************************************************
*
** Released by: WEBENCH Design Center, Texas Instruments Inc.
* Part: TPS54327
* Date: 28MAY2015
* Model Type: Transient
* Simulator: PSpice
* Simulator Version: 16.2.0.p001
* EVM Order Number: TPS54329EVM-056
* EVM Users Guide: SLVU488–October 2011
* Datasheet: SLVSAZ6A –SEPTEMBER 2011–REVISED MARCH 2012
*
* Model Version: Final 1.00
*
*****************************************************************************
*
* Updates:
*
* Final 1.00
* Release to Web.
*
*****************************************************************************
.SUBCKT TPS54329_TRANS VBST VIN SW GND VFB VREG5 EN SS PAD PARAMS: STEADY=0
.PARAM MODE=0
Rpad1 PAD GND 1m
Rpad2 PAD GND 1m
E_U1_ABM20         U1_N13170387 0 VALUE { if(V(SS)>0.765, 0.765,
+  V(SS))    }
G_U1_ABMII2         VREG5 SS VALUE { if(V(ENCIR)>0.5, {6u + MODE*10u},0)    }
X_U1_U9         SS VREG5 d_d1 PARAMS:
R_U1_R31 GND SS 1E11
E_U1_ABM21         N13136054 0 VALUE { if({STEADY}>0.5, 0.765, V(U1_N13170387))
+     }
G_U1_ABMII3         VREG5 SS VALUE { if(V(ENCIR)>0.5 & V(SS) > 1.96, {22u+
+  MODE*100u},0)    }
X_U1_S5    ENCIR GND SS GND SOFTSTART_U1_S5
X_S17    N13133969 SW VIN SW TPS54329_TRANS_S17
C_C7 SW GND 1p IC=0 TC=0,0
X_U10         N131666161 SW d_d1
X_U2_U575         ENCIR U2_DISCH BUF_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=.5 DELAY=0.5u
X_U2_S12    U2_DISCH GND VOINFO GND FAULTS_U2_S12
X_S18    N13133869 GND SW GND TPS54329_TRANS_S18
C_U5_C10 GND U5_RMP 4p IC=0 TC=0,0
C_U5_C11 GND U5_TIMEOCL 1p IC=0 TC=0,0
C_U5_C5 VOINFO GND 6p IC=0 TC=0,0
C_U5_C4 GND U5_TON 20p IC=0 TC=0,0
R_U5_R26 U5_LLO GND 1e15 TC=0,0
X_U5_U618         U5_OCLDIS U5_OCLDIS U5_ONS2 U5_N14703428 NAND3_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U5_U663         U5_LOW_READY U5_N15352750 BUF_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
R_U5_R29 GND U5_RMP 1e8 TC=0,0
X_U5_U632         U5_N15062348 U5_TBLNKB INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_U5_R11 U5_N15230907 U5_N15212175 17.3k TC=0,0
R_U5_R18 U5_N15352750 U5_N15352148 288.6002886 TC=0,0
R_U5_R17 U5_N153324501 U5_N15335338 14.43 TC=0,0
C_U5_C13 GND U5_ILIM_LESS 1n IC=0 TC=0,0
E_U5_ABM46         U5_RAMP 0 VALUE { if(V(ENCIR)>0.5,
+ LIMIT((V(U5_RMPIN)-0.01),-10m,5m),0)   }
R_U5_R14 U5_N14704200 U5_N15256061 7.215 TC=0,0
X_U5_U652         U5_ON U5_ON1 U5_HI_READY NAND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U5_U582         U5_N14705922 U5_ZC U5_N14705582 OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U5_U658         U5_BLNKM U5_LOOPB U5_N14703638 OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
G_U5_ABM2I1         VREG5 U5_TON VALUE { if(V(U5_DQOS)<0.25, V(SW)/80K,0)    }
X_U5_U646         U5_DRH1 U5_DRH2 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
E_U5_E12         U5_SWIN GND SW GND 1
R_U5_R30 GND U5_N15173084 1e8 TC=0,0
X_U5_U16         VREG5 VBST d_d1 PARAMS:
R_U5_R8 U5_ILIM_LESS U5_N15212175 1.443 TC=0,0
X_U5_U616         U5_N14703638 U5_N14703638 U5_ONS1 U5_N14703724
+  NAND3_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
V_U5_V82         U5_N14704906 U5_VO_TON 70m
E_U5_ABM48         U5_VOINFO1 0 VALUE { V(VOINFO) * (8/9)    }
X_U5_U633         U5_REFEFF U5_VIM U5_LUPB COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
R_U5_R36 U5_N14705626 GND 528k TC=0,0
X_U5_U13         U5_N153324501 U5_N15062348 d_d1 PARAMS:
X_U5_U579         U5_BLNKM U5_OCLHI U5_OCLDIS OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_U5_R34 U5_N14705578 GND 80k TC=0,0
E_U5_ABM49         U5_VO_TON 0 VALUE { if( V(U5_ILIM_LESS)<0.5,
+ V(U5_VOINFO1), 0.33)   }
X_U5_S6    U5_DRH2 GND N13133969 SW DCAP_U5_S6
X_U5_U11         U5_N15279718 U5_N14705142 d_d1 PARAMS:
E_U5_ABM47         U5_START_DEL 0 VALUE { if(V(U5_TIMEOCL) >0.5,1,0)    }
X_U5_U624         U5_TBLNK U5_ONG ENCIR U5_N14705168 NAND3_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
G_U5_ABM2I2         U5_TON GND VALUE { if(V(U5_DQOS) >.75, V(U5_TON)/200,0)
+  }
X_U5_U645         U5_DRL1 U5_DRL2 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_U5_R19 U5_N15365314 U5_DRVHPREBIAS 14.43 TC=0,0
X_U5_U643         U5_LOW_READY U5_N150688440 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U5_U656         U5_DRH1 U5_HI_DEL U5_N14703510 NAND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U5_U657         U5_DRVOFF U5_HI_READY U5_HI_READY U5_HI_READY U5_DRH1
+  NOR4_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U5_U634         U5_OCLTHR U5_LLO U5_OCLHI COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
X_U5_U576         U5_DRVHPREBIAS U5_N14706850 U5_N14706924 U5_PREBIAS
+  srlatchrhp_basic_gen PARAMS: VDD=1 VSS=0 VTHRESH=.5
X_U5_S8    U5_DRL2 GND N13133869 GND DCAP_U5_S8
C_U5_C18 GND U5_N15352148 1n IC=0 TC=0,0
R_U5_R9 U5_TIMEOCL U5_N14786773 1Meg TC=0,0
C_U5_C17 GND U5_N15062348 1n IC=0 TC=0,0
E_U5_ABM35         U5_OCLTHR 0 VALUE { if(V(U5_ILIM_LESS)<0.5, -0.3,-.25)    }
R_U5_R28 U5_N14704796 GND 1e15 TC=0,0
R_U5_R13 U5_N15279718 U5_N15280206 2.886 TC=0,0
X_U5_U640         U5_N14705142 U5_DRVHPREBIAS U5_HI_DEL AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U5_U653         U5_N150688440 U5_N14704200 U5_ON1 NOR2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U5_S12    U5_QRMP GND U5_RMP GND DCAP_U5_S12
R_U5_R31 GND U5_QRMP 1e8 TC=0,0
E_U5_ABM37         U5_ONS3 0 VALUE { if(V(VOINFO) >7,0,0)    }
C_U5_C19 GND U5_N15365314 1n IC=0 TC=0,0
X_U5_U625         U5_TOS U5_TOS U5_N14705168 U5_TBLNK NAND3_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
C_U5_C12 U5_N14705662 GND 10p IC=0 TC=0,0
R_U5_R15 U5_N152590211 U5_N15256061 2.886 TC=0,0
X_U5_U644         U5_HI_READY U5_N14703778 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U5_U636         U5_N15365314 U5_N15373888 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U5_U654         U5_N14703778 U5_HI_DEL U5_LOW_DELAY NOR2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
E_U5_ABM3         U5_DRVHPREBIAS 0 VALUE { if(V(N13133969)>5,1,0)    }
E_U5_E11         U5_N14786773 GND U5_OCLHI GND 1
X_U5_U642         ENCIR U5_DRVOFF INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_U5_R23 GND U5_TON 10Meg TC=0,0
C_U5_C8 GND U5_N14738075 4.6p IC=0 TC=0,0
X_U5_U647         U5_N14704906 U5_TON U5_N14705078 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
R_U5_R25 VREG5 GND 1e15 TC=0,0
E_U5_E10         VOINFO GND U5_N14738087 GND 1
R_U5_R40 GND U5_N14706850 1Meg
X_U5_U649         U5_N14705582 U5_TBLNKB U5_BLNKM NAND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
R_U5_R41 SW U5_N14705662 200 TC=0,0
X_U5_U628         U5_LOW_DELAY U5_ONB U5_ZC U5_LOW_READY NAND3_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
R_U5_R6 U5_N14738075 U5_N14738063 1800k TC=0,0
G_U5_G1         U5_VIM GND U5_N14705578 U5_N14705626 1u
X_U5_U627         U5_ON U5_TOS ENCIR U5_N14704342 NAND3_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U5_U648         U5_ONS3 U5_ONS1 U5_ONS2 U5_TBLNK U5_ONSET OR4_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U5_U581         U5_N14705656 U5_DQOS U5_TOS OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
C_U5_C9 GND U5_N14738087 4.6p IC=0 TC=0,0
E_U5_ABM9         U5_LLO 0 VALUE { if( V(U5_N14704796)>0.5,
+ V(SW),
+ V(GND) )  }
C_U5_C16 GND U5_N14704200 1n IC=0 TC=0,0
X_U5_U641         U5_ON U5_ONB INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
R_U5_R35 U5_INT U5_N14705626 220k TC=0,0
E_U5_ABM28         U5_N14704796 0 VALUE { if( V(U5_N14705662)<0.5
+ & V(U5_ON)<0.5 ,1,0)   }
X_U5_U631         U5_LUPB U5_LOOPB INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U5_U14         U5_N15352750 U5_N15352148 d_d1 PARAMS:
C_U5_C6 U5_N14705578 GND 0.8p IC=0 TC=0,0
R_U5_R37 GND U5_N14706924 1Meg
R_U5_R38 U5_VIM GND 1e11 TC=0,0
R_U5_R7 U5_N14738087 U5_N14738075 1800k TC=0,0
E_U5_ABM15         U5_REFEFF 0 VALUE { V(N13136054)
+ + V(U5_RAMP)   }
X_U5_U655         U5_LOW_READY U5_PREBIAS U5_SSENDSET U5_SSENDSET U5_DRL1
+  NOR4_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U5_U622         ENCIR ENCIR U5_N14703488 U5_SSENDSET NAND3_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U5_U651         U5_HI_READY U5_DQOS BUF_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
X_U5_U635         U5_N14704200 U5_N14705922 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_U5_R27 SW U5_INT 572k TC=0,0
X_U5_U664         U5_LOW_READY U5_N15352148 U5_ONG OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
E_U5_E7         U5_RMPIN GND U5_RMP GND 1
G_U5_ABMII1         VREG5 U5_RMP VALUE { if(V(ENCIR)>0.5, 28n,0)    }
C_U5_C14 GND U5_N14738063 5.4p IC=0 TC=0,0
C_U5_C15 GND U5_N14705142 1n IC=0 TC=0,0
X_U5_U650         ENCIR U5_N14705078 U5_N14705656 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U5_U660         N13133869 U5_N15256061 BUF_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
R_U5_R12 U5_N14705142 U5_N15280206 72.15 TC=0,0
X_U5_U617         U5_N14703724 U5_TBLNKB ENCIR U5_ONS1 NAND3_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U5_U661         U5_N14703778 U5_N15280206 BUF_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
R_U5_R16 U5_N15062348 U5_N15335338 43.29 TC=0,0
X_U5_U662         U5_TBLNK U5_N15335338 BUF_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
E_U5_E8         U5_N14705832 GND VFB GND 1
R_U5_R10 U5_N14738063 U5_SWIN 572k TC=0,0
X_U5_U659         U5_START_DEL U5_N15212175 BUF_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
X_U5_S5    U5_DRH1 GND VBST N13133969 DCAP_U5_S5
X_U5_U637         U5_QRMP U5_N15173084 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U5_U623         U5_SSENDSET U5_N14703510 0 U5_N14703488 NAND3_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
R_U5_R33 VOINFO U5_N14705578 10k TC=0,0
X_U5_U665         U5_DRVHPREBIAS U5_N15373888 U5_QRMP AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
R_U5_R32 U5_VIM U5_N14705832 2.8k TC=0,0
X_U5_U619         U5_N14703428 U5_TBLNKB ENCIR U5_ONS2 NAND3_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U5_S7    U5_DRL1 GND VREG5 N13133869 DCAP_U5_S7
X_U5_U10         U5_N15230907 U5_ILIM_LESS d_d1 PARAMS:
X_U5_U626         U5_ONSET U5_ONSET U5_N14704342 U5_ON NAND3_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U5_U12         U5_N152590211 U5_N14704200 d_d1 PARAMS:
V_V2         N131690981 SW -250m
X_U9         N131690981 VIN d_d1 PARAMS:
V_V1         N131666161 GND -250m
X_u6_U15          VREG5 u6_V5INOK COMP_HYS2 PARAMS:  TH=3.585 HYS=.33
C_u6_C5 GND u6_REG5 100p
E_u6_ABM19         ENCIR 0 VALUE { if( V(u6_ENSW)>0.5
+ & V(u6_V5INOK)>0.5,1,0)   }
E_u6_ABM20         u6_ENVREG5 0 VALUE { if( V(u6_ENSW)>0.5
+ & V(VIN)>3.5,LIMIT(V(VIN),0,5.5),0)   }
E_u6_ABM17         u6_ENSW 0 VALUE { if(V(EN)>1.6,1,0)    }
X_u6_S1    u6_ENVREG5 GND VREG5 GND LDO_u6_S1
G_u6_G2         u6_REG5 VREG5 TABLE { V(u6_REG5, VREG5) }
+ ( (-10,-12m)(-1m,-10m)(0,0)(1m,60m)(10,70m) )
C_u6_C1 GND EN 1p IC=0 TC=0,0
R_u6_R4 u6_REG5 u6_ENVREG5 1
C_C8 VIN SW 1p IC=0 TC=0,0
V_VZC U5_ZC 0 5
.ENDS TPS54329_TRANS
*$
.subckt SOFTSTART_U1_S5 1 2 3 4
S_U1_S5         3 4 1 2 _U1_S5
RS_U1_S5 1 2 1G
.MODEL         _U1_S5 VSWITCH Roff=1e11 Ron=2.5k Voff=.75 Von=.25
.ends SOFTSTART_U1_S5
*$
.subckt TPS54329_TRANS_S17 1 2 3 4
S_S17         3 4 1 2 _S17
RS_S17 1 2 1G
.MODEL         _S17 VSWITCH Roff=1e8 Ron=100m Voff=1 Von=2
.ends TPS54329_TRANS_S17
*$
.subckt FAULTS_U2_S12 1 2 3 4
S_U2_S12         3 4 1 2 _U2_S12
RS_U2_S12 1 2 1G
.MODEL         _U2_S12 VSWITCH Roff=1e11 Ron=50 Voff=.6 Von=.4
.ends FAULTS_U2_S12
*$
.subckt TPS54329_TRANS_S18 1 2 3 4
S_S18         3 4 1 2 _S18
RS_S18 1 2 1G
.MODEL         _S18 VSWITCH Roff=1e8 Ron=74m Voff=1 Von=3
.ends TPS54329_TRANS_S18
*$
.subckt DCAP_U5_S6 1 2 3 4
S_U5_S6         3 4 1 2 _U5_S6
RS_U5_S6 1 2 1G
.MODEL         _U5_S6 VSWITCH Roff=1e8 Ron=.9 Voff=.25 Von=.75
.ends DCAP_U5_S6
*$
.subckt DCAP_U5_S8 1 2 3 4
S_U5_S8         3 4 1 2 _U5_S8
RS_U5_S8 1 2 1G
.MODEL         _U5_S8 VSWITCH Roff=1e8 Ron=.9 Voff=.25 Von=.75
.ends DCAP_U5_S8
*$
.subckt DCAP_U5_S12 1 2 3 4
S_U5_S12         3 4 1 2 _U5_S12
RS_U5_S12 1 2 1G
.MODEL         _U5_S12 VSWITCH Roff=1e11 Ron=1 Voff=.25 Von=.75
.ends DCAP_U5_S12
*$
.subckt DCAP_U5_S5 1 2 3 4
S_U5_S5         3 4 1 2 _U5_S5
RS_U5_S5 1 2 1G
.MODEL         _U5_S5 VSWITCH Roff=1e8 Ron=3 Voff=.25 Von=.75
.ends DCAP_U5_S5
*$
.subckt DCAP_U5_S7 1 2 3 4
S_U5_S7         3 4 1 2 _U5_S7
RS_U5_S7 1 2 1G
.MODEL         _U5_S7 VSWITCH Roff=1e8 Ron=3 Voff=.25 Von=.75
.ends DCAP_U5_S7
*$
.subckt LDO_u6_S1 1 2 3 4
S_u6_S1         3 4 1 2 _u6_S1
RS_u6_S1 1 2 1G
.MODEL         _u6_S1 VSWITCH Roff=1e8 Ron=100 Voff=3.6 Von=3.4
.ends LDO_u6_S1
*$
.SUBCKT AND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND2_BASIC_GEN
*$
.SUBCKT AND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND3_BASIC_GEN
*$
.SUBCKT AND4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH} &
+ V(D) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND4_BASIC_GEN
*$
.SUBCKT NAND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND2_BASIC_GEN
*$
.SUBCKT NAND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND3_BASIC_GEN
*$
.SUBCKT NAND4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH} &
+ V(D) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND4_BASIC_GEN
*$
.SUBCKT OR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR2_BASIC_GEN
*$
.SUBCKT OR3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR3_BASIC_GEN
*$
.SUBCKT OR4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR4_BASIC_GEN
*$
.SUBCKT NOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR2_BASIC_GEN
*$
.SUBCKT NOR3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR3_BASIC_GEN
*$
.SUBCKT NOR4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR4_BASIC_GEN
*$
.SUBCKT NOR5_BASIC_GEN A B C D E Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_ABMGATE YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH} |
+ V(E) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR5_BASIC_GEN
*$
.SUBCKT NOR6_BASIC_GEN A B C D E F Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_ABMGATE YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH} |
+ V(E) > {VTHRESH} |
+ V(F) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR6_BASIC_GEN
*$
.SUBCKT INV_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} ,
+ {VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS INV_BASIC_GEN
*$
.SUBCKT XOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_ABMGATE  YINT 0 VALUE {{IF(V(A) > {VTHRESH}  ^
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS XOR2_BASIC_GEN
*$
.SUBCKT XNOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_ABMGATE  YINT 0 VALUE {{IF(V(A) > {VTHRESH}  ^
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS XNOR2_BASIC_GEN
*$
.SUBCKT MUX2_BASIC_GEN A B S Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_ABMGATE  YINT 0 VALUE {{IF(V(S) > {VTHRESH},
+ V(B),V(A))}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS MUX2_BASIC_GEN
*$
.SUBCKT INV_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} ,
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} ,
+ {VSS},{VDD})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS INV_DELAY_BASIC_GEN
*$
.SUBCKT BUF_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} ,
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} ,
+ {VDD},{VSS})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS BUF_DELAY_BASIC_GEN
*$
.SUBCKT BUF_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} ,
+ {VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS BUF_BASIC_GEN
*$
.SUBCKT SRLATCHSHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5
GQ 0 Qint VALUE = {IF(V(S) > {VTHRESH},5,IF(V(R)>{VTHRESH},-5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS}
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1
Cdummy1 Q 0 1n
Cdummy2 QB 0 1n
.IC V(Qint) {VSS}
.MODEL D_D1 D( IS=1e-15 TT=10p Rs=0.05 N=.1 )
.ENDS SRLATCHSHP_BASIC_GEN
*$
.SUBCKT SRLATCHRHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,IF(V(S)>{VTHRESH},5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS}
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1
Cdummy1 Q 0 1n
Cdummy2 QB 0 1n
.IC V(Qint) {VSS}
.MODEL D_D1 D( IS=1e-15 TT=10p Rs=0.05 N=.1 )
.ENDS SRLATCHRHP_BASIC_GEN
*$
.SUBCKT SBRBLATCHRHP_BASIC_GEN SB RB Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5
GQ 0 Qint VALUE = {IF(V(RB) < {VTHRESH},-5,IF(V(SB) < {VTHRESH},5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS}
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1
.IC V(Qint) {VSS}
.MODEL D_D1 D( IS=1e-15 TT=10p Rs=0.05 N=.1 )
.ENDS SBRBLATCHRHP_BASIC_GEN
*$
.SUBCKT SBRBLATCHSHP_BASIC_GEN SB RB Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5
GQ 0 Qint VALUE = {IF(V(SB) < {VTHRESH},5,IF(V(RB) < {VTHRESH},-5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS}
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1
.IC V(Qint) {VSS}
.MODEL D_D1 D( IS=1e-15 TT=10p Rs=0.05 N=.1 )
.ENDS SBRBLATCHSHP_BASIC_GEN
*$
.SUBCKT DFFSBRB_SHPBASIC_GEN Q QB CLK D RB SB PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
GQ 0 Qint VALUE = {IF(V(SB) < {VTHRESH},5,IF(V(RB)<{VTHRESH},-5, IF(V(CLKint)> {VTHRESH},
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS}
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1
Cdummy1 Q 0 1nF
Cdummy2 QB 0 1nF
.IC V(Qint) {VSS}
.MODEL D_D1 D( IS=1e-15 TT=10p Rs=0.05 N=.1 )
.ENDS DFFSBRB_SHPBASIC_GEN
*$
.SUBCKT DFFSR_SHPBASIC_GEN Q QB CLK D R S PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
GQ 0 Qint VALUE = {IF(V(S) > {VTHRESH},5,IF(V(R) > {VTHRESH},-5, IF(V(CLKint)> {VTHRESH},
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS}
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1
Cdummy1 Q 0 1nF
Cdummy2 QB 0 1nF
.IC V(Qint) {VSS}
.MODEL D_D1 D( IS=1e-15 TT=10p Rs=0.05 N=.1 )
.ENDS DFFSR_SHPBASIC_GEN
*$
.SUBCKT DFFSBRB_RHPBASIC_GEN Q QB CLK D RB SB PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
GQ 0 Qint VALUE = {IF(V(RB) < {VTHRESH},-5,IF(V(SB)< {VTHRESH},5, IF(V(CLKint)> {VTHRESH},
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 5
D_D11 0 Qint D_D1
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1
Cdummy1 Q 0 1nF
Cdummy2 QB 0 1nF
.IC V(Qint) {VSS}
.MODEL D_D1 D( IS=1e-15 TT=10p Rs=0.05 N=.1 )
.ENDS DFFSBRB_RHPBASIC_GEN
*$
.SUBCKT DFFSR_RHPBASIC_GEN Q QB CLK D R S PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,IF(V(S) > {VTHRESH},5, IF(V(CLKint)> {VTHRESH},
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS}
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1
Cdummy1 Q 0 1nF
Cdummy2 QB 0 1nF
.IC V(Qint) {VSS}
.MODEL D_D1 D( IS=1e-15 TT=10p Rs=0.05 N=.1 )
.ENDS DFFSR_RHPBASIC_GEN
*$
.SUBCKT ONE_SHOT IN OUT
+ PARAMs:  T=100
S_S1         MEAS 0 RESET2 0 S1
E_ABM1         CH 0 VALUE { if( V(IN)>0.5 | V(OUT)>0.5,1,0)    }
R_R2 RESET2 RESET 0.1
E_ABM3         OUT 0 VALUE { if( V(MEAS)<0.5 & V(CH)>0.5,1,0)    }
R_R1 MEAS CH {T}
C_C2 0 RESET2 1.4427n
C_C1 0 MEAS 1.4427n
E_ABM2         RESET 0 VALUE { if(V(CH)<0.5,1,0)    }
.MODEL         S1 VSWITCH Roff=1e9 Ron=1.0 Voff=0.25V Von=0.75V
.ENDS ONE_SHOT
*$
.SUBCKT OP_AMP P M OUT
+ PARAMs:  Hlimit=5 Rin=10Meg BW=18Meg DC_Gain=100 Rout=100 Llimit=0 SRP=1 SRM=1
R_Rin P M {Rin}
E_E1          5 0 M P {-Gain}
E_LIMIT2      6 0 VALUE {LIMIT(V(5), {-Abs(SRM)*Ca*1Meg+V(1)/Ra},
+                 {SRP*Ca*1Meg+V(1)/Ra})}
G_G2          1 0 6 0 -1
R_Ra 0 1 {Ra}
C_Ca 0 1 {Ca}
E_LIMIT1      2 0 VALUE {LIMIT(V(1),{Llimit},{Hlimit})}
V_VL          3 0 {Llimit+200m}
V_VH          4 0 {Hlimit-200m}
D_D1          3 1 Dideal
D_D2          1 4 Dideal
R_Rout OUT 2 {Rout}
.model Dideal D Is=1e-10 Cjo=.01pF Rs=1m  N=1
.PARAM  Ra=1k   Ca={exp(DC_gain*log(10)/20)/(2*3.14159*BW*Ra)}
+ Gain={exp(DC_gain*log(10)/20)/Ra}
.ENDS OP_AMP
*$
.SUBCKT COMP_BASIC_GEN INP INM Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
E_ABM Yint 0 VALUE {IF (V(INP) >
+ V(INM), {VDD},{VSS})}
R1 Yint Y 1
C1 Y 0 1n
.ENDS COMP_BASIC_GEN
*$
.SUBCKT COMPHYS_BASIC_GEN INP INM HYS OUT PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
EIN INP1 INM1 INP INM 1
EHYS INP1 INP2 VALUE { IF( V(1) > {VTHRESH},-V(HYS),0) }
EOUT OUT 0 VALUE { IF( V(INP2)>V(INM1), {VDD} ,{VSS}) }
R1 OUT 1 1
C1 1 0 5n
RINP1 INP1 0 1K
.ENDS COMPHYS_BASIC_GEN
*$
.SUBCKT COMPHYS2_BASIC_GEN INP INM HYS OUT PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
+ T=10
EIN INP1 INM1 INP INM 1
EHYS INM2 INM1 VALUE { IF( V(1) > {VTHRESH},-V(HYS)/2,V(HYS)/2) }
EOUT OUT 0 VALUE { IF( V(INP1)>V(INM2), {VDD} ,{VSS}) }
R1 OUT 1 1
C1 1 0 {T*1e-9}
RINP1 INP1 0 10K
RINM2 INM2 0 10K
.ENDS COMPHYS2_BASIC_GEN
*$
.SUBCKT CESR IN OUT
+ PARAMs:  C=100u ESR=0.01 X=2 IC=0
C	IN 1 {C*X} IC={IC}
RESR	1 OUT {ESR/X}
.ENDS CESR
*$
.SUBCKT LDCR IN OUT
+ PARAMs:  L=1u DCR=0.01 IC=0
L	IN 1  {L} IC={IC}
RDCR	1 OUT {DCR}
.ENDS LDCR
*$
.SUBCKT D_D1 1 2
D1 1 2 DD1
.MODEL DD1 D( IS=1e-15 TT=10p Rs=0.05 N=.1 )
.ENDS D_D1
*$
.SUBCKT COMP_HYS2 INP OUT
+ PARAMs:  TH=.5 HYS=0.1
EIN INP1 0 INP 0 1
EHYS INP1 INP2 VALUE { IF( V(1)>0.5,-(HYS)/2,HYS/2) }
EOUT OUT 0 VALUE { IF( V(INP2)>TH,1,0) }
R1 OUT 1 1
C1 1 0 1n
RINP1 INP1 0 10K
.ends COMP_HYS2
*$