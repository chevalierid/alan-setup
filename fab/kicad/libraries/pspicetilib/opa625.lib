* OPA625 - Rev. A
* Created by Sean Cashin; 2021-08-10
* Created with Green-Williams-Lis Current Sense Amp Macro-model Architecture
* Copyright 2021 by Texas Instruments Corporation
******************************************************
* MACRO-MODEL SIMULATED PARAMETERS:
******************************************************
* AC PARAMETERS
**********************
* CLOSED-LOOP OUTPUT IMPEDANCE VS. FREQUENCY (Zout vs. Freq.)
* CLOSED-LOOP GAIN AND PHASE VS. FREQUENCY  WITH RL, CL EFFECTS (Acl vs. Freq.)
* COMMON-MODE REJECTION RATIO VS. FREQUENCY (CMRR vs. Freq.)
* POWER SUPPLY REJECTION RATIO VS. FREQUENCY (PSRR vs. Freq.)
* INPUT VOLTAGE NOISE DENSITY VS. FREQUENCY (en vs. Freq.)
**********************
* DC PARAMETERS
**********************
* INPUT COMMON-MODE VOLTAGE RANGE (Vcm)
* GAIN ERROR (Eg)
* INPUT BIAS CURRENT VS. INPUT COMMON-MODE VOLTAGE (Ib vs. Vcm)
* INPUT OFFSET VOLTAGE VS. TEMPERATURE (Vos vs. Temp)
* OUTPUT VOLTAGE SWING vs. OUTPUT CURRENT (Vout vs. Iout)
* SHORT-CIRCUIT OUTPUT CURRENT (Isc)
* QUIESCENT CURRENT (Iq)
**********************
* TRANSIENT PARAMETERS
**********************
* SLEW RATE (SR)
* SETTLING TIME VS. CAPACITIVE LOAD (ts)
* OVERLOAD RECOVERY TIME (tor)
******************************************************
.subckt OPA625 INP INM OUT MODE VCC VEE
******************************************************
C_C1         MID HGCAP  6E-9   
C_C10         N59190 ZOHDIN  150E-9   
C_C11         ZOLPOUT ZOLPIN  200E-12   
C_C12         N142723 ZOLPIN  22.6E-6   
C_C13         MID LPCAP  16E-9   
C_C14         MID AOLLPOUT  0.25E-9   
C_C17         MID AOLHDOUT  1.5E-9   
C_C5         CMRR N43675  16E-9   
C_C6         PSRRM N46608  660E-12   
C_C7         PSRRP N48157  660E-12   
C_C8         ZOHDOUT ZOHDIN  50E-12   
C_C9         N59094 ZOHDIN  9E-6   
C_CINDIFF         INM INP  1.2E-12   
C_CINM         MID INM  1.5E-12   
C_CINM2         0 PREMID  1E-3   
C_CINP         INP MID  1.5E-12   
E_E3         MID 0 PREMID 0 1
E_E4         ZOHDIN MID AOLHDOUT MID 1
E_E5         ZOLPIN MID AOLLPOUT MID 1
G_G10         VCC_CLP VEE_B VIMON 0 10
G_G11         VEE_CLP VCC VCC VEE 1
G_G12         VEE_CLP VCC 0 VIMON -4
G_G13         LOWPOWERAOL MID AOLIN MID -0.1
G_G15         AOLLPOUT MID LPCAP MID -1
G_G16         N407513 MID N407365 MID 1
G_G17         VEE MID N407583 MID -1
G_G18         N407365 MID VIMON MID -1
G_G19         N407583 MID MID VIMON -1
G_G2         HGAOL MID AOLIN MID -4
G_G3         AOLHDOUT MID HGCAP MID -1
G_G4         VCC_B 0 VCC 0 -1
G_G5         VEE_B 0 VEE 0 -1
G_G6         N43675 MID INP MID -0.18
G_G7         N46608 MID VEE_B MID -0.415
G_G8         N48157 MID VCC_B MID -0.415
G_G9         VCC_CLP VEE_B VCC VEE_B -1
G_GCMRR         N30218 N30236 CMRR MID 1E-3
G_GPSRR         N30400 N30396 PSRRP PSRRM 1E-3
I_IBM         INM MID DC 5.7E-6
I_IBP         INP MID DC 5.7E-6
I_IQ1         VCC N391223 DC 1.726E-3  
I_IQ2         VCC VEE DC 225E-6
L_L2         OM ZOHDOUT  51E-9
L_L3         N142729 ZOLPOUT  1.7E-6
R_R12         N73683 INM R_NOISELESS 1E-3
R_R13         MID N43675 R_NOISELESS 1
R_R14         PSRRM N46608 R_NOISELESS 1E6
R_R15         MID N46608 R_NOISELESS 1
R_R16         MID PSRRM R_NOISELESS 2.41
R_R17         PSRRP N48157 R_NOISELESS 1E6
R_R18         MID N48157 R_NOISELESS 1
R_R19         MID PSRRP R_NOISELESS 2.41
R_R2         MID CMRR R_NOISELESS 0.1
R_R20         ZOHDOUT ZOHDIN R_NOISELESS 540
R_R21         OM N59094 R_NOISELESS 2
R_R22         OM N59190 R_NOISELESS 2
R_R23         ZOLPOUT ZOLPIN R_NOISELESS 700
R_R24         N142729 N142723 R_NOISELESS 6.4
R_R25         ZOLPOUT N142729 R_NOISELESS 150
R_R28         MID AOLLPOUT R_NOISELESS 1
R_R3         MID AOLHDOUT R_NOISELESS 1
R_R31         VCC N407513 R_NOISELESS 1E-3
R_R5         CMRR N43675 R_NOISELESS 10E3
R_R6         ZOHDOUT OM R_NOISELESS 11
R_R7         N30218 N30236 R_NOISELESS 1E3
R_R8         N30396 N30218 R_NOISELESS 1E-3
R_R9         N30400 N30396 R_NOISELESS 1E3
R_RINM         MID INM R_NOISELESS 47E6
R_RINM1         0 VCC_B R_NOISELESS 1  
R_RINM3         PREMID VCC_B R_NOISELESS 1E3  
R_RINM4         0 PREMID R_NOISELESS 1E9
R_RINM5         VEE_B PREMID R_NOISELESS 1E3
R_RINM7         0 VEE_B R_NOISELESS 1
R_RINP         INP MID R_NOISELESS 47E6
R_RIQ         N391223 VCC R_NOISELESS 1E6
R_RIQ3         VEE VCC R_NOISELESS 115E3
V_VCM_MAX         N73741 VCC_B -1.15
V_VCM_MIN         N189599 VEE_B 0
V_VOS         N30236 N73334 15.5E-6
X_H3    PREOUT OUT VIMON 0 SCHEMATIC1_H3_OPA625 
X_S1    OUT VCC_CLP HGAOL MID SCHEMATIC1_S1_OPA625 
X_S11    VIMON 0 VCC_CLP VEE_B SCHEMATIC1_S11_OPA625 
X_S12    0 VIMON VEE_CLP VCC SCHEMATIC1_S12_OPA625 
X_S17    MODE MID PREOUT ZOLPOUT SCHEMATIC1_S17_OPA625 
X_S18    MODE MID ZOHDOUT PREOUT SCHEMATIC1_S18_OPA625 
X_S2    VEE_CLP OUT HGAOL MID SCHEMATIC1_S2_OPA625 
X_S27    OUT VCC_CLP LOWPOWERAOL MID SCHEMATIC1_S27_OPA625 
X_S28    VEE_CLP OUT LOWPOWERAOL MID SCHEMATIC1_S28_OPA625 
X_S29    MODE VEE VEE N391223 SCHEMATIC1_S29_OPA625 
X_S30    VIMON MID N407365 MID SCHEMATIC1_S30_OPA625 
X_S31    MID VIMON N407583 MID SCHEMATIC1_S31_OPA625 
X_U6         MID N73334 FEMT_OPA625
X_U7         MID INM FEMT_OPA625
X_U8         INP N73334 VNSE_OPA625
X_U9         N30400 N73683 MID AOLIN N73741 N189599 VCM_CLAMP_OPA625
X_W2    HGAOL N27923 N27877 N27923 SCHEMATIC1_W2_OPA625 
X_W3    HGCAP N28027 N27877 N28027 SCHEMATIC1_W3_OPA625 
X_W4    LOWPOWERAOL N142215 N142191 N142215 SCHEMATIC1_W4_OPA625 
X_W5    LPCAP N142223 N142191 N142223 SCHEMATIC1_W5_OPA625 
.ENDS  OPA625
*
.SUBCKT FEMT_OPA625 1 2
.PARAM FLWF=0.1
.PARAM NLFF=270000
.PARAM NVRF=2000
.PARAM GLFF={PWR(FLWF,0.25)*NLFF/1164}
.PARAM RNVF={1.184*PWR(NVRF,2)}
.MODEL DVNF D KF={PWR(FLWF,0.5)/1E11} IS=1.0E-16
I1 0 7 10E-3
I2 0 8 10E-3
D1 7 0 DVNF
D2 8 0 DVNF
E1 3 6 7 8 {GLFF}
R1 3 0 1E9
R2 3 0 1E9
R3 3 6 1E9
E2 6 4 5 0 10
R4 5 0 {RNVF}
R5 5 0 {RNVF}
R6 3 4 1E9
R7 4 0 1E9
G1 1 2 3 4 1E-6
.ENDS  FEMT_OPA625
*
.SUBCKT SCHEMATIC1_H3_OPA625 1 2 3 4  
H_H3         3 4 VH_H3 1
VH_H3         1 2 0V
.ENDS  SCHEMATIC1_H3_OPA625
*
.SUBCKT SCHEMATIC1_S1_OPA625 1 2 3 4  
S_S1         3 4 1 2 _S1
RS_S1         1 2 1G
.MODEL         _S1 VSWITCH ROFF=4E6 RON=10E-6 VOFF=-10E-3 VON=10E-3
.ENDS  SCHEMATIC1_S1_OPA625
*
.SUBCKT SCHEMATIC1_S11_OPA625 1 2 3 4  
S_S11         3 4 1 2 _S11
RS_S11         1 2 1G
.MODEL         _S11 VSWITCH ROFF=1 RON=1E-3 VOFF=0.1375 VON=0.160
.ENDS  SCHEMATIC1_S11_OPA625
*
.SUBCKT SCHEMATIC1_S12_OPA625 1 2 3 4  
S_S12         3 4 1 2 _S12
RS_S12         1 2 1G
.MODEL         _S12 VSWITCH ROFF=1 RON=1E-3 VOFF=0.150 VON=0.220
.ENDS  SCHEMATIC1_S12_OPA625
*
.SUBCKT SCHEMATIC1_S17_OPA625 1 2 3 4  
S_S17         3 4 1 2 _S17
RS_S17         1 2 1G
.MODEL         _S17 VSWITCH ROFF=1E9 RON=1E-3 VOFF=0.5 VON=1.2
.ENDS  SCHEMATIC1_S17_OPA625
*
.SUBCKT SCHEMATIC1_S18_OPA625 1 2 3 4  
S_S18         3 4 1 2 _S18
RS_S18         1 2 1G
.MODEL         _S18 VSWITCH ROFF=1E-3 RON=1E9 VOFF=0.5 VON=1.2
.ENDS  SCHEMATIC1_S18_OPA625
*
.SUBCKT SCHEMATIC1_S2_OPA625 1 2 3 4  
S_S2         3 4 1 2 _S2
RS_S2         1 2 1G
.MODEL         _S2 VSWITCH ROFF=4E6 RON=10E-6 VOFF=-10E-3 VON=10E-3
.ENDS  SCHEMATIC1_S2_OPA625
*
.SUBCKT SCHEMATIC1_S27_OPA625 1 2 3 4  
S_S27         3 4 1 2 _S27
RS_S27         1 2 1G
.MODEL         _S27 VSWITCH ROFF=4E6 RON=1E-6 VOFF=-10E-3 VON=10E-3
.ENDS  SCHEMATIC1_S27_OPA625
*
.SUBCKT SCHEMATIC1_S28_OPA625 1 2 3 4  
S_S28         3 4 1 2 _S28
RS_S28         1 2 1G
.MODEL         _S28 VSWITCH ROFF=4E6 RON=1E-6 VOFF=-10E-3 VON=10E-3
.ENDS  SCHEMATIC1_S28_OPA625
*
.SUBCKT SCHEMATIC1_S29_OPA625 1 2 3 4  
S_S29         3 4 1 2 _S29
RS_S29         1 2 1G
.MODEL         _S29 VSWITCH ROFF=1 RON=1E9 VOFF=0.5 VON=1.2
.ENDS  SCHEMATIC1_S29_OPA625
*
.SUBCKT SCHEMATIC1_S30_OPA625 1 2 3 4  
S_S30         3 4 1 2 _S30
RS_S30         1 2 1G
.MODEL         _S30 VSWITCH ROFF=1E-6 RON=1 VOFF=0 VON=0.1E-3
.ENDS  SCHEMATIC1_S30_OPA625
*
.SUBCKT SCHEMATIC1_S31_OPA625 1 2 3 4  
S_S31         3 4 1 2 _S31
RS_S31         1 2 1G
.MODEL         _S31 VSWITCH ROFF=1E-6 RON=1 VOFF=0 VON=0.1E-3
.ENDS  SCHEMATIC1_S31_OPA625
*
.SUBCKT SCHEMATIC1_W2_OPA625 1 2 3 4  
W_W2         3 4 VW_W2 _W2
VW_W2         1 2 0V
.MODEL         _W2 ISWITCH ROFF=1E-3 RON=1E9 IOFF=0.65 ION=0.75
.ENDS  SCHEMATIC1_W2_OPA625
*
.SUBCKT SCHEMATIC1_W3_OPA625 1 2 3 4  
W_W3         3 4 VW_W3 _W3
VW_W3         1 2 0V
.MODEL         _W3 ISWITCH ROFF=1E-3 RON=1E9 IOFF=0.65 ION=0.75
.ENDS  SCHEMATIC1_W3_OPA625
*
.SUBCKT SCHEMATIC1_W4_OPA625 1 2 3 4  
W_W4         3 4 VW_W4 _W4
VW_W4         1 2 0V
.MODEL         _W4 ISWITCH ROFF=1E-3 RON=1E9 IOFF=0.05 ION=0.08
.ENDS  SCHEMATIC1_W4_OPA625
*
.SUBCKT SCHEMATIC1_W5_OPA625 1 2 3 4  
W_W5         3 4 VW_W5 _W5
VW_W5         1 2 0V
.MODEL         _W5 ISWITCH ROFF=1E-3 RON=1E9 IOFF=0.05 ION=0.08
.ENDS  SCHEMATIC1_W5_OPA625
*
.SUBCKT VCM_CLAMP_OPA625 VIN+ VIN- IOUT- IOUT+ VP+ VP-
.PARAM GAIN = 1
E1G IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VIN+,VIN-),V(VP-,VIN-), V(VP+,VIN-))}
.ENDS  VCM_CLAMP_OPA625
*
.SUBCKT VNSE_OPA625 1 2
.PARAM FLW=0.1
.PARAM NLF=100
.PARAM NVR=2.7
.PARAM GLF={PWR(FLW,0.25)*NLF/1164}
.PARAM RNV={1.184*PWR(NVR,2)}
.MODEL DVN D KF={PWR(FLW,0.5)/1E11} IS=1.0E-16
I1 0 7 10E-3
I2 0 8 10E-3
D1 7 0 DVN
D2 8 0 DVN
E1 3 6 7 8 {GLF}
R1 3 0 1E9
R2 3 0 1E9
R3 3 6 1E9
E2 6 4 5 0 10
R4 5 0 {RNV}
R5 5 0 {RNV}
R6 3 4 1E9
R7 4 0 1E9
E3 1 2 3 4 1
.ENDS  VNSE_OPA625
*
.MODEL R_NOISELESS RES (T_ABS=-273.15)