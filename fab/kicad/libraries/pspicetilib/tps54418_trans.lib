*TPS54418
*$
*****************************************************************************
* (C) Copyright 2009 Texas Instruments Incorporated. All rights reserved.  **
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.    **
** TI and its licensors and suppliers make no warranties, either expressed **
** or implied, with respect to this model, including the warranties of     **
** merchantability or fitness for a particular purpose. The model is       **
** provided solely on an "as is" basis. The entire risk as to its quality  **
** and performance is with the customer.                                   ** 
*****************************************************************************
* 
* Released by: Analog eLab Design Center, Texas Instruments Inc.
* Part: TPS54418
* Date: 12/07/2009
* Model Type: TRANSIENT
* Simulator: PSpice
* Simulator Version: 16.0.0.p001
* EVM Order Number: TPS54418EVM-375
* EVM Users Guide: SLVU280 May 2009
* Datasheet: SLVS946 May 2009
* Model Version: Final 2.0
*
***************************************************************************
*
* Updates:
*
* Final 2.00
* Added ton(min) to the model
* Release to Web.
*
***************************************************************************
.SUBCKT TPS54418_TRANS EN VIN GND VSENSE COMP 
+ RT_CLK SS_TR PH BOOT PWRGD DUMMY_TEMPIN
* source TPS54418_TRANS
X_U59         N121078 N121244 INV_BASIC
R_R11         N2658735 OCB  1  
C_C152         0 SYSCLKB  1n  
X_U32         N527591 N527511 VSENSEINT 0
+ SWHYSTE PARAMS:  RON=1 ROFF=1MEG
+  VT=0.6 VH=0.02
X_U554         N479482 N491364 INV_BASIC
R_R4         0 COMP  1.911MEG  
X_S63    N2134071 0 N2132091 N2133963 NETLISTER_ver1_S63 
I_I1         N1340902 0 DC -111.8u  
C_C7         0 VREG  1u  
C_C78         N121714 0  18n  
R_R259         0 N554426  100MEG  
X_U52         N121918 ENAB PWMFF HDRVIN AND3_BASIC
D_D28         N2132367 AVDD D_D1 
G_ABM2I2         2P5 N1341374 VALUE { {IF(V(N1341084) > V(N1340902),
+  57.2k*V(N1340902), 57.2k*V(N1341084))}    }
X_U577         N1204080 N1204642 N1204200 COMP_BASIC
R_R295         0 GND  1k  
E_ABM7         N248425 0 VALUE { {IF(V(SDWN) > 2.5,0,  
+ IF(V(VIN) <2, V(VIN), 5))}   }
E_ABM171         N4048176 0 VALUE { {IF(V(SS) > 810m, 225u, 70u)}    }
X_U627         PWMFF1 INDELAYED2 OR2OUT2 OR2_BASIC
V_V5         N24758 0 0.5
C_C140         0 PWMANDI  1n  
D_D10         COMP N25854 D_D1 
X_U65         N121574 N121652 N121416 AND2_BASIC
X_U564         ENAB N1265406 CLKFLTLO AND2_BASIC
C_C162         0 VGM  100u  
V_V64         N1207632 0 2.6
X_U611         N30454 SET5 D_D
R_R270         N1204594 SYSCLKB  1  
D_D11         RAMP N30888 D_D1 
R_R269         0 N1204088  1k  
G_ABMII1         VIN EN VALUE { {0.65u+510n*V(ENAB)}    }
V_V15         N527591 0 5.0
R_R279         N2482630 SDWN  1  
C_C146         0 N1341476  10p  
V_V31         N121886 0 1
C_C158         0 SDWN  1n  
E_ABM148         N1341868 0 VALUE { {IF(V(VRAMPIN) < 0.9 ,0,V(VRAMPIN)-0.9)}   
+  }
X_F10    N2132363 N2132429 AVDD I_CLKFLTLO NETLISTER_ver1_F10 
I_I18         N2132091 0 DC 7.92u  
C_C150         0 N1383421  0.5u  
C_C151         SYSCLKB N1204088  140.5p  
V_V44         N30548 0 0.5
G_ABMII4         N1340898 0 VALUE { {(V(COMP) - 0.5)/-44k}    }
X_U30         N479562 N479482 VSENSEINT 0 SWHYSTE PARAMS:  RON=1MEG ROFF=1
+  VT=0.4 VH=0.02
X_U213         SYSCLK SYSCLKBAR INV_BASIC
E_ABM162         N1559432 0 VALUE { IF(V(FSEN) > 2.5, V(MUXCLK),  
+ IF(V(FS3BY4EN) > 2.5, V(FS3BY4),  
+ IF(V(FSBY2EN) > 2.5, V(FSBY2),  
+ IF(V(FSBY4EN) > 2.5, V(FSBY4),0)))) }
R_R242         0 N1341374  1  
C_C156         0 N1395015  1n  
X_U66         N121702 ENAB LDRVIN AND2_BASIC
X_U60         N121294 N122314 N121078 AND2_BASIC
E_ABM161         N167149961 0 VALUE { {IF(V(N1383421) > 3.1,5,0)}    }
X_U122         ENAB N30652 INV_BASIC
C_C28         PBX3 AVDD  18p  
E_ABM164         N2739403 0 VALUE { V(VSENSE)    }
X_S4    N121528 0 PVCC LDRV NETLISTER_ver1_S4 
G_ABMI5         SS 0 VALUE { {IF(V(SDWN)> 2.5 & V(SS) >
+  20e-3, 1.25e-3,0)}    }
R_R263         N167157441 N854802  1  
D_D62         SS 1P6 D_D1 
R_R201         N30672 UPS  1  
E_ABM149         N1340984 0 VALUE { {IF(V(ISWF) > V(N1341374),  
+ 0,5)}   }
X_U48         N30454 N30064 INV_BASIC
E_ABM150         N167161321 0 VALUE { ( (V(RAMP) -V(N30072))*  
+ 10000)   }
X_U51         N121714 PWMFFBAR N121702 AND2_BASIC
X_U56         HDRVIN N122314 INV_BASIC
X_U570         ENAB N1265400 CLKFLTHI AND2_BASIC
X_U569         RING2 N1529871 INV_BASIC
R_R272         N1204764 N1204092  10k  
X_U621         N16489497 N16489549 N16489587 AND2_BASIC
I_I16         AVDD PBX1 DC 7.92u  
X_S5    N121416 0 LDRV 0 NETLISTER_ver1_S5 
X_S34    N121600 0 BOOT VIN NETLISTER_ver1_S34 
R_R292         N16489573 PWMFFX  1  
E_ABM8         N2658735 0 VALUE { {IF(V(COMP) > 1.5,5,0)}    }
X_S62    N1265338 0 I_CLKFLTHI 0 NETLISTER_ver1_S62 
D_D53         PBX1 AVDD D_D1 
X_U575         CLKFLTLO CLKFLTHI CLKFLT OR2_BASIC
R_R271         N1204432 FFRESET  1  
C_C80         N3752683 0  1n  
G_G7         AVDD PBX1 AVDD PBX3 18u
X_F8    N2132429 0 AVDD N2132101 NETLISTER_ver1_F8 
X_U296         PWMFF1 N1341766 SYSCLK SET5 PWM SET5 DFF_BASIC
X_U50         PWMFF PWMFFBAR INV_BASIC
X_U58         N121068 N121294 INV_BASIC
X_U617         TIMERCTRL1 N16489763 D_D
C_C161         0 N3951458  1n  
V_V8         N439693 0 5.0
C_C153         0 FFRESET  1n  
X_U628         PWMFF1 OR2OUT2 TIMERCTRL2 OUT2 MUX2_BASIC
I_I19         N1281929 I_CLKFLTLO DC 1  
X_U574         N1529975 N1529751 FS3BY4 AND2_BASIC
X_U593         N1340918 PWMANDI OVTP PWM AND3_BASIC
E_ABM181         N16489545 0 VALUE { {IF(V(INDELAYED2)
+ > 4.9,5,0)}    }
X_U64         N121600 N121652 INV_BASIC
X_H1    N1341202 0 N1340894 0 NETLISTER_ver1_H1 
R_R150         0 N439795  1k  
X_U624         PWMFF1 INDELAYED1 OR2OUT1 OR2_BASIC
X_U174         START N2132079 N2134071 AND2_BASIC
X_U592         FFRESET ENAB N3656670 AND2_BASIC
E_ABM1         N14354 0 VALUE { {IF(V(EN) < 1.25,0,5)}    }
X_U588         RTCLK N16525077 INV_BASIC
X_U579         N16525077 MCLK N1395015 MUXCLK MUX2_BASIC
X_U616         SYSCLK N16489855 N16489549 AND2_BASIC
X_U580         CLKFLT CLKFLTBAR INV_BASIC
X_U623         0 TIMER1 D_D
R_R284         N3914061 N3932221  10k  
C_C169         0 TIMER1  1n  
X_U191         START SYSCLK N2132079 NAND2_BASIC
R_R268         0 N1798289  100MEG  
V_V75         N3341898 0 3
R_R273         PWMFF1 INDELAYED1  8.65k  
R_R244         N2934882 PWMANDI  1  
R_R153         0 N479482  1k  
X_F15    N2132101 0 AVDD IF2IA NETLISTER_ver1_F15 
C_C134         0 VRAMPIN  6n  
E_ABM151         N1341520 0 VALUE { {IF(V(PWMFF) > 2.5, 5,0)}    }
X_U567         DUMMY_TEMPIN N3873888 TSDWN COMP_BASIC
R_R3         N16857 VREF  0.1m  
X_U55         LDRVIN OCLOWLIMIT N121600 AND2_BASIC
C_C39         0 N2132091  10p  
C_C172         0 INDELAYED1  10p  
X_U572         RTCLK N1265994 INV_BASIC
V_V60         N1265716 0 2.0
R_R265         0 N1529919  100MEG  
C_C154         0 N1204092  10p  
G_ABMII3         2P5 N1341202 VALUE { V(VRAMP) * 1u    }
X_U294         N30358 ENAB RTCLK AND2_BASIC
R_R274         N16489667 N16489497  1  
X_U298         FSBY2 N539557 N854802 N539585 ENAB SET5 DFF_BASIC
C_C79         RAMP 0  2p  
X_U558         N534380 N527511 FSEN AND2_BASIC
C_C160         0 N3932221  2n  
C_C157         0 SYSCLK  1n  
X_U26         N439693 N439613 VSENSEINT 0 
+ SWHYSTE PARAMS:  RON=1 ROFF=1MEG
+  VT=0.736 VH=0.008
I_I20         N1285617 I_CLKFLTHI DC 1  
C_C38         0 I_CLKFLTHI  7.5u  
C_C133         0 UPS  1n  
X_U549         ENAB N1207898 INV_BASIC
D_D12         0 PH D_D1 
X_U555         N488449 N479482 FSBY2EN AND2_BASIC
X_U551         ENAB N439613 N439795 VSGOOD NAND3_BASIC
C_C120         0 N30072  1n  
X_U299         FSBY4 N554426 FSBY2 N550441 ENAB SET5 DFF_BASIC
X_U562         ENABBAR RTCLK N1265348 OR2_BASIC
R_R239         N1341868 VRAMP  1  
X_F11    N2132453 N2132363 AVDD I_CLKFLTHI NETLISTER_ver1_F11 
X_U114         N30652 CLKFLTBAR N30206 OR2_BASIC
X_U625         PWMFF1 OR2OUT1 TIMERCTRL1 OUT1 MUX2_BASIC
D_D55         N2132101 AVDD D_D1 
E_ABM15         N16489763 0 VALUE { IF(V(TIMER1) > 0.5,0,5)    }
C_C167         0 TIMERCTRL2  3p  
V_V30         N121792 0 1
C_C2         0 2P5  100u  
X_S67    STARTN 0 AVDD PBX3 NETLISTER_ver1_S67 
X_U193         SYSCLKBAR START N2132139 NAND2_BASIC
V_V13         N479562 0 5.0
V_V62         N1265528 0 2.0
X_U57         HDRVIN N121244 N121068 AND2_BASIC
X_U31         N482040 N481960 VSENSEINT 0
+  SWHYSTE PARAMS:  RON=1MEG ROFF=1
+  VT=0.6 VH=0.02
R_R245         N1340984 N1340918  1  
X_U300         RING1 N1529849 MUXCLK N1529871 ENAB SET5 DFF_BASIC
R_R6         N248425 VREG  1  
G_ABM2I1         0 COMP VALUE { {LIMIT((V(VREF_GM) 
+ - V(VSENSEINT))*V(VGM),
+  -20u,20u)}    }
E_ABM169         N167171601 0 VALUE { {V(HDRV) - V(PH)}    }
C_C149         0 N854802  1n  
X_U233         I_CLKFLTLO N1265716 N1265406 COMP_BASIC
X_U61         N121600 N121540 N121528 AND2_BASIC
X_U29         N475209 FSBY4EN VSENSEINT 0
+  SWHYSTE PARAMS:  RON=1MEG ROFF=1
+  VT=0.2 VH=0.02
X_U610         0 N30454 D_D
R_R241         0 N1340902  1  
V_V76         N167180600 0 3
E_ABM12         N16489573 0 VALUE { IF(V(N16490799) > 2.5 ,5,0)    }
E_ABM147         N30672 0 VALUE { {IF(V(N30454) > 2.5, -1,1)}    }
E_ABM3         N16857 0 VALUE { {IF(V(SDWN) > 2.5,0,  
+ IF(V(VIN) < 0.803, V(VIN), 0.803))}   }
X_U587         SYSCLK N2341361 INV_DELAY_BASIC PARAMS: DELAY=15n
C_C5         0 COMP  5.97p  
D_D9         N24758 COMP D_D1 
X_U234         I_CLKFLTHI N1265528 N1265400 COMP_BASIC
C_C32         PBX1 AVDD  8p  
X_U585         ENAB ENABBAR INV_BASIC
X_U568         ENABBAR N1265994 N1265338 OR2_BASIC
V_V47         SET0 0 0Vdc
C_C143         0 PH  10p  
E_ABM163         N1341084 0 VALUE { {(V(N1340898) 
+ - V(N1340894)) * 10  
+ }   }
D_D65         I_CLKFLTLO N167180600 D_D1 
R_R296         N167161321 N30454  1k  
D_D61         IF2IA AVDD D_D1 
R_R143         N121986 N121918  1  
X_U576         MUXCLK N1529975 BUF_DELAY_BASIC PARAMS: DELAY=75n
D_D54         0 N2132091 D_D1 
E_ABM4         VREF_GM 0 VALUE { {IF(V(VREF) > V(SS),  
+ V(SS),V(VREF))}   }
G_ABMI8         0 TIMER1 VALUE { IF(V(PWMFF1) > 2.5 
+ | V(or2out1) >
+  2.5,8.33m,-1)    }
X_U566         TSDWN N1207898 N1207636 N2482630 OR3_BASIC
E_ABM180         N16713175 0 VALUE { {IF (V(N30454)
+  > 2.4,0,2.5)}    }
R_R256         EN VIN  100MEG  
V_V74         N1285617 0 5
X_U620         PWMFF1 INDELAYED1 D_D
D_D8         EN VIN D_D1 
X_U594         N3835273 VSENSEINT OVTP COMP_BASIC
X_U91         RT N30820 N30358 COMP_BASIC
C_C6         0 1P6  100u  
G_ABMI6         SS 0 VALUE { {IF(V(OCB)> 2.5 & V(SS) 
+ > 20e-3, 20e-6,0)}    }
C_C13         PBX2 AVDD  250f  
X_U120         N30064 ENAB MCLK AND2_BASIC
D_D64         I_CLKFLTHI N3341898 D_D1 
G_ABMI1         1P6 SS VALUE { {IF(V(ENAB) > 2.5,1.8u,0)}    }
R_R264         0 N1529849  100MEG  
X_U553         FSBY4EN N488449 INV_BASIC
X_S66    N2132079 0 PBX1 PBX2 NETLISTER_ver1_S66 
R_R144         N121796 N121714  1  
D_D58         N1341476 N1341520 D_D1 
X_F5    N144373 0 2P5 OCLOW NETLISTER_ver1_F5 
X_F3    VIN N139067 2P5 ISW NETLISTER_ver1_F3 
R_R255         N1341520 N1341476  10k  
V_V9         N439925 0 5.0
E_ABM170         N3952700 0 VALUE { {IF(V(N3932221) 
+ > 3.3,5,0)}    }
V_V61         AVDD 0 5
E_ABM2         N16493 0 VALUE { {IF(V(SDWN) > 2.5,0,  
+ IF(V(VIN) < 2.5, V(VIN), 2.5))}   }
V_V12         N475209 0 5.0
G_G6         AVDD N2132453 AVDD PBX3 620m
C_C40         0 N2133963  2p  
X_S25    N30206 0 RAMP 0 NETLISTER_ver1_S25 
R_R258         0 N539557  100MEG  
E_ABM152         ISWF 0 VALUE { {IF(V(N1341476) > 3.1,   
+ V(ISW),0)}   }
X_U622         0 TIMER2 D_D
C_C77         N121918 0  18n  
X_S61    N1265348 0 I_CLKFLTLO 0 NETLISTER_ver1_S61 
R_R280         N16489545 N16489859  1  
R_R285         N3952700 N3951458  1  
C_C37         0 I_CLKFLTLO  7.5u  
E_ABM158         N1204764 0 VALUE { {IF(V(PWMFF) < 2.5, 5,0)}    }
R_R203         N1375212 N1383421  1  
C_C9         0 OCB  1n  
X_U573         RING1 RING2 N1529751 NAND2_BASIC
R_R248         0 N1341766  100MEG  
E_ABM157         N1204080 0 VALUE { {IF(V(N1204092) > 3.1,   
+ V(OCLOW),0)}   }
E_ABM156         N1204432 0 VALUE { {IF(V(N1204088) 
+ > 2.5,0,5)}    }
R_R275         N1559432 SYSCLK  1  
X_U63         N121416 N121540 INV_BASIC
V_V63         N2132377 0 1
X_S30    HDRV PH N139067 PH NETLISTER_ver1_S30 
C_C171         0 N16489497  1n  
G_ABMI7         0 TIMER2 VALUE { IF(V(PWMFF1) > 2.5
+  | V(or2out2) > 2.5,3.57m,-1)
+     }
E_ABM84         N121796 0 VALUE { {IF ( V(N3752683) > V(N121886)  
+ ,0,5)}   }
R_R267         0 IF2IA  1  
R_R183         N16713175 N30072  1  
C_C1         0 ENAB  1n  
X_U192         PBX1 N2132367 N2132091 NMOSIDEAL_PS PARAMS: K=1m VTH=0.8
R_R2         N16493 2P5  0.1m  
X_U565         N1207632 VIN N1207636 COMP_BASIC
G_ABMI3         N30888 RAMP VALUE { {(-( I(V_V44)*3.9) )* V(UPS)}    }
V_V79         N3835273 0 0.872
R_R277         PWMFF1 INDELAYED2  20.2k
X_U302         N1798289 OCLOWLIMIT N1204200 SET5 N3656670 SET5 DFF_BASIC
X_S26    N1341380 0 VRAMPIN 0 NETLISTER_ver1_S26 
R_R152         0 FSBY4EN  1k  
C_C136         0 N1340918  1n  
X_S32    CLKFLT 0 N30548 RT NETLISTER_ver1_S32 
X_U62         N121528 N121574 INV_BASIC
X_U27         N439925 N439795 VSENSEINT 0 
+ SWHYSTE PARAMS:  RON=1MEG ROFF=1
+  VT=0.848 VH=0.008
C_C142         PH N139067  10p  
X_U301         RING2 N1529919 MUXCLK RING1 ENAB SET5 DFF_BASIC
V_V45         N30888 0 5
R_R1         N14354 ENAB  1  
X_U595         VSGOOD SDWN N3914061 OR2_BASIC
V_V73         N1281929 0 5
R_R149         0 N439613  1k  
X_U228         START STARTN SYSCLK SET5 ENAB SET5 DFF_BASIC
C_C3         0 VREF  100u  
X_U557         N481960 N534380 INV_BASIC
E_ABM5         N4070113 0 VALUE { {IF(V(SDWN) > 2.5,0,  
+ IF(V(VIN) < 1.6, V(VIN), 1.6))}   }
R_R145         N167171601 N3752683  1  
C_C159         0 VSENSEINT  1n  
X_S2    N121068 0 BOOT HDRV NETLISTER_ver1_S2 
R_R154         0 N481960  1k  
R_R283         N16489763 TIMERCTRL1  1k  
R_R204         N167149961 N1395015  1  
X_S64    N2132139 0 N2133963 0 NETLISTER_ver1_S64 
V_V21         N30820 0 1.6
R_R282         N2739403 VSENSEINT  1  
X_S65    STARTN 0 AVDD PBX1 NETLISTER_ver1_S65 
X_U615         PWMFFX N16489553 PWMFF AND2_BASIC
C_C173         0 TIMER2  1n  
I_I9         AVDD N2132367 DC 7.92u  
X_U560         FSBY4 N550441 INV_BASIC
R_R276         0 N30548  500MEG  
E_ABM155         N1204594 0 VALUE { {IF(V(SYSCLK)
+  > 2.5,5,0)}    }
E_ABM165         N1375212 0 VALUE { {IF(V(CLKFLT) 
+ > 2.5,5,0)}    }
R_R155         0 N527511  1k  
X_S19    N3951458 0 PWRGD 0 NETLISTER_ver1_S19 
R_R286         N4048176 VGM  1  
V_V14         N482040 0 5.0
C_C175         0 PWMFFX  1n  
X_U614         TIMERCTRL2 N16490905 D_D
X_S31    LDRV 0 PH N144373 NETLISTER_ver1_S31 
X_U618         PWMFF1 INDELAYED2 D_D
R_R5         N4070113 1P6  0.1m  
X_U586         SYSCLK N2341361 N1341380 AND2_BASIC
X_U556         N491364 N481960 FS3BY4EN AND2_BASIC
V_V49         PVCC 0 5
C_C135         0 VRAMP  1n  
C_C145         PH BOOT  100n  
E_ABM13         N16489667 0 VALUE { IF(V(COMP) <0.55 ,5,0)    }
V_V81         SS_TR SS 0Vdc
R_R291         0 N16490567  1k  
E_ABM79         N121986 0 VALUE { {IF ( V(LDRV) > V(N121792)  
+ ,0,5)}   }
R_R281         N16490905 TIMERCTRL2  1k  
X_U130         N2132367 N2132367 N2132377 
+ NMOSIDEAL_PS PARAMS: K=1m VTH=0.8
C_C170         0 INDELAYED2  10p  
V_V6         N25854 0 1.5
X_S3    N121078 0 HDRV PH NETLISTER_ver1_S3 
C_C168         0 TIMERCTRL1  3p  
X_U559         FSBY2 N539585 INV_BASIC
E_ABM154         N167157441 0 VALUE { {IF(V(MUXCLK) > 2.5,5,0)}    }
D_D59         N1204092 N1204764 D_D1 
C_C174         0 N16489859  1n  
V_V80         N3873888 0 175
X_U626         OUT1 OUT2 N16489497 N16490799 MUX2_BASIC
V_V82         RT_CLK RT 0Vdc
D_D13         PH N139067 D_D1 
X_S52    N2132139 0 PBX2 PBX3 NETLISTER_ver1_S52 
E_ABM167         N2934882 0 VALUE { {IF((V(BOOT) 
+ - V(PH)) < 2.1,0,5)}    }
X_U613         SYSCLK N16489855 INV_DELAY_BASIC PARAMS: DELAY=20n
V_V67         N1204642 0 1.3
V_V46         SET5 0 5
R_R243         0 ISW  1  
E_ABM14         N16490905 0 VALUE { IF(V(TIMER2) > 0.5,0,5)    }
R_R266         0 OCLOW  1  
X_U612         N16489859 N16489587 N16489553 
+ N16490567 SRNANDLATCHRHP_BASIC
R_R278         0 N1340898  1  
G_ABMI4         VRAMPIN 0 VALUE { {V(IF2IA) * -1}    }
G_G8         AVDD PBX1 AVDD PBX1 2u
.IC         V(N121600 )=0
.IC         V(IF2IA )=0
.IC         V(RAMP )=0
.IC         V(HDRVIN )=0
.IC         V(N30072 )=2.5
.ENDS TPS54418_TRANS
*$
.subckt NETLISTER_ver1_S63 1 2 3 4  
S_S63         3 4 1 2 _S63
RS_S63         1 2 1G
.MODEL         _S63 VSWITCH Roff=10e6 Ron=500 Voff=2.4V Von=2.5V
.ends NETLISTER_ver1_S63
*$
.subckt NETLISTER_ver1_F10 1 2 3 4  
F_F10         3 4 VF_F10 1
VF_F10         1 2 0V
.ends NETLISTER_ver1_F10
*$
.subckt NETLISTER_ver1_S4 1 2 3 4  
S_S4         3 4 1 2 _S4
RS_S4         1 2 1G
.MODEL         _S4 VSWITCH Roff=1e6 Ron=2 Voff=2.4V Von=2.5V
.ends NETLISTER_ver1_S4
*$
.subckt NETLISTER_ver1_S5 1 2 3 4  
S_S5         3 4 1 2 _S5
RS_S5         1 2 1G
.MODEL         _S5 VSWITCH Roff=1e6 Ron=0.75 Voff=1.0V Von=4.0V
.ends NETLISTER_ver1_S5
*$
.subckt NETLISTER_ver1_S34 1 2 3 4  
S_S34         3 4 1 2 _S34
RS_S34         1 2 1G
.MODEL         _S34 VSWITCH Roff=1000e6 Ron=16 Voff=0.4V Von=2.8
.ends NETLISTER_ver1_S34
*$
.subckt NETLISTER_ver1_S62 1 2 3 4  
S_S62         3 4 1 2 _S62
RS_S62         1 2 1G
.MODEL         _S62 VSWITCH Roff=10e6 Ron=10m Voff=2.4V Von=2.5V
.ends NETLISTER_ver1_S62
*$
.subckt NETLISTER_ver1_F8 1 2 3 4  
F_F8         3 4 VF_F8 1
VF_F8         1 2 0V
.ends NETLISTER_ver1_F8
*$
.subckt NETLISTER_ver1_H1 1 2 3 4  
H_H1         3 4 VH_H1 1
VH_H1         1 2 0V
.ends NETLISTER_ver1_H1
*$
.subckt NETLISTER_ver1_F15 1 2 3 4  
F_F15         3 4 VF_F15 1
VF_F15         1 2 0V
.ends NETLISTER_ver1_F15
*$
.subckt NETLISTER_ver1_F11 1 2 3 4  
F_F11         3 4 VF_F11 1
VF_F11         1 2 0V
.ends NETLISTER_ver1_F11
*$
.subckt NETLISTER_ver1_S67 1 2 3 4  
S_S67         3 4 1 2 _S67
RS_S67         1 2 1G
.MODEL         _S67 VSWITCH Roff=10e6 Ron=500 Voff=2.4V Von=2.5V
.ends NETLISTER_ver1_S67
*$
.subckt NETLISTER_ver1_S66 1 2 3 4  
S_S66         3 4 1 2 _S66
RS_S66         1 2 1G
.MODEL         _S66 VSWITCH Roff=10e6 Ron=500 Voff=2.4V Von=2.5V
.ends NETLISTER_ver1_S66
*$
.subckt NETLISTER_ver1_F5 1 2 3 4  
F_F5         3 4 VF_F5 1
VF_F5         1 2 0V
.ends NETLISTER_ver1_F5
*$
.subckt NETLISTER_ver1_F3 1 2 3 4  
F_F3         3 4 VF_F3 1
VF_F3         1 2 0V
.ends NETLISTER_ver1_F3
*$
.subckt NETLISTER_ver1_S25 1 2 3 4  
S_S25         3 4 1 2 _S25
RS_S25         1 2 1G
.MODEL         _S25 VSWITCH Roff=50e6 Ron=100 Voff=2.4V Von=2.5V
.ends NETLISTER_ver1_S25
*$
.subckt NETLISTER_ver1_S61 1 2 3 4  
S_S61         3 4 1 2 _S61
RS_S61         1 2 1G
.MODEL         _S61 VSWITCH Roff=10e6 Ron=10m Voff=2.4V Von=2.5V
.ends NETLISTER_ver1_S61
*$
.subckt NETLISTER_ver1_S30 1 2 3 4  
S_S30         3 4 1 2 _S30
RS_S30         1 2 1G
.MODEL         _S30 VSWITCH Roff=10e6 Ron=45m Voff=0.4V Von=2.8
.ends NETLISTER_ver1_S30
*$
.subckt NETLISTER_ver1_S26 1 2 3 4  
S_S26         3 4 1 2 _S26
RS_S26         1 2 1G
.MODEL         _S26 VSWITCH Roff=100e6 Ron=10m Voff=0.4 Von=4
.ends NETLISTER_ver1_S26
*$
.subckt NETLISTER_ver1_S32 1 2 3 4  
S_S32         3 4 1 2 _S32
RS_S32         1 2 1G
.MODEL         _S32 VSWITCH Roff=100e6 Ron=1 Voff=0.4V Von=4.8V
.ends NETLISTER_ver1_S32
*$
.subckt NETLISTER_ver1_S2 1 2 3 4  
S_S2         3 4 1 2 _S2
RS_S2         1 2 1G
.MODEL         _S2 VSWITCH Roff=1e6 Ron=2 Voff=2.4V Von=2.5V
.ends NETLISTER_ver1_S2
*$
.subckt NETLISTER_ver1_S64 1 2 3 4  
S_S64         3 4 1 2 _S64
RS_S64         1 2 1G
.MODEL         _S64 VSWITCH Roff=10e6 Ron=500 Voff=2.4V Von=2.5V
.ends NETLISTER_ver1_S64
*$
.subckt NETLISTER_ver1_S65 1 2 3 4  
S_S65         3 4 1 2 _S65
RS_S65         1 2 1G
.MODEL         _S65 VSWITCH Roff=10e6 Ron=500 Voff=2.4V Von=2.5V
.ends NETLISTER_ver1_S65
*$
.subckt NETLISTER_ver1_S19 1 2 3 4  
S_S19         3 4 1 2 _S19
RS_S19         1 2 1G
.MODEL         _S19 VSWITCH Roff=100e6 Ron=100 Voff=2.4V Von=2.5V
.ends NETLISTER_ver1_S19
*$
.subckt NETLISTER_ver1_S31 1 2 3 4  
S_S31         3 4 1 2 _S31
RS_S31         1 2 1G
.MODEL         _S31 VSWITCH Roff=10e6 Ron=43m Voff=0.4V Von=2.8
.ends NETLISTER_ver1_S31
*$
.subckt NETLISTER_ver1_S3 1 2 3 4  
S_S3         3 4 1 2 _S3
RS_S3         1 2 1G
.MODEL         _S3 VSWITCH Roff=1e6 Ron=1.0 Voff=1.0V Von=4.0V
.ends NETLISTER_ver1_S3
*$
.subckt NETLISTER_ver1_S52 1 2 3 4  
S_S52         3 4 1 2 _S52
RS_S52         1 2 1G
.MODEL         _S52 VSWITCH Roff=10e6 Ron=500 Voff=2.4V Von=2.5V
.ends NETLISTER_ver1_S52
*$
.SUBCKT AND2_BASIC A B Y 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > 2.5  &  
+ V(B) > 2.5,5,0)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND2_BASIC
*$
.SUBCKT AND3_BASIC A B C Y 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > 2.5  &  
+ V(B) > 2.5 &
+ V(C) > 2.5,5,0)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND3_BASIC
*$
.SUBCKT AND4_BASIC A B C D Y 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > 2.5  &  
+ V(B) > 2.5 &
+ V(C) > 2.5 &
+ V(D) > 2.5,5,0)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND4_BASIC
*$
.SUBCKT NAND2_BASIC A B Y 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > 2.5  &  
+ V(B) > 2.5,0,5)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND2_BASIC
*$
.SUBCKT NAND3_BASIC A B C Y 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > 2.5  &  
+ V(B) > 2.5 &
+ V(C) > 2.5,0,5)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND3_BASIC
*$
.SUBCKT NAND4_BASIC A B C D Y 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > 2.5  &  
+ V(B) > 2.5 &
+ V(C) > 2.5 &
+ V(D) > 2.5,0,5)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND4_BASIC
*$
.SUBCKT OR2_BASIC A B Y 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > 2.5  |  
+ V(B) > 2.5,5,0)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR2_BASIC
*$
.SUBCKT OR3_BASIC A B C Y 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > 2.5  |  
+ V(B) > 2.5 |
+ V(C) > 2.5,5,0)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR3_BASIC
*$
.SUBCKT OR4_BASIC A B C D Y 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > 2.5  |  
+ V(B) > 2.5 |
+ V(C) > 2.5 |
+ V(D) > 2.5,5,0)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR4_BASIC
*$
.SUBCKT NOR2_BASIC A B Y 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > 2.5  |  
+ V(B) > 2.5,0,5)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR2_BASIC
*$
.SUBCKT NOR3_BASIC A B C Y 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > 2.5  |  
+ V(B) > 2.5 |
+ V(C) > 2.5,0,5)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR3_BASIC
*$
.SUBCKT NOR4_BASIC A B C D Y 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > 2.5  |  
+ V(B) > 2.5 |
+ V(C) > 2.5 |
+ V(D) > 2.5,0,5)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR4_BASIC
*$
.SUBCKT NOR5_BASIC A B C D E Y 
E_ABMGATE YINT 0 VALUE {{IF(V(A) > 2.5  |  
+ V(B) > 2.5 |
+ V(C) > 2.5 |
+ V(D) > 2.5 |
+ V(E) > 2.5,0,5)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR5_BASIC
*$
.SUBCKT NOR6_BASIC A B C D E F Y 
E_ABMGATE YINT 0 VALUE {{IF(V(A) > 2.5  |  
+ V(B) > 2.5 |
+ V(C) > 2.5 |
+ V(D) > 2.5 |
+ V(E) > 2.5 |
+ V(F) > 2.5,0,5)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR6_BASIC
*$
.SUBCKT INV_BASIC A  Y 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > 2.5 , 
+ 0,5)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS INV_BASIC
*$
.SUBCKT XOR2_BASIC A B Y
E_ABMGATE  YINT 0 VALUE {{IF(V(A) > 2.5  ^  
+ V(B) > 2.5,5,0)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS XOR2_BASIC
*$
.SUBCKT XNOR2_BASIC A B Y
E_ABMGATE  YINT 0 VALUE {{IF(V(A) > 2.5  ^  
+ V(B) > 2.5,0,5)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS XNOR2_BASIC
*$
.SUBCKT MUX2_BASIC A B S Y
E_ABMGATE  YINT 0 VALUE {{IF(V(S) > 2.5,  
+ V(B),V(A))}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS MUX2_BASIC
*$
.SUBCKT INV_DELAY_BASIC A  Y PARAMS: DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > 2.5 , 
+ 5,0)}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > 2.5 , 
+ 0,5)}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS INV_DELAY_BASIC
*$
.SUBCKT SRNANDLATCH_BASICORIGINAL S R Q QB
X_U2         N04337 QB Q NAND2_BASIC
X_U3         Q N04379 QB NAND2_BASIC
X_U4         N04337 R N04379 NAND2_BASIC
X_U5         S N04337 INV_BASIC
Cdummy1 Q 0 0.01pF IC={0}
Cdummy2 QB 0 0.01pF IC={5}
.ENDS SRNANDLATCH_BASICORIGINAL
*$
**Set has higher priority in this latch
.SUBCKT SRNANDLATCHSHP_BASIC S R Q QB
GQ 0 Qint VALUE = {IF(V(S) > 2.5,5,IF(V(R)>2.5,-5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 5
D_D11 0 Qint D_D1 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > 2.5, 0,5)}
RQb Qbr QB 1 
Cdummy1 Q 0 1n IC={5}
Cdummy2 QB 0 1n IC={0}
.ENDS SRNANDLATCHSHP_BASIC
*$
.SUBCKT DFF_BASICORIGINAL Q QB CLK D R S
X_U1         S N00273 N00171 N00150 NAND3_BASIC
X_U2         N00150 R CLK N00171 NAND3_BASIC
X_U3         N00171 CLK N00273 N00212 NAND3_BASIC
X_U4         N00212 R D N00273 NAND3_BASIC
X_U5         S N00171 QB Q NAND3_BASIC
X_U6         Q R N00212 QB NAND3_BASIC
Cdummy1 Q 0 0.01pF IC={0}
Cdummy2 QB 0 0.01pF IC={5}
.IC V(N00171) = {5}
.IC V(N00212) = {0}
.ENDS DFF_BASICORIGINAL
*$
.SUBCKT DFF_BASIC Q QB CLK D R S
X1 CLK CLKdel INV_DELAY_BASIC PARAMS: DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC 
GQ 0 Qint VALUE = {IF(V(S) < 2.5,5,IF(V(R)<2.5,-5, IF(V(CLKint)>2.5, 
+ IF(V(D)>2.5,5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 5
D_D11 0 Qint D_D1 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC PARAMS: DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > 2.5, 0,5)}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) = 0
.ENDS DFF_BASIC
*$
.SUBCKT BUF_DELAY_BASIC A  Y PARAMS: DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > 2.5 , 
+ 5,0)}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > 2.5 , 
+ 5,0)}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS BUF_DELAY_BASIC
*$
.SUBCKT BUF_BASIC A  Y 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > 2.5 , 
+ 5,0)}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS BUF_BASIC
*$
.SUBCKT DFF_BASICUNOPTIMIZED Q QB CLK D R S
X1 CLK CLKdel INV_DELAY_BASIC PARAMS: DELAY = 7n
X2 CLK CLKdel CLKint AND2_BASIC 
GQ 0 Qint VALUE = {IF(V(S) < 2.5,5,IF(V(R)<2.5,-5, IF(V(CLKint)>2.5, 
+ IF(V(D)>2.5,5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 100MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 5
D_D11 0 Qint D_D1 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 INV_DELAY_BASIC PARAMS: DELAY = 5n
X4 Qqqd1 Qqqd2 INV_DELAY_BASIC PARAMS: DELAY = 5n
RQq Qqqd2 Q 1
GQB 0 QBint VALUE = {IF(V(S) < 2.5,-5,IF(V(R)< 2.5,5, IF(V(CLKint)>2.5, 
+ IF(V(D)>2.5,-5,5),0)))}
CQBint QBint 0 1n
RQBint QBint 0 100MEG
D_D12 QBint MY52 D_D1
V2 MY52 0 5
D_D14 0 QBint D_D1 
EQB QqB 0 QBint 0 1
X5 QqB QqBd1 INV_DELAY_BASIC PARAMS: DELAY = 5n
X6 QqBd1 QqBd2 INV_DELAY_BASIC PARAMS: DELAY = 5n
RQb QqBd2 QB 1
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) = 0
.IC V(QBint) = 5
.ENDS DFF_BASICUNOPTMIZED
*$
.SUBCKT SRNANDLATCHRHP_BASIC S R Q QB
GQ 0 Qint VALUE = {IF(V(R) > 2.5,-5,IF(V(S)>2.5,5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 5
D_D11 0 Qint D_D1 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > 2.5, 0,5)}
RQb Qbr QB 1 
Cdummy1 Q 0 1n IC={5}
Cdummy2 QB 0 1n IC={0}
.ENDS SRNANDLATCHRHP_BASIC
*$
.SUBCKT SBRBNANDLATCHRHP_BASIC SB RB Q QB
GQ 0 Qint VALUE = {IF(V(RB) < 2.5,-5,IF(V(SB) < 2.5,5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 5
D_D11 0 Qint D_D1 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > 2.5, 0,5)}
RQb Qbr QB 1 
Cdummy1 Q 0 1n IC={5}
Cdummy2 QB 0 1n IC={0}
.ENDS SBRBNANDLATCHRHP_BASIC
*$
.SUBCKT COMP_BASIC INP INM Y
E_ABM Yint 0 VALUE {IF (V(INP) > 
+ V(INM), 5,0)}
R1 Yint Y 1
C1 Y 0 1n
.ENDS COMP_BASIC
*$
.MODEL D_D1 D( IS=1e-15 TT=10p Rs=0.05 N=.1  )
*$
.SUBCKT NMOSIDEAL_PS D G S PARAMS: k=1 vth=0
RDDUM D 0 1e11
RSDUM S 0 1e11
RGDUM G 0 1e11
EON Yp 0 VALUE={IF(V(G,S) > {vth}, 1, 0)}
GOUT D S VALUE={IF(V(D,S) >= (V(G,S)-{vth}), 
+ V(Yp)*({k}/2)*(V(G,S)-{vth})**2, V(Yp)*({k})*
+ (V(G,S)-{vth}-V(D,S)/2)*V(D,S))}
.ENDS NMOSIDEAL_PS
*$
.SUBCKT PMOSIDEAL_PS D G S PARAMS: k=1 vth=0 
RDDUM D 0 1e11
RSDUM S 0 1e11
RGDUM G 0 1e11
EON Yp 0 VALUE={IF(V(S,G) > {vth}, -1, 0)}
GOUT D S VALUE={IF(V(S,D) >= (V(S,G)-{vth}), V(Yp)*
+ ({k}/2)*(V(S,G)-{vth})**2, V(Yp)*({k})*
+ (V(S,G)-{vth}-V(S,D)/2)*V(S,D))}
.ENDS PMOSIDEAL_PS
*$
.subckt SWHYSTE NodeMinus NodePlus Plus Minus PARAMS: RON=1 ROFF=1MEG VT=5 VH=2
S5 NodePlus NodeMinus 8 0 smoothSW
EBcrtl 8 0 Value = { IF ( V(plus)-V(minus) > V(ref), 1, 0 ) }
EBref ref1 0 Value = { IF ( V(8) > 0.5, {VT-VH}, {VT+VH} ) }
Rdel ref1 ref 100
Cdel ref 0 100p  IC={VT+VH}
Rconv1 8 0 10Meg
Rconv2 plus 0 10Meg
Rconv3 minus 0 10Meg
.model smoothSW VSWITCH (RON={RON} ROFF={ROFF} VON=1 VOFF=0)
.ends SWHYSTE
*$
.subckt d_d 1 2
d1 1 2 dd
.model dd d
+ is=1e-015
+ n=0.01
+ tt=1e-011
.ends d_d
*$
