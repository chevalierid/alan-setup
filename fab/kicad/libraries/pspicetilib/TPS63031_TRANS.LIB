*$
* TPS63031
*****************************************************************************
* (C) Copyright 2015 Texas Instruments Incorporated. All rights reserved.
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.
** TI and its licensors and suppliers make no warranties, either expressed
** or implied, with respect to this model, including the warranties of
** merchantability or fitness for a particular purpose.  The model is
** provided solely on an "as is" basis.  The entire risk as to its quality
** and performance is with the customer
*****************************************************************************
*
** Released by: WEBENCH Design Center, Texas Instruments Inc.
* Part: TPS63031
* Date: 25SEP2015
* Model Type: Transient
* Simulator: PSpice
* Simulator Version: 16.2.0.p001
* EVM Order Number: 
* EVM Users Guide: SLVU275-December 2008
* Datasheet: SLVS696B -OCTOBER 2008-REVISED MARCH 2012
* Model Version: Final 1.00
*
*****************************************************************************
*
* Updates:
*
* Final 1.00
* Release to Web
*
*****************************************************************************
.SUBCKT TPS63031_TRANS EN FB L1 L2 PS_SYNC VIN VOUT GND VINA PGND PAD
V_V1         N16671906 0 1
R_R1         FB_INT FB  1008K  
E_ABM5         N6067255 0 VALUE { IF(V(EN) > 1.19,1,0)    }
R_R11         0 GND  1m  
R_R8         N6067255 ENLOGIC  1  
R_R2         0 FB_INT  180K  
E_GAIN1         VIN_BUF 0 VALUE {1 * V(VIN)}
C_C7         0 ENLOGIC  1n  
R_R13         0 PGND  1m  
X_U1_U38         CLK U1_N175129 U1_N196604 U1_N176948 srlatchrhp_basic_gen
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_U1_ABM2         BOOSTDRV 0 VALUE { IF(V(BUCKDRV)>0.5 &  
+ +V(U1_N196604)<0.5, 0, 1)   }
X_U1_U42         U1_N203232 BOOSTDRV U1_N203110 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U1_U36         U1_N203110 U1_N171118 U1_N174794 OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U1_U33         BUCKRAMP VCA U1_N203232 COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
R_U1_R1         0 U1_N176597  10k  
X_U1_U40         PSOFF_N U1_N170632 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U1_U41         U1_N202934 BUCKDRV U1_N192967 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U1_U34         VCA BOOSTRAMP U1_N202934 COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
X_U1_U37         CLK U1_N174794 BUCKDRV U1_N176597 srlatchrhp_basic_gen PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
R_U1_R2         0 U1_N176948  10k  
X_U1_U35         U1_N192967 U1_N171118 U1_N175129 OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U1_U39         U1_N170632 FAULT U1_N171118 OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
C_U2_C2         0 U2_N126109  1n IC=0 
E_U2_E2         U2_N16769948 U2_N128582 V3 0 1
G_U2_G1         U2_N16663404 U2_N124395 VIN_BUF 0 0.7m
X_U2_U50         U2_N126109 U2_N16664349 d_d1 PARAMS:
X_U2_U34         U2_N16693861 U2_N16693895 CLK AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
E_U2_GAIN2         U2_N128582 0 VALUE {-1 * V(U2_N126109)}
R_U2_R2         0 PS  10k  
V_U2_V5         U2_N16663404 0 5
X_U2_S5    U2_RAMPDIS 0 U2_N124395 0 OSCILLATOR_U2_S5 
C_U2_C1         0 U2_N124395  1n IC=0 
X_U2_U35         FAULT U2_N16693895 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_U2_R1         PS_SYNCLOGIC PS  1  
E_U2_GAIN1         BUCKRAMP 0 VALUE {1 * V(U2_N124395)}
V_U2_V6         U2_N16664349 0 5
X_U2_U49         U2_N124395 U2_N16663404 d_d1 PARAMS:
X_U2_U26         FAULT CLK U2_RAMPDIS OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
V_U2_V8         BOOSTRAMP U2_N16769948 -0.56
G_U2_G2         U2_N16664349 U2_N126109 VOUT 0 0.7m
X_U2_S6    U2_RAMPDIS 0 U2_N126109 0 OSCILLATOR_U2_S6 
V_U2_V10         U2_N16693861 0  
+PULSE 0 1 0 1n 1n 22n 417n
V_U4_V1         U4_N137240 0 0.5
V_U4_V3         U4_N165814721 0 500m
R_U4_RZI         U4_N138646 U4_N138578  250k  
E_U4_GAIN1         U4_FB2 0 VALUE {1 * V(FB_INT)}
E_U4_ABM1         U4_N165153511 0 VALUE { IF(V(PS) < 0.5 & V(VVA) <
+  0.5563,0.55625, V(VVA))    }
C_U4_C5         0 U4_N16506087  1n  
G_U4_G8         0 U4_VVA_ACT ISEN 0 5
E_U4_GAIN2         U4_N16544672 0 VALUE {1 * V(V2)}
E_U4_ABM3         VCA 0 VALUE { IF(V(FAULT)>0.5, 0, V(U4_N138578))    }
R_U4_R6         U4_N165153511 U4_N16506087  1  
X_U4_S2    PSOFF_N 0 0 U4_N16544672 ERRORAMP_U4_S2 
X_U4_U3         U4_N138578 V2 d_d PARAMS:
V_U4_V4         U4_N16581382 0 0.55625
C_U4_CCI         0 U4_N138646  20p IC=0 
G_U4_ABM3I1         0 VVA VALUE {
+  LIMIT(V(VOUT)*10e-6*(V(VREF)-V(U4_FB2)),-2u,2u)    }
R_U4_R8         0 U4_N138578  1e9  
R_U4_R2         U4_N137240 U4_VVA_ACT  0.045  
R_U4_R7         0 VVA  1e9  
X_U4_U1         VVA ILIMIT d_d PARAMS:
C_U4_C7         0 U4_N138578  10f  
C_U4_C6         0 VVA  10f  
R_U4_RZV         U4_N134364 VVA  500k  
X_U4_U2         U4_N165814721 VVA d_d PARAMS:
C_U4_CCV         U4_N134364 0  40p IC=0.51 
X_U4_U4         V4 U4_N138578 d_d PARAMS:
X_U4_S1    PSOFF_N 0 VVA U4_N16581382 ERRORAMP_U4_S1 
E_U4_ABM2         U4_VVA_PROG 0 VALUE { IF(V(FAULT)>0.5, 0, V(U4_N16506087))   
+  }
G_U4_G5         0 U4_N138578 U4_VVA_PROG U4_VVA_ACT 10u
E_ABM6         N16629194 0 VALUE { IF(V(PS_SYNC) > 1.19,1,0)    }
E_U5_ABM8         ILIMIT 0 VALUE { V(U5_N16780245)*0.225  + 0.5    }
R_U5_R12         U5_N16780300 U5_N16780290  1  
X_U5_U43         U5_N16889210 VVA U5_N16889189 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
X_U5_U39         U5_N6105639 FB_INT U5_N6097544 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
E_U5_ABM7         U5_N167856691 0 VALUE { (V(U5_OUT)*-300m + 1.5)    }
X_U5_U49         U5_N16889189 U5_N16889186 U5_FAULT_BAR U5_N16889228
+  AND3_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U5_U48         U5_FAULT_BAR FAULT INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_U5_R3         U5_N167856691 U5_N16785680  1  
R_U5_R27         U5_N16895350 U5_EN_UVLO_OK  3  
C_U5_C26         0 U5_N16833115  1n IC=0 
C_U5_C4         0 U5_N16785680  1n IC=0 
R_U5_R18         U5_N16780308 U5_VOUT_ILIMIT  1  
X_U5_U37         FB_INT U5_N6096022 U5_N6101882 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
C_U5_C6         0 U5_N16780290  1n  
E_U5_ABM17         U5_N16847419 0 VALUE { IF(V(U5_N16829927)>0.5, 1, 0)    }
X_U5_U50         U5_N16895350 U5_N16866733 d_d1 PARAMS:
X_U5_U47         U5_OUT ENLOGIC U5_N16866733 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_U5_R16         U5_N167801901 U5_N16780245  1  
E_U5_ABM3         V2 0 VALUE { V(V3)*0.8    }
X_U5_U38         U5_N6097544 U5_N6101882 U5_N6104039 U5_N6100335
+  srlatchrhp_basic_gen PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U5_S1    U5_N16889234 0 PG 0 HK_U5_S1 
E_U5_ABM9         U5_N16780300 0 VALUE { IF(V(U5_VOUT_ILIMIT) <
+  V(U5_VIN_ILIMIT),   
+ V(U5_VOUT_ILIMIT),V(U5_VIN_ILIMIT))   }
X_U5_U51         U5_N16889228 U5_N16889234 d_d1 PARAMS:
E_U5_ABM6         U5_N167802101 0 VALUE { LIMIT(V(VIN_BUF)*1.6 - 3.1,0.1,0.9)  
+   }
X_U5_U44         FB_INT U5_N16889183 U5_N16889186 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
C_U5_C12         0 U5_VOUT_ILIMIT  1n  
E_U5_ABM14         U5_N16825270 0 VALUE { IF(V(U5_FAULT_BAR)>0.5, 1, 0)    }
V_U5_V7         U5_N16889183 0 0.1
E_U5_ABM4         V4 0 VALUE { V(VIN_BUF)*0.0167    }
R_U5_R26         U5_N16866733 U5_EN_UVLO_OK  72.15k  
C_U5_C20         0 U5_EN_UVLO_OK  1n IC=0 
X_U5_U52         PS U5_N6104039 PSOFF_N OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
E_U5_ABM13         U5_FAULT_BAR 0 VALUE { V(U5_EN_UVLO_OK)     }
R_U5_R33         U5_N16830149 U5_N16829927  433k  
R_U5_R19         U5_N167802101 U5_VIN_ILIMIT  1  
C_U5_C24         0 U5_N16829927  1n IC=0 
E_U5_ABM12         U5_N16889210 0 VALUE { V(ILIMIT) - 10m    }
X_U5_S2    U5_N16847419 0 U5_N16825270 U5_N16833115 HK_U5_S2 
C_U5_C13         0 U5_VIN_ILIMIT  1n  
E_U5_ABM11         U5_N167801901 0 VALUE { IF(V(U5_N16780290) < 0.1,0.1,
+  V(U5_N16780290))    }
V_U5_V5         U5_N6105639 0 0.5
V_U5_V3         U5_N6096022 0 0.51
E_U5_ABM16         U5_N16830149 0 VALUE { IF(V(U5_FAULT_BAR)>0.5, 1, 0)    }
R_U5_R10         0 U5_N6100335  10k  
E_U5_ABM15         VREF 0 VALUE { IF(V(U5_N16833115)>0.5, 0.5, V(U5_N16833115))
+     }
R_U5_R11         U5_N16889228 U5_N16889234  2k  
X_U5_U29         VIN_BUF U5_N16785680 U5_OUT COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
C_U5_C5         0 U5_N16889234  1n  
C_U5_C10         0 U5_N16780245  1n  
E_U5_ABM2         V3 0 VALUE { (V(VOUT)+V(VIN_BUF))/3  
+     }
E_U5_ABM5         U5_N16780308 0 VALUE { LIMIT(V(VOUT)*0.667 + 0.1,0.1,0.9)   
+  }
X_U3_U38         U3_N16710240 U3_N16710232 BUF_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=10n
X_U3_S2    U3_BUCKDRV_PRE 0 U3_N149923 L1 DRIVER_U3_S2 
X_U3_U42         U3_N16759658 U3_FAULT_BAR PSOFF_N U3_N16772362 AND3_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
C_U3_C10         0 U3_N16715337  100p  
X_U3_S4    U3_N16757645 0 VOUT L2 DRIVER_U3_S4 
X_U3_U31         U3_N16705153 U3_N16705014 U3_N16770772 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U51         L2 VOUT d_d1 PARAMS:
C_U3_C7         0 U3_N148451  20p  
X_U3_U40         U3_BUCKDRV_PRE U3_N162195 U3_N167831 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U3_S1    U3_N167831 0 U3_N148856 U3_N148451 DRIVER_U3_S1 
X_U3_U25         U3_N166627 U3_N16710240 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U3_H1    VIN U3_N149923 U3_N148856 0 DRIVER_U3_H1 
X_U3_U35         U3_N166627 U3_N16709141 U3_N16757645 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
R_U3_R3         U3_N16713177 U3_N16715337  50  
X_U3_U49         L1 U3_N149923 d_d1 PARAMS:
X_U3_U36         U3_N166627 U3_N16709141 BUF_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=10n
R_U3_R2         U3_N1571031 ISEN  1  
X_U3_U52         0 L2 d_d1 PARAMS:
X_U3_S5    U3_N16772362 0 L2 0 DRIVER_U3_S5 
X_U3_U39         U3_N16713177 U3_BUCKDRV_PRE BUF_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=5n
X_U3_U33         U3_N162195 U3_N16706290 U3_N16713177 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
C_U3_C9         0 ISEN  1n  
X_U3_U28         BUCKDRV U3_FAULT_BAR U3_N162195 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U3_U27         FAULT U3_FAULT_BAR INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U3_U26         U3_FAULT_BAR BOOSTDRV U3_N166627 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U3_U34         U3_N162195 U3_N16706290 BUF_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=5n
X_U3_U24         U3_N162195 U3_N16705153 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U3_U32         U3_N16705153 U3_N16705014 BUF_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=10n
X_U3_U41         U3_N16770772 PSOFF_N U3_FAULT_BAR U3_N179660 AND3_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
E_U3_ABM1         U3_N1571031 0 VALUE { IF(V(FAULT) > 0.5,0,  
+ V(U3_N148451))   }
X_U3_U37         U3_N16710240 U3_N16710232 U3_N16759658 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U3_S3    U3_N179660 0 L1 0 DRIVER_U3_S3 
X_U3_U50         0 L1 d_d1 PARAMS:
X_U3_U48         U3_N16715337 U3_N16713177 d_d1 PARAMS:
R_R9         N16629194 PS_SYNCLOGIC  1  
R_R12         VINA VIN  100m  
C_C8         0 PS_SYNCLOGIC  1n  
R_R14         0 PAD  1m  
R_R10         PG N16671906  100k  
.ENDS TPS63031_TRANS
*$
.subckt OSCILLATOR_U2_S5 1 2 3 4  
S_U2_S5         3 4 1 2 _U2_S5
RS_U2_S5         1 2 1G
.MODEL         _U2_S5 VSWITCH Roff=1e9 Ron=1m Voff=0.2V Von=0.8
.ends OSCILLATOR_U2_S5
*$
.subckt OSCILLATOR_U2_S6 1 2 3 4  
S_U2_S6         3 4 1 2 _U2_S6
RS_U2_S6         1 2 1G
.MODEL         _U2_S6 VSWITCH Roff=1e9 Ron=1m Voff=0.2V Von=0.8
.ends OSCILLATOR_U2_S6
*$
.subckt ERRORAMP_U4_S2 1 2 3 4  
S_U4_S2         3 4 1 2 _U4_S2
RS_U4_S2         1 2 1G
.MODEL         _U4_S2 VSWITCH Roff=1 Ron=10e6 Voff=0.2 Von=0.8
.ends ERRORAMP_U4_S2
*$
.subckt ERRORAMP_U4_S1 1 2 3 4  
S_U4_S1         3 4 1 2 _U4_S1
RS_U4_S1         1 2 1G
.MODEL         _U4_S1 VSWITCH Roff=1 Ron=10e6 Voff=0.2 Von=0.8
.ends ERRORAMP_U4_S1
*$
.subckt HK_U5_S1 1 2 3 4  
S_U5_S1         3 4 1 2 _U5_S1
RS_U5_S1         1 2 1G
.MODEL         _U5_S1 VSWITCH Roff=4k Ron=55e6 Voff=0.2V Von=0.8V
.ends HK_U5_S1
*$
.subckt HK_U5_S2 1 2 3 4  
S_U5_S2         3 4 1 2 _U5_S2
RS_U5_S2         1 2 1G
.MODEL         _U5_S2 VSWITCH Roff=1000k Ron=10K Voff=0.1 Von=0.9
.ends HK_U5_S2
*$
.subckt DRIVER_U3_S2 1 2 3 4  
S_U3_S2         3 4 1 2 _U3_S2
RS_U3_S2         1 2 1G
.MODEL         _U3_S2 VSWITCH Roff=1e6 Ron=200m Voff=0.2V Von=0.8
.ends DRIVER_U3_S2
*$
.subckt DRIVER_U3_S4 1 2 3 4  
S_U3_S4         3 4 1 2 _U3_S4
RS_U3_S4         1 2 1G
.MODEL         _U3_S4 VSWITCH Roff=1e6 Ron=200m Voff=0.2V Von=0.8
.ends DRIVER_U3_S4
*$
.subckt DRIVER_U3_S1 1 2 3 4  
S_U3_S1         3 4 1 2 _U3_S1
RS_U3_S1         1 2 1G
.MODEL         _U3_S1 VSWITCH Roff=100k Ron=50 Voff=0.25V Von=0.75V
.ends DRIVER_U3_S1
*$
.subckt DRIVER_U3_H1 1 2 3 4  
H_U3_H1         3 4 VH_U3_H1 1
VH_U3_H1         1 2 0V
.ends DRIVER_U3_H1
*$
.subckt DRIVER_U3_S5 1 2 3 4  
S_U3_S5         3 4 1 2 _U3_S5
RS_U3_S5         1 2 1G
.MODEL         _U3_S5 VSWITCH Roff=1e6 Ron=200m Voff=0.2V Von=0.8
.ends DRIVER_U3_S5
*$
.subckt DRIVER_U3_S3 1 2 3 4  
S_U3_S3         3 4 1 2 _U3_S3
RS_U3_S3         1 2 1G
.MODEL         _U3_S3 VSWITCH Roff=1e6 Ron=200m Voff=0.2V Von=0.8
.ends DRIVER_U3_S3
*$
.SUBCKT D_D1 1 2
D1 1 2 DD1
.MODEL DD1 D( IS=1e-15 TT=10p Rs=0.05 N=.1  )
.ENDS D_D1
*$
.subckt d_d 1 2
d1 1 2 dd
.model dd d
+ is=1e-015
+ n=0.01
+ tt=1e-011
.ends d_d
*$
.SUBCKT AND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND2_BASIC_GEN
*$
.SUBCKT AND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND3_BASIC_GEN
*$
.SUBCKT OR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR2_BASIC_GEN
*$
.SUBCKT INV_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS INV_BASIC_GEN
*$
.SUBCKT INV_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS INV_DELAY_BASIC_GEN
*$
.SUBCKT BUF_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS BUF_DELAY_BASIC_GEN
*$
.SUBCKT BUF_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS BUF_BASIC_GEN
*$
**Reset has higher priority in this latch
.SUBCKT SRLATCHRHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,IF(V(S)>{VTHRESH},5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n
.IC V(Qint) {VSS}
.MODEL D_D1 D( IS=1e-15 TT=10p Rs=0.05 N=.1  )
.ENDS SRLATCHRHP_BASIC_GEN
*$
.SUBCKT COMP_BASIC_GEN INP INM Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
E_ABM Yint 0 VALUE {IF (V(INP) > 
+ V(INM), {VDD},{VSS})}
R1 Yint Y 1
C1 Y 0 1n
.ENDS COMP_BASIC_GEN
*$
.SUBCKT COMPHYS_BASIC_GEN INP INM HYS OUT PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
EIN INP1 INM1 INP INM 1 
EHYS INP1 INP2 VALUE { IF( V(1) > {VTHRESH},-V(HYS),0) }
EOUT OUT 0 VALUE { IF( V(INP2)>V(INM1), {VDD} ,{VSS}) }
R1 OUT 1 1
C1 1 0 5n
RINP1 INP1 0 1K
.ENDS COMPHYS_BASIC_GEN
*$
.SUBCKT COMPHYS2_BASIC_GEN INP INM HYS OUT PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
+ T=10
EIN INP1 INM1 INP INM 1 
EHYS INM2 INM1 VALUE { IF( V(1) > {VTHRESH},-V(HYS)/2,V(HYS)/2) }
EOUT OUT 0 VALUE { IF( V(INP1)>V(INM2), {VDD} ,{VSS}) }
R1 OUT 1 1
C1 1 0 {T*1e-9}
RINP1 INP1 0 10K
RINM2 INM2 0 10K
.ENDS COMPHYS2_BASIC_GEN
*$
.SUBCKT COMPARATOR2 INP OUT  
+ PARAMs:  TH=1
EOUT OUT 0 VALUE { IF( V(INP)>TH,1,0) }
.ends COMPARATOR2
*$
.SUBCKT LDCR IN OUT
+ PARAMs:  L=1u DCR=0.01 IC=0
L	IN 1  {L} IC={IC}
RDCR	1 OUT {DCR}
.ENDS LDCR
*$
.SUBCKT CESR IN OUT
+ PARAMs:  C=100u ESR=0.01 X=2 IC=0
C	IN 1  {C*X} IC={IC}
RESR	1 OUT {ESR/X}
*LESL 2 OUT {0.6n/X}
.ENDS CESR
*$
