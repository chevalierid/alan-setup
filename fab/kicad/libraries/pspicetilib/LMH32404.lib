* LMH32404 - Rev. A
* Created by Sean Cashin; 2021-10-22
* Created with Green-Williams-Lis Current Sense Amp Macro-model Architecture
* Copyright 2021 by Texas Instruments Corporation
******************************************************
* MACRO-MODEL SIMULATED PARAMETERS:
******************************************************
* AC PARAMETERS
**********************
* CLOSED-LOOP OUTPUT IMPEDANCE VS. FREQUENCY (Zout vs. Freq.)
* CLOSED-LOOP GAIN AND PHASE VS. FREQUENCY  WITH RL, CL EFFECTS (Acl vs. Freq.)
* COMMON-MODE REJECTION RATIO VS. FREQUENCY (CMRR vs. Freq.)
* POWER SUPPLY REJECTION RATIO VS. FREQUENCY (PSRR vs. Freq.)
* INPUT VOLTAGE NOISE DENSITY VS. FREQUENCY (en vs. Freq.)
**********************
* DC PARAMETERS
**********************
* INPUT COMMON-MODE VOLTAGE RANGE (Vcm)
* GAIN ERROR (Eg)
* INPUT BIAS CURRENT VS. INPUT COMMON-MODE VOLTAGE (Ib vs. Vcm)
* INPUT OFFSET VOLTAGE VS. TEMPERATURE (Vos vs. Temp)
* OUTPUT VOLTAGE SWING vs. OUTPUT CURRENT (Vout vs. Iout)
* SHORT-CIRCUIT OUTPUT CURRENT (Isc)
* QUIESCENT CURRENT (Iq)
**********************
* TRANSIENT PARAMETERS
**********************
* SLEW RATE (SR)
* SETTLING TIME VS. CAPACITIVE LOAD (ts)
* OVERLOAD RECOVERY TIME (tor)
******************************************************
.subckt LMH32404 I_IN+ VCC VEE VOS_CNT VOCM AMB_CNT Mx OUT- OUT+
******************************************************
.MODEL R_NOISE RES (T_ABS=25)
.MODEL R_NOISELESS RES (T_ABS=-273.15)
C_C1         MID CLAW_CLAMP  520E-12   
C_C10         MID N42834  1E-15   
C_C11         N44757 MID  1E-15   
C_C1A1         N709083 N709113  3.483E-12   
C_C1A11         N964727 N1247911  244.9E-9   
C_C1A13         MID VOCM  7E-12   
C_C1A14         N1247921 N1247931  6.266E-9   
C_C1A23         MID AOLVOCM  558E-12   
C_C1A24         MID N1248137  5.3E-15   
C_C1A3         N704975 N705005  1.447E-12   
C_C1A9         N701935 CMRR_0  800E-15   
C_C33         N406634 0  1E-15   
C_C34         N317950 0  1   
C_C35         N406794 0  1E-15   
C_C38         VEE N1026790  3.5E-9   
C_C4         MID AOL_3  6E-12   
C_C41         FDA_IN MID  1E-15   
C_C42         IN+ FDA_OUT-  245E-15   
C_C43         IN- FDA_OUT+  245E-15   
C_C45         FDA_OUT- FDA_OUT+  0.6P   
C_C48         ESDP ESDN  290E-15   
C_C49         0 VAMB  450E-9   
C_C51         VEE VOS_CNT  1.4E-12   
C_C52         N93742 MID  1E-15   
C_C57         N1632439 N1632246  91E-12   
C_C58         DVIN2 N1644950  40E-15   
C_C59         N1633484 N1633476  31.8E-15   
C_C60         TIA20K MID  60E-15   
C_C61         N1691456 N1681338  10E-9   
C_C62         FDA_OUT- OUT-  0.6P   
C_C63         OUT+ FDA_OUT+  0.6P   
C_C7         N31014 MID  1E-15   
C_C8         MID N35813  1E-15   
C_C9         MID N38096  1E-15   
C_C_VCLP         VCLP MID  1E-12   
C_C_VIMON         MID VIMON  1E-9   
C_C_VOUT_S         MID VOUT_S  1E-9   
E_E10         N41804 MID VCC_CLP VEE_CLP 1
E_E11         MID N41822 VCC_CLP VEE_CLP 1
E_E2         N91498 MID AOL_3 MID 1
E_E3         N112304 MID FDA_OUT+ FDA_OUT- 1
E_E6         MID 0 N317950 0 1
E_E7         N1241482 MID ZO+ FDA_OUT- 1
E_E9         N1379134 REF TIA20K MID 1
G_G2         CMRR_2 N10561 CMRR_0 MID -1E-3
G_G3         N1247941 MID N1247931 MID -10
G_G36         VCC_B 0 VCC 0 -1
G_G37         VEE_B 0 VEE 0 -1
G_G4         N704975 MID VEE_B MID -0.5112
G_G5         N964727 MID AOL_3 N1241482 -91
G_G6         N25816 N11984 N709113 N705005 -1E-3
G_G60         N701935 MID ESDP MID -.08
G_G61         N709083 MID VCC_B MID -.63
G_G62         N797682 MID CLAW_CLAMP MID -1
G_G70         IN- VEE N1026790 VEE -0.00107
G_G71         N1026790 VEE N1472596 VEE -1
G_G72         ZO+ MID AOLVOCM MID -0.01
G_G73         AOLVOCM MID VOCM VOUT_CM -1
G_G74         FDA_OUT- MID AOLVOCM MID -0.01
G_G75         N1247921 MID N1247911 MID -55
G_G8         VCC_CLP MID N35813 MID -1E-3
G_G82         N1414169 0 VAMB 0 1
G_G83         TIA20K MID I_IN N1634840 1
G_G84         N1632246 DVIN2 DVIN2 I_IN -90
G_G85         N1633042 DVIN2 N1632439 DVIN2 -1.143
G_G86         N1633476 DVIN2 N1634371 DVIN2 -1
G_G87         N1634734 DVIN2 N1633484 DVIN2 -20
G_G88         0 I_IN N1681246 VEE 0.12
G_G9         VEE_CLP MID N38096 MID -1E-3
G_GB4         AOLZO+ AOLZO- N1247947 MID -1
I_I_B         N06456 MID DC 2E-12  
I_I_OS         ESDN MID DC 1E-12  
I_I_Q         VCC VEE DC 30E-3  
L_L1         N797682 AOL_3  4E-9  
L_L2         N1691456 N1681246  1E-6  
R_R1         ESDP IN+ R_NOISELESS 10E-3
R_R10         ESDN N11991 R_NOISELESS 1E-3
R_R107         VCC_B 0 R_NOISELESS 1
R_R108         N317950 0 R_NOISELESS 1E12
R_R109         VEE_B 0 R_NOISELESS 1
R_R110         VCC_B N406634 R_NOISELESS 1E-3
R_R111         N406634 N317950 R_NOISELESS 1E6
R_R112         N317950 N406794 R_NOISELESS 1E6
R_R113         N406794 VEE_B R_NOISELESS 1E-3
R_R135         N701935 MID R_NOISELESS 1
R_R136         N704975 MID R_NOISELESS 1
R_R184         MID ZO+ R_NOISELESS 1K
R_R185         MID FDA_OUT- R_NOISELESS 1K
R_R186         FDA_OUT- AOLZO- R_NOISELESS 500E3
R_R187         ZO+ AOLZO+ R_NOISELESS 500E3
R_R188         VOUT_CM AOLZO+ R_NOISELESS 0.5
R_R189         ZO+ FDA_OUT- R_NOISELESS 100E3
R_R1A         N1247911 N964727 R_NOISELESS 10E3
R_R1A1         N1247931 N1247921 R_NOISELESS 10E3
R_R1A10         N701935 CMRR_0 R_NOISELESS 1E8
R_R1A17         FDA_IN IN+ R_NOISE 427
R_R1A18         IN+ FDA_OUT- R_NOISE 1124
R_R1A19         REF IN- R_NOISE 427
R_R1A20         IN- FDA_OUT+ R_NOISE 1124
R_R1A3         N704975 N705005 R_NOISELESS 1E8
R_R1A4         N709083 N709113 R_NOISELESS 1E8
R_R1B1         N1248137 N1247947 R_NOISELESS 10E3
R_R2         ESDN IN- R_NOISELESS 10E-3
R_R200         AOLZO- VOUT_CM R_NOISELESS 0.5
R_R201         VCC_B VOCM R_NOISE 50E3
R_R202         VOCM VEE_B R_NOISE 25E3
R_R203         MID N964727 R_NOISELESS 1
R_R204         MID N1247921 R_NOISELESS 1
R_R205         MID N1247941 R_NOISELESS 1
R_R21         N11984 N25816 R_NOISELESS 1E3
R_R211         N797682 MID R_NOISELESS 1
R_R212         AOL_3 MID R_NOISELESS 30
R_R213         N1365963 MID R_NOISELESS 1E9
R_R214         FDA_IN N1366077 R_NOISELESS 1E-3
R_R215         MID N1366077 R_NOISELESS 1
R_R216         MID N1366199 R_NOISELESS 1E9
R_R219         VAMB 0 R_NOISELESS 10E3
R_R220         VEE VOS_CNT  2946 TC=0,0 
R_R221         VOS_CNT VCC  16.5E3 TC=0,0 
R_R223         N1514219 MID R_NOISELESS 1E9
R_R224         N93742 N1514333 R_NOISELESS 1E-3
R_R225         MID N1514333 R_NOISELESS 1
R_R226         MID N1514455 R_NOISELESS 1E9
R_R232         TIA20K MID R_NOISELESS 8940
R_R233         N1632246 DVIN2 R_NOISELESS 1
R_R234         N1632246 N1632439 R_NOISELESS 10E3
R_R235         DVIN2 N1632439 R_NOISELESS 70E3
R_R236         N1633042 N1634371 R_NOISELESS 40E3
R_R237         N1633042 DVIN2 R_NOISELESS 1
R_R238         N1644950 N1634371 R_NOISELESS 10E3
R_R239         N1633476 N1633484 R_NOISELESS 10E3
R_R240         N1633476 DVIN2 R_NOISELESS 1
R_R241         DVIN2 N1633484 R_NOISELESS 526.3
R_R242         N1634734 DVIN2 R_NOISELESS 1
R_R243         N1634840 N1634734 R_NOISELESS 7.5E3
R_R244         DVIN2 N1634840 R_NOISELESS 750
R_R245         I_IN N1634840 R_NOISELESS 1
R_R246         N1681246 VEE R_NOISELESS 25
R_R247         N1681338 N1691456 R_NOISELESS 1E9
R_R25         MID N28602 R_NOISELESS 1E9
R_R26         N30136 MID R_NOISELESS 1E9
R_R27         MID N30913 R_NOISELESS 1
R_R28         N31014 N30913 R_NOISELESS 1E-3
R_R29         N35669 VCC_B R_NOISELESS 1E3
R_R2A1         N709113 MID R_NOISELESS 500
R_R2A10         CMRR_0 MID R_NOISELESS 6.7E3
R_R2A12         MID N1247911 R_NOISELESS 262.6
R_R2A13         MID N1247931 R_NOISELESS 900
R_R2A3         N705005 MID R_NOISELESS 1.1E3
R_R2B3         N1247947 N1247941 R_NOISELESS 119E3
R_R3         MID ESDP R_NOISELESS 12E9
R_R30         N35813 N35669 R_NOISELESS 1E-3
R_R31         VCC_CLP MID R_NOISELESS 1E3
R_R32         N38050 VEE_B R_NOISELESS 1E3
R_R33         N38096 N38050 R_NOISELESS 1E-3
R_R34         VEE_CLP MID R_NOISELESS 1E3
R_R35         MID N41804 R_NOISELESS 1E9
R_R36         N42663 MID R_NOISELESS 1
R_R37         N42834 N42663 R_NOISELESS 1E-3
R_R38         N44757 N44799 R_NOISELESS 1E-3
R_R39         MID N44799 R_NOISELESS 1
R_R4         ESDN MID R_NOISELESS 12E9
R_R40         MID N41822 R_NOISELESS 1E9
R_R5         N709083 MID R_NOISELESS 1
R_R60         MID AOLNET R_NOISELESS 1E6
R_R61         MID CLAW_CLAMP R_NOISELESS 1E6
R_R8         N10561 CMRR_2 R_NOISELESS 1E3
R_R81         MID N110431 R_NOISELESS 1E9
R_R83         MID N112304 R_NOISELESS 1E9
R_R9         CMRR_2 N11984 R_NOISELESS 1E-3
R_R_VCLP         N91498 VCLP R_NOISELESS 100
R_R_VIMON         VIMON N110431 R_NOISELESS 100
R_R_VOUT_S         VOUT_S N112304 R_NOISELESS 100
V_VCC4         N1554499 VEE 2.47
V_VCM_MAX         N30136 VCC_B -1.2
V_VCM_MAX1         N1365963 VCC_B -0.95
V_VCM_MAX2         N1514219 VCC_B -1.2
V_VCM_MIN         N28602 VEE_B 1.1
V_VCM_MIN1         N1366199 VEE_B 1.28
V_VCM_MIN2         N1514455 VEE_B 1.1
V_VODOS         N1472596 VOS_CNT 0
V_VREF1         REF VEE 1.6
X_AOL_1         N31014 N93742 MID AOLNET AOL_1_LMH32404 
X_AOL_2         AOLNET MID MID CLAW_CLAMP AOL_2_LMH32404 
X_CLAWN         MID VIMON VEE_B N38050 CLAWN_LMH32404 
X_CLAWP         VIMON MID N35669 VCC_B CLAWP_LMH32404 
X_CLAW_AMP         N41804 N41822 VOUT_S 0 N42663 N44799 CLAMP_AMP_LO_LMH32404 
X_CLAW_SRC         N42834 N44757 CLAW_CLAMP MID CLAW_SRC_LMH32404 
X_ESD_OUT         FDA_OUT+ VCC VEE ESD_OUT_LMH32404 
X_ESD_OUT1         FDA_OUT- VCC VEE ESD_OUT_LMH32404 
X_E_N         ESDP N06456 VNSE_LMH32404 
X_E_N1         N1554499 DVIN VNSE_LMH32404 
X_E_N2         DVIN2 N1554499 VNSE_LMH32404 
X_F1    N1414169 N1681194 VAMB 0 08_OP_AMP_COMPLETE_F1_LMH32404 
X_H3    FDA_OUT+ ZO+ N110431 MID 08_OP_AMP_COMPLETE_H3_LMH32404 
X_H4    N1681194 I_IN N1681338 VEE 08_OP_AMP_COMPLETE_H4_LMH32404 
X_IQ_N         MID VIMON MID VEE IQ_SRC_LMH32404 
X_IQ_P         VIMON MID VCC MID IQ_SRC_LMH32404 
X_I_NN         ESDN MID FEMT_LMH32404 
X_I_NP         N06456 MID FEMT_LMH32404 
X_S10    VEE_CLP ZO+ ZO+ MID 08_OP_AMP_COMPLETE_S10_LMH32404 
X_S11    FDA_OUT- VCC_CLP FDA_OUT- MID 08_OP_AMP_COMPLETE_S11_LMH32404 
X_S12    VEE_CLP FDA_OUT- FDA_OUT- MID 08_OP_AMP_COMPLETE_S12_LMH32404 
X_S13    AOLVOCM MID AOLVOCM MID 08_OP_AMP_COMPLETE_S13_LMH32404 
X_S14    MID AOLVOCM MID AOLVOCM 08_OP_AMP_COMPLETE_S14_LMH32404 
X_S20    AMB_CNT VEE I_IN+ I_IN 08_OP_AMP_COMPLETE_S20_LMH32404 
X_S21    VCC AMB_CNT I_IN+ N1414169 08_OP_AMP_COMPLETE_S21_LMH32404 
X_S22    MX VEE FDA_OUT+ OUT+ 08_OP_AMP_COMPLETE_S22_LMH32404 
X_S23    MX VEE OUT- FDA_OUT- 08_OP_AMP_COMPLETE_S23_LMH32404 
X_S24    N1026790 VEE N1026790 VEE 08_OP_AMP_COMPLETE_S24_LMH32404 
X_S9    ZO+ VCC_CLP ZO+ MID 08_OP_AMP_COMPLETE_S9_LMH32404 
X_VCM_CLAMP         N25816 MID N30913 MID N30136 N28602 VCM_CLAMP_LMH32404 
X_VCM_CLAMP1         N1379134 MID N1366077 MID N1365963 N1366199 VCM_CLAMP_LMH32404 
X_VCM_CLAMP2         N11991 MID N1514333 MID N1514219 N1514455 VCM_CLAMP_LMH32404 
X_VOS_DRIFT         N749288 N06456 VOS_DRIFT_LMH32404 
X_VOS_VS_VCM         N10561 N749288 VCC VEE VOS_VS_VCM_LMH32404 
.ENDS  LMH32404
*
.SUBCKT 08_OP_AMP_COMPLETE_F1_LMH32404 1 2 3 4  
F_F1         3 4 VF_F1 -1
VF_F1         1 2 0V
.ENDS  08_OP_AMP_COMPLETE_F1_LMH32404
*
.SUBCKT 08_OP_AMP_COMPLETE_H3_LMH32404 1 2 3 4  
H_H3         3 4 VH_H3 -1E3
VH_H3         1 2 0V
.ENDS  08_OP_AMP_COMPLETE_H3_LMH32404
*
.SUBCKT 08_OP_AMP_COMPLETE_H4_LMH32404 1 2 3 4  
H_H4         3 4 VH_H4 1
VH_H4         1 2 0V
.ENDS  08_OP_AMP_COMPLETE_H4_LMH32404
*
.SUBCKT 08_OP_AMP_COMPLETE_S10_LMH32404 1 2 3 4  
S_S10         3 4 1 2 _S10
RS_S10         1 2 1G
.MODEL         _S10 VSWITCH ROFF=1E6 RON=1 VOFF=-0.1 VON=0.1
.ENDS  08_OP_AMP_COMPLETE_S10_LMH32404
*
.SUBCKT 08_OP_AMP_COMPLETE_S11_LMH32404 1 2 3 4  
S_S11         3 4 1 2 _S11
RS_S11         1 2 1G
.MODEL         _S11 VSWITCH ROFF=1E6 RON=1 VOFF=-0.1 VON=0.1
.ENDS  08_OP_AMP_COMPLETE_S11_LMH32404
*
.SUBCKT 08_OP_AMP_COMPLETE_S12_LMH32404 1 2 3 4  
S_S12         3 4 1 2 _S12
RS_S12         1 2 1G
.MODEL         _S12 VSWITCH ROFF=1E6 RON=1 VOFF=-0.1 VON=0.1
.ENDS  08_OP_AMP_COMPLETE_S12_LMH32404
*
.SUBCKT 08_OP_AMP_COMPLETE_S13_LMH32404 1 2 3 4  
S_S13         3 4 1 2 _S13
RS_S13         1 2 1G
.MODEL         _S13 VSWITCH ROFF=2E3 RON=1 VOFF=2 VON=2.5
.ENDS  08_OP_AMP_COMPLETE_S13_LMH32404
*
.SUBCKT 08_OP_AMP_COMPLETE_S14_LMH32404 1 2 3 4  
S_S14         3 4 1 2 _S14
RS_S14         1 2 1G
.MODEL         _S14 VSWITCH ROFF=2E3 RON=1 VOFF=2 VON=2.5
.ENDS  08_OP_AMP_COMPLETE_S14_LMH32404
*
.SUBCKT 08_OP_AMP_COMPLETE_S20_LMH32404 1 2 3 4  
S_S20         3 4 1 2 _S20
RS_S20         1 2 1G
.MODEL         _S20 VSWITCH ROFF=1G RON=0.001 VOFF=0.2 VON=1.8
.ENDS  08_OP_AMP_COMPLETE_S20_LMH32404
*
.SUBCKT 08_OP_AMP_COMPLETE_S21_LMH32404 1 2 3 4  
S_S21         3 4 1 2 _S21
RS_S21         1 2 1G
.MODEL         _S21 VSWITCH ROFF=1G RON=0.001 VOFF=1.5 VON=3.1
.ENDS  08_OP_AMP_COMPLETE_S21_LMH32404
*
.SUBCKT 08_OP_AMP_COMPLETE_S22_LMH32404 1 2 3 4  
S_S22         3 4 1 2 _S22
RS_S22         1 2 1G
.MODEL         _S22 VSWITCH ROFF=1E6 RON=10 VOFF=1 VON=1.8
.ENDS  08_OP_AMP_COMPLETE_S22_LMH32404
*
.SUBCKT 08_OP_AMP_COMPLETE_S23_LMH32404 1 2 3 4  
S_S23         3 4 1 2 _S23
RS_S23         1 2 1G
.MODEL         _S23 VSWITCH ROFF=1E6 RON=10 VOFF=1 VON=1.8
.ENDS  08_OP_AMP_COMPLETE_S23_LMH32404
*
.SUBCKT 08_OP_AMP_COMPLETE_S24_LMH32404 1 2 3 4  
S_S24         3 4 1 2 _S24
RS_S24         1 2 1G
.MODEL         _S24 VSWITCH ROFF=1 RON=1E-3 VOFF=1.19 VON=1.25
.ENDS  08_OP_AMP_COMPLETE_S24_LMH32404
*
.SUBCKT 08_OP_AMP_COMPLETE_S9_LMH32404 1 2 3 4  
S_S9         3 4 1 2 _S9
RS_S9         1 2 1G
.MODEL         _S9 VSWITCH ROFF=1E6 RON=1 VOFF=-0.1 VON=0.1
.ENDS  08_OP_AMP_COMPLETE_S9_LMH32404
*
.SUBCKT AOL_1_LMH32404 VC+ VC- IOUT+ IOUT-
.PARAM GAIN = 1E-4
.PARAM IPOS = .5
.PARAM INEG = -.5
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}
.ENDS  AOL_1_LMH32404
*
.SUBCKT AOL_2_LMH32404 VC+ VC- IOUT+ IOUT-
.PARAM GAIN = 50E-3
.PARAM IPOS = 0.572
.PARAM INEG = -0.572
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}
.ENDS  AOL_2_LMH32404
*
.SUBCKT CLAMP_AMP_LO_LMH32404 VC+ VC- VIN COM VO+ VO-
.PARAM G=1
GVO+ COM VO+ VALUE = {IF(V(VIN,COM)>V(VC+,COM),((V(VIN,COM)-V(VC+,COM))*G),0)}
GVO- COM VO- VALUE = {IF(V(VIN,COM)<V(VC-,COM),((V(VC-,COM)-V(VIN,COM))*G),0)}
.ENDS  CLAMP_AMP_LO_LMH32404
*
.SUBCKT CLAWN_LMH32404 VC+ VC- IOUT+ IOUT-
G1 IOUT+ IOUT- TABLE {(V(VC+,VC-))} =
+(0, 5.5E-5)
+(5, 7.2E-5)
+(10.84, 9.3E-5)
+(13.06, 1.0E-4)
+(16.44, 1.1E-4)
+(22.17, 1.3E-4)
+(34.09, 1.7E-4)
.ENDS  CLAWN_LMH32404
*
.SUBCKT CLAWP_LMH32404 VC+ VC- IOUT+ IOUT-
G1 IOUT+ IOUT- TABLE {(V(VC+,VC-))} =
+(0, 5.5E-5)
+(5, 7.2E-5)
+(10.84, 9.3E-5)
+(13.06, 1.0E-4)
+(16.44, 1.1E-4)
+(22.17, 1.3E-4)
+(34.09, 1.7E-4)
.ENDS  CLAWP_LMH32404
*
.SUBCKT CLAW_SRC_LMH32404 VC+ VC- IOUT+ IOUT-
.PARAM GAIN = 1
.PARAM IPOS = 1.1
.PARAM INEG = -1.1
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}
.ENDS  CLAW_SRC_LMH32404
*
.SUBCKT ESD_OUT_LMH32404 OUT VCC VEE
.MODEL ESD_SW VSWITCH(RON=50 ROFF=1E12 VON=500E-3 VOFF=450E-3)
S1 VCC OUT OUT VCC ESD_SW
S2 OUT VEE VEE OUT ESD_SW
.ENDS  ESD_OUT_LMH32404
*
.SUBCKT FEMT_LMH32404 1 2
.PARAM NVRF=5
.PARAM RNVF={1.184*PWR(NVRF,2)}
E1 3 0 5 0 10
R1 5 0 {RNVF}
R2 5 0 {RNVF}
G1 1 2 3 0 1E-6
.ENDS  FEMT_LMH32404
*
.SUBCKT IQ_SRC_LMH32404 VC+ VC- IOUT+ IOUT-
.PARAM GAIN = 1E-3
G1 IOUT+ IOUT- VALUE={IF( (V(VC+,VC-)<=0),0,GAIN*V(VC+,VC-) )}
.ENDS  IQ_SRC_LMH32404
*
.SUBCKT VCM_CLAMP_LMH32404 VIN+ VIN- IOUT- IOUT+ VP+ VP-
.PARAM GAIN = 1
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VIN+,VIN-),V(VP-,VIN-), V(VP+,VIN-))}
.ENDS  VCM_CLAMP_LMH32404
*
.SUBCKT VNSE_LMH32404 1 2
.PARAM FLW=1
.PARAM NLF=450
.PARAM NVR=4
.PARAM GLF={PWR(FLW,0.25)*NLF/1164}
.PARAM RNV={1.184*PWR(NVR,2)}
.MODEL DVN D KF={PWR(FLW,0.5)/1E11} IS=1.0E-16
I1 0 7 10E-3
I2 0 8 10E-3
D1 7 0 DVN
D2 8 0 DVN
E1 3 6 7 8 {GLF}
R1 3 0 1E9
R2 3 0 1E9
R3 3 6 1E9
E2 6 4 5 0 10
R4 5 0 {RNV}
R5 5 0 {RNV}
R6 3 4 1E9
R7 4 0 1E9
E3 1 2 3 4 1
.ENDS  VNSE_LMH32404
*
.SUBCKT VOS_DRIFT_LMH32404 VOS+ VOS-
.PARAM DC = -6.2E-6
.PARAM POL = 1
.PARAM DRIFT = 1.5E-6
E1 VOS+ VOS- VALUE={DC+POL*DRIFT*(TEMP-27)}
.ENDS  VOS_DRIFT_LMH32404
*
.SUBCKT VOS_VS_VCM_LMH32404 V+ V- REF+ REF-
E1 V+ 1 TABLE {(V(REF+, V-))} =
+(0.35, 450E-6)
+(0.4, 435E-6)
+(0.55, 275E-6)
+(0.65, 150E-6)
+(0.75, 75E-6)
+(0.85, 25E-6)
+(1, 0)
V1 1 V- 0
.ENDS  VOS_VS_VCM_LMH32404
*