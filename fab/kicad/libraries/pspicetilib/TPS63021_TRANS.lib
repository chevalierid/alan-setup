**
*$
*TPS63021
*****************************************************************************
* (C) Copyright 2010 Texas Instruments Incorporated. All rights reserved.                                            
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.                                             
** TI and its licensors and suppliers make no warranties, either expressed                                           
** or implied, with respect to this model, including the warranties of                                                    
** merchantability or fitness for a particular purpose. The model is                                                      
** provided solely on an "as is" basis. The entire risk as to its quality                                                    
** and performance is with the customer                                                                                          
*****************************************************************************
*
** Released by: Analog eLab Design Center, Texas Instruments Inc.
* Part: TPS63021
* Date: APR/09/2010
* Model Type: Transient 
* Simulator: PSpice 
* Simulator Version: 16.0.0.p001
* EVM Order Number: TPS63020EVM-487
* EVM Users Guide: SLVU365 - March 2010
* Datasheet: SLVS916 - April 2010
* Model Version: 1.0
*
*****************************************************************************
*
* Updates:
*
* Final 1.00
* Release to Web.
*
***************************************************************************
.SUBCKT TPS63021_TRANS L1 VIN VINA EN PS_SYNC GND
+ PGND PG FB VOUT L2
Rfb1 FB FB_my 840k
Rfb2 FB_my 0 150k
R_R10         0 PGND  1m  
E_ABM5         N6067255 0 VALUE { IF(V(EN) > 1.19,1,0)    }
R_R11         0 GND  1m  
R_R8         N6067255 ENLOGIC  1  
E_GAIN1         VIN_BUF 0 VALUE {1 * V(VIN)}
C_C7         0 ENLOGIC  1n  
X_U1_U38         CLK U1_N175129 BOOSTDRV U1_N176948 SRLATCHRHP_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U1_U42         U1_N185976 BOOSTDRV U1_N186143 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U1_U36         U1_N186143 U1_N171118 U1_N174794 OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U1_U33         BUCKRAMP VCA U1_N185976 COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
R_U1_R1         0 U1_N176597  10k  
X_U1_U40         PSOFF_N U1_N170632 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U1_U41         U1_N185413 BUCKDRV U1_N184433 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U1_U34         VCA BOOSTRAMP U1_N185413 COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
X_U1_U37         CLK U1_N174794 BUCKDRV U1_N176597 SRLATCHRHP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
R_U1_R2         0 U1_N176948  10k  
X_U1_U35         U1_N184433 U1_N171118 U1_N175129 OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U1_U39         U1_N170632 FAULT U1_N171118 OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U2_U31         U2_N16667136 U2_N16667346 one_shot PARAMS:  T=20  
C_U2_C2         0 U2_N126109  1n IC=0 
E_U2_E2         U2_N16588429 U2_N128582 V3 0 1
G_U2_G1         U2_N16663404 U2_N124395 VIN_BUF 0 0.84m
X_U2_S4    U2_N16667168 0 U2_N16667046 0 OSCILLATOR_U2_S4 
E_U2_GAIN2         U2_N128582 0 VALUE {-1 * V(U2_N126109)}
X_U2_U29         U2_N16666872 U2_N16667346 CLK OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
V_U2_V2         U2_N16667112 0 5
R_U2_R2         0 PS  10k  
V_U2_V5         U2_N16663404 0 5
X_U2_S5    U2_RAMPDIS 0 U2_N124395 0 OSCILLATOR_U2_S5 
C_U2_C1         0 U2_N124395  1n IC=0 
X_U2_U10          U2_N16667046 U2_N16666872 COMPARATOR2 PARAMS:  TH=1  
X_U2_U21         FAULT CLK U2_N16667168 OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
V_U2_V8         U2_N16666990 0 0
C_U2_C3         0 U2_N16667046  1n IC=0 
R_U2_R1         PS_SYNCLOGIC PS  1  
I_U2_I1         U2_N16667112 U2_N16667046 DC 2.53m  
E_U2_GAIN1         BUCKRAMP 0 VALUE {1 * V(U2_N124395)}
V_U2_V6         U2_N126085 0 5
V_U2_V3         BOOSTRAMP U2_N16588429 30m
X_U2_U26         FAULT CLK U2_RAMPDIS OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
G_U2_G2         U2_N126085 U2_N126109 VOUT 0 0.84m
D_U2_D4         U2_N124395 U2_N16663404 D_D1 
D_U2_D5         U2_N126109 U2_N126085 D_D1 
X_U2_U27         U2_N16666872 U2_N16666990 U2_N16667136 OR2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
D_U2_D6         U2_N16667046 U2_N16667112 D_D1 
X_U2_S6    U2_RAMPDIS 0 U2_N126109 0 OSCILLATOR_U2_S6 
R_R1         VIN VINA  100  
V_U4_V1         U4_N137240 0 0.5
R_U4_RZI         U4_N138646 VCA  400k  
E_U4_GAIN1         U4_FB2 0 VALUE {1 * V(FB_my)}
X_U4_U2         U4_N165156330 VVA d_d 
E_U4_ABM1         U4_N165153511 0 VALUE { IF(V(PS) < 0.5 & V(VVA) <
+  0.5563,0.55625, V(VVA))    }
X_U4_S1    PSOFF_N 0 VVA U4_N16542445 ERRORAMP_U4_S1 
C_U4_C5         0 U4_VVA_PROG  1n  
G_U4_G8         0 U4_VVA_ACT ISEN 0 5
E_U4_GAIN2         U4_N16544672 0 VALUE {1 * V(V2)}
R_U4_R6         U4_N165153511 U4_VVA_PROG  1  
X_U4_S2    PSOFF_N 0 VCA U4_N16544672 ERRORAMP_U4_S2 
X_U4_U3         VCA V2 d_d 
C_U4_CCI         0 U4_N138646  20p IC=0 
G_U4_ABM3I1         0 VVA VALUE {
+  LIMIT(V(VOUT)*10e-6*(V(VREF)-V(U4_FB2)),-2u,2u)    }
R_U4_R8         0 VCA  1e9  
R_U4_R2         U4_N137240 U4_VVA_ACT  0.045  
V_U4_V3         U4_N165156330 0 500m
R_U4_R7         0 VVA  1e9  
X_U4_U1         VVA ILIMIT d_d
C_U4_C7         0 VCA  10f  
C_U4_C6         0 VVA  10f  
V_U4_V4         U4_N16542445 0 0.55625
R_U4_RZV         U4_N134364 VVA  250k  
V_U4_V2         U4_VVA_PROG IAVG 0.5
C_U4_CCV         U4_N134364 0  40p IC=0.51 
X_U4_U4         V4 VCA d_d
G_U4_G5         0 VCA U4_VVA_PROG U4_VVA_ACT 20u
E_ABM6         N16629194 0 VALUE { IF(V(PS_SYNC) > 1.19,1,0)    }
C_U5_C9         0 U5_N6157516  1n  
C_U5_C16         0 U5_N16703225  1n  
C_U5_C5         0 U5_N6144664  1n  
E_U5_ABM13         U5_N167473441 0 VALUE { IF(V(U5_N6157480) > 4,4,
+  V(U5_N6157480))    }
X_U5_U39         U5_N6105639 FB_my U5_N6097544 COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
R_U5_R11         U5_N6144180 U5_N6144664  2k  
D_U5_D6         U5_N16754558 U5_N16754622 D_D1 
V_U5_V10         U5_N16705913 0 1.9
E_U5_GAIN1         U5_N6165616 0 VALUE {1 * V(VOUT)}
V_U5_V1         VREF 0 0.5
C_U5_C15         0 U5_N16699386  1n  
E_U5_GAIN2         U5_N6166485 0 VALUE {1 * V(VIN_BUF)}
X_U5_U29         VIN_BUF U5_N6059017 U5_N6062862 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
X_U5_U47         U5_N6063555 U5_N16727053 U5_FAULT_BAR AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
R_U5_R18         U5_N167473441 U5_VOUTLIMIT  1  
X_U5_S4    U5_DELAYENABLE 0 U5_N16754558 0 HK_U5_S4 
X_U5_U43         U5_N6126241 VVA U5_N6123789 COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
X_U5_U31         U5_N6062862 U5_N6063005 U5_N6063555 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
E_U5_ABM5         U5_N6157610 0 VALUE { V(U5_N6165616)*3 + 0.4    }
V_U5_V9         U5_N16697981 0 -1.9
E_U5_ABM17         U5_N16714820 0 VALUE { IF( V(U5_DELAYENABLE) > 0.5,  
+ +V(U5_N16707701),  
+ +V(U5_VOUTLIMIT))  }
R_U5_R24         U5_N16714820 U5_FINALVOUT  1  
X_U5_U37         FB_my U5_N6096022 U5_N6101882 COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
X_U5_U30         VINA U5_N6059017 U5_N6063005 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
C_U5_C12         0 U5_VOUTLIMIT  1n  
C_U5_C18         0 U5_FINALVOUT  1n  
X_U5_U38         U5_N6097544 U5_N6101882 U5_N6104039 U5_N6100335
+  SRLATCHRHP_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_U5_ABM3         V2 0 VALUE { V(V3)*0.8    }
V_U5_V8         U5_N16754622 0 1.1
R_U5_R12         U5_N6157414 U5_N6157424  1  
X_U5_U51         U5_N16692251 U5_N16691319 U5_DELAYENABLE AND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
E_U5_ABM16         U5_N166917621 0 VALUE { IF(V(VOUT) > 0.5,1,0)    }
E_U5_ABM14         U5_N167226131 0 VALUE { IF(V(U5_N6157516) > 4,4,
+  V(U5_N6157516))    }
X_U5_S1    U5_N6144664 0 PG 0 HK_U5_S1 
E_U5_ABM8         ILIMIT 0 VALUE { V(U5_N6162282)*0.225  + 0.5    }
D_U5_D8         U5_N6144180 U5_N6144664 D_D1 
R_U5_R20         U5_N166917621 U5_N16692251  1  
R_U5_R23         U5_N16708681 U5_N16707701  1  
E_U5_ABM4         V4 0 VALUE { V(VIN_BUF)*0.0167    }
R_U5_R25         U5_N167226131 U5_VINLIMIT  1  
C_U5_C6         0 U5_N6157424  1n  
E_U5_SUM1         U5_N16697749 0 VALUE {V(U5_N16697981)+V(U5_VOUTLIMIT)}
C_U5_C20         0 U5_N16727053  1n  
E_U5_ABM10         U5_N61617881 0 VALUE { IF(V(U5_N6157424) < 0.4,0.4,
+  V(U5_N6157424))    }
C_U5_C17         0 U5_N16707701  1n  
X_U5_U52         PS U5_N6104039 PSOFF_N OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_U5_R26         ENLOGIC U5_N16727053  86.4k  
C_U5_C14         0 U5_N16692251  1n  
V_U5_V2         U5_N6059017 0 1.5
R_U5_R14         U5_N6157610 U5_N6157480  1  
X_U5_U50         FAULT U5_N16691319 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_U5_R16         U5_N61617881 U5_N6162282  1  
C_U5_C19         0 U5_VINLIMIT  1n  
E_U5_ABM15         U5_N16754764 0 VALUE { IF(V(U5_N16754558) >
+  1,1,V(U5_N16754558))    }
X_U5_U48         U5_FAULT_BAR FAULT INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
E_U5_ABM6         U5_N6157234 0 VALUE { V(U5_N6166485)*7 - 12.1    }
V_U5_V5         U5_N6105639 0 0.5
V_U5_V3         U5_N6096022 0 0.51
X_U5_U49         U5_N6123789 U5_N6123654 U5_FAULT_BAR U5_N6144180
+  AND3_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
C_U5_C8         0 U5_N6157480  1n  
D_U5_D7         U5_N16727053 ENLOGIC D_D1 
V_U5_V7         U5_N6123425 0 0.1
R_U5_R19         U5_N16754764 U5_GAINFACTOR  1  
R_U5_R10         0 U5_N6100335  10k  
C_U5_C10         0 U5_N6162282  1n  
C_U5_C3         0 U5_N16754558  1n IC=0 
E_U5_ABM12         U5_N6126241 0 VALUE { V(ILIMIT) - 10m    }
C_U5_C13         0 U5_GAINFACTOR  1n  
E_U5_ABM9         U5_N6157414 0 VALUE { IF(V(U5_FINALVOUT) < V(U5_VINLIMIT),   
+ V(U5_FINALVOUT),V(U5_VINLIMIT))   }
R_U5_R15         U5_N6157234 U5_N6157516  1  
R_U5_R22         U5_N16703504 U5_N16703225  1  
X_U5_U44         FB_my U5_N6123425 U5_N6123654 COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
I_U5_I1         U5_N16754622 U5_N16754558 DC 2.5u  
E_U5_MULT2         U5_N16703504 0 VALUE {V(U5_GAINFACTOR)*V(U5_N16699386)}
E_U5_SUM2         U5_N16708681 0 VALUE {V(U5_N16705913)+V(U5_N16703225)}
E_U5_ABM2         V3 0 VALUE { (V(VOUT)+V(VIN_BUF))/3  
+     }
R_U5_R21         U5_N16697749 U5_N16699386  1  
X_U3_U38         U3_N16710240 U3_N16710232 BUF_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=20n
X_U3_S2    U3_BUCKDRV_PRE 0 U3_N149923 L1 DRIVER_U3_S2 
C_U3_C10         0 U3_N16715337  100p  
X_U3_S4    U3_N176320 0 VOUT L2 DRIVER_U3_S4 
X_U3_U31         U3_N16705153 U3_N16705010 U3_N16705859 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
C_U3_C7         0 U3_N148451  20p  
X_U3_U40         U3_BUCKDRV_PRE U3_N162195 U3_N167831 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U3_S1    U3_N167831 0 U3_N148856 U3_N148451 DRIVER_U3_S1 
X_U3_U25         U3_N166627 U3_N16710240 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U3_H1    VIN U3_N149923 U3_N148856 0 DRIVER_U3_H1 
X_U3_U35         U3_N166627 U3_N16709141 U3_N176320 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
R_U3_R3         U3_N16713177 U3_N16715337  50  
X_U3_U36         U3_N166627 U3_N16709141 BUF_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=20n
R_U3_R2         U3_N1571031 ISEN  1  
X_U3_S5    U3_N178130 0 L2 0 DRIVER_U3_S5 
X_U3_U39         U3_N16713177 U3_BUCKDRV_PRE BUF_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=5n
X_U3_U33         U3_N162195 U3_N16706290 U3_N16713177 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
C_U3_C9         0 ISEN  1n  
X_U3_U28         BUCKDRV U3_FAULT_BAR U3_N162195 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U3_U27         FAULT U3_FAULT_BAR INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U3_U26         U3_FAULT_BAR BOOSTDRV U3_N166627 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
D_U3_D1         L1 U3_N149923 D_D1 
X_U3_U34         U3_N162195 U3_N16706290 BUF_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=15n
X_U3_U41         U3_N16710738 U3_FAULT_BAR PSOFF_N U3_N178130 AND3_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U24         U3_N162195 U3_N16705153 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U3_U32         U3_N16705153 U3_N16705010 BUF_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=20n
X_U3_U42         U3_N16705859 PSOFF_N U3_FAULT_BAR U3_N179660 AND3_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
D_U3_D3         L2 VOUT D_D1 
E_U3_ABM1         U3_N1571031 0 VALUE { IF(V(FAULT) > 0.5,0,  
+ V(U3_N148451))   }
X_U3_U37         U3_N16710240 U3_N16710232 U3_N16710738 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U3_S3    U3_N179660 0 L1 0 DRIVER_U3_S3 
D_U3_D5         U3_N16715337 U3_N16713177 D_D1 
D_U3_D4         0 L2 D_D1 
D_U3_D2         0 L1 D_D1 
R_R9         N16629194 PS_SYNCLOGIC  1  
C_C8         0 PS_SYNCLOGIC  1n  
.ENDS TPS63021_TRANS
*$
.subckt OSCILLATOR_U2_S4 1 2 3 4  
S_U2_S4         3 4 1 2 _U2_S4
RS_U2_S4         1 2 1G
.MODEL         _U2_S4 VSWITCH Roff=10e6 Ron=1m Voff=0.2V Von=0.5
.ends OSCILLATOR_U2_S4
*$
.subckt OSCILLATOR_U2_S5 1 2 3 4  
S_U2_S5         3 4 1 2 _U2_S5
RS_U2_S5         1 2 1G
.MODEL         _U2_S5 VSWITCH Roff=1e9 Ron=1m Voff=0.2V Von=0.8
.ends OSCILLATOR_U2_S5
*$
.subckt OSCILLATOR_U2_S6 1 2 3 4  
S_U2_S6         3 4 1 2 _U2_S6
RS_U2_S6         1 2 1G
.MODEL         _U2_S6 VSWITCH Roff=1e9 Ron=1m Voff=0.2V Von=0.8
.ends OSCILLATOR_U2_S6
*$
.subckt ERRORAMP_U4_S1 1 2 3 4  
S_U4_S1         3 4 1 2 _U4_S1
RS_U4_S1         1 2 1G
.MODEL         _U4_S1 VSWITCH Roff=1 Ron=10e6 Voff=0.2 Von=0.8
.ends ERRORAMP_U4_S1
*$
.subckt ERRORAMP_U4_S2 1 2 3 4  
S_U4_S2         3 4 1 2 _U4_S2
RS_U4_S2         1 2 1G
.MODEL         _U4_S2 VSWITCH Roff=1 Ron=10e6 Voff=0.2 Von=0.8
.ends ERRORAMP_U4_S2
*$
.subckt HK_U5_S4 1 2 3 4  
S_U5_S4         3 4 1 2 _U5_S4
RS_U5_S4         1 2 1G
.MODEL         _U5_S4 VSWITCH Roff=1m Ron=10e6 Voff=0.2V Von=0.5
.ends HK_U5_S4
*$
.subckt HK_U5_S1 1 2 3 4  
S_U5_S1         3 4 1 2 _U5_S1
RS_U5_S1         1 2 1G
.MODEL         _U5_S1 VSWITCH Roff=4k Ron=55e6 Voff=0.2V Von=0.8V
.ends HK_U5_S1
*$
.subckt DRIVER_U3_S2 1 2 3 4  
S_U3_S2         3 4 1 2 _U3_S2
RS_U3_S2         1 2 1G
.MODEL         _U3_S2 VSWITCH Roff=1e6 Ron=45m Voff=0.2V Von=0.8
.ends DRIVER_U3_S2
*$
.subckt DRIVER_U3_S4 1 2 3 4  
S_U3_S4         3 4 1 2 _U3_S4
RS_U3_S4         1 2 1G
.MODEL         _U3_S4 VSWITCH Roff=1e6 Ron=45m Voff=0.2V Von=0.8
.ends DRIVER_U3_S4
*$
.subckt DRIVER_U3_S1 1 2 3 4  
S_U3_S1         3 4 1 2 _U3_S1
RS_U3_S1         1 2 1G
.MODEL         _U3_S1 VSWITCH Roff=100k Ron=50 Voff=0.25V Von=0.75V
.ends DRIVER_U3_S1
*$
.subckt DRIVER_U3_H1 1 2 3 4  
H_U3_H1         3 4 VH_U3_H1 1
VH_U3_H1         1 2 0V
.ends DRIVER_U3_H1
*$
.subckt DRIVER_U3_S5 1 2 3 4  
S_U3_S5         3 4 1 2 _U3_S5
RS_U3_S5         1 2 1G
.MODEL         _U3_S5 VSWITCH Roff=1e6 Ron=70m Voff=0.2V Von=0.8
.ends DRIVER_U3_S5
*$
.subckt DRIVER_U3_S3 1 2 3 4  
S_U3_S3         3 4 1 2 _U3_S3
RS_U3_S3         1 2 1G
.MODEL         _U3_S3 VSWITCH Roff=1e6 Ron=70m Voff=0.2V Von=0.8
.ends DRIVER_U3_S3
*$
*$
.SUBCKT ONE_SHOT IN OUT
+ PARAMs:  T=100
S_S1         MEAS 0 RESET2 0 S1
E_ABM1         CH 0 VALUE { if( V(IN)>0.5 | V(OUT)>0.5,1,0)    }
R_R2         RESET2 RESET  0.1  
E_ABM3         OUT 0 VALUE { if( V(MEAS)<0.5 & V(CH)>0.5,1,0)    }
R_R1         MEAS CH  {T} 
C_C2         0 RESET2  1.4427n  
C_C1         0 MEAS  1.4427n  
E_ABM2         RESET 0 VALUE { if(V(CH)<0.5,1,0)    }
.MODEL         S1 VSWITCH Roff=1e9 Ron=1.0 Voff=0.25V Von=0.75V
.ENDS ONE_SHOT
*$
.MODEL D_D1 D( IS=1e-15 TT=10p Rs=0.05 N=.1  )
*$
.subckt d_d 1 2
d1 1 2 dd
.model dd d
+ is=1e-015
+ n=0.01
+ tt=1e-011
.ends d_d
*$
.SUBCKT AND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND2_BASIC_GEN
*$
.SUBCKT AND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND3_BASIC_GEN
*$
.SUBCKT AND4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH} &
+ V(D) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND4_BASIC_GEN
*$
.SUBCKT NAND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND2_BASIC_GEN
*$
.SUBCKT NAND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND3_BASIC_GEN
*$
.SUBCKT NAND4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH} &
+ V(D) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND4_BASIC_GEN
*$
.SUBCKT OR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR2_BASIC_GEN
*$
.SUBCKT OR3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR3_BASIC_GEN
*$
.SUBCKT OR4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR4_BASIC_GEN
*$
.SUBCKT NOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR2_BASIC_GEN
*$
.SUBCKT NOR3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR3_BASIC_GEN
*$
.SUBCKT NOR4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR4_BASIC_GEN
*$
.SUBCKT NOR5_BASIC_GEN A B C D E Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH} |
+ V(E) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR5_BASIC_GEN
*$
.SUBCKT NOR6_BASIC_GEN A B C D E F Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH} |
+ V(E) > {VTHRESH} |
+ V(F) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR6_BASIC_GEN
*$
.SUBCKT INV_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS INV_BASIC_GEN
*$
.SUBCKT XOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(A) > {VTHRESH}  ^  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS XOR2_BASIC_GEN
*$
.SUBCKT XNOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(A) > {VTHRESH}  ^  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS XNOR2_BASIC_GEN
*$
.SUBCKT MUX2_BASIC_GEN A B S Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(S) > {VTHRESH},  
+ V(B),V(A))}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS MUX2_BASIC_GEN
*$
.SUBCKT INV_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS INV_DELAY_BASIC_GEN
*$
.SUBCKT BUF_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS BUF_DELAY_BASIC_GEN
*$
.SUBCKT BUF_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS BUF_BASIC_GEN
*$
**Set has higher priority in this latch
.SUBCKT SRLATCHSHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(S) > {VTHRESH},5,IF(V(R)>{VTHRESH},-5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n 
.IC V(Qint) {VSS}
.ENDS SRLATCHSHP_BASIC_GEN
*$
**Reset has higher priority in this latch
.SUBCKT SRLATCHRHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,IF(V(S)>{VTHRESH},5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n
.IC V(Qint) {VSS}
.ENDS SRLATCHRHP_BASIC_GEN
*$
**Reset has higher priority in this latch and active low set and reset - basically NAND based SR latch
.SUBCKT SBRBLATCHRHP_BASIC_GEN SB RB Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(RB) < {VTHRESH},-5,IF(V(SB) < {VTHRESH},5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
.IC V(Qint) {VSS}
.ENDS SBRBLATCHRHP_BASIC_GEN
*$
**Reset has higher priority in this latch and active low set and reset - basically NAND based SR latch
.SUBCKT SBRBLATCHSHP_BASIC_GEN SB RB Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(SB) < {VTHRESH},5,IF(V(RB) < {VTHRESH},-5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
.IC V(Qint) {VSS}
.ENDS SBRBLATCHSHP_BASIC_GEN
*$
.SUBCKT DFFSBRB_SHPBASIC_GEN Q QB CLK D RB SB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
GQ 0 Qint VALUE = {IF(V(SB) < {VTHRESH},5,IF(V(RB)<{VTHRESH},-5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSBRB_SHPBASIC_GEN
*$
.SUBCKT DFFSR_SHPBASIC_GEN Q QB CLK D R S PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} 
GQ 0 Qint VALUE = {IF(V(S) > {VTHRESH},5,IF(V(R) > {VTHRESH},-5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSR_SHPBASIC_GEN
*$
.SUBCKT DFFSBRB_RHPBASIC_GEN Q QB CLK D RB SB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} 
GQ 0 Qint VALUE = {IF(V(RB) < {VTHRESH},-5,IF(V(SB)< {VTHRESH},5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 5
D_D11 0 Qint D_D1 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSBRB_RHPBASIC_GEN
*$
.SUBCKT DFFSR_RHPBASIC_GEN Q QB CLK D R S PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}  
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,IF(V(S) > {VTHRESH},5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSR_RHPBASIC_GEN
*$
.SUBCKT COMP_BASIC_GEN INP INM Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
E_ABM Yint 0 VALUE {IF (V(INP) > 
+ V(INM), {VDD},{VSS})}
R1 Yint Y 1
C1 Y 0 1n
.ENDS COMP_BASIC_GEN
*$
.SUBCKT COMPHYS_BASIC_GEN INP INM HYS OUT PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
EIN INP1 INM1 INP INM 1 
EHYS INP1 INP2 VALUE { IF( V(1) > {VTHRESH},-V(HYS),0) }
EOUT OUT 0 VALUE { IF( V(INP2)>V(INM1), {VDD} ,{VSS}) }
R1 OUT 1 1
C1 1 0 5n
RINP1 INP1 0 1K
.ENDS COMPHYS_BASIC_GEN
*$
.SUBCKT COMPHYS2_BASIC_GEN INP INM HYS OUT PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
+ T=10
EIN INP1 INM1 INP INM 1 
EHYS INM2 INM1 VALUE { IF( V(1) > {VTHRESH},-V(HYS)/2,V(HYS)/2) }
EOUT OUT 0 VALUE { IF( V(INP1)>V(INM2), {VDD} ,{VSS}) }
R1 OUT 1 1
C1 1 0 {T*1e-9}
RINP1 INP1 0 10K
RINM2 INM2 0 10K
.ENDS COMPHYS2_BASIC_GEN
*$
.SUBCKT COMPARATOR2 INP OUT  
+ PARAMs:  TH=1
EOUT OUT 0 VALUE { IF( V(INP)>TH,1,0) }
.ends COMPARATOR2
*$


