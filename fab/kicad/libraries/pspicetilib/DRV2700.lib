*DRV2700
*****************************************************************************
* (C) Copyright 2015 Texas Instruments Incorporated. All rights reserved.                                            
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.                                             
** TI and its licensors and suppliers make no warranties, either expressed                                           
** or implied, with respect to this model, including the warranties of                                                    
** merchantability or fitness for a particular purpose. The model is                                                      
** provided solely on an "as is" basis. The entire risk as to its quality                                                    
** and performance is with the customer                                                                                          
*****************************************************************************
*
** Released by: WEBENCH Design Center, Texas Instruments Inc.
* Part: DRV2700
* Date: 11/03/2014
* Model Type: Transient 
* Simulator: TINA-TI
* Simulator Version: 9.1.30.94 SF-TI
* EVM Order Number: N/A
* EVM Users Guide: N/A
* Datasheet:SLOS861A –MARCH 2015 
* Model Version:  1.00
*
*****************************************************************************
*
* Updates:
*
* Version 1.00
* Release to Web.
*
******************************************************************************
* This model generates the Boosted voltage for op-amp's supply, it also generates 
* gain setting for the OPAMP, Input impedence and
* current shut down, current vs Vboost with no load and finally the start up time.


******************************************************************************

*DRV2700_v1p0 (PSpice format)
********************************************


.SUBCKT DRV2700_0 Vpump VINP VINM SW EN Gain0 Gain1 GND VDD Rext PVDD VBOOST FB 
+ OUTP OUTM 
V1          20 0 500M
V_CHpump    Vpump 0 DC 0 AC 1 0
+ PWL 
+  (0,0) (200U,7.5)
IS1         VDD 22 10U
XU3         Rext FB 18 VDD SW boost_0
SW5         SW SW EN 0  S_VSWITCH_1
XU10        VBOOST EN VDD Mute MUTE_module_0
XU2         VBOOST VDD_21 IQQ_0
XU1         VINP VINM Gain0 Gain1 Mute OUTP PVDD OUTM GND VDD PGA_0
SW3         20 VBOOST Boost_ENZ 0  S_VSWITCH_2
SW2         VDD VDD_21 EN 0  S_VSWITCH_3
XU4         EN Boost_ENZ VDD 0 IV110_0
SW1         22 0 Boost_ENZ 0  S_VSWITCH_4
SW4         VBOOST 18 EN 0  S_VSWITCH_5
.MODEL S_VSWITCH_1 VSWITCH (RON=300U ROFF=10G VON=2.545 VOFF=0)
.MODEL S_VSWITCH_2 VSWITCH (RON=300U ROFF=10G VON=2.545 VOFF=0)
.MODEL S_VSWITCH_3 VSWITCH (RON=300U ROFF=1G VON=2.545 VOFF=0)
.MODEL S_VSWITCH_4 VSWITCH (RON=300U ROFF=1G VON=2.545 VOFF=0)
.MODEL S_VSWITCH_5 VSWITCH (RON=300U ROFF=10G VON=2.545 VOFF=0)
.ENDS

.SUBCKT boost_0 Rext FB VBoost Vcc SW
V2          26 0 1.32
V4          32 0 100M
V5          37 0 1.32
SW1         SW 24 25 0  S_VSWITCH_1
R1          24 0 250M 
XU2         J1 24 Vcc 0 27 0 TLV3501_0
U1          DFF(1) Vcc 0
+       31 29 28 Vcc 25 30  U_SN7474_1 IO_STD
XU4         32 33 Vcc 0 34 0 TLV3501_0
U5          AND(2) Vcc 0  35 36 29  U_SN7408_1 IO_STD
R4          33 SW 1MEG 
R5          33 0 10K 
R6          30 0 20K 
R7          Vcc 31 100 
C2          31 0 100N IC=0 
U3          AND(2) Vcc 0  34 35 28  U_SN7408_1 IO_STD
R8          36 27 100 
C3          36 0 1N IC=0 
R11         J1 0 1.3K 
VCCCS1_in   37 38
FCCCS1      Vcc J1 VCCCS1_in   1.7
R10         38 Rext 1 
XU6         26 FB Vcc 0 35 0 TLV3501_0
D1          SW VBoost  D_BAS28_1 
.MODEL U_SN7474_1 UEFF( TPCLKQLHTY=25N TPCLKQHLTY=40N )
.MODEL U_SN7408_1 UGATE( TPLHTY=27N TPHLTY=19N )
.MODEL D_BAS28_1  D
+ IS  =  2.7838E-09
+ N   =  1.8703
+ RS  =  1.3548
+ EG  =  1.0637
+ XTI =  1.5000
+ CJO =  0.6000E-12
+ VJ  =  0.2000
+ M   =  0.1000
*.MODEL S_VSWITCH_1 VSWITCH (RON=0 ROFF=1G VON=1 VOFF=0)
.MODEL S_VSWITCH_1 VSWITCH (RON=0.001U ROFF=1G VON=1 VOFF=0)
.ENDS


.SUBCKT MUTE_module_0 Vboost Boost_EN VDD MUTE
VS7         191 0 5
XU3         186 187 DELAY_LINE_0
XU2         188 187 VDD 0 MUTE OR210_0
XU1         Boost_EN 186 VDD 0 IV110_0
XU18        189 190 VDD 0 IV110_0
XU8         Vboost 191 192 0 VCVS_LIMIT_0
XU7         192 189 DELAY_LINE_0
U6          DFF(1) $G_DPWR $G_DGND
+       VDD 190 192 VDD 188 193  U_SN7474_1 IO_STD
.MODEL U_SN7474_1 UEFF( TPCLKQLHTY=25N TPCLKQHLTY=40N )
.ENDS


.SUBCKT IQQ_0 Vboost VDD
VS2         210 0 25
VS1         212 0 50
VS7         215 0 100
R3          207 VDD 240 
R2          208 VDD 654.5 
R1          209 VDD 1.029K 
XU2         Vboost 210 211 0 VCVS_LIMIT_0
XU1         Vboost 212 213 0 VCVS_LIMIT_0
SW3         208 0 211 0  S_VSWITCH_1
SW2         209 0 213 0  S_VSWITCH_2
SW1         207 0 214 0  S_VSWITCH_3
XU8         Vboost 215 214 0 VCVS_LIMIT_0
.MODEL S_VSWITCH_1 VSWITCH (RON=1M ROFF=1G VON=2.8 VOFF=200M)
.MODEL S_VSWITCH_2 VSWITCH (RON=1M ROFF=1G VON=2.8 VOFF=200M)
.MODEL S_VSWITCH_3 VSWITCH (RON=1M ROFF=1G VON=2.8 VOFF=200M)
.ENDS


.SUBCKT PGA_0 VINP VINM Gain0 Gain1 Mute OUTP PVDD OUTM GND VDD
SW23        VINP PRECH_M Mute 0  S_VSWITCH_1
SW22        PRECH_P VINM Mute 0  S_VSWITCH_2
R18         0 Vi_CM 1G 
R17         Vi_CM VDD 1G 
R16         0 Vo_CM 1G 
R7          Vo_CM PVDD 1G 
SW17        OUTP 227 MUTEB 0  S_VSWITCH_3
SW16        228 OUTM MUTEB 0  S_VSWITCH_4
SW11        OUTM Vo_CM Mute 0  S_VSWITCH_5
SW9         Vo_CM OUTP Mute 0  S_VSWITCH_6
SW10        OUTP OUTM Mute 0  S_VSWITCH_7
XU3         VDD N2 N1 231 232 0 STD_OPA_FD_0
XU1         PVDD PRECH_M PRECH_P 227 228 0 STD_OPA_FD_0
C2          232 N2 1P IC=0 
C1          N1 231 1P IC=0 
SW12        N1 233 MUTEB 0  S_VSWITCH_8
SW14        N2 234 MUTEB 0  S_VSWITCH_9
XU2         Gain1B Gain0 G1 VDD GND AN210_0
XU17        Mute MUTEB VDD GND IV110_0
SW15        232 N2 Mute 0  S_VSWITCH_10
SW13        231 N1 Mute 0  S_VSWITCH_11
R14         235 236 33K 
R13         236 237 47K 
R12         237 238 40K 
R5          238 232 40K 
R4          239 240 33K 
R3          240 241 47K 
R2          241 242 40K 
R11         231 PRECH_P 50K 
R10         232 PRECH_M 50K 
R9          PRECH_M 228 3.125MEG 
R8          PRECH_P 227 3.125MEG 
XU14        Gain1 Gain0 G3 VDD GND AN210_0
XU12        Gain1 Gain0B G2 VDD GND AN210_0
XU11        Gain1 Gain1B VDD GND IV110_1
XU10        Gain0 Gain0B VDD GND IV110_1
XU9         Gain1B Gain0B G0 VDD GND AN210_0
SW5         238 N2 G0 0  S_VSWITCH_12
SW6         237 N2 G1 0  S_VSWITCH_13
SW7         236 N2 G2 0  S_VSWITCH_14
SW8         235 N2 G3 0  S_VSWITCH_15
R15         VINP 234 100K 
R6          VINM 233 100K 
SW4         239 N1 G3 0  S_VSWITCH_16
SW3         240 N1 G2 0  S_VSWITCH_17
SW2         241 N1 G1 0  S_VSWITCH_18
SW1         242 N1 G0 0  S_VSWITCH_19
R1          242 231 40K 
.MODEL S_VSWITCH_1 VSWITCH (RON=300U ROFF=1G VON=2.545 VOFF=0)
.MODEL S_VSWITCH_2 VSWITCH (RON=300U ROFF=1G VON=2.545 VOFF=0)
.MODEL S_VSWITCH_3 VSWITCH (RON=1 ROFF=1G VON=2.545 VOFF=2.4)
.MODEL S_VSWITCH_4 VSWITCH (RON=1 ROFF=1G VON=2.545 VOFF=2.4)
.MODEL S_VSWITCH_5 VSWITCH (RON=1 ROFF=1G VON=2.545 VOFF=2.4)
.MODEL S_VSWITCH_6 VSWITCH (RON=1 ROFF=1G VON=2.545 VOFF=2.4)
.MODEL S_VSWITCH_7 VSWITCH (RON=1 ROFF=1G VON=2.545 VOFF=2.4)
.MODEL S_VSWITCH_8 VSWITCH (RON=300U ROFF=1G VON=2.545 VOFF=0)
.MODEL S_VSWITCH_9 VSWITCH (RON=300U ROFF=1G VON=2.545 VOFF=0)
.MODEL S_VSWITCH_10 VSWITCH (RON=300U ROFF=1G VON=2.545 VOFF=0)
.MODEL S_VSWITCH_11 VSWITCH (RON=300U ROFF=1G VON=2.545 VOFF=0)
.MODEL S_VSWITCH_12 VSWITCH (RON=300U ROFF=1G VON=2.545 VOFF=0)
.MODEL S_VSWITCH_13 VSWITCH (RON=300U ROFF=1G VON=2.545 VOFF=0)
.MODEL S_VSWITCH_14 VSWITCH (RON=300U ROFF=1G VON=2.545 VOFF=0)
.MODEL S_VSWITCH_15 VSWITCH (RON=300U ROFF=1G VON=2.545 VOFF=0)
.MODEL S_VSWITCH_16 VSWITCH (RON=300U ROFF=1G VON=2.545 VOFF=0)
.MODEL S_VSWITCH_17 VSWITCH (RON=300U ROFF=1G VON=2.545 VOFF=0)
.MODEL S_VSWITCH_18 VSWITCH (RON=300U ROFF=1G VON=2.545 VOFF=0)
.MODEL S_VSWITCH_19 VSWITCH (RON=300U ROFF=1G VON=2.545 VOFF=0)
.ENDS



**** INVERTER *********************************************************************************************
*$
.SUBCKT IV110_0  A Y DVDD DVSS PARAMS: RDRV=10K RDLY=10K CDLY=0.1PF DIV=2
RA A DVSS 1E11
CA A DVSS 0.01PF
EINV YI 0 VALUE={IF(V(A,DVSS) > (V(DVDD,DVSS)/{DIV}), V(DVSS), V(DVDD))}
RD YI YP {RDLY}
CD YP DVSS {CDLY}
EOUT YPP DVSS YP DVSS 1
RDR YPP Y {RDRV}
RO Y DVSS 1E11
.ENDS IV110_0 
*$


* TLV3501 RAIL-TO-RAIL, HIGH-SPEED COMPARATOR SPICE MACROMODEL
*
* MODEL DEFINITION BY T E KUEHL - TEXAS INSTRUMENTS INC.
*          
* REV. A    20 APRIL 2007, BY W.K. SANDS
*
*
*     THIS MACROMODEL HAS BEEN OPTIMIZED TO MODEL THE AC, DC, AND TRANSIENT RESPONSE PERFORMANCE WITHIN 
*     THE DEVICE DATA SHEET SPECIFIED LIMITS. CORRECT OPERATION OF THIS MACROMODEL HAS BEEN VERIFIED ON
*     MICROSIM P-SPICE VER. 8.0, DESIGNSOFT TINA, AND ON PENZAR DEVELOPMENT TOPSPICE VER. 6.82D. FOR HELP
*     WITH OTHER ANALOG SIMULATION SOFTWARE, PLEASE CONSULT YOUR SOFTWARE SUPPLIER. 
*
*  
* COPYRIGHT 2007 BY TEXAS INSTRUMENTS CORPORATION
*
* BEGIN MODEL TLV3501
* BEGIN NOTES
* MODEL FEATURES INCLUDE OUTPUT SWING,
* OUTPUT CURRENT THRU THE SUPPLY RAILS,
* TPD VS CLOAD, TPD VS DRIVE LEVEL,
* TPD VS SUPPLY VOLTAGE, RISE AND FALL
* TIME, INPUT CAPACITANCE, INPUT BIAS
* CURRENT, INPUT COMMON MODE VOTAGE
* RANGE, INPUT HYSTERESIS, HIGH CLOAD
* EFFECTS, OUTPUT CLAMP DIODES,
* QUIESCENT SUPPLY VS SUPPLY VOLTAGE,
* QUIESCENT CURRENT AT SHUTDOWN,
* SHUTDOWN THRESHOLD, ENABLE TIME,
* AND DISABLE TIME.
* MODEL TEMP RANGE IS -40 TO +125 DEG C.
* NOTE THAT MODEL IS FUNCTIONAL OVER
* THIS RANGE BUT NOT ALL PARAMETERS
* TRACK THOSE OF THE REAL PART.
* END NOTES
* PINOUT ORDER +IN -IN +V -V OUT EN
* PINOUT ORDER  3   1   4  2  5   6
.SUBCKT TLV3501_0  3 1 4 2 5 6
M12 7 8 4 4 MCPO
M13 7 8 2 2 MCNO
E1 9 10 11 12 1
E2 10 13 14 13 0.5
R1 0 10 1E9
R2 0 10 1E9
C1 8 15 0.53E-12
R3 8 9 800
E3 15 13 7 13 1
R5 15 8 1E5
M1 11 3 16 16 MCI
M2 17 1 16 16 MCI
I1 16 13 50E-6
M4 17 17 18 18 MCP
M3 11 11 18 18 MCP
R6 17 11 1E7
M5 19 17 18 18 MCP
M6 12 11 18 18 MCP
M7 19 19 20 20 MCN
M8 19 12 20 20 MCC
M9 12 19 20 20 MCC
M10 12 12 20 20 MCN
M11 20 20 13 13 MCN
R8 21 7 18
C3 12 11 0.01F
C4 11 17 110E-15
E4 22 0 3 0 1
E5 23 0 1 0 1
R9 24 23 1E3
R10 25 22 1E3
M14 26 25 13 13 MCNV
M15 27 25 14 14 MCPV
R11 26 14 1E6
R12 13 27 1E6
E6 18 14 28 14 1
V28 28 2 6.5
M16 29 26 13 13 MCN
M17 29 26 14 14 MCP
M18 8 29 14 14 MCPO
M19 8 27 14 14 MCPO
M20 30 24 13 13 MCNV
M21 31 24 14 14 MCPV
R15 30 14 1E6
R16 13 31 1E6
M22 32 30 13 13 MCN
M23 32 30 14 14 MCP
M24 8 32 14 14 MCPO
M25 8 31 14 14 MCPO
E8 33 5 34 0 -10
E9 35 21 34 0 10
M26 21 36 5 37 MNSW
M27 5 38 21 39 MPSW
R17 0 39 1E12
R18 37 0 1E12
V29 36 33 5
V30 38 35 -5
R19 0 35 1E12
R20 0 33 1E12
E10 14 0 4 0 1
M28 8 40 14 14 MCPO
M29 40 34 0 0 MCNS
R21 40 14 1E6
M45 41 42 0 0 NEN L=3U W=3000U
R133 41 43 1E6
V52 43 0 1
C27 6 0 1E-12
V53 41 44 1.111E-6
R134 0 44 1E12
C34 43 41 1E-18
M50 45 46 0 0 NEN L=3U W=300U
M51 47 45 0 0 NEN L=3U W=300U
R299 45 43 1E4
R300 47 43 1E4
C36 43 45 2.1E-12
C106 43 47 14E-12
M47 46 6 14 14 PEN L=6U W=60U
R301 0 46 1E4
C107 5 0 0.5E-12
R302 48 34 1E3
C108 34 0 2E-12
E11 48 0 44 0 1
E12 13 0 2 0 1
M52 49 50 2 2 MNIQ
R303 49 4 28E3
G1 4 2 51 0 3.05E-3
V55 52 48 -1
E13 53 0 52 0 -1
R304 0 52 1E12
R305 0 52 1E12
R306 0 48 1E12
R307 0 48 1E12
V56 53 51 3.111E-6
R308 0 51 1E12
R309 0 53 1E12
I2 4 2 2E-6
D1 54 0 DD
I3 0 54 1E-3
V57 54 55 0.65
R310 0 55 1E6
E14 42 47 55 0 0.9
R311 47 42 1E6
R312 13 16 1E12
C109 16 13 1E-16
C110 3 0 2E-12
C111 1 0 2E-12
I4 3 0 2E-12
I5 1 0 2E-12
R313 0 6 1E12
E15 50 2 51 0 1
D2 5 4 DC
D3 2 5 DC
R314 0 50 1E12
.MODEL DD D
.MODEL DC D RS=10
.MODEL MCI NMOS KP=8600U VTO=2
.MODEL MCC NMOS KP=215U VTO=2
.MODEL MCN NMOS KP=200U VTO=2
.MODEL MCP PMOS KP=200U VTO=-2
.MODEL MCNV NMOS KP=2000U VTO=-0.27
.MODEL MCPV PMOS KP=2000U VTO=0.28
.MODEL MCNO NMOS KP=35000U VTO=2
.MODEL MCPO PMOS KP=35000U VTO=-2
.MODEL MNSW NMOS KP=35000U VTO=2.5 IS=1E-18
.MODEL MPSW PMOS KP=35000U VTO=-2.5 IS=1E-18
.MODEL MCNS NMOS KP=200U VTO=0.5
.MODEL NEN NMOS KP=200U VTO=0.5 IS=1E-18
.MODEL PEN PMOS KP=200U VTO=-1.2 IS=1E-18
.MODEL MNIQ NMOS KP=35000U VTO=0.5 IS=1E-18
.ENDS
* END MODEL TLV3501


*********************************************

*********************************************
*       TEXAS INSTRUMENTS INC.
*********************************************
.SUBCKT DELAY_LINE_0  VI VO 

*///////////////////////////////
*//
*// BEGINS MODEL
*//

*///////////////////////////////
*//
*// DELAY CELL BUFFERED
*//

E1 VIX 0 VI 0 1 
T1 VIX 0 VOX 0 Z0 = 75 TD = 1.5MS
RL VOX 0 75
E2 VO 0 VOX 0 1

.ENDS DELAY_LINE_0 


*$
*
.SUBCKT OR210_0  A B DVDD DVSS Y PARAMS: RDRV=100 RDLY=10 CDLY=0.1PF DIV=2
RA A DVSS 1E11
CA A DVSS 0.01PF
RB B DVSS 1E11
CB B DVSS 0.01PF
E3 YI 0 VALUE={IF((V(A,DVSS) > (V(DVDD,DVSS)/{DIV})) | 
+ (V(B,DVSS) > (V(DVDD,DVSS)/{DIV})), V(DVDD), V(DVSS))}
RM YI YP   {RDLY}
CM YP DVSS {CDLY}
EOUT YPP DVSS YP DVSS 1
RDR YPP Y {RDRV}
RO Y DVSS 1E11
.ENDS OR210_0  
*$


*VOLTAGE CONTROLLED SOURCE WITH LIMITS
.SUBCKT VCVS_LIMIT_0  VC+ VC- VOUT+ VOUT-
*              
.PARAM GAIN = 1000
.PARAM VPOS = 5
.PARAM VNEG = 0
E1 VOUT+ VOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),VPOS,VNEG)}
.ENDS VCVS_LIMIT_0 


*********************************************
*    
*********************************************
*       TEXAS INSTRUMENTS INC.
*********************************************
.SUBCKT STD_OPA_FD_0  VDD VIP VIN VOP VON VSS

*///////////////////////////////
*//
*// BEGINS MODEL
*//

*///////////////////////////////
*//
*// INPUT STAGE
*//

EIP  FP1  VCM  VIP  VIN  200E3
EIN  VCM  FP2  VIP  VIN  200E3

RP1  FP1  VIBP  5E+6 
CP1  VIBP 0  3.18E-10 IC = 0

RP2  FP2  VIBN  5E+6
CP2  VIBN 0  3.18E-10 IC = 0

EVCM VCM 0 VALUE = {(V(VDD,0)+V(VSS,0))*0.5}

*///////////////////////////////
*//
*// OUTPUT BUFFER
*//

EBP  VOP  0  VIBP  0  1

EBN  VON  0  VIBN  0  1

*///////////////////////////////
*//
*// VOLTAGE CLAMP
*//

VPMAX  VDD  VDDX  0.1
VNMIN  VSSX  VSS  0.1 

*POSITIVE OUTPUT
D1  VIBP  VOE1  DIODO
E1  VOE1  0  VDDX  VIBP  100E3
D2  VOE2  VIBP  DIODO
E2  VOE2  0  VSSX  VIBP  100E3

*NEGATIVE OUTPUT
D3  VIBN  VOE3  DIODO
E3  VOE3  0  VDDX  VIBN  100E3
D4  VOE4  VIBN  DIODO
E4  VOE4  0  VSSX  VIBN  100E3

.MODEL SMOD VSWITCH(RON = 1U ROFF = 1E9 VON = 100M VOFF = 101M)
.MODEL DIODO D(N = 0.001)

.ENDS STD_OPA_FD_0 


**** 2 INPUT AND **********************************
.SUBCKT AN210_0  A B Y DVDD DVSS PARAMS: RDRV=10K RDLY=10K CDLY=0.1PF DIV=2
RA A DVSS 1E11
CA A DVSS 0.01PF
RB B DVSS 1E11
CB B DVSS 0.01PF
EINV YI 0 VALUE={IF(V(A,DVSS) > (V(DVDD,DVSS)/{DIV}) & V(B,DVSS) > (V(DVDD,DVSS)/{DIV}), V(DVDD), V(DVSS))}
RD YI YP {RDLY}
CD YP DVSS {CDLY}
EOUT YPP DVSS YP DVSS 1
RDR YPP Y {RDRV}
RO Y DVSS 1E11
.ENDS AN210_0  


**** INVERTER *********************************************************************************************
*$
.SUBCKT IV110_1  A Y DVDD DVSS PARAMS: RDRV=10K RDLY=10K CDLY=0.1PF DIV=2.686
RA A DVSS 1E11
CA A DVSS 0.01PF
EINV YI 0 VALUE={IF(V(A,DVSS) > (V(DVDD,DVSS)/{DIV}), V(DVSS), V(DVDD))}
RD YI YP {RDLY}
CD YP DVSS {CDLY}
EOUT YPP DVSS YP DVSS 1
RDR YPP Y {RDRV}
RO Y DVSS 1E11
.ENDS IV110_1 
*$


.END