*$
* TPS24700_TRANS
*****************************************************************************
* (C) Copyright 2011 Texas Instruments Incorporated. All rights reserved.
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.
** TI and its licensors and suppliers make no warranties, either expressed
** or implied, with respect to this model, including the warranties of 
** merchantability or fitness for a particular purpose.  The model is
** provided solely on an "as is" basis.  The entire risk as to its quality
** and performance is with the customer
*****************************************************************************
*
** Released by: Analog eLab Design Center, Texas Instruments Inc.
* Part: TPS24700
* Date: 5/13/2011
* Model Type: Transient
* Simulator: PSPICE
* Simulator Version: 16.2
* EVM Order Number: TPS24700EVM-001
* EVM Users Guide: SLUU459 January 2011
* Datasheet: SLVSAL3A - March 2011 - Revised April 2011
*
* Model Version: Final 1.00
*
*****************************************************************************
*
* Updates:
*
* Final 1.00
* Release to Web.
*
*****************************************************************************
.subckt TPS24700_TRANS EN GATE PG_B TIMER VCC SENSE OUT GND
V_U4_V1         U4_N242491 0 20V
C_U4_C1         0 U4_N09606  100u IC=0 
G_U4_G3         0 U4_N09606 U4_N179884 0 1
V_U4_V3         U4_N219194 0 1.35Vdc
X_U4_U35         U4_N15257 U4_N214095 GFAULT U4_N236361 SRLATCHRHP_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U4_U16         U4_N16176 U4_VRETRY U4_N16234 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
R_U4_R7         0 U4_N231783  1e8  
R_U4_R3         0 U4_N47305  1  
V_U4_V2         U4_VRETRY 0 {RETRY}
I_U4_I1         TIMER 0 DC 10e-6  
R_U4_R2         U4_N51695 GFAULT  1  
D_U4_D3         U4_N09606 U4_N242491 D_D1 
V_U4_V4         U4_N220091 0 1Vdc
V_U4_V5         U4_N222637 0 17V
X_U4_U27         U4_N251607 U4_N251587 U4_N193291 OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
D_U4_D4         TIMER U4_N24434 D_D1 
R_U4_R6         0 U4_N180928  1e8  
X_U4_U29         GFAULT U4_N251591 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U4_U28         TIMEOUT U4_N251591 U4_N251607 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U4_U26         FAULT U4_N47305 U4_RESET OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U4_U19         U4_N7484176 GFAULT U4_N251587 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
R_U4_R10         0 U4_N236361  1e8  
D_U4_D5         0 TIMER D_D1 
C_U4_C2         0 U4_N51695  10u IC=0 
G_U4_G5         TIMER 0 U4_RESET 0 2e-3
X_U4_U31         U4_N15257 U4_N7484176 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
E_U4_GAIN1         U4_N24434 0 VALUE {1 * V(VCC)}
X_U4_U32         U4_N16234 FAULT U4_N214095 OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U4_U25         U4_N15257 U4_N179884 U4_N180928 MONONEG_PS PARAMS: PW=100e-6
X_U4_U33         U4_N09606 U4_N222637 U4_N16176 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
G_U4_G4         0 TIMER U4_N193291 0 20e-6
X_U4_U34         U4_N51695 U4_N47305 U4_N231783 MONONEG_PS PARAMS: PW=1.7e-3
X_U4_U8         TIMER U4_N219194 U4_N220091 U4_N15257 COMPHYS_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
X_U4_S2    U4_RESET 0 U4_N09606 0 TIMER_U4_S2 
R_U1_R2         0 U1_OC  1e6  
X_U1_U641         POR U1_N16804784 U1_N16804278 SUSTAIN OR3_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U1_U637         U1_N16802993 CEN U1_GATEN AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U1_U19         U1_OC U1_N16821351 U1_N16821349 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U1_U646         U1_N16993389 U1_G IMON NMOSIDEAL_PS PARAMS: K=1 VTH=0
X_U1_U28         U1_N16821360 U1_CLEN U1_N16821399 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U1_U30         GHI U1_N16821360 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U1_U640         CEN U1_CLEN CLEN_ON AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
E_U1_E8         U1_N16897001 0 SENSE OUT 1
E_U1_E7         U1_ID 0 VCC SENSE 1
X_U1_U31         U1_CLEN U1_N16821351 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
E_U1_MULT2         U1_G 0 VALUE {V(POWEROK)*V(U1_N16982788)}
R_U1_Rset         U1_N16993389 VCC  100  
X_U1_U27         U1_N16821399 U1_N16821349 TIMEOUT OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U1_U35         U1_N16804784 U1_N17031558 U1_N17026512 N17028395
+  SRLATCHRHP_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U1_S4    U1_POWEROK_B 0 U1_G 0 CONTROL_U1_S4 
X_U1_U638         U1_GATEN U1_N16804278 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_U1_R7         0 U1_N17026553  1e8  
X_U1_U32         POWEROK U1_POWEROK_B INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U1_U629         U1_ID U1_N16801778 U1_N16804784 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
X_U1_U29         U1_N17026512 PULLDOWN U1_N17026553 MONOPOS_PS PARAMS:
+  PW=13.5e-6
X_U1_U632         U1_CLEN CLEN_B U1_GATEN U1_N16798708 GHI U1_N16849902
+  DFFSR_SHPBASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U1_U645         U1_N16982788 IMON U1_N16993389 SENSE VCVSCLIP_PS PARAMS:
+  GAIN=100 VOMAX=2.3 VOMIN=0
V_U1_V48         U1_N17073757 0 0.675
X_U1_U636         GFAULT U1_N16802993 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U1_U37         PULLDOWN U1_N17031102 U1_N17026593 MONONEG_PS PARAMS: PW=1e-6
X_U1_U631         IMON U1_N17073757 U1_N16811889 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
R_U1_R6         0 U1_G  10e6  
C_U1_C6         0 U1_G  1n  
X_U1_S3    CLEN_B 0 U1_N16811889 U1_OC CONTROL_U1_S3 
X_U1_U633         PULLDOWN POR U1_N16849902 OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U1_U634         U1_N17031102 POR U1_N17031558 OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
R_U1_R9         0 U1_N17026593  1e8  
V_U1_V47         U1_N16798708 0 1V
V_U1_V46         U1_N16801778 0 0.06
R_U1_Rimon         0 IMON  2.7k  
R_U1_R8         0 U1_N16811889  1e6  
R_U1_R1         0 SENSE  1e9  
E_U1_LIMIT3         INRUSHP 0 VALUE {LIMIT(V(U1_N16897001),1e-6,1000)}
V_U3_V12         U3_N7343770 GND 0.7Vdc
X_U3_U21         U3_CHANGE U3_BUF_OUT U3_SET1 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
V_U3_V1         U3_N7617220 GND 1Vdc
V_U3_V2         U3_N16533881 GND 0.17Vdc
R_U3_R5         U3_VDS_OK U3_3_4MS  4.76k  
X_U3_U33         U3_N7343786 SHUT INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
V_U3_V3         U3_N211078 GND 0.07Vdc
X_U3_U23         U3_VDS_OK U3_NEG U3_N7617306 MONONEG_PS PARAMS: PW=100e-6
C_U3_C3         U3_3_4MS GND  1u  
X_U3_U49         U3_N241259 U3_POR_B BUF_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5 DELAY=400u
X_U3_U34         SHUT U3_START INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U24         U3_N7616708 U3_CHANGE U3_SET0 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U3_U48         EN U3_N234857 U3_N234897 U3_ENABLEOK COMPHYS_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
X_U3_U25         U3_3_4MS U3_BUF_OUT BUF_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
X_U3_U26         U3_VDS_OK U3_POS U3_N7617098 MONOPOS_PS PARAMS: PW=100e-6
X_U3_U31         POWEROK U3_ENABLEOK CEN AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
V_U3_V9         U3_N234857 GND 1.35Vdc
X_U3_U43         U3_BUF_OUT U3_N7616708 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U3_U65         U3_POR_B U3_VCCOK U3_ENABLEOK FAULT NAND3_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U64         U3_POR_B POR INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
R_U3_R4         GND U3_N7617098  1e8  
V_U3_V7         U3_N226700 GND 2.32Vdc
V_U3_V10         U3_N234897 GND 0.05Vdc
X_U3_U44         U3_N16533881 INRUSHP U3_N211078 U3_COMP_OUT COMPHYS_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
V_U3_V8         U3_N229363 GND 0.1Vdc
X_U3_S4    U3_SET0 GND U3_3_4MS GND HK_U3_S4 
X_U3_U46         VCC U3_N222423 U3_N241259 COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
X_U3_U20         U3_POR_B U3_VCCOK POWEROK AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U3_S3    U3_BUF_OUT GND PG_B GND HK_U3_S3 
X_U3_U53         GATE U3_N7343770 U3_N7343786 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
X_U3_U22         U3_COMP_OUT CEN U3_VDS_OK AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U3_U37         U3_POS U3_NEG U3_CHANGE OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U3_S5    U3_SET1 GND U3_N7617220 U3_3_4MS HK_U3_S5 
X_U3_U47         VCC U3_N226700 U3_N229363 U3_VCCOK COMPHYS_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
V_U3_V6         U3_N222423 GND 1.5Vdc
R_U3_R6         GND U3_N7617306  1e8  
V_U2_V10         U2_N16801945 VCC 13.5V
D_U2_D4         GATE U2_N16777448 D_D1 
V_U2_V9         U2_N16802332 U2_N16801821 6V
X_U2_S5    PULLDOWN 0 U2_N16778787 U2_N16829936 GATE_DRIVE_U2_S5 
R_U2_R6         0 U2_N16778787  100k  
G_U2_ABM2I3         GATE 0 VALUE { {LIMIT(IF(V(VCC) > 1.0 & V(PULLDOWN) > 0.5,
+  100m*V(GATE), 0), 0, 0.5)}    }
G_U2_ABM2I1         GATE 0 VALUE { {LIMIT(IF(V(VCC) > 1.99 & V(SUSTAIN) > 0.5,
+  4.5m*V(VCC), 0), 0, 0.014)}    }
G_U2_ABM2I2         GATE 0 VALUE { {LIMIT(IF(V(PULLDOWN) > 0.5,
+  0.3*(V(U2_N16778787)-2), 0), 0, 0.7)}    }
G_U2_G4         0 GATE CLEN_B 0 30e-6
D_U2_D12         0 GATE D_D1 
X_U2_S4    CEN 0 U2_N16805664 GHI GATE_DRIVE_U2_S4 
D_U2_D14         U2_N16802332 U2_N16801945 D_D1 
D_U2_D9         0 U2_N16777311 D_D1 
E_U2_U625         U2_N16815405 0 VALUE 
+ {LIMIT(V(U2_N16848903,IMON)*400,-30V,+30V)} _U2_U625 U2_N16848903 IMON 1G

V_U2_V2         U2_N16848903 0 0.675Vdc
E_U2_LIMIT1         U2_N16815294 0 VALUE {LIMIT(V(U2_N16815405),-30,30)}
G_U2_ABMII1         0 U2_N16777311 VALUE { {LIMIT(V(U2_N16777313) *1u,
+  -30u,30u)}    }
V_U2_V6         U2_N16777448 0 30V
D_U2_D5         U2_N16829936 GATE D_D1 
X_U2_S3    CLEN_ON 0 U2_N16777311 GATE GATE_DRIVE_U2_S3 
R_U2_R4         0 U2_N16777311  5G  
C_U2_C10         0 U2_N16777313  1n  
R_U2_R7         U2_N16777313 U2_N16815294  500  
D_U2_D10         U2_N16777311 U2_N16777448 D_D1 
C_U2_C1         0 GATE  1p IC=0 
R_U2_R8         U2_N16802332 GATE  17k  
R_U2_R5         U2_N16778787 VCC  1k  
X_U2_U629         U2_N16801821 VCC U2_N16805664 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
.param RETRY=0
.ends TPS24700_TRANS
*$
.subckt TIMER_U4_S2 1 2 3 4  
S_U4_S2         3 4 1 2 _U4_S2
RS_U4_S2         1 2 1G
.MODEL         _U4_S2 VSWITCH Roff=1G Ron=1e-3 Voff=0.25V Von=0.75V
.ends TIMER_U4_S2
*$
.subckt CONTROL_U1_S4 1 2 3 4  
S_U1_S4         3 4 1 2 _U1_S4
RS_U1_S4         1 2 1G
.MODEL         _U1_S4 VSWITCH Roff=100e6 Ron=1 Voff=0.25V Von=0.75V
.ends CONTROL_U1_S4
*$
.subckt CONTROL_U1_S3 1 2 3 4  
S_U1_S3         3 4 1 2 _U1_S3
RS_U1_S3         1 2 1G
.MODEL         _U1_S3 VSWITCH Roff=100e6 Ron=1 Voff=0.25V Von=0.75V
.ends CONTROL_U1_S3
*$
.subckt HK_U3_S4 1 2 3 4  
S_U3_S4         3 4 1 2 _U3_S4
RS_U3_S4         1 2 1G
.MODEL         _U3_S4 VSWITCH Roff=10e6 Ron=1.0 Voff=0.25V Von=0.75V
.ends HK_U3_S4
*$
.subckt HK_U3_S3 1 2 3 4  
S_U3_S3         3 4 1 2 _U3_S3
RS_U3_S3         1 2 1G
.MODEL         _U3_S3 VSWITCH Roff=10e6 Ron=55 Voff=0.25V Von=0.75V
.ends HK_U3_S3
*$
.subckt HK_U3_S5 1 2 3 4  
S_U3_S5         3 4 1 2 _U3_S5
RS_U3_S5         1 2 1G
.MODEL         _U3_S5 VSWITCH Roff=10e6 Ron=1.0 Voff=0.25V Von=0.75V
.ends HK_U3_S5
*$
.subckt GATE_DRIVE_U2_S5 1 2 3 4  
S_U2_S5         3 4 1 2 _U2_S5
RS_U2_S5         1 2 1G
.MODEL         _U2_S5 VSWITCH Roff=100e6 Ron=0.001 Voff=0.25V Von=0.75V
.ends GATE_DRIVE_U2_S5
*$
.subckt GATE_DRIVE_U2_S4 1 2 3 4  
S_U2_S4         3 4 1 2 _U2_S4
RS_U2_S4         1 2 1G
.MODEL         _U2_S4 VSWITCH Roff=100e6 Ron=1 Voff=0.25V Von=0.75V
.ends GATE_DRIVE_U2_S4
*$
.subckt GATE_DRIVE_U2_S3 1 2 3 4  
S_U2_S3         3 4 1 2 _U2_S3
RS_U2_S3         1 2 1G
.MODEL         _U2_S3 VSWITCH Roff=100e6 Ron=1 Voff=0.25V Von=0.75V
.ends GATE_DRIVE_U2_S3
*$
.SUBCKT AND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND2_BASIC_GEN
*$
.SUBCKT AND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND3_BASIC_GEN
*$
.SUBCKT AND4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH} &
+ V(D) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND4_BASIC_GEN
*$
.SUBCKT NAND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND2_BASIC_GEN
*$
.SUBCKT NAND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND3_BASIC_GEN
*$
.SUBCKT NAND4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH} &
+ V(D) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND4_BASIC_GEN
*$
.SUBCKT OR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR2_BASIC_GEN
*$
.SUBCKT OR3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR3_BASIC_GEN
*$
.SUBCKT OR4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR4_BASIC_GEN
*$
.SUBCKT NOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR2_BASIC_GEN
*$
.SUBCKT NOR3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR3_BASIC_GEN
*$
.SUBCKT NOR4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR4_BASIC_GEN
*$
.SUBCKT NOR5_BASIC_GEN A B C D E Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH} |
+ V(E) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR5_BASIC_GEN
*$
.SUBCKT NOR6_BASIC_GEN A B C D E F Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH} |
+ V(E) > {VTHRESH} |
+ V(F) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR6_BASIC_GEN
*$
.SUBCKT INV_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS INV_BASIC_GEN
*$
.SUBCKT XOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(A) > {VTHRESH}  ^  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS XOR2_BASIC_GEN
*$
.SUBCKT XNOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(A) > {VTHRESH}  ^  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS XNOR2_BASIC_GEN
*$
.SUBCKT MUX2_BASIC_GEN A B S Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(S) > {VTHRESH},  
+ V(B),V(A))}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS MUX2_BASIC_GEN
*$
.SUBCKT INV_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS INV_DELAY_BASIC_GEN
*$
.SUBCKT BUF_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS BUF_DELAY_BASIC_GEN
*$
.SUBCKT BUF_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS BUF_BASIC_GEN
*$
**Set has higher priority in this latch
.SUBCKT SRLATCHSHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(S) > {VTHRESH},5,IF(V(R)>{VTHRESH},-5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n 
.IC V(Qint) {VSS}
.ENDS SRLATCHSHP_BASIC_GEN
*$
**Reset has higher priority in this latch
.SUBCKT SRLATCHRHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,IF(V(S)>{VTHRESH},5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n
.IC V(Qint) {VSS}
.ENDS SRLATCHRHP_BASIC_GEN
*$
**Reset has higher priority in this latch and active low set and reset - basically NAND based SR latch
.SUBCKT SBRBLATCHRHP_BASIC_GEN SB RB Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(RB) < {VTHRESH},-5,IF(V(SB) < {VTHRESH},5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
.IC V(Qint) {VSS}
.ENDS SBRBLATCHRHP_BASIC_GEN
*$
**Reset has higher priority in this latch and active low set and reset - basically NAND based SR latch
.SUBCKT SBRBLATCHSHP_BASIC_GEN SB RB Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(SB) < {VTHRESH},5,IF(V(RB) < {VTHRESH},-5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
.IC V(Qint) {VSS}
.ENDS SBRBLATCHSHP_BASIC_GEN
*$
.SUBCKT DFFSBRB_SHPBASIC_GEN Q QB CLK D RB SB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
GQ 0 Qint VALUE = {IF(V(SB) < {VTHRESH},5,IF(V(RB)<{VTHRESH},-5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSBRB_SHPBASIC_GEN
*$
.SUBCKT DFFSR_SHPBASIC_GEN Q QB CLK D R S PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} 
GQ 0 Qint VALUE = {IF(V(S) > {VTHRESH},5,IF(V(R) > {VTHRESH},-5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSR_SHPBASIC_GEN
*$
.SUBCKT DFFSBRB_RHPBASIC_GEN Q QB CLK D RB SB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} 
GQ 0 Qint VALUE = {IF(V(RB) < {VTHRESH},-5,IF(V(SB)< {VTHRESH},5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 5
D_D11 0 Qint D_D1 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSBRB_RHPBASIC_GEN
*$
.SUBCKT DFFSR_RHPBASIC_GEN Q QB CLK D R S PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}  
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,IF(V(S) > {VTHRESH},5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSR_RHPBASIC_GEN
*$
.SUBCKT COMP_BASIC_GEN INP INM Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
E_ABM Yint 0 VALUE {IF (V(INP) > 
+ V(INM), {VDD},{VSS})}
R1 Yint Y 1
C1 Y 0 1n
.ENDS COMP_BASIC_GEN
*$
.SUBCKT COMPHYS_BASIC_GEN INP INM HYS OUT PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
EIN INP1 INM1 INP INM 1 
EHYS INP1 INP2 VALUE { IF( V(1) > {VTHRESH},-V(HYS),0) }
EOUT OUT 0 VALUE { IF( V(INP2)>V(INM1), {VDD} ,{VSS}) }
R1 OUT 1 1
C1 1 0 5n
RINP1 INP1 0 1K
.ENDS COMPHYS_BASIC_GEN
*$
.SUBCKT COMPHYS2_BASIC_GEN INP INM HYS OUT PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
+ T=10
EIN INP1 INM1 INP INM 1 
EHYS INM2 INM1 VALUE { IF( V(1) > {VTHRESH},-V(HYS)/2,V(HYS)/2) }
EOUT OUT 0 VALUE { IF( V(INP1)>V(INM2), {VDD} ,{VSS}) }
R1 OUT 1 1
C1 1 0 {T*1e-9}
RINP1 INP1 0 10K
RINM2 INM2 0 10K
.ENDS COMPHYS2_BASIC_GEN
*$
.SUBCKT MONONEG_PS in Q Qn PARAMS: PW=1u 
VS VSUP 0 DC 1
GIN VSUP YA VALUE={IF(V(IN)<0.5, V(VSUP)/1000K, 0)}
GDIS YA 0 VALUE={IF(V(IN)<0.5,0, V(YA)/1m)}
CIN YA 0 1n IC=0
RIN YA 0 1e11
EABM1 YTD 0 VALUE={IF(V(YA)> {PW*1000}, 0, 1)}
RYTD YTD 0 1e11
EXOR P 0 VALUE={IF(V(YTD) > 0.5 ^ V(IN) > .5, 1, 0)}
ROUTpp2 P 0 1e11
EAND1 Q1 0 VALUE={ IF(V(P)>0.5 & V(YTD)>0.5, 1, 0)}
Ro1 Q1 Q 1m
Co1 Q 0 1p IC=0
ROUT2 Q 0 1e11
EAND2 Qn1 0 VALUE={ IF(V(Q)>0.5, 0, 1)}
Ro2 Qn1 Qn 1m
Co2 Qn 0 1p
ROUT4 Qn 0 1e11
.ENDS MONONEG_PS
*$
.SUBCKT MONOPOS_PS in Q Qn PARAMS: PW=1u 
VS VSUP 0 DC 1
GIN VSUP YA VALUE={IF(V(IN)>0.5, V(VSUP)/1000K, 0)}
GDIS YA 0 VALUE={IF(V(IN)>0.5,0, V(YA)/1m)}
CIN YA 0 1n IC=0
RIN YA 0 1e11
EABM1 YTD 0 VALUE={IF(V(YA)> {PW*1000}, 1, 0)}
RYTD YTD 0 1e11
EXOR P 0 VALUE={IF(V(YTD) > 0.5 ^ V(IN) > .5, 1, 0)}
ROUTpp2 P 0 1e11
EAND1 Q1 0 VALUE={ IF(V(P)>0.5 & V(IN)>0.5, 1, 0)}
Ro1 Q1 Q 1m
Co1 Q 0 1p
ROUT2 Q 0 1e11
EAND2 Qn1 0 VALUE={ IF(V(Q)>0.5, 0, 1)}
Ro2 Qn1 Qn 1m
Co2 Qn 0 1p
ROUT4 Qn 0 1e11
.ENDS MONOPOS_PS
*$
.SUBCKT VCVSCLIP_PS YP YN POS NEG PARAMS: gain=1 vomax=1 vomin=-1
RP POS 0 1e6
CP POS 0 1n
RN NEG 0 1e6
CN NEG 0 1n
ROUTN YN 0 1e11
COUTN YN 0 0.01pF
***** boolean ************
EVCLP YP YN VALUE={LIMIT((V(POS)-V(NEG))*{gain},{vomin},{vomax})}
**************************
RO YP 0 1e9
.ENDS VCVSCLIP_PS
*$
.SUBCKT NMOSIDEAL_PS D G S PARAMS: k=1 vth=0
RDDUM D 0 1e11
RSDUM S 0 1e11
RGDUM G 0 1e11
EON Yp 0 VALUE={IF(V(G,S) > {vth}, 1, 0)}
GOUT D S VALUE={IF(V(D,S) >= (V(G,S)-{vth}), V(Yp)*({k}/2)*(V(G,S)-{vth})**2, V(Yp)*({k})*(V(G,S)-{vth}-V(D,S)/2)*V(D,S))}
.ENDS NMOSIDEAL_PS
*$
.SUBCKT myD_D1 1 2
D1 1 2 DD1
.MODEL DD1 D( IS=1e-15 TT=10p Rs=0.05 N=.1  )
.ENDS myD_D1
*$
.subckt D_D 1 2
d1 1 2 dd
.model dd d
+ is=1e-015
+ n=0.01
+ tt=1e-011
.ends D_D
*$
.MODEL D_D1 D( IS=1e-15 TT=10p Rs=0.05 N=.1  )
*$
.SUBCKT CESR IN OUT
+ PARAMs:  C=100u ESR=0.01 X=2 IC=0
C	IN 1  {C*X} IC={IC}
RESR	1 OUT {ESR/X}
.ENDS CESR
*$
.MODEL SMAT70A D
+ IS=40.837E-12
+ N=1.1702
+ RS=67.183E-3
+ IKF=24.188E-3
+ CJO=140.00E-12
+ M=.3333
+ VJ=.75
+ ISR=1.0985E-6
+ BV=99.550
+ IBV=866.04E-6
+ TT=7.2135E-9
*$
.MODEL BZT52C16 D
+ IS=1.0219E-9
+ N=1.6660
+ RS=.24457
+ IKF=14.056E-3
+ CJO=1.0000E-12
+ M=.3333
+ VJ=.75
+ ISR=39.560E-9
+ BV=16.083
+ IBV=.13012
+ TT=7.2135E-9
*$
.MODEL BAT46W D
+ IS=261.84E-9
+ N=1.4970
+ RS=.36492
+ IKF=6.0309E-3
+ CJO=22.187E-12
+ M=.60701
+ VJ=.83046
+ ISR=5.5932E-9
+ NR=3.1471
+ BV=100
+ IBV=100.00E-6
+ TT=5.0000E-9
*$
.SUBCKT CSD16401Q5  1 2 3
M1   4 5 6 6 NMOS W=4.8236088 L=0.5u 
DBD   6  4	DBD
RBD   6  4	1E12
CGD0  5  4	5E-12
CGD   5 12	245E-12
RG0  12  4	7.5e3
DGD   5 10 	DGD
RGD   5 10	1E13
DDG   4 10	DDG
RDG   4 10	1E13
* Note:  gate oxide capacitance included in NMOS below
CGS   5  6	743E-12
LGG   2 11  0.78e-9
RGG  11  5  1.2
LSS   3  7  0.14E-9
RS0   7  6	0.20E-3
LDD   1  9  0.05e-9
RDD   9  4	RTEMP 0.15e-3
******************************************************************* 
.MODEL  NMOS   NMOS (     LEVEL  = 6            
+ TOX    = 3e-8          NPEAK  = 1.365e17      NSUB   = 1.0e16
+ RD     = 0.29e-3       RS     = 0.15e-3
+ A0     = 1.1           A1     = 0.1           A2     = 0.55
+ UA     = 0.52e-9       UB     = 8.5e-18
+ UA1    = 2.1e-9        UB1    = -1.08e-17     UTE    = -1.95
+ KT1    = -0.15         KT2    = 0.022         KT1L   = 1.6e-8
+ DVT0   = 2.5           DVT1   = 0.8	      DVT2   = -0.033
+ ETA    = 0.3           ETA0   = 0.05          ETAB   = -0.07  
+ LDD    = 1.0E-7        XJ     = 8E-7          NLX    = 1.74e-7
+ PDIBL1 = 0.20          PDIBL2 = 0.085
+ PSCBE1 = 5.0e8         PSCBE2 = 2.3e-5        PCLM   = 1.9
+ VOFF   = -0.160        NFACTOR= 1.8           IS     = 0
+ CGSO   = 0             CGDO   = 0             CGBO   = 0  )
*******************************************************************
.MODEL DBD D (CJO=7565e-12 VJ=0.70 M=0.39 FC=0.5 TT=5E-09
+ IS=6.65e-12 N=1.022 RS=4.8e-4 TRS1=-3.0e-4 XTI=3.9 BV=27)
*******************************************************************
.MODEL DGD D (CJO=1200E-12 VJ=0.69 M=0.66 FC=0.5 IS=1e-25)
*******************************************************************
.MODEL DDG D (CJO=1200e-12 VJ=0.69 M=0.66 FC=0.5 IS=1e-12)
******************************************************************* 
.MODEL RTEMP (RES TC1=4.2E-3  TC2=4.3E-5)
******************************************************************* 
.ENDS CSD16401Q5
*$
