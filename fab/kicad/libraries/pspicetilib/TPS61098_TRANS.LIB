*$
* TPS61098
*****************************************************************************
* (C) Copyright 2015 Texas Instruments Incorporated. All rights reserved.                                            
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.
** TI and its licensors and suppliers make no warranties, either expressed
** or implied, with respect to this model, including the warranties of 
** merchantability or fitness for a particular purpose.  The model is
** provided solely on an "as is" basis.  The entire risk as to its quality
** and performance is with the customer.
*****************************************************************************
*
** Released by: WEBENCH Design Center, Texas Instruments Inc.
* Part: TPS61098
* Date: 29JUN2015
* Model Type: TRANSIENT
* Simulator: PSPICE
* Simulator Version: 16.2.0.p001
* EVM Order Number: TPS610981EVM-674
* EVM User's Guide: SLVUAG4–June 2015 
* Datasheet: SLVS873–JUNE 2014
*
* Model Version: Final 1.00
*
*****************************************************************************
*
* Updates:
*
* Final 1.00
* Release to Web.
*
*****************************************************************************
.SUBCKT TPS61098_TRANS SW VIN MODE VMAIN VSUB GND PARAMS: SS = 0
R_Rdrop         N169324030 VMAIN_INT  300m  
X_U68         N16933372 PTV_CTL N16932332 OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U7_U67         U7_N17213747 U7_N17213716 U7_N17213972 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
R_U7_R31         U7_N17214139 U7_VMAIN_TH_L  44k  
G_U7_ABMII6         U7_VMAIN_TH_L 0 VALUE { IF(V(U7_N17213563)>0.5, 1u, 0)    }
V_U7_V13         U7_N17213926 0 1Vdc
X_U7_U32         0 U7_N17213716 d_d PARAMS:
V_U7_V6         U7_N17213543 0 4.43
G_U7_ABMII5         U7_N17213926 COMP VALUE { IF(V(U7_N17213969) >0.5, 4u,0)   
+  }
X_U7_U68         U7_N17213670 U7_N17213972 U7_N17213969 OR2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
V_U7_V5         U7_N17213739 0 2
R_U7_R30         U7_N17213543 U7_VMAIN_TH_H  86k  
X_U7_U66         U7_SET U7_RESET U7_BURST_EN N17213639 srlatchrhp_basic_gen
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U7_U27         U7_N17213615 U7_N17213747 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
C_U7_C5         0 U7_SET  1n IC=0 
X_U7_U63         BURST_OUT HYS_MODE U7_N17213586 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
G_U7_ABMII10         U7_VMAIN_TH_H 0 VALUE { IF(V(U7_N17213563)>0.5, 1u, 0)   
+  }
X_U7_U12         U7_SET U7_N17213580 d_d PARAMS:
X_U7_U669         U7_N17213563 U7_N17214262 BUF_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=5n
X_U7_U29         U7_N17213615 BURST_OUT INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U7_U25         U7_N17213777 U7_N17213786 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_U7_R26         U7_N17213580 U7_SET  {50u/0.693n}  
C_U7_C8         0 U7_N17213563  1n IC=0 
C_U7_C12         U7_N17213777 0  12n IC=0 
X_U7_U30         U7_N17213586 U7_RESET INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_U7_R29         U7_N17213615 U7_N17213563  20  
X_U7_U26         U7_N17213777 U7_N17213739 d_d PARAMS:
G_U7_ABMII8         0 U7_N17213777 VALUE { IF(V(U7_BURST_EN) >0.5,
+  0.5m*V(VIN)/V(VMAIN_INT),0)    }
X_U7_U64         U7_BURST_EN U7_N17213786 U7_N17213670 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
E_U7_ABM11         U7_N17213615 0 VALUE { IF( V(MODE_CTL) > 0.5,IF(
+  V(VMAIN_INT) > V(U7_VMAIN_TH_H), 1, 0), IF( V(VMAIN_INT) > V(U7_VMAIN_TH_L),
+  1, 0))    }
X_U7_U31         ZCB U7_N17213609 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U7_U670         U7_N17213609 HYS_MODE BURST_OUT U7_N17213580 AND3_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U7_S18    U7_N17213647 0 U7_N17213777 0 BURST_MODE_U7_S18 
C_U7_C13         U7_N17213716 0  12n IC=0 
G_U7_ABMII9         0 U7_N17213716 VALUE { IF(V(U7_N17213615) < 0.5,
+  LIMIT(-0.5m*V(VIN)/(V(VMAIN_INT)+1u), -5m, 0),0)    }
X_U7_U28         U7_N17213615 U7_N17213716 d_d PARAMS:
C_U7_C7         0 U7_N17213647  1n IC=0 
R_U7_R28         U7_N17213670 U7_N17213647  10  
V_U7_V7         U7_N17214139 0 2.266
V_U4_V22         U4_N16763000 0 0.1V
E_U4_ABM6         U4_N16762724 0 VALUE { V(VIN)    }
E_U4_ABM16         FB_BOOST 0 VALUE { IF(V(MODE_CTL)>0.5
+  ,V(U4_FB_4P3),V(U4_FB_2P2) )    }
E_U4_E2         U4_N16762736 0 TABLE { V(U4_N16762724, 0) } 
+ ( (0.7,16)(0.9,14)(1.2,8)(1.5,5) )
X_U4_U12         VMAIN_INT U4_N16763006 U4_N16763000 U4_STARTUP_CTL
+  COMPHYS_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U4_U7         SW_INT U4_N16762858 U4_N16762736 0 RVAR PARAMS:  RREF=1
R_U4_R1         U4_FB_4P3 VMAIN_INT  1.65E6  
V_U4_VOSC         U4_N16762616 GND  
+PULSE 0 1 10u 1n 1n 0.3045u 0.4545u
X_U4_S2    U4_GATE_FET1 GND U4_N16762858 GND OSCR_U4_S2 
R_U4_R2         GND U4_FB_4P3  500k  
E_U4_ABM13         U4_GATE_FET1 0 VALUE { IF(V(U4_STARTUP_CTL) < 0.5, IF(
+  V(ENCIR1) > 0.5, V(U4_N16762616) ,0 ) ,0)    }
R_U4_R3         U4_FB_2P2 VMAIN_INT  600k  
R_U4_R4         GND U4_FB_2P2  500k  
V_U4_V2         U4_N16763006 0 1.8
V_V2         N169324520 GND -0.62V
X_U10         N169324520 SW_INT d_d1 PARAMS:
X_S17    N16932332 GND VMAIN_INT SW_INT TPS61098_S17 
X_U5_U670         LS_PRE U5_N22890 LS_ON AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
C_U5_C20         GND U5_N23126  1p  TC=0,0 
R_U5_R45         HS_PRE U5_N23126  2 TC=0,0 
X_U5_U636         U5_N23126 U5_N22890 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_U5_R44         LS_PRE U5_N22822  1m TC=0,0 
C_U5_C19         GND U5_N22822  1p  TC=0,0 
X_U5_U635         U5_N22822 U5_N22896 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U5_U642         ZCB HYS_MODE U5_N22954 HS_ON AND3_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U5_U669         HS_PRE U5_N22896 U5_N22954 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U637         PTV_CTL N16934620 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_S18    N16932335 GND SW_INT GND TPS61098_S18 
X_H3    SW_INT SW ISENSE GND TPS61098_H3 
X_U669         HS_ON BURST_OUT N16933372 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U671         N16934146 N16934620 N16932335 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_U2_R50         ENCIR1 ENCIR  1.58k  
V_U2_V4         U2_N16743999 0 2.25
C_U2_C22         ENCIR 0  1u IC={SS} 
V_U2_V44         U2_N16743993 0 0.1V
V_U2_V3         U2_N16741567 0 0.9V
X_U2_U9         VIN U2_N16739725 ENCIR1 COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
X_U2_U13         VIN U2_N16743999 U2_N16743993 U2_PTV_CTL_L COMPHYS_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
V_U2_V1         U2_N16739725 0 0.6V
V_U2_V2         U2_N16743662 0 4.44
V_U2_V33         U2_N16741504 0 0.2V
V_U2_V22         U2_N16743636 0 0.1V
X_U2_U11         MODE U2_N16741567 U2_N16741504 MODE_CTL COMPHYS_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U2_U12         VIN U2_N16743662 U2_N16743636 U2_PTV_CTL_H COMPHYS_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_U2_ABM2         PTV_CTL 0 VALUE { IF(V(MODE_CTL) > 0.5, V(U2_PTV_CTL_H),
+  V(U2_PTV_CTL_L) )    }
X_U670         LS_ON BURST_OUT N16934146 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_U6_R48         GND U6_N160468  1e8 TC=0,0 
E_U6_ABM11         U6_HYS_CHECK 0 VALUE { IF( V(LS_ON) >0.5,V(U6_N161652)
+  -70m,V(U6_N161652))    }
X_U6_U651         ENCIR U6_N160764 U6_N160890 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
C_U6_Chys         COMP 0  0.05f IC=0 
V_U6_V6         U6_N228955 GND 2m
C_U6_C22         U6_VREF 0  1n IC=0 
R_U6_R50         U6_N160526 U6_VREF  14.44  
X_U6_U658         U6_N228955 ISENSE U6_N228971 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
X_U6_U657         U6_N228971 LS_ON U6_ZC ZCB srlatchrhp_basic_gen PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
E_U6_ABM2         U6_N160902 0 VALUE { IF(V(VMAIN_INT) < 1.79,1,0)    }
E_U6_ABM10         U6_N230270 0 VALUE { IF(V(ENCIR) >0.5,  
+ LIMIT((V(U6_VREF) -   
+ V(FB_BOOST)) * 3m, 0,V(U6_ILIM)),0)  }
E_U6_ABM12         U6_N160526 0 VALUE { IF(V(ENCIR) >0.5, 1.0, 0)    }
X_U6_U652         ENCIR U6_N160764 INV_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5 DELAY=0.1u
E_U6_ABM1         U6_GAIN 0 VALUE { IF(V(LS_ON) <0.5,115u,92.6u)    }
E_U6_ABM9         U6_ILIM 0 VALUE { IF(V(ENCIR) >0.5, 35u,0)    }
R_U6_R49         GND ZCB  1e8 TC=0,0 
X_U6_U650         U6_N161736 U6_RESET U6_N160412 U6_N160468
+  srlatchrhp_basic_gen PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U6_U661         ENCIR U6_N161742 U6_N161736 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U6_U668         U6_N160890 U6_N160902 U6_N161748 OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
E_U6_ABM16         LS_PRE 0 VALUE { IF(V(ENCIR) >0.5,V(U6_N16042422), 0)    }
G_U6_I2         COMP GND VALUE { (V(U6_HYS_CHECK) * V(U6_GAIN))    }
X_U6_U11         LS_PRE HS_PRE INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
R_U6_Rdly1         U6_N161330 U6_N161082  14.43k  
E_U6_ABM7         U6_N161652 0 VALUE { IF( V(HYS_MODE) >0.5, V(ISENSE) ,1)    }
X_U6_U659         COMP U6_N161082 U6_N16042300 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
C_U6_Cdly1         U6_N161082 0  1n IC=0 
X_U6_U645         GND COMP d_d1 PARAMS:
X_U6_U662         ENCIR U6_N160412 HYS_MODE AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
E_U6_ABM17         U6_N161330 0 VALUE { V(VMAIN_INT)/2    }
X_U6_U656         VMAIN_INT U6_N160744 U6_N161742 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
R_U6_R52         U6_N161748 U6_RESET  1  
R_U6_Rcomp         0 U6_N230270  10E6 TC=0,0 
V_U6_V5         U6_N160744 GND 1.8
X_U6_U646         COMP VMAIN_INT d_d1 PARAMS:
R_U6_Rhys         0 COMP  1E6 TC=0,0 
C_U6_C24         U6_RESET 0  1n IC=0 
C_U6_Ccomp         U6_N230270 0  10p IC=0 
X_U6_U669         U6_N16042300 U6_N16042422 BUF_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=50n
G_U6_I1         0 COMP VALUE { {IF(V(U6_N230270) >5u , V(U6_N230270) , -1u)}   
+  }
X_H4    VMAIN_INT VMAIN IMAIN_SENSE GND TPS61098_H4 
E_U1_ABM4         U1_N16836564 0 VALUE { V(U1_N16836648)  
+ * (ABS(V(VSUB)) + 1e-6)  
+ / (ABS(V(U1_FB_LDO)) + 1e-6)  }
R_U1_R4         U1_N16836564 U1_N16836913  10 TC=0,0 
R_U1_R7         U1_VXX U1_IN_INT1  {RINP}  
R_U1_R8         U1_V_INT U1_VXX  {PSRR*RINP}  
C_U1_C5         0 U1_N16836913  1n  
C_U1_C1         U1_VXX U1_IN_INT1  {1/(6.28*RINP*POLE)}  
R_U1_R6         U1_N16837037 U1_V_INT  10 TC=0,0 
C_U1_C2         U1_VXX U1_V_INT  {1/(6.28*PSRR*RINP*ZERO)}  
R_U1_R10         U1_VZZ U1_VYY  {ROUT}  
C_U1_C6         0 U1_V_INT  1n  
R_U1_R11         U1_FB_LDO VSUB  1.05E6 TC=0,0 
X_U1_F1    U1_VZZ VSUB U1_IN_INT1 U1_VYY LDO_U1_F1 
R_U1_R12         GND U1_FB_LDO  500k TC=0,0 
R_U1_R13         U1_IN_INT1 U1_N16836861  1.2  
E_U1_ABM1         U1_N16836906 0 VALUE { MIN(V(U1_VXX),
+  (V(U1_VZZ)+(ILIM*ROUT)))    }
E_U1_E2         U1_N16836861 GND VMAIN GND 1
R_U1_R9         U1_N16836906 U1_VYY  10 TC=0,0 
C_U1_C3         0 U1_VYY  1n  
E_U1_ABM6         U1_N16836655 0 VALUE { IF(V(U1_N16836704) > 0.5, {VREF},0)   
+  }
R_U1_R1         U1_N16836655 U1_N16836648  {3.333e5*SQRT(TTRN)} TC=0,0 
C_U1_C4         U1_N16836648 0  {1e-6*SQRT(TTRN)} IC={SS} 
R_U1_R5         GND U1_N16836913  1G  
E_U1_ABM5         U1_N16837037 0 VALUE { MIN(V(U1_N16836913),  
+ V(U1_IN_INT1))   }
X_U1_U63         ENCIR MODE_CTL U1_N16836704 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_U1_R2         GND U1_N16836648  1G  
V_V3         N169323830 SW_INT -0.62V
X_U11         N169323830 N169324030 d_d1 PARAMS:
.PARAM  PSRR=3.162e-3 ILIM=0.3 POLE=1k RINP=1e7 ZERO=20k ROUT=15m
+  TTRN=1.2012e-3 vref=1
.ENDS TPS61098_TRANS
*$
.SUBCKT BURST_MODE_U7_S18 1 2 3 4  
S_U7_S18         3 4 1 2 _U7_S18
RS_U7_S18         1 2 1G
.MODEL         _U7_S18 VSWITCH Roff=1e9 Ron=450m Voff=0.8 Von=0.2
.ENDS BURST_MODE_U7_S18
*$
.SUBCKT OSCR_U4_S2 1 2 3 4  
S_U4_S2         3 4 1 2 _U4_S2
RS_U4_S2         1 2 1G
.MODEL         _U4_S2 VSWITCH Roff=1e12 Ron=1m Voff=0 Von=1
.ENDS OSCR_U4_S2
*$
.SUBCKT TPS61098_S17 1 2 3 4  
S_S17         3 4 1 2 _S17
RS_S17         1 2 1G
.MODEL         _S17 VSWITCH Roff=1e9 Ron=450m Voff=0.2 Von=0.8
.ENDS TPS61098_S17
*$
.SUBCKT TPS61098_S18 1 2 3 4  
S_S18         3 4 1 2 _S18
RS_S18         1 2 1G
.MODEL         _S18 VSWITCH Roff=1e9 Ron=300m Voff=0.2 Von=0.8
.ENDS TPS61098_S18
*$
.SUBCKT TPS61098_H3 1 2 3 4  
H_H3         3 4 VH_H3 -1
VH_H3         1 2 0V
.ENDS TPS61098_H3
*$
.SUBCKT TPS61098_H4 1 2 3 4  
H_H4         3 4 VH_H4 -1
VH_H4         1 2 0V
.ENDS TPS61098_H4
*$
.SUBCKT LDO_U1_F1 1 2 3 4  
F_U1_F1         3 4 VF_U1_F1 1
VF_U1_F1         1 2 0V
.ENDS LDO_U1_F1
*$
.SUBCKT COMP_BASIC_GEN INP INM Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
E_ABM Yint 0 VALUE {IF (V(INP) > 
+ V(INM), {VDD},{VSS})}
R1 Yint Y 1
C1 Y 0 1n
.ENDS COMP_BASIC_GEN
*$
.SUBCKT COMPHYS_BASIC_GEN INP INM HYS OUT PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
EIN INP1 INM1 INP INM 1 
EHYS INP1 INP2 VALUE { IF( V(1) > {VTHRESH},-V(HYS),0) }
EOUT OUT 0 VALUE { IF( V(INP2)>V(INM1), {VDD} ,{VSS}) }
R1 OUT 1 1
C1 1 0 5n
RINP1 INP1 0 1K
.ENDS COMPHYS_BASIC_GEN
*$
.SUBCKT BUF_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS BUF_DELAY_BASIC_GEN
*$
.SUBCKT INV_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS INV_BASIC_GEN
*$
.SUBCKT AND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND2_BASIC_GEN
*$
.SUBCKT AND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND3_BASIC_GEN
*$
.SUBCKT OR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR2_BASIC_GEN
*$
.SUBCKT SRLATCHRHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,IF(V(S)>{VTHRESH},5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n
.IC V(Qint) {VSS}
.MODEL D_D1 D( IS=1e-15 TT=10p Rs=0.05 N=.1  )
.ENDS SRLATCHRHP_BASIC_GEN
*$
.SUBCKT D_D1 1 2
D1 1 2 DD1
.MODEL DD1 D( IS=1e-15 TT=10p Rs=0.05 N=.1  )
.ENDS D_D1
*$
.SUBCKT BUF_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS BUF_BASIC_GEN
*$
.SUBCKT INV_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS INV_DELAY_BASIC_GEN
*$
.SUBCKT CESR IN OUT
+ PARAMs:  C=100u ESR=0.01 X=2 IC=0
C	IN 1  {C*X} IC={IC}
RESR	1 OUT {ESR/X}
.ENDS CESR
*$
.SUBCKT LDCR IN OUT
+ PARAMs:  L=1u DCR=0.01 IC=0
L	IN 1  {L} IC={IC}
RDCR	1 OUT {DCR}
.ENDS LDCR
*$
.SUBCKT D_D 1 2
d1 1 2 dd
.model dd d
+ is=1e-015
+ n=0.01
+ tt=1e-011
.ENDS D_D
*$
.SUBCKT COMPHYS2_BASIC_GEN INP INM HYS OUT PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
+ T=10
EIN INP1 INM1 INP INM 1 
EHYS INM2 INM1 VALUE { IF( V(1) > {VTHRESH},-V(HYS)/2,V(HYS)/2) }
EOUT OUT 0 VALUE { IF( V(INP1)>V(INM2), {VDD} ,{VSS}) }
R1 OUT 1 1
C1 1 0 {T*1e-9}
RINP1 INP1 0 10K
RINM2 INM2 0 10K
.ENDS COMPHYS2_BASIC_GEN
*$
.SUBCKT SRLATCHSHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(S) > {VTHRESH},5,IF(V(R)>{VTHRESH},-5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n 
.IC V(Qint) {VSS}
.MODEL D_D1 D( IS=1e-15 TT=10p Rs=0.05 N=.1  )
.ENDS SRLATCHSHP_BASIC_GEN
*$
.SUBCKT RVAR 101 102 201 202 PARAMS: RREF=1
* nodes : 101 102 : nodes between which variable resistance is placed
* 201 202 : nodes to whose voltage the resistance is proportional
* parameters : rref : reference value of the resistance
rin 201 202 1G; input resistance
r 301 0 {rref}
fcopy 0 301 vsense 1; copy output current thru Z
eout 101 106 poly(2) 201 202 301 0 0 0 0 0 1; multiply VoverZ with Vctrl
vsense 106 102 0; sense iout
.ENDS RVAR
*$
