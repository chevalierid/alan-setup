* PSpice Model Editor - Version 16.2.0
*$
* TPS2420 
*****************************************************************************
* (C) Copyright 2015 Texas Instruments Incorporated. All rights reserved.
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.
** TI and its licensors and suppliers make no warranties, either expressed
** or implied, with respect to this model, including the warranties of
** merchantability or fitness for a particular purpose. The model is
** provided solely on an "as is" basis. The entire risk as to its quality
** and performance is with the customer.
*****************************************************************************
*
** Released by: WEBENCH Design Center, Texas Instruments Inc.
* Part: TPS2420
* Date: 10NOV2015 
* Model Type: Transient
* Simulator: PSpice
* Simulator Version: 16.2.0.p001
* EVM Order Number: TPS2420EVM-01
* EVM User's Guide: SLUU343–January 2009 
* Data sheet: SLUS903F –JANUARY 2009–REVISED JANUARY 2014
*
* Model Version: Final 1.00
*
*****************************************************************************
*
* Updates:
*
* Final 1.00
* Release to Web
*
*****************************************************************************
* Model Usage Notes:
*1. The following features are modelled.
*   a. The fault timer is implemented and is depended on external Capacitor connected.
*	b. Imax current is set by connectin the resisitor to GND from this pin.
*	c. Power Limit feature is modeled.
*
*2. The following features are not modelled.
*   a. Quiscent Current,Shutdown Current and Thermal Characterstics are not modeled.
*	
*****************************************************************************

.SUBCKT TPS2420_TRANS ENb PGb IMAX IFLT CT IMON LTCH 
+ VOUT_0 VOUT_1 VOUT_2 FLTb VIN_0 VIN_1 VIN_2 VIN_3 GND PAD


R_R1         VIN_0 VIN  1m TC=0,0 
R_R2         VIN_1 VIN  1m TC=0,0 
V_U2_V5         U2_N16708548 0 1.4V
X_U2_U14         PWRGB U2_N16723891 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U2_U2         CT U2_N16708548 CT_COMP_OUT COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
D_U2_D1         CT U2_N167087400 D_D1 
G_U2_ABM2I1         0 CT VALUE { IF ((V(U2_CT_START)-V(0) ) > 0.5 & V(FLT) <
+  0.5, 37.25u,0)    }
G_U2_ABM2I5         CT GND VALUE { IF(V(U2_N16715828)-V(GND)>0.5, 33u,0)    }
X_U2_S2    U2_N16708480 GND CT GND CT_TIMER_U2_S2 
X_U2_U12         QBOUT RST_TIMER U2_N16708278 U2_N16715828 AND3_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U2_U8         FLT LTCH U2_N16708480 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
I_U2_I1         CT GND DC 1.25uAdc  
D_U2_D2         U2_N16717998 CT D_D1 
V_U2_V6         U2_N167087400 0 1.5V
X_U2_U13         U2_CT_START U2_N16708278 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
V_U2_V7         U2_N16717998 GND 54.5m
X_U2_U9         CT_CHARGE U2_N16723891 U2_CT_START AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
R_R5         VOUT_0 VOUT  1m TC=0,0 
E_U12_DIFF1         U12_N14516004 0 VALUE {V(IPWR,VOUT)}
X_U12_U2         U12_N14545940 U12_N14541045 U12_N14540644 OR2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U12_U8         U12_N14520300 U12_ONE_SHOT U12_N14545940 OR2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
C_U12_C1         0 U12_N14516104  5p  TC=0,0 
X_U12_S1    U12_N14540644 0 MOS_GATE GND SC_COMP_U12_S1 
X_U12_U9         U12_SC_PD PWRGB U12_ONE_SHOT OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U12_U1         U12_N14516104 U12_N14516267 U12_SC_PD COMP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
X_U12_U7         U12_ONE_SHOT U12_N14520196 rising_oneshot PARAMS:  PULSE=100n
+  VDD=1 VSS=0 VTHRESH=0.5
R_U12_R1         U12_N14516004 U12_N14516104  1E6 TC=0,0 
V_U12_V1         U12_N14516267 0 80m
X_U12_U10         PWRGB FLT U12_N14541045 OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U12_U4         U12_N14520196 U12_N14520300 falling_delay PARAMS:  DELAY=57.5u
+  VDD=1 VSS=0 VTHRESH=0.5
R_R3         VIN_2 VIN  1m TC=0,0 
R_R6         VOUT_1 VOUT  1m TC=0,0 
R_R7         VOUT_2 VOUT  1m TC=0,0 
R_R4         VIN_3 VIN  1m TC=0,0 
E_U1_ABM2         U1_UVLO_TH 0 VALUE { IF ( V(U1_VIN_UVLO) < 0.5, 2.85, 2.7)   
+  }
X_U1_U8         LTCH U1_ENABLE_B U1_N16796836 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
D_U1_D1         U1_N16799418 U1_N167989821 D_D1 
X_U1_U9         RST_TIMER U1_N16796828 U1_N16796830 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U1_U10         U1_N16796830 U1_N16796836 RESET OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
R_U1_R1         ENB VIN  10E6 TC=0,0 
X_U1_U11         LTCH U1_N16796828 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_U1_Rpullup         U1_N167989821 LTCH  100k TC=0,0 
R_U1_R2         GND ENB  18E6 TC=0,0 
R_U1_R3         U1_N16803140 U1_ENABLE_B  43k TC=0,0 
D_U1_D3         U1_N16803140 U1_ENB_UVLO D_D1 
R_U1_R4         U1_N16803155 U1_ENABLE_B  450k TC=0,0 
X_U1_U7         U1_ENABLE_B U1_VIN_UVLO PWRGB NAND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U1_U2         CT U1_N16801813 RST_TIMER COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
C_U1_C1         0 U1_ENABLE_B  1n  TC=0,0 
X_U1_U1         U1_EN_INT U1_EN_TH U1_N16796616 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
X_U1_U12         U1_N16796616 U1_ENB_UVLO INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
E_U1_E2         U1_EN_INT 0 ENB GND 1
E_U1_ABM1         U1_EN_TH 0 VALUE { IF ( V(U1_N16796616) < 0.5, 1, 0.85)    }
V_U1_V5         U1_N16801813 0 150mV
D_U1_D2         LTCH U1_N16799418 D_D1 
X_U1_U3         U1_VIN_INT U1_UVLO_TH U1_VIN_UVLO COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
D_U1_D4         U1_ENB_UVLO U1_N16803155 D_D1 
E_U1_E3         U1_VIN_INT 0 VIN GND 1
V_U1_V4         U1_N16799418 0 3V
R_R8         GND PAD  1m TC=0,0 
X_U6_U11         U6_N16709251 U6_N16713556 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U6_U12         RESET U6_N16711797 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_U6_R4         U6_N16713556 U6_N16709763  14.43 TC=0,0 
X_U6_U9         U6_N16711797 U6_N16710452 U6_N16710348 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
C_U6_C1         0 U6_N16709763  1u  TC=0,0 
R_U6_R5         RESET U6_N16710452  14.43 TC=0,0 
X_U6_U4         CT_COMP_OUT CT_COMP_OUT U6_N16709251 OR2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
C_U6_C2         0 U6_N16710452  1u  TC=0,0 
X_U6_U6         U6_SET U6_N16710348 FLT QBOUT SRLATCHRHP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
X_U6_U8         U6_N16709251 U6_N16709763 U6_SET AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U6_S1    FLT GND FLTB GND FLTb_U6_S1 
D_U7_D6         U7_N14511107 U7_N14511111 D_D1 
G_U7_ABM2I1         U7_N14511107 GND VALUE { LIMIT ( (
+  (V(U7_N14519487)-V(0))*100u), 0, 530u)    }
G_U7_ABMII1         U7_N14511111 U7_N14511107 VALUE { IF(V(U7_EN_PUMP_LCA)>0.5,
+  IF(V(U7_GATE_CNTL) > 0.5, 7.6u, 2.6u),0)    }
D_U7_D9         GND MOS_GATE D_D1 
R_U7_R4         U7_N14510965 U7_N14519487  100 TC=0,0 
R_U7_R1         MOS_GATE U7_N14511107  1k TC=0,0 
C_U7_C2         0 U7_GATE_CNTL  1n  TC=0,0 
E_U7_ABM2         U7_N16777509 0 VALUE { IF(V(VIN) > (V(MOS_GATE)-100m), 1, 0) 
+    }
X_U7_S2    PWRGB 0 U7_N14519487 0 LCA_U7_S2 
R_U7_R5         U7_N16777509 U7_GATE_CNTL  10 TC=0,0 
X_U7_U2         PWRGB U7_EN_PUMP_LCA INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
D_U7_D8         GND U7_N14511107 D_D1 
C_U7_C1         0 U7_N14519487  1n  TC=0,0 
E_U7_ABM1         U7_N14510965 0 VALUE { LIMIT ( ( (V(IPWR)-V(VOUT))*10E3), 0,
+  7)    }
X_U7_S1    PWRGB 0 MOS_GATE GND LCA_U7_S1 
V_U7_V3         U7_N16736789 VIN 4Vdc
V_U7_V2         U7_N14511111 VIN 6.5
X_U7_U13         MOS_GATE U7_N16736789 INRUSH_CNTRL COMP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
R_U4_R1         IMAX U4_N16722482  400 TC=0,0 
R_U4_R2         IFLT U4_N16726101  400 TC=0,0 
E_U4_LIMIT3         U4_N16722596 0 VALUE {LIMIT(V(VIN),0,1)}
E_U4_LIMIT4         U4_N16726215 0 VALUE {LIMIT(V(VIN),0,1)}
E_U4_SUM1         U4_N16722430 0 VALUE {V(GND)+V(U4_N16722596)}
E_U4_SUM2         U4_N16726053 0 VALUE {V(GND)+V(U4_N16726215)}
D_U4_D1         IMON U4_N167282800 D_D1 
E_U4_ABM1         IMON 0 VALUE { IF( V(PGB) > 0.5, V(PGB)/66k, 0)    }
X_U4_H1    U4_N16722430 U4_N16722482 VMAX 0 ILIM_U4_H1 
X_U4_H2    U4_N16726053 U4_N16726101 IFLT_VALUE 0 ILIM_U4_H2 
V_U4_V5         U4_N167282800 0 2.5V
R_U3_R2         U3_N17136715 VIN  32m TC=0,0 
X_U3_U14         INRUSH_CNTRL U3_N17172010 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
D_U3_D4         VOUT VIN D_D1 
R_U3_R4         U3_N17172030 VIN  {32m*8064} TC=0,0 
M_U3_M3         U3_N17172030 MOS_GATE U3_N17171991 U3_N17171991 NMOS02         
+   
C_U3_Cgs         VOUT MOS_GATE  700p  TC=0,0 
G_U3_ABM2I1         U3_N17171991 GND VALUE { LIMIT ( (
+  (V(IFLT_VALUE)-V(0))*25), 0, 850u)    }
D_U3_D3         GND U3_N17171991 D_D1 
X_U3_U10         U3_N17172010 U3_N17172131 CT_CHARGE OR2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
M_U3_M1         U3_N17136715 MOS_GATE VOUT VOUT NMOS01           
M_U3_M2         U3_N17136712 MOS_GATE IPWR IPWR NMOS02           
X_U3_U13         U3_N17171991 VOUT U3_N17172131 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
C_U3_Cgd         MOS_GATE VIN  200p  TC=0,0 
R_U3_R3         U3_N17136712 VIN  {32m*8064} TC=0,0 
X_U5_U6         U5_N16748973 U5_N16749129 BUF_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
X_U5_S1    U5_N16749129 GND PGB GND PGOOD_U5_S1 
X_U5_U7         VOUT U5_N16750356 U5_N16752523 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
E_U5_ABM1         U5_N16750356 0 VALUE { (V(VIN) -300mV)    }
R_U5_R1         U5_N16752523 U5_N16748973  2.88 TC=0,0 
C_U5_C1         0 U5_N16748973  1u  TC=0,0 
E_U9_E1         U9_N14547332 0 VIN VOUT 4.48u
D_U9_D3         GND IPWR D_D1 
E_U9_ABM1         U9_POWER_LIM 0 VALUE { 100p/MAX(V(U9_VDS),1n)    }
E_U9_ABM4         U9_VDS 0 VALUE { MAX(V(U9_N14547332),0)    }
E_U9_ABM2         U9_MIN_PL_CL 0 VALUE { MIN(V(VMAX),V(U9_POWER_LIM))    }
E_U9_ABM3         U9_N14546440 0 VALUE { MAX(V(U9_MIN_PL_CL),0)    }
G_U9_ABM2I1         IPWR GND VALUE { LIMIT ( ( (V(U9_N14546440)-V(0))*25), 0,
+  625u)    }


.ENDS TPS2420_TRANS
*$
**************************************END OF SUBCIRCUIT***********************************
.subckt CT_TIMER_U2_S2 1 2 3 4  
S_U2_S2         3 4 1 2 _U2_S2
RS_U2_S2         1 2 1G
.MODEL         _U2_S2 VSWITCH Roff=10E9 Ron=1.8k Voff=0V Von=1V
.ends CT_TIMER_U2_S2
*$
.subckt SC_COMP_U12_S1 1 2 3 4  
S_U12_S1         3 4 1 2 _U12_S1
RS_U12_S1         1 2 1G
.MODEL         _U12_S1 VSWITCH Roff=1e9 Ron=40 Voff=0.2 Von=0.8
.ends SC_COMP_U12_S1
*$
.subckt FLTb_U6_S1 1 2 3 4  
S_U6_S1         3 4 1 2 _U6_S1
RS_U6_S1         1 2 1G
.MODEL         _U6_S1 VSWITCH Roff=18E6 Ron=200 Voff=0.2V Von=0.8V
.ends FLTb_U6_S1
*$
.subckt LCA_U7_S2 1 2 3 4  
S_U7_S2         3 4 1 2 _U7_S2
RS_U7_S2         1 2 1G
.MODEL         _U7_S2 VSWITCH Roff=1e9 Ron=1m Voff=0.2 Von=0.8
.ends LCA_U7_S2
*$
.subckt LCA_U7_S1 1 2 3 4  
S_U7_S1         3 4 1 2 _U7_S1
RS_U7_S1         1 2 1G
.MODEL         _U7_S1 VSWITCH Roff=1e9 Ron=7k Voff=0.2 Von=0.8
.ends LCA_U7_S1
*$
.subckt ILIM_U4_H1 1 2 3 4  
H_U4_H1         3 4 VH_U4_H1 1
VH_U4_H1         1 2 0V
.ends ILIM_U4_H1
*$
.subckt ILIM_U4_H2 1 2 3 4  
H_U4_H2         3 4 VH_U4_H2 1
VH_U4_H2         1 2 0V
.ends ILIM_U4_H2
*$
.subckt PGOOD_U5_S1 1 2 3 4  
S_U5_S1         3 4 1 2 _U5_S1
RS_U5_S1         1 2 1G
.MODEL         _U5_S1 VSWITCH Roff=18E6 Ron=200 Voff=0.2V Von=0.8V
.ends PGOOD_U5_S1
*$
.SUBCKT AND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND2_BASIC_GEN
*$
.SUBCKT AND4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH} &
+ V(D) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND4_BASIC_GEN
*$
.SUBCKT INV_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS INV_BASIC_GEN
*$
.SUBCKT OR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR2_BASIC_GEN
*$
**Reset has higher priority in this latch
.SUBCKT SRLATCHRHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,IF(V(S)>{VTHRESH},5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n
.IC V(Qint) {VSS}
.ENDS SRLATCHRHP_BASIC_GEN
*$
.SUBCKT INV_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS INV_DELAY_BASIC_GEN
*$
.MODEL D_D1 D( IS=1e-15 TT=10p N=.1  )
*$
.SUBCKT BUF_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS BUF_DELAY_BASIC_GEN
*$
.SUBCKT BUF_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS BUF_BASIC_GEN
*$
.SUBCKT COMP_BASIC_GEN INP INM Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
E_ABM Yint 0 VALUE {IF (V(INP) > 
+ V(INM), {VDD},{VSS})}
R1 Yint Y 1
C1 Y 0 1n
.ENDS COMP_BASIC_GEN
*$
.MODEL NMOS01 NMOS
+ VTO     = 1.15
+ KP      = {5.667}
+ LAMBDA  = 0.001
*$
.MODEL NMOS02 NMOS
+ VTO     = 1.15
+ KP      = {5.667/8064}
+ LAMBDA  = 0.001
*$
.SUBCKT NAND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND2_BASIC_GEN
*$
.SUBCKT ONE_SHOT IN OUT
+ PARAMs:  T=100
S_S1         MEAS 0 RESET2 0 S1
E_ABM1         CH 0 VALUE { if( V(IN)>0.5 | V(OUT)>0.5,1,0)    }
R_R2         RESET2 RESET  0.1  
E_ABM3         OUT 0 VALUE { if( V(MEAS)<0.5 & V(CH)>0.5,1,0)    }
R_R1         MEAS CH  {T} 
C_C2         0 RESET2  1.4427n  
C_C1         0 MEAS  1.4427n  
E_ABM2         RESET 0 VALUE { if(V(CH)<0.5,1,0)    }
.MODEL         S1 VSWITCH Roff=1e9 Ron=1.0 Voff=0.25V Von=0.75V
.ENDS ONE_SHOT
*$
**Set has higher priority in this latch
.SUBCKT SRLATCHSHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(S) > {VTHRESH},5,IF(V(R)>{VTHRESH},-5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n 
.IC V(Qint) {VSS}
.ENDS SRLATCHSHP_BASIC_GEN
*$
.SUBCKT AND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND3_BASIC_GEN
*$
.SUBCKT FALLING_DELAY IN OUT PARAMS: DELAY=100n VDD=1 VSS=0 VTHRESH=0.5
X_U1         INT OUT BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH=
+ {VTHRESH}
R_R1         IN INT  {DELAY/(0.693 * 1E-9)}  
C_C1         0 INT  1n  
D_D1         IN INT DD 
.MODEL DD D( IS=1F N=0.01 TT = 10p )
.ENDS FALLING_DELAY
*$
.SUBCKT RISING_ONESHOT IN OUT PARAMS: PULSE=100n VDD=1 VSS=0 VTHRESH=0.5
D_D1         INT IN DD 
C_C1         0 INT  1n  
X_U22         INT IN_B_DELAYED INV_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS}
+  VTHRESH={VTHRESH}
R_R1         IN INT  {PULSE/(0.693 * 1E-9)}  
X_U1         IN IN_B_DELAYED OUT AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS}
+  VTHRESH={VTHRESH}
.MODEL DD D( IS=1F N=0.01 TT = 10p )
.ENDS RISING_ONESHOT
*$
