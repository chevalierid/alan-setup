* CIP: NDA is required as of 08/29/2019
*****************************************************************************
* PSpice Model Editor - Version 16.6.0

*$

* LM3668-Q1
*****************************************************************************
* (C) Copyright 2015 Texas Instruments Incorporated. All rights reserved.                                            
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.
** TI and its licensors and suppliers make no warranties, either expressed
** or implied, with respect to this model, including the warranties of 
** merchantability or fitness for a particular purpose.  The model is
** provided solely on an "as is" basis.  The entire risk as to its quality
** and performance is with the customer
*****************************************************************************
*
* This model is subject to change without notice. Texas Instruments
* Incorporated is not responsible for updating this model.
*
*****************************************************************************
*
** Released by: WEBENCH Design Center, Texas Instruments Inc.
* Part: LM3668-Q1
* Date: 15APR2015
* Model Type: TRANSIENT
* Simulator: PSPICE
* Simulator Version: 16.2.0.p001
* EVM Order Number: SNVA236F
* EVM Users Guide: 
* Datasheet: SNVSA84  DEC2014
*
* Model Version: Final 1.0
*
*****************************************************************************
*
* Updates: 1.0
*          
*
* Final 1.0
* Release to Web.
*
*****************************************************************************
.SUBCKT LM3668-Q1_TRANS SGND VSEL MODE_SYNC EN FB PGND SW1 SW2 VDD VIN DAP
+ VOUT NC
.param SS=0
C_EA_C43         EA_N16828709 0  120p  
R_EA_R122         0 VC  100Meg TC=0,0 
C_EA_C45         EA_N16829812 EA_N16829817  16p  
X_EA_S1    VSEL 0 EA_N16829755 DIFFIO ErrorAmp_EA_S1 
E_EA_ABM180         EA_N16828526 0 VALUE { IF(V(ENSS) < 0.5,1,0)    }
X_EA_S69    PFMEN 0 EA_N16828712 VC ErrorAmp_EA_S69 
E_EA_E1         EA_N16829817 0 DIFFIO 0 1
G_EA_ABM3I3         0 VC VALUE { if(V(ENSS) > 0.5 & V(PFMEN) < 0.5,  
+ LIMIT((V(VREF_GM) -   
+ V(FBI)) * .032m , -250m,225m),0)  }
R_EA_R15         EA_N16828526 EA_N16828529  1  
X_EA_U23         EA_N16828510 VC d_d1 PARAMS:
X_EA_S68    EA_N16828529 0 VC 0 ErrorAmp_EA_S68 
R_EA_R144         EA_N16829812 0  20k  
R_EA_R145         FBI 0  20k  
C_EA_C46         VC 0  2p  TC=0,0 
X_EA_U650         VC EA_N16828496 d_d1 PARAMS:
E_EA_E2         FBI 0 EA_N16829812 0 15
C_EA_C15         0 EA_N16828529  1n  
R_EA_R121         EA_N16828712 EA_N16828709  123k  
E_EA_ABM9         EA_N16828510 0 VALUE { {IF(V(ENSS) < 0.5,.55,-.5)}    }
R_EA_R142         EA_N16829755 FB  160k TC=0,0 
V_EA_V1         EA_N16828496 0 1.7
R_EA_R141         EA_N16829812 EA_N16829817  280k  
R_EA_R143         0 DIFFIO  20k TC=0,0 
X_U10_U860         U10_PWMH2 U10_N16861556 U10_SDWN_N U10_HDRVIN2
+  AND3_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U10_U839         SDWN U10_SDWN_N INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_U10_R3         U10_N16862764 U10_N16869046  1 TC=0,0 
R_U10_R4         U10_N16869255 U10_ZWIN  1 TC=0,0 
C_U10_C3         U10_N16869255 0  1n IC=0 TC=0,0 
X_U10_U861         N2 U10_N16861586 U10_SDWN_N U10_LDRVIN2 AND3_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U10_U826         P1 U10_FAULTB U10_PWMH1 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
E_U10_ABM1         U10_N16862984 0 VALUE { (V(VIN)/80 + 0.045)    }
X_U10_U824         OVP OVP UVP U10_FAULT OR3_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U10_U859         U10_HDRV2 U10_N168615930 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U10_U846         U10_ISW2 U10_ISWLIM NILIMIT COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
X_U10_U847         U10_N16851624 VOUT d_d1 PARAMS:
X_U10_H1    U10_N16852608 SW1 U10_ISW1 0 Driver_U10_H1 
X_U10_U842         P2 U10_FAULTB U10_PWMH2 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
E_U10_ABM10         U10_FULLLIMIT 0 VALUE { if(V(VIN) >= 2.5, 1.85,0)    }
X_U10_S5    U10_N16852689 0 LDRV1 0 Driver_U10_S5 
V_U10_V49         U10_N16852774 0 5
X_U10_S30    HDRV1 0 VIN U10_N16852608 Driver_U10_S30 
X_U10_U610         U10_HDRVIN U10_N16852572 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U10_S38    U10_HDRV2 0 VOUT U10_N16851624 Driver_U10_S38 
X_U10_U836         U10_HDRVIN2 U10_N16851975 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U10_H2    U10_N16851624 SW2 U10_ISW2 0 Driver_U10_H2 
X_U10_U26         U10_PWMH1 SDWN U10_PRES1 N16852874 srlatchrhp_basic_gen
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
E_U10_ABM8         U10_ISWLIM 0 VALUE { if( V(ILIMEND) > 0.5,   
+ V(U10_FULLLIMIT), 0.5*V(U10_FULLLIMIT) )   }
X_U10_U857         U10_LDRV2 U10_N16870971 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U10_U865         SSEND U10_N16919146 N16819084 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
R_U10_R245         0 U10_VDD  10MEG  
X_U10_U855         U10_SDWN_N U10_PRES1 N1 U10_N16861319 U10_LDRVIN
+  AND4_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U10_U858         U10_N168615930 U10_N16861586 BUF_DELAY_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5 DELAY=10n
X_U10_U848         0 U10_N16852608 d_d1 PARAMS:
X_U10_U864         SSEND U10_ZWIN N16819087 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U10_U854         HDRV1 U10_N168613260 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
V_U10_V53         U10_N16865932 0 220m
X_U10_U862         U10_N16862984 U10_ISW1 U10_N16919146 COMP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
X_U10_S35    U10_LDRVIN2 0 U10_VDD U10_LDRV2 Driver_U10_S35 
C_U10_C2         U10_N16862764 0  1n IC=0 TC=0,0 
X_U10_U849         0 U10_N16851624 d_d1 PARAMS:
X_U10_U851         U10_SDWN_N U10_N16861168 U10_PWMH1 U10_HDRVIN AND3_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U10_U856         U10_N16870971 U10_N16861556 BUF_DELAY_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5 DELAY=10n
V_U10_V50         U10_VDD 0 5
X_U10_S41    U10_HDRVIN2 0 U10_VDD U10_HDRV2 Driver_U10_S41 
X_U10_U852         U10_N168611890 U10_N16861168 BUF_DELAY_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5 DELAY=10n
X_U10_U825         U10_FAULT U10_FAULTB INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U10_S31    LDRV1 0 U10_N16852608 0 Driver_U10_S31 
X_U10_S36    U10_N16851613 0 U10_LDRV2 0 Driver_U10_S36 
X_U10_U833         U10_LDRVIN2 U10_N16851613 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U10_U863         U10_N16862764 U10_ISW2 U10_ZWIN COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
X_U10_U853         U10_N168613260 U10_N16861319 BUF_DELAY_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5 DELAY=10n
X_U10_U866         U10_ISW1 U10_N16865932 IPEAK1 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
X_U10_S39    U10_N16851975 0 U10_HDRV2 0 Driver_U10_S39 
X_U10_S2    U10_HDRVIN 0 U10_VDD HDRV1 Driver_U10_S2 
X_U10_S4    U10_LDRVIN 0 U10_N16852774 LDRV1 Driver_U10_S4 
X_U10_U616         U10_LDRVIN U10_N16852689 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U10_U845         U10_ISW1 U10_ISWLIM ILIMIT COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
X_U10_S3    U10_N16852572 0 HDRV1 0 Driver_U10_S3 
E_U10_ABM9         U10_N16869046 0 VALUE { if( V(U10_N16869255)< 0.5, V(0)-5m, 
+  
+ V(0) + 6m)   }
X_U10_U850         LDRV1 U10_N168611890 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U10_U613         SDWN U10_SDWN_N INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U10_S37    U10_LDRV2 0 U10_N16851624 0 Driver_U10_S37 
X_U10_U650         U10_N16852608 VIN d_d1 PARAMS:
C_U22_C80         U22_N16903299 0  320p  
X_U22_U709         N16819087 U22_WINDOW U22_N16903575 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U22_U13         PFMEN U22_PFMENB INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U22_U706         VIN U22_N169026681 U22_BUCK COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
V_U22_V49         U22_N16902899 0 1.82
X_U22_U655         U22_N16902728 U22_N16902728 U22_N16902781 AND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U22_U119         U22_N16903299 U22_N16903353 U22_N16903350 COMP_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U22_U650         U22_N16902618 U22_N16902607 d_d1 PARAMS:
X_U22_U700         N16819087 U22_WINDOW U22_N16902979 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
C_U22_C2         U22_PFMTHRESH 0  1n  TC=0,0 
E_U22_ABM12         U22_N169026681 0 VALUE { (V(VOUT) - 0.1)    }
R_U22_R3         U22_PFMTHRESH U22_N16903690  1 TC=0,0 
V_U22_V2         U22_N16902748 0 0.495
G_U22_ABMI4         U22_N16902552 U22_N16902533 VALUE { IF(V(N16819087)>0.5,
+  1m,0)    }
C_U22_C79         U22_N16902618 0  320p  
X_U22_U702         P1_PWM U22_P1_PFM PFMEN P1 MUX2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
V_U22_V52         U22_N16903286 0 2.5Vdc
X_U22_U707         U22_N16903028 U22_WINDOW U22_BUCK U22_N1_PFM AND3_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U22_U718         U22_N16902533 U22_N16902533 U22_ZPFMINT AND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U22_U710         U22_BUCK U22_BOOST INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
G_U22_ABMI3         U22_N16903286 U22_N16903299 VALUE { IF(V(ENSS) >0.5 ,
+  10u,0)    }
X_U22_U715         MODE_SYNC U22_N16902781 U22_COUNTRESB OR2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U22_U118         U22_N16902618 U22_N16902899 U22_N16902883 COMP_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U22_S28    N16819087 0 U22_N16902533 0 PFM_ENTRY_U22_S28 
X_U22_U703         N1_PWM U22_N1_PFM PFMEN N1 MUX2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
E_U22_ABM7         U22_N16903690 0 VALUE { if( V(U22_WINDOW)< 0.5,
+  V(U22_N16903014)-4m,  
+ V(U22_N16903014))   }
X_U22_U653         U22_N16902883 U22_COUNTRESB U22_IPFMEN N16902827
+  srlatchrhp_basic_gen PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U22_S27    U22_N16902563 0 U22_N16903299 0 PFM_ENTRY_U22_S27 
X_U22_U656         U22_N16903350 U22_COUNTRESB U22_ZPFMEN N16903321
+  srlatchrhp_basic_gen PARAMS: VDD=1 VSS=0 VTHRESH=0.5
V_U22_V3         U22_N16903014 0 508m
X_U22_U657         U22_N16902533 U22_N16902552 d_d1 PARAMS:
X_U22_U713         U22_N16903650 U22_N16902528 U22_P2_PFM AND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U22_U704         P2_PWM U22_P2_PFM PFMEN P2 MUX2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
X_U22_S26    U22_N16903709 0 U22_N16902618 0 PFM_ENTRY_U22_S26 
E_U22_ABM9         U22_N16903650 0 VALUE { if( V(U22_BOOST)>0.5 ,  
+ V(U22_N16903653),1)   }
V_U22_V50         U22_N16902607 0 2.5Vdc
C_U22_C81         U22_N16902533 0  1p  
G_U22_ABMI2         U22_N16902607 U22_N16902618 VALUE { IF(V(ENSS) >0.5 ,
+  10u,0)    }
E_U22_ABM8         U22_P1_PFM 0 VALUE { if( V(U22_BUCK)>0.5,  
+ V(U22_N16903531),1)   }
X_U22_U719         N16819084 U22_PFMENB U22_N16903709 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U22_U714         N16819087 U22_N16902528 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U22_U711         U22_WINDOW U22_BOOST U22_N16903647 U22_N2_PFM AND3_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U22_U15         U22_COUNTRESB U22_COUNTRES INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U22_U697         U22_PFMTHRESH DIFFIO U22_WINDOW COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
X_U22_U705         N2_PWM U22_N2_PFM PFMEN N2 MUX2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
X_U22_U651         U22_N16903299 U22_N16903286 d_d1 PARAMS:
V_U22_V51         U22_N16903353 0 1.82
X_U22_U717         U22_ZPFMEN U22_IPFMEN PFMEN OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U22_U654         U22_N16902748 DIFFIO U22_N16902728 COMP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
X_U22_U708         U22_N16903575 IPEAK1 U22_N16903647 U22_N16903653
+  srlatchrhp_basic_gen PARAMS: VDD=1 VSS=0 VTHRESH=0.5
V_U22_V53         U22_N16902552 0 1
X_U22_U720         U22_ZPFMINT U22_PFMENB U22_N16902563 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U22_U699         U22_N16902979 IPEAK1 U22_N16903531 U22_N16903028
+  srlatchrhp_basic_gen PARAMS: VDD=1 VSS=0 VTHRESH=0.5
R_R6         SGND PGND  1m  
C_SS_C8         0 SS_TR  .5n  
R_SS_R14         SS_N16805699 VREF_GM  1  
E_SS_ABM211         SS_N16805699 0 VALUE { if(V(SS_TR)> 0.5, 0.5, V(SS_TR))   
+  }
R_SS_R283         0 SS_TR  1e11  
E_SS_ABM195         SSEND 0 VALUE { IF(V(SS_TR) > 0.7, 1,0)    }
X_SS_S1    SS_N16805782 0 SS_TR 0 SoftStart_SS_S1 
G_SS_ABMII1         SS_N16805602 SS_TR VALUE { if(V(ENSS) >0.5, 1u,0)    }
C_SS_C14         0 VREF_GM  1n  
V_SS_V47         SS_N16805602 0 4
X_SS_U679         ENSS SS_N16805782 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
E_SS_ABM212         ILIMEND 0 VALUE { IF(V(SS_TR) > 0.3, 1,0)    }
X_SS_U650         SS_TR SS_N16805602 d_d1 PARAMS:
R_R7         NC PGND  1m  
V_V47         SET0 PGND 0Vdc
X_U8_U629         U8_N16791679 U8_RESET OVP N16791669 srlatchrhp_basic_gen
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
V_U8_V1         U8_N16791749 0 1
X_U8_U26         U8_N16791887 U8_RESET UVP N16791881 srlatchrhp_basic_gen
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U8_U135         U8_N16791823 U8_N16791679 BUF_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=20u
X_U8_U622         U8_N16791774 DIFFIO U8_N16791820 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
X_U8_U668         SDWN U8_N16791706 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U8_U623         DIFFIO U8_N16791817 U8_N16791823 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
X_U8_U669         U8_N16791706 U8_N16791720 INV_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=1u
X_U8_U670         U8_N16791720 U8_N16791706 U8_RESET AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
E_U8_ABM176         U8_N16791774 0 VALUE { {V(VREF_GM) * 0.8}    }
E_U8_ABM177         U8_N16791817 0 VALUE { {V(U8_N16791749) *1.3}    }
X_U8_U626         SSEND U8_N16791820 U8_N16791887 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U9_U666         ENB U9_N16777615 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
C_U9_C5         0 U9_N16777480  1n  
X_U9_U618         U9_CNTLEN U9_VIN_UVLO U9_ENAB AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U9_U650         U9_N16778241 U9_N16777615 d_d1 PARAMS:
R_U9_R289         U9_N16778241 U9_N16777615  40k  
R_U9_R256         0 U9_ENAB  100MEG  
X_U9_U603         SDWN U9_N16777703 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_U9_R288         SDWN ENB  1m  
C_U9_C164         U9_N16778241 0  1.405n  
X_U9_U6         VIN U9_N16777480 U9_VIN_UVLO COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
R_U9_R287         U9_N16777668 U9_N16777703  1k  
E_U9_ABM174         U9_CNTLEN 0 VALUE { {IF(V(EN) > 1,1,0)}    }
C_U9_C163         U9_N16777668 0  140.5p  
X_U9_U668         U9_ENAB ENB INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
E_U9_ABM173         SS_DISCH 0 VALUE { {IF(V(SS_TR)  < 10m,0,  
+ IF(V(U9_N16777668) < 0.5,1,0))}   }
E_U9_ABM4         U9_N167774931 0 VALUE { {(-(V(U9_VIN_UVLO) *0.25) + 2)}    }
R_U9_R5         U9_N167774931 U9_N16777480  1  
X_U9_U669         U9_N16778241 ENSS BUF_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
V_V46         SET1 PGND 1
X_U5_U691         U5_N16817314 U5_N16817320 U5_PWMR2 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
E_U5_ABM3         U5_N16813093 0 VALUE { if( V(VC)  
+ > V(U5_VCENTER) ,  V(VC) - V(U5_VCENTER),0)   }
C_U5_C177         0 U5_VC2  1n  
X_U5_U667         U5_N16814964 U5_VC1 U5_PWMS1 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
X_U5_U704         U5_N16829108 U5_N168290760 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U5_U680         U5_PWMS1 U5_N16824568 BUF_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5 DELAY=10n
X_U5_U692         U5_VC1 U5_N16817622 U5_N16817442 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
X_U5_U682         SYSCLK U5_N16817314 BUF_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5 DELAY=10n
X_U5_U678         ENSS U5_ILIML1 U5_N16813266 P1_PWM AND3_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U5_U29         P1_PWM N1_PWM INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U5_U695         U5_PWMS2 U5_PWMR2 U5_N16842556 N16815476 srlatchshp_basic_gen
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
R_U5_R277         U5_N16813081 U5_VC1  10  
X_U5_U26         U5_PWMS1 U5_PWMR1 U5_N16813266 N16814756 srlatchrhp_basic_gen
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U5_U699         ILIMIT U5_N168404702 U5_N16840806 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
V_U5_V1         U5_N16817622 0 15m
X_U5_U703         U5_N16824568 U5_N168240800 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U5_U702         P2_PWM N2_PWM INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U5_U685         U5_PWMS2 U5_N16829108 BUF_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5 DELAY=20n
X_U5_U698         NILIMIT U5_N168388522 U5_N16839988 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U5_U707         U5_N16843382 U5_N16842556 P2_PWM OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
E_U5_ABM2         U5_N16813081 0 VALUE { if( V(VC) +15m  
+ < V(U5_VCENTER) ,  V(U5_VCENTER) - V(VC),0)   }
C_U5_C178         0 U5_VC1  1n  
R_U5_R276         U5_N16813093 U5_VC2  20  
X_U5_U694         VC U5_VCENTER U5_N16817320 COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
X_U5_U684         U5_N16839988 U5_N16815931 N16815539 U5_ILIML2
+  srlatchrhp_basic_gen PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U5_U697         U5_N168290760 U5_PWMS2 U5_N16815931 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
E_U5_ABM6         U5_N16815504 0 VALUE { (V(RAMP)+5m)    }
E_U5_ABM4         U5_VCENTER 0 VALUE { (V(VIN) * 0.2227)    }
X_U5_U687         U5_VC2 0 U5_N168388522 COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
X_U5_U681         U5_N16840806 U5_N16830554 N16815143 U5_ILIML1
+  srlatchrhp_basic_gen PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U5_U706         U5_ILIML2 U5_N16843382 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U5_U696         U5_N168240800 U5_PWMS1 U5_N16830554 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U5_U679         SYSCLK U5_N16817503 BUF_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5 DELAY=10n
X_U5_U693         U5_N16817503 U5_N16817442 U5_PWMR1 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U5_U683         U5_N16815504 U5_VC2 U5_PWMS2 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
E_U5_ABM5         U5_N16814964 0 VALUE { (V(RAMP)+5m)    }
X_U5_U688         U5_VC1 0 U5_N168404702 COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
G_OSC_ABMI2         VIN RAMP VALUE { IF(V(ENSS) >0.5 , 10u,0)    }
X_OSC_U697         RAMP VIN d_d1 PARAMS:
C_OSC_C79         RAMP 0  5p  
X_OSC_U696         SDWN OSC_N16942763 OSC_RCLK OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_OSC_U135         SYSCLK OSC_N16942763 BUF_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5 DELAY=30n
V_OSC_V49         OSC_N16942852 0 0.84
X_OSC_U118         RAMP OSC_N16942852 SYSCLK COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
X_OSC_S26    OSC_RCLK 0 RAMP 0 Oscillator_Sync_OSC_S26 
.IC         V(VC )={SS*1.125}
.IC         V(SS_TR )={SS*0.8}
.IC         V(RAMP )=0
.ends

.subckt ErrorAmp_EA_S1 1 2 3 4  
S_EA_S1         3 4 1 2 _EA_S1
RS_EA_S1         1 2 1G
.MODEL         _EA_S1 VSWITCH Roff=1 Ron=20k Voff=2.4 Von=2.5
.ends ErrorAmp_EA_S1

.subckt ErrorAmp_EA_S69 1 2 3 4  
S_EA_S69         3 4 1 2 _EA_S69
RS_EA_S69         1 2 1G
.MODEL         _EA_S69 VSWITCH Roff=1 Ron=1.0e9 Voff=.25 Von=.75
.ends ErrorAmp_EA_S69

.subckt ErrorAmp_EA_S68 1 2 3 4  
S_EA_S68         3 4 1 2 _EA_S68
RS_EA_S68         1 2 1G
.MODEL         _EA_S68 VSWITCH Roff=100e6 Ron=1 Voff=0.2 Von=0.8
.ends ErrorAmp_EA_S68

.subckt Driver_U10_H1 1 2 3 4  
H_U10_H1         3 4 VH_U10_H1 1
VH_U10_H1         1 2 0V
.ends Driver_U10_H1

.subckt Driver_U10_S5 1 2 3 4  
S_U10_S5         3 4 1 2 _U10_S5
RS_U10_S5         1 2 1G
.MODEL         _U10_S5 VSWITCH Roff=1e6 Ron=1.0 Voff=0.2 Von=0.8
.ends Driver_U10_S5

.subckt Driver_U10_S30 1 2 3 4  
S_U10_S30         3 4 1 2 _U10_S30
RS_U10_S30         1 2 1G
.MODEL         _U10_S30 VSWITCH Roff=10e6 Ron=130m Voff=0.4 Von=1.6
.ends Driver_U10_S30

.subckt Driver_U10_S38 1 2 3 4  
S_U10_S38         3 4 1 2 _U10_S38
RS_U10_S38         1 2 1G
.MODEL         _U10_S38 VSWITCH Roff=10e6 Ron=130m Voff=0.4 Von=1.6
.ends Driver_U10_S38

.subckt Driver_U10_H2 1 2 3 4  
H_U10_H2         3 4 VH_U10_H2 -1
VH_U10_H2         1 2 0V
.ends Driver_U10_H2

.subckt Driver_U10_S35 1 2 3 4  
S_U10_S35         3 4 1 2 _U10_S35
RS_U10_S35         1 2 1G
.MODEL         _U10_S35 VSWITCH Roff=1e6 Ron=2 Voff=0.2 Von=0.8
.ends Driver_U10_S35

.subckt Driver_U10_S41 1 2 3 4  
S_U10_S41         3 4 1 2 _U10_S41
RS_U10_S41         1 2 1G
.MODEL         _U10_S41 VSWITCH Roff=1e6 Ron=2 Voff=0.2 Von=0.8
.ends Driver_U10_S41

.subckt Driver_U10_S31 1 2 3 4  
S_U10_S31         3 4 1 2 _U10_S31
RS_U10_S31         1 2 1G
.MODEL         _U10_S31 VSWITCH Roff=10e6 Ron=100m Voff=0.4 Von=1.6
.ends Driver_U10_S31

.subckt Driver_U10_S36 1 2 3 4  
S_U10_S36         3 4 1 2 _U10_S36
RS_U10_S36         1 2 1G
.MODEL         _U10_S36 VSWITCH Roff=1e6 Ron=1.0 Voff=0.2 Von=0.8
.ends Driver_U10_S36

.subckt Driver_U10_S39 1 2 3 4  
S_U10_S39         3 4 1 2 _U10_S39
RS_U10_S39         1 2 1G
.MODEL         _U10_S39 VSWITCH Roff=1e6 Ron=1.0 Voff=0.2 Von=0.8
.ends Driver_U10_S39

.subckt Driver_U10_S2 1 2 3 4  
S_U10_S2         3 4 1 2 _U10_S2
RS_U10_S2         1 2 1G
.MODEL         _U10_S2 VSWITCH Roff=1e6 Ron=2 Voff=0.2 Von=0.8
.ends Driver_U10_S2

.subckt Driver_U10_S4 1 2 3 4  
S_U10_S4         3 4 1 2 _U10_S4
RS_U10_S4         1 2 1G
.MODEL         _U10_S4 VSWITCH Roff=1e6 Ron=2 Voff=0.2 Von=0.8
.ends Driver_U10_S4

.subckt Driver_U10_S3 1 2 3 4  
S_U10_S3         3 4 1 2 _U10_S3
RS_U10_S3         1 2 1G
.MODEL         _U10_S3 VSWITCH Roff=1e6 Ron=1.0 Voff=0.2 Von=0.8
.ends Driver_U10_S3

.subckt Driver_U10_S37 1 2 3 4  
S_U10_S37         3 4 1 2 _U10_S37
RS_U10_S37         1 2 1G
.MODEL         _U10_S37 VSWITCH Roff=10e6 Ron=100m Voff=0.4 Von=1.6
.ends Driver_U10_S37

.subckt PFM_ENTRY_U22_S28 1 2 3 4  
S_U22_S28         3 4 1 2 _U22_S28
RS_U22_S28         1 2 1G
.MODEL         _U22_S28 VSWITCH Roff=655122 Ron=1G Voff=0.2 Von=0.8
.ends PFM_ENTRY_U22_S28

.subckt PFM_ENTRY_U22_S27 1 2 3 4  
S_U22_S27         3 4 1 2 _U22_S27
RS_U22_S27         1 2 1G
.MODEL         _U22_S27 VSWITCH Roff=1.0 Ron=100e6 Voff=0.2 Von=0.8
.ends PFM_ENTRY_U22_S27

.subckt PFM_ENTRY_U22_S26 1 2 3 4  
S_U22_S26         3 4 1 2 _U22_S26
RS_U22_S26         1 2 1G
.MODEL         _U22_S26 VSWITCH Roff=1.0 Ron=100e6 Voff=0.2 Von=0.8
.ends PFM_ENTRY_U22_S26

.subckt SoftStart_SS_S1 1 2 3 4  
S_SS_S1         3 4 1 2 _SS_S1
RS_SS_S1         1 2 1G
.MODEL         _SS_S1 VSWITCH Roff=1e11 Ron=10 Voff=0.25V Von=0.75V
.ends SoftStart_SS_S1

.subckt Oscillator_Sync_OSC_S26 1 2 3 4  
S_OSC_S26         3 4 1 2 _OSC_S26
RS_OSC_S26         1 2 1G
.MODEL         _OSC_S26 VSWITCH Roff=100e6 Ron=1.0 Voff=0.2 Von=0.8
.ends Oscillator_Sync_OSC_S26

*$
.SUBCKT COMP_BASIC_GEN INP INM Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
E_ABM Yint 0 VALUE {IF (V(INP) > 
+ V(INM), {VDD},{VSS})}
R1 Yint Y 1
C1 Y 0 1n
.ENDS COMP_BASIC_GEN
*$
.SUBCKT COMPHYS_BASIC_GEN INP INM HYS OUT PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
EIN INP1 INM1 INP INM 1 
EHYS INP1 INP2 VALUE { IF( V(1) > {VTHRESH},-V(HYS),0) }
EOUT OUT 0 VALUE { IF( V(INP2)>V(INM1), {VDD} ,{VSS}) }
R1 OUT 1 1
C1 1 0 5n
RINP1 INP1 0 1K
.ENDS COMPHYS_BASIC_GEN
*$
.SUBCKT COMPHYS2_BASIC_GEN INP INM HYS OUT PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
+ T=10
EIN INP1 INM1 INP INM 1 
EHYS INM2 INM1 VALUE { IF( V(1) > {VTHRESH},-V(HYS)/2,V(HYS)/2) }
EOUT OUT 0 VALUE { IF( V(INP1)>V(INM2), {VDD} ,{VSS}) }
R1 OUT 1 1
C1 1 0 {T*1e-9}
RINP1 INP1 0 10K
RINM2 INM2 0 10K
.ENDS COMPHYS2_BASIC_GEN
*$
.SUBCKT AND A B OUT  
EOUT OUT1 0 VALUE { IF( V(A)>0.5 & V(B)>0.5,1,0) }
R1 OUT1 OUT 1
C1 OUT 0 10p
.ends AND
*$
.SUBCKT OR A B OUT  
EOUT OUT1 0 VALUE { IF( V(A)>0.5 | V(B)>0.5,1,0) }
R1 OUT1 OUT 1
C1 OUT 0 10p
.ends OR
*$
.SUBCKT AND4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH} &
+ V(D) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND4_BASIC_GEN
*$
.SUBCKT NOR2 A B OUT  
EOUT OUT1 0 VALUE { IF( V(A)>0.5 | V(B)>0.5,0,1) }
R1 OUT1 OUT 1
C1 OUT 0 10p
.ends NOR2
*$

.SUBCKT NOR3 A B C OUT  
EOUT OUT1 0 VALUE { IF( V(A)>0.5 | V(B)>0.5 | V(C)>0.5,0,1) }
R1 OUT1 OUT 1
C1 OUT 0 10p
.ends NOR3
*$

.SUBCKT NOR4 A B C D OUT  
EOUT OUT1 0 VALUE { IF( V(A)>0.5 | V(B)>0.5 | V(C)>0.5 | V(D)>0.5,0,1) }
R1 OUT1 OUT 1
C1 OUT 0 10p
.ends NOR4
*$

.SUBCKT NAND3 A B C OUT  
EOUT OUT1 0 VALUE { IF( V(A)<0.5 & V(B)<0.5 & V(C)<0.5,1,0) }
R1 OUT1 OUT 1
C1 OUT 0 10p
.ends NAND3
*$

.SUBCKT NAND2 A B OUT  
EOUT OUT1 0 VALUE { IF( V(A)<0.5 & V(B)<0.5,1,0) }
R1 OUT1 OUT 1
C1 OUT 0 10p
.ends NAND2
*$

.SUBCKT AND3 A B C OUT  
EOUT OUT1 0 VALUE { IF( V(A)>0.5 & V(B)>0.5 & V(C)>0.5,1,0) }
R1 OUT1 OUT 1
C1 OUT 0 10p
.ends AND3
*$

.SUBCKT INVERTER IN OUT  
EOUT OUT1 0 VALUE { IF( V(IN)<0.5,1,0) }
R1 OUT1 OUT 1
C1 OUT 0 10p
.ends INVERTER
*$

.SUBCKT DELAY IN OUT
+ PARAMs:  T=100
S_S1         MEAS 0 RESET2 0 S1
E_ABM1         CH 0 VALUE { if( V(IN)>0.5,1,0)    }
E_ABM3         OUT 0 VALUE { if( V(MEAS)>0.5 & V(CH)>0.5,1,0)    }
R_R1         MEAS CH  {T} 
C_C1         0 MEAS  1.4427n  
E_ABM2         RESET 0 VALUE { if(V(CH)<0.5,1,0)    }
R_R2         RESET2 RESET  0.1  
C_C2         0 RESET2  1.4427n  
.MODEL         S1 VSWITCH Roff=1e9 Ron=1.0 Voff=0.25V Von=0.75V
.ENDS DELAY
*$
.SUBCKT NAND3_PS Y A B C PARAMS: vhi=1 vlo=0 vthresh=500e-3
+ tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
RC C 0 1e11
CC C 0 0.01pF
VS VSUP 0 DC 1
ENAND3 Ypp 0 VALUE={IF(V(A) > {vthresh} & V(B) > {vthresh} & V(C) >
+ {vthresh}, 0, 1)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)}
+ VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)}
+ VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*({vhi} - {vlo})+{vlo}}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS NAND3_PS
*$
.SUBCKT BUFFER_PS A Y PARAMS: vhi=1 vlo=0 vthresh=500e-3 tplh=1e-9
+ tphl=1e-9 tr=1e-9 tf=1e-9
RA A 0 1e11
CA A 0 0.01pF
VS VSUP 0 DC 1
EBUF1 Ypp 0 VALUE={IF(V(A) > ({vthresh}), 1, 0)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)}
+ VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)}
+ VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
** add rise and fall *****
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*({vhi} - {vlo})+{vlo}}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS BUFFER_PS
*$
.SUBCKT INV_PS Y A PARAMS: vhi=1 vlo=0 vthresh=500e-3
+ tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
RA A 0 1e11
CA A 0 0.01pF
VS VSUP 0 DC 1
EINV1 Ypp 0 VALUE={IF(V(A) > ({vthresh}), 0, 1)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)}
+ VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)}
+ VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*({vhi} - {vlo})+{vlo}}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS INV_PS
*$
.SUBCKT OR4_PS Y A B C D PARAMS: vhi=1 vlo=0 vthresh=500e-3 tplh=1e-9
+ tphl=1e-9 tr=1e-9 tf=1e-9
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
RC C 0 1e11
CC C 0 0.01pF
RD D 0 1e11
CD D 0 0.01pF
VS VSUP 0 DC 1
EOR4 Ypp 0 VALUE={IF(V(A) > {vthresh} | V(B) > {vthresh}  | V(C) >
+ {vthresh}  | V(D) > {vthresh}, 1, 0)}
ROUTpp Ypp 0 1e11
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)}
+ VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)}
+ VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*({vhi} - {vlo})+{vlo}}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS OR4_PS
*$
.SUBCKT NAND2_PS Y A B PARAMS: vhi=1 vlo=0 vthresh=500e-3
+ tplh=1e-9 tphl=1e-9 tr=1e-9 tf=1e-9
RA A 0 1e11
CA A 0 0.01pF
RB B 0 1e11
CB B 0 0.01pF
VS VSUP 0 DC 1
ENAND2 Ypp 0 VALUE={IF(V(A) > {vthresh} & V(B) > {vthresh}, 0, 1)}
ROUTpp Ypp 0 1e11
***** add delay lines ****
XNSW1 OUTp Ypp 0 NSW_PS PARAMS: RONval={(tplh+1e-15)/(1e-12*0.693)}
+ VTHval=0.5
XPSW1 OUTp Ypp VSUP PSW_PS PARAMS: RONval={(tphl+1e-15)/(1e-12*0.693)}
+ VTHval=0.5
CDEL1 OUTp 0 1pF
ETHRESH Yp 0 VALUE={IF(V(OUTp) > 0.5, 1, 0)}
ROUTp Yp 0 1e11
** add rise and fall *****
XNSW2 OUTr Yp 0 NSW_PS PARAMS: RONval={(tf+1e-15)/(1e-12*2.3)} VTHval=0.5
XPSW2 OUTr Yp VSUP PSW_PS PARAMS: RONval={(tr+1e-15)/(1e-12*2.3)} VTHval=0.5
CDEL2 OUTr 0 1pF
EOUT OUTf 0 VALUE={V(OUTr)*({vhi} - {vlo})+{vlo}}
RDR OUTf Y  1000
RO Y 0 1e11
.ENDS NAND2_PS
*$
.SUBCKT NSW_PS D G S PARAMS: RONval=10k VTHval=0.7 VCHARval=0.01
+ CGval=0.01pF CDval=0.01pF 
RDDUM D 0 1e11
RSDUM S 0 1e11
RGDUM G 0 1e11
CG G D {CGval}
CD D S {CDval}
EEXP F1 0 VALUE={LIMIT(((V(G,S)-VTHval)/VCHARval),-80,80)} 
GOUT D S VALUE={V(D,S)/(RONval*(1+EXP(-LIMIT(((V(G,S)-VTHval)/VCHARval)
+,-80,80))))}
.ENDS NSW_PS
*$
.SUBCKT OR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR2_BASIC_GEN
*$
.SUBCKT PSW_PS D G S PARAMS: RONval=10k VTHval=0.7 VCHARval=0.01
+ CGval=0.01pF CDval=0.01pF 
RDDUM D 0 1e11
RSDUM S 0 1e11
RGDUM G 0 1e11
CG G D {CGval}
CD D S {CDval}
EEXP F1 0 VALUE={LIMIT(((V(S,G)-VTHval)/VCHARval),-80,80)} 
GOUT S D VALUE={V(S,D)/(RONval*(1+EXP(-LIMIT(((V(S,G)-VTHval)/VCHARval)
+,-80,80))))}
.ENDS PSW_PS
*$
.SUBCKT BUF_DELAY_BASIC_GEN A  Y PARAMS: VDD=5 VSS=0 VTHRESH=2.5
+ DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS BUF_DELAY_BASIC_GEN
*$
.SUBCKT MONOPOS_PS in Q Qn PARAMS: PW=250u 
VS VSUP 0 DC 1
r1 Q 0 1e11
GIN VSUP YA VALUE={IF(V(IN)>0.5, V(VSUP)/1000K, 0)}
GDIS YA 0 VALUE={IF(V(IN)>0.5,0, V(YA)/1m)}
CIN YA 0 1n IC=0
RIN YA 0 1e11
EABM1 YTD 0 VALUE={IF(V(YA)> {PW*1000}, 1, 0)}
RYTD YTD 0 1e11
EXOR P 0 VALUE={IF(V(YTD) > 0.5 ^ V(IN) > .5, 1, 0)}
ROUTpp2 P 0 1e11
EAND1 Q1 0 VALUE={ IF(V(P)>0.5 & V(IN)>0.5, 1, 0)}
Ro1 Q1 Q 1m
Co1 Q 0 1p
ROUT2 Q 0 1e11
EAND2 Qn1 0 VALUE={ IF(V(Q)>0.5, 0, 1)}
Ro2 Qn1 Qn 1m
Co2 Qn 0 1p
ROUT4 Qn 0 1e11
.ENDS MONOPOS_PS
*$

.SUBCKT CESR IN OUT
+ PARAMs:  C=100u ESR=0.01 X=2 IC=0
C	IN 1  {C*X} IC={IC}
RESR	1 OUT {ESR/X}
.ENDS CESR
*$
.SUBCKT LDCR IN OUT
+ PARAMs:  L=1u DCR=0.01 IC=0
L	IN 1  {L} IC={IC}
RDCR	1 OUT {DCR}
.ENDS LDCR
*$
.SUBCKT MUX2_BASIC_GEN A B S Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(S) > {VTHRESH},  
+ V(B),V(A))}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS MUX2_BASIC_GEN
*$

.SUBCKT COMP VOUT VINP VINN PARAMS: VHYS = 0.05 
E1 YINT 0 VALUE {IF(V(VINP) + V(VOUT)*VHYS > V(VINN), 1, 0)}
R1 YINT VOUT 1
C1 VOUT 0 1n
.ENDS COMP
*$

.SUBCKT AND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND2_BASIC_GEN
*$

.SUBCKT INV_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS INV_BASIC_GEN
*$

.SUBCKT BUF_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS BUF_BASIC_GEN
*$

.subckt d_d1 1 2
d1 1 2 dd1
.model dd1 d
+ is=1e-015
+ tt=1e-011
+ rs=0.05
+ n=0.001
.ends d_d1
*$

.SUBCKT ONE_SHOT IN OUT
+ PARAMs:  T=100
S_S1         MEAS 0 RESET2 0 S1
E_ABM1         CH 0 VALUE { if( V(IN)>0.5 | V(OUT)>0.5,1,0)    }
R_R2         RESET2 RESET  0.1  
E_ABM3         OUT 0 VALUE { if( V(MEAS)<0.5 & V(CH)>0.5,1,0)    }
R_R1         MEAS CH  {T} 
C_C2         0 RESET2  1.4427n  
C_C1         0 MEAS  1.4427n  
E_ABM2         RESET 0 VALUE { if(V(CH)<0.5,1,0)    }
.MODEL         S1 VSWITCH Roff=1e9 Ron=1.0 Voff=0.25V Von=0.75V
.ENDS ONE_SHOT
*$
.SUBCKT INV_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS INV_DELAY_BASIC_GEN
*$
.SUBCKT VCVSCLIP_PS YP YN POS NEG PARAMS: gain=1 vomax=1 vomin=-1
RP POS 0 1e11
CP POS 0 0.01pF
RN NEG 0 1e11
CN NEG 0 0.01pF
ROUTN YN 0 1e11
COUTN YN 0 0.01pF
EVCLP YP YN VALUE={LIMIT((V(POS)-V(NEG))*{gain},{vomax},{vomin})}
RO YP 0 1e11
.ENDS VCVSCLIP_PS
*$
.SUBCKT PMOSIDEAL_PS D G S PARAMS: k=1 vth=0 
RDDUM D 0 1e11
RSDUM S 0 1e11
RGDUM G 0 1e11
EON Yp 0 VALUE={IF(V(S,G) > {vth}, -1, 0)}
GOUT D S VALUE={IF(V(S,D) >= (V(S,G)-{vth}), V(Yp)*({k}/2)*(V(S,G)-{vth})**2, V(Yp)*({k})*(V(S,G)-{vth}-V(S,D)/2)*V(S,D))}
.ENDS PMOSIDEAL_PS
*$
.SUBCKT AND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND3_BASIC_GEN
*$
.SUBCKT OR3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR3_BASIC_GEN
*$
.SUBCKT SRLATCHSHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(S) > {VTHRESH},5,IF(V(R)>{VTHRESH},-5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n 
.IC V(Qint) {VSS}
.model d_d1 d
+ is=1e-015
+ tt=1e-011
+ rs=0.005
+ n=0.01
.ENDS SRLATCHSHP_BASIC_GEN
*$
.subckt srlatchrhp_basic_gen s r q qb params: vdd=1 vss=0 vthresh=0.5 
gq 0 qint value = {if(v(r) > {vthresh},-5,if(v(s)>{vthresh},5, 0))}
cqint qint 0 1n
rqint qint 0 1000meg
d_d10 qint my5 d_d1
v1 my5 0 {vdd}
d_d11 myvss qint d_d1
v2 myvss 0 {vss} 
eq qqq 0 qint 0 1
x3 qqq qqqd1 buf_basic_gen params: vdd={vdd} vss={vss} vthresh={vthresh}
rqq qqqd1 q 1
eqb qbr 0 value = {if( v(q) > {vthresh}, {vss},{vdd})}
rqb qbr qb 1 
cdummy1 q 0 1n 
cdummy2 qb 0 1n
.ic v(qint) {vss}
.model d_d1 d
+ is=1e-015
+ tt=1e-011
+ rs=0.005
+ n=0.01
.ends srlatchrhp_basic_gen
*$
.SUBCKT DFFSBRB_RHPBASIC_GEN Q QB CLK D RB SB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 7n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} 
GQ 0 Qint VALUE = {IF(V(RB) < {VTHRESH},-5,IF(V(SB)< {VTHRESH},5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 5
D_D11 0 Qint D_D1 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 10n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.model d_d1 d
+ is=1e-015
+ tt=1e-011
+ rs=0.005
+ n=0.01
.IC V(Qint) {VSS}
.ENDS DFFSBRB_RHPBASIC_GEN
