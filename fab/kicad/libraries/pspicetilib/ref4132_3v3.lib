* REF4132 3.3V
*****************************************************************************
* (C) Copyright 2020 Texas Instruments Incorporated. All rights reserved.   
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.
** TI and its licensors and suppliers make no warranties, either expressed
** or implied, with respect to this model, including the warranties of
** merchantability or fitness for a particular purpose.  The model is
** provided solely on an "as is" basis.  The entire risk as to its quality
** and performance is with the customer
*****************************************************************************
*
* This model is subject to change without notice. Texas Instruments
* Incorporated is not responsible for updating this model.
*
*****************************************************************************
*
* Released by: Texas Instruments Inc.
* Part: REF4132 3.3V
* Date: 06/05/2020
* Model Type:  TRANSIENT
* Simulator: PSPICE
* Simulator Version: 17.4-2019
* Datasheet: SNAS794 â€“ June 2020
*
* Model Version: 1.00
*
*****************************************************************************
*$
.subckt REF4132_3V3 VIN EN VREF GND
E_U1_E4         VREF U1_N07140 U1_N07377 GND 1
X_U1_U4         U1_N02220 U1_N02234 DOUT AND2_BASIC_GEN_SAN_0 PARAMS:  VDD=1
+  VEE=0 VTH=0.5
E_U1_E2         U1_N06396 GND U1_N07742 GND 1
D_U1_D3         U1_N02234 U1_N02220 Dbreak 
D_U1_D4         U1_N07140 U1_N07133 Dbreak 
X_U1_U8         OUT2 OUTFINAL U1_N05935 AOL_0 
X_U1_U2         U1_N01371 VREF_DROPOUT U1_N02216 COMP_BASIC_GEN_1 PARAMS: 
+  VDD=1 VEE=0
C_U1_C5         GND OUT2  80n  TC=0,0 
C_U1_C4         GND U1_N02234  57.72m  TC=0,0 
E_U1_E3         U1_N06822 GND U1_N06460 GND 1
V_U1_V4         VREF_DROPOUT VDROPOUT 3.3
L_U1_L1         U1_N08272 U1_N08222  1meg  
X_U1_U5         ILOAD1 VDROPOUT DROPOUT_0 
X_U1_U16         DOUT GND GND VIN VCCS_IQ_0 
D_U1_D1         U1_N08075 GND Dbreak 
E_U1_E1         U1_N01371 GND VALUE { IF(V(U1_EN1)>0.5,V(VIN),0) }
X_U1_U1         EN U1_N00099 U1_N00201 U1_EN1 COMPHYS_BASIC_GEN_0 PARAMS: 
+  VDD=1 VSS=0 VTHRESH=0.5
R_U1_R1         U1_N02216 U1_N02220  1m TC=0,0 
X_U1_U15         VIN U1_N09764 PSR_0
X_U1_U10         U1_N06396 U1_N06460 vnse_0 PARAMS: 
E_U1_E5         U1_N21374 U1_N07742 U1_N08222 GND -1
R_U1_R2         U1_N02220 U1_N02234  10m TC=0,0 
I_U1_I2         U1_N07133 U1_N07140 DC 20m  
X_U1_U7         U1_N05383 GND ILOAD VCVS_LIMIT_0 
X_U1_U9         U1_N05935 OUTFINAL ILOAD VCCS_LIMIT_0 
X_U1_H2    OUTFINAL U1_N05127 ILOAD GND REF4132_3V3_U1_H2 
V_U1_V1         U1_N00099 GND 1.24
E_U1_E6         U1_N08272 GND VIN GND 0.638275u
R_U1_R4         EN U1_N08075  11.3meg TC=0,0 
R_U1_R3         U1_N06822 OUT2  1k TC=0,0 
V_U1_VHYST         U1_N00201 GND 50m
X_U1_H1    U1_N05127 U1_N07133 ILOAD1 GND REF4132_3V3_U1_H1 
C_U1_C6         U1_N09764 U1_N08222  1MEG  TC=0,0 
C_U1_C3         GND U1_N02220  1n  TC=0,0 
X_U1_U13         OUTFINAL VREF U1_N07377 COMP_BASIC_GEN_0 
E_U1_E7         U1_T1 GND VALUE { IF(V(DOUT)>0.5,(IF(TEMP<=150 & TEMP>=-55
+  ,(TEMP),0)),0) }
X_U1_U17          U1_T1 GND U1_N190432 U1_N05383 VDRIFT_0
E_U1_E8         U1_N21374 GND VALUE {
+  IF(V(DOUT)>0.5,((V(U1_N190432,GND)+216U)),0) }
.ends REF4132_3V3
*$
.subckt REF4132_3V3_U1_H2 1 2 3 4  
H_U1_H2         3 4 VH_U1_H2 1
VH_U1_H2         1 2 0V
.ends REF4132_3V3_U1_H2
*$
.subckt REF4132_3V3_U1_H1 1 2 3 4  
H_U1_H1         3 4 VH_U1_H1 1k
VH_U1_H1         1 2 0V
.ends REF4132_3V3_U1_H1
*$
.SUBCKT VDRIFT_0 IN+ IN- OUT+ OUT-
E_E1 OUT+ OUT- TABLE { (V(IN+,IN-)) }= (
+(-55,3.29983) (-52,3.29983) (-48,3.29983) 
+(-42,3.299827) (-40,3.299823) (-38.35,3.299805) (-36.7,3.299781) (-35.05,3.299755) 
+(-33.4,3.299734) (-31.75,3.299713) (-30.1,3.299694) (-28.45,3.299682) (-26.8,3.299674) 
+(-25.15,3.299672) (-23.5,3.299674) (-21.85,3.29968) (-20.2,3.299692) (-18.55,3.299701) 
+(-16.9,3.299714) (-15.25,3.299726) (-13.6,3.299741) (-11.95,3.299754) (-10.3,3.299769) 
+(-8.65,3.299783) (-7,3.299799) (-5.35,3.299814) (-3.7,3.299831) (-2.05,3.299845) 
+(-400M,3.299858) (1.25,3.299873) (2.9,3.299884) (4.55,3.299901) (6.2,3.299911) 
+(7.85,3.299922) (9.5,3.299934) (11.15,3.299941) (12.8,3.299947) (14.45,3.299955) 
+(16.1,3.299962) (17.75,3.299969) (19.4,3.299973) (21.05,3.299978) (22.7,3.299984) 
+(24.35,3.299984) (26,3.299989) (27.65,3.299989) (29.3,3.299989) (30.95,3.299989) 
+(32.6,3.299989) (34.25,3.299989) (35.9,3.299989) (37.55,3.299989) (39.2,3.299986) 
+(40.85,3.299986) (42.5,3.299982) (44.15,3.299978) (45.8,3.299978) (47.45,3.299976) 
+(49.1,3.299973) (50.75,3.299971) (52.4,3.299967) (54.05,3.299965) (55.7,3.29996) 
+(57.35,3.299958) (59,3.299956) (60.65,3.299954) (62.3,3.299951) (63.95,3.299949) 
+(65.6,3.299949) (67.25,3.299951) (68.9,3.299956) (70.55,3.299965) (72.2,3.299973) 
+(73.85,3.299981) (75.5,3.299991) (77.15,3.300004) (78.8,3.300011) (80.45,3.300024) 
+(82.1,3.300036) (83.75,3.300047) (85.4,3.300061) (87.05,3.300076) (88.7,3.300092) 
+(90.35,3.300113) (92,3.300134) (93.65,3.30016) (95.3,3.30019) (96.95,3.300221) 
+(98.6,3.300262) (100.25,3.300299) (101.9,3.300331) (103.55,3.300355) (105.2,3.300377) 
+(106.85,3.300394) (108.5,3.300412) (110.15,3.300427) (111.8,3.300442) (113.45,3.300455) 
+(115.1,3.300467) (116.75,3.300481) (118.4,3.300493) (120.05,3.300504) (121.7,3.300514) 
+(123.35,3.300528) (125,3.300537) (130,3.300537) (145,3.300537) (149,3.300537) (150,3.300537) 
+)
.ENDS VDRIFT_0
*$
.SUBCKT PSR_0  VIN OUT1
R28         3 OUT1 180 
C28         3 OUT1 10N IC=0 
R27         OUT1 0 1 
C27         OUT1 0 1F IC=0 
EVCVS18     3 0 4 0  180
R26         5 4 180 
C26         5 4 10N IC=0 
R25         4 0 1 
C25         4 0 1F IC=0 
EVCVS17     5 0 6 0  180
R24         7 6 390 
C24         7 6 10N IC=0 
R23         6 0 1 
C23         6 0 1F IC=0 
EVCVS16     7 0 8 0  390
R22         9 8 390 
C22         9 8 10N IC=0 
R21         8 0 1 
C21         8 0 1F IC=0 
EVCVS15     9 0 10 0  390
C20         11 0 10N 
R20         12 11 1.3262K 
EVCVS14     12 0 13 0  1
R19         14 10 390 
C19         14 10 10N IC=0 
R18         10 0 1 
C18         10 0 1F IC=0 
EVCVS13     14 0 11 0  390
C17         13 0 10N 
R17         15 13 1.3262K 
EVCVS12     15 0 16 0  1
C16         16 0 10N 
R16         17 16 1.3262K 
EVCVS11     17 0 18 0  1
R15         19 18 7K 
C15         19 18 10N IC=0 
R14         18 0 1 
C14         18 0 1F IC=0 
EVCVS10     19 0 20 0  7K
R13         21 20 1.591549MEG 
C13         21 20 10N IC=0 
R12         20 0 1 
C12         20 0 7.524N IC=0 
EVCVS9      21 0 VIN 0  5.8532
.ENDS
*$
*VOLTAGE CONTROLLED SOURCE WITH LIMITS
.SUBCKT VCCS_LIMIT_0  VC+ VC- VIMON
ERES VC+ VC- VALUE = {1800*(V(VIMON) / SQRT((ABS(V(VIMON))/60000U)+1))}
.ENDS VCCS_LIMIT_0 
*$
.SUBCKT AOL_0  VP VN VO
R30         4 5 5.30516477 
C30         5 0 1U 
EVCVS20     4 0 6 0  1
EVCVS19     VO 0 7 0  1
EVCVS8      9 0 8 0  1
C11         7 0 1U 
R11         9 7 53.051647M 
R10         10 8 159.154943M 
C10         8 0 1U 
EVCVS7      10 0 11 0  1
C7          12 11 10N 
EVCVS4      12 0 5 0  318.3098862
R6          12 11 318.3098862 
R4          11 0 1 
C6          11 0  1.00000000000000E-0018 
EVCVS2      14 0 13 0  10.915494K
R8          14 6 10.915494K 
C9          14 6 10N 
R7          6 0 1 
C8          6 0  1.00000000000000E-0018 
C5          13 0 1U 
R3          15 13 2.2416K 
EVCVS1      15 0 VP VN  13.95214561K
.ENDS
*$
*VOLTAGE CONTROLLED SOURCE WITH LIMITS
.SUBCKT VCVS_LIMIT_0  VOUT+ VOUT- VIMON
*
E1 VOUT+ VOUT- VALUE={(IF(V(VIMON)<0,(76.46M*V(VIMON)+((100M*V(VIMON) / SQRT((ABS(V(VIMON))/60000U)+1)))),+
+(-7.097M*V(VIMON))+((130M*V(VIMON) / SQRT((ABS(V(VIMON))/60000U)+1)))))}
.ENDS VCVS_LIMIT_0 
*$
*TG IDEAL DIODE
.SUBCKT IDEAL_D_0  A C
D1 A C DNOM
.MODEL DNOM D (N=1.3 IS=1E-15)
.ENDS IDEAL_D_0 
*$
****
.SUBCKT COMP_BASIC_GEN_0  INP INM Y 
E_ABM 1 0 VALUE = {1E6*(V(INP)-V(INM))}
R1 1 Y 1M
C1 Y 0 1P
.ENDS COMP_BASIC_GEN_0 
*$
*TG IDEAL DIODE
.SUBCKT IDEAL_D_1  A C
D1 A C DNOM
.MODEL DNOM D (N=0.01 IS=1E-15)
.ENDS IDEAL_D_1 
*$
* VNSE - INPUT VOLTAGE NOISE IN NV/RT-HZ
.SUBCKT VNSE_0  1 2
* INPUT VARIABLES
* SET UP 1/F NOISE
* FLW = 1/F FREQUENCY IN HZ
.PARAM FLW=0.1
* NLF = VOLTAGE NOISE DENSITY AT 1/F FREQUENCY IN NV/RT(HZ)
.PARAM NLF=1880
* SET UP BROADBAND NOISE
* NVR = BROADBAND VOLTAGE NOISE DENSITY IN NV/RT(HZ)
.PARAM NVR=535
* CALCULATED VALUES
.PARAM GLF={PWR(FLW,0.25)*NLF/1164}
.PARAM RNV={1.184*PWR(NVR,2)}
.MODEL DVN D KF={PWR(FLW,0.5)/1E11} IS=1.0E-16
* CIRCUIT CONNECTIONS
I1 0 7 10E-3
I2 0 8 10E-3
D1 7 0 DVN
D2 8 0 DVN
E1 3 6 7 8 {GLF}
R1 3 0 1E9
R2 3 0 1E9
R3 3 6 1E9
E2 6 4 5 0 10
R4 5 0 {RNV}
R5 5 0 {RNV}
R6 3 4 1E9
R7 4 0 1E9
E3 1 2 3 4 1
.ENDS
*$
.SUBCKT VCCS_IQ_0  VC+ VC- VOUT+ VOUT-
.PARAM GAIN = 1E-6
GQ VOUT+ VOUT- VALUE ={IF(V(VC+)>0.5,(9.3E-17*(TEMP)**5 - 8E-15*(TEMP)**4 + 1.5E-13*(TEMP)**3 + 6.5E-11*(TEMP)**2 - 8.5E-09*(TEMP) + 7.24E-05),
+(-1.93E-19)*(TEMP)**6 + 5E-17*(TEMP)**5 - 2.21E-15*(TEMP)**4 - 7.9E-14*(TEMP)**3 + 6.2E-12*(TEMP)**2 + 5.2E-10*(TEMP) + 2.226E-06)}
.ENDS VCCS_IQ_0 
*$
.SUBCKT COMPHYS_BASIC_GEN_0  INP INM HYS OUT_0 PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
EIN INP1 INM1 INP INM 1 
EHYS INP1 INP2 VALUE { IF( V(1) > {VTHRESH},-V(HYS),0) }
EOUT OUT_0 0 VALUE { IF( V(INP2)>V(INM1), {VDD} ,{VSS}) }
R1 OUT_0 1 1
C1 1 0 5N
RINP1 INP1 0 1K
.ENDS COMPHYS_BASIC_GEN_0 
*$
.SUBCKT AND2_BASIC_GEN_SAN_0  IN1 IN2 Y PARAMS: VDD=1 VEE=0 VTH=0.5
E1 Y 0 VALUE ={(((VDD+VEE)/2)+ ((VDD-VEE)/2)*TANH((V(IN1,0)-VTH)*1E6))*(((VDD+VEE)/2)+ ((VDD-VEE)/2)*TANH((V(IN2,0)-VTH)*1E6))}
.ENDS AND2_BASIC_GEN_SAN_0 
*$
.SUBCKT COMP_BASIC_GEN_1  INP INM Y PARAMS: VDD=1 VEE=0 
E_ABM Y 0 VALUE = {((VDD+VEE)/2)+((VDD-VEE)/2)*TANH(10E12*(V(INP)-V(INM)))}
.ENDS COMP_BASIC_GEN_1 
*$
.SUBCKT DROPOUT_0  ILOAD VREF 
EDROP VREF 0 VALUE ={ IF(V(ILOAD)>1,(-122U*V(ILOAD)),(22.12M*V(ILOAD)+22.22M-1N))}  
.ENDS DROPOUT_0
*$
