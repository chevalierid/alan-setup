* LM48580
*****************************************************************************
* (C) Copyright 2012 Texas Instruments Incorporated. All rights reserved.
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.
** TI and its licensors and suppliers make no warranties, either expressed
** or implied, with respect to this model, including the warranties of 
** merchantability or fitness for a particular purpose.  The model is
** provided solely on an "as is" basis.  The entire risk as to its quality
** and performance is with the customer.
*****************************************************************************
*
** Released by: WEBENCH(R) Design Center, Texas Instruments Inc.
* Part: LM48580
* Date: 08/10/2012
* Model Type: All In One
* Simulator: PSPICE 
* Simulator Version: 16.2.0.p001
* EVM Order Number: N/A 
* EVM Users Guide:  N/A 
* Datasheet: SNAS491 February 23, 2010
*
* Model Version: 1.0
*
*****************************************************************************
*
* Updates:
*
* Version 1.0 : Release to Web
*
*****************************************************************************
* Notes:
* 1. The following parameters are modeled: 
*    Quiescent Current, Shutdown Current, Wake Up Time From Shutdown, 
*    Differential Output Offset Voltage, Gain settings, Input Resistance,
*    Frequency Response, PSRR and CMRR. 
*
* 2. The Boost Converter is not being modeled on this model. 
*
*****************************************************************************



.subckt LM48580 GAIN GND INN INP OUTN OUTP SHDN VAMP VBST VDD
XI0 GAIN GND INN INP OUTN OUTP SHDN VAMP VBST VDD LM48580_HT1
.ends







.subckt BALUN V VCM VN VP
R9 V NET023 1e-6
R4 NET035 VCM 1e-6
R5 NET023 NET016 1e-6
R3 NET027 VN 1e-6
R6 0 NET021 1e-6
R7 NET023 NET019 1e-6
R8 0 NET017 1e-6
R1 NET022 VP 1e-6
XTRANSFORMEREK0 NET016 NET021 NET022 NET035 TRANSFORMEREK0
XTRANSFORMEREK1 NET019 NET017 NET035 NET027 TRANSFORMEREK1
.ends BALUN


.subckt ANALOG_BUFFER VOUT VIN
R0 VIN 0 1e9
R1 VOUT 0 1e9
E0 VOUT 0 VIN 0 1
.ends ANALOG_BUFFER


.subckt LM48580_DELAY_HT1 VIN VOUT
T0 NET20 0 NET17 0 Z0=75 TD=1.4e-3
XI3 NET20 VIN ANALOG_BUFFER
XI5 VOUT NET17 ANALOG_BUFFER
R0 NET17 0 75
.ends LM48580_DELAY_HT1


.subckt LM48580_DECODER_HT1 GAIN GAIN0 GAIN1 GAIN2 VDD VSS
R0 NET025 GAIN 10e6
XAHDLAND22 GAIN0 NET10 NET026 VDD VSS AN210
V4 NET025 0 DC 800e-3
V1 VTHRES1 0 DC 700e-3
V0 VTHRES2 0 DC 900e-3
XAHDLI7 VTHRES1 GAIN GAIN1 VDD VSS HPA_COMP_IDEAL
XAHDLI6 GAIN VTHRES1 NET026 VDD VSS HPA_COMP_IDEAL
XAHDLI2 VTHRES2 GAIN NET10 VDD VSS HPA_COMP_IDEAL
XAHDLI4 GAIN VTHRES2 GAIN2 VDD VSS HPA_COMP_IDEAL
.ends LM48580_DECODER_HT1


.subckt LM48580_FEEDBACK_HT1 GAIN0 GAIN1 GAIN2 VIN VMID VOUT
XAHDLI2 GAIN2 NET7 VMID sw_l4 PARAMS: VON=1.8
XAHDLI1 GAIN1 NET1 VMID sw_l4 PARAMS: VON=1.8
XAHDLI0 GAIN0 NET5 VMID sw_l4 PARAMS: VON=1.8
R9 NET7 NET1 9e3
R7 NET5 VOUT 199e3
R10 VIN NET7 10e3
R8 NET1 NET5 16e3
.ends LM48580_FEEDBACK_HT1


.subckt LM48580_VRANGE4_HT1 VSS VDD VL VH VOUT VIN
R0 NET016 NET09 1
XI6 VOUT NET09 ANALOG_BUFFER
XI7 NET016 VIN ANALOG_BUFFER
VD1 VH_INT NET23 DC 50e-3
VE1 NET16 VL_INT DC 50e-3
D5 NET16 NET09 DIDEAL1
D0 NET09 NET23 DIDEAL1
E0 VH_INT 0 VDD VH 1
E1 VL_INT 0 VL VSS 1
.ends LM48580_VRANGE4_HT1


.subckt LM48580_FDA2_VOUTRANGE_HT1 VDD VSS VIN1 VIN2 VOUT1 VOUT2
XI5 VSS VDD VL VH VOUT2 VIN2 LM48580_VRANGE4_HT1
XI17 VSS VDD VL VH VOUT1 VIN1 LM48580_VRANGE4_HT1
V4 VL 0 DC 10e-3
V3 VH 0 DC 10e-3
.ends LM48580_FDA2_VOUTRANGE_HT1


.subckt LM48580_FDA2_VINRANGE_HT1 VDD VSS VIN1 VIN2 VOUT1 VOUT2
XI5 VSS VDD VL VH VOUT2 VIN2 LM48580_VRANGE4_HT1
XI17 VSS VDD VL VH VOUT1 VIN1 LM48580_VRANGE4_HT1
V4 VL 0 DC 0
V3 VH 0 DC 1.01
.ends LM48580_FDA2_VINRANGE_HT1


.subckt LM48580_FDA2_HT1 VDD VN VOUTN VOUTP VP VSS
XI13 VDD VSS NET036 NET054 VOUTP VOUTN LM48580_FDA2_VOUTRANGE_HT1
XI19 VDD VSS VP VN NET044 NET043 LM48580_FDA2_VINRANGE_HT1
C0 NET036 NET035 1e-6
C1 NET054 NET052 1e-6
E0 NET063 NET18 NET044 NET043 50e3
E2 NET18 0 VMID NET12 1e6
E1 NET071 NET18 NET044 NET043 -50e3
R10 NET043 0 1e9
R11 NET044 0 1e9
R0 VP VN 1e9
R8 NET035 0 35
R9 NET052 0 35
R3 NET063 NET036 1.2e6
R7 NET071 NET054 1.2e6
R1 NET036 NET12 1e9
R2 NET054 NET12 1e9
R5 VDD VMID 100e6
R6 VMID VSS 100e6
R4 0 NET18 1e9
.ends LM48580_FDA2_HT1


.subckt LM48580_FDA1_VOUTRANGE_HT1 VDD VSS VIN1 VIN2 VOUT1 VOUT2
XI17 VSS VDD VL VH VOUT1 VIN1 LM48580_VRANGE4_HT1
XI5 VSS VDD VL VH VOUT2 VIN2 LM48580_VRANGE4_HT1
V4 VL 0 DC 200e-3
V3 VH 0 DC 200e-3
.ends LM48580_FDA1_VOUTRANGE_HT1


.subckt LM48580_FDA1_VINRANGE_HT1 VDD VSS VIN1 VIN2 VOUT1 VOUT2
XI6 VSS VDD VL VH VOUT2 VIN2 LM48580_VRANGE4_HT1
XI5 VSS VDD VL VH VOUT1 VIN1 LM48580_VRANGE4_HT1
V4 VL 0 DC 0
V3 VH 0 DC 1
.ends LM48580_FDA1_VINRANGE_HT1


.subckt LM48580_FDA1_HT1 VDD VN VOUTN VOUTP VP VSS
XI27 VDD VSS NET0134 NET086 VOUTP VOUTN LM48580_FDA1_VOUTRANGE_HT1
XI19 VDD VSS VP VN_INT2 NET048 NET047 LM48580_FDA1_VINRANGE_HT1
L1 NET043 NET087 250e-6
L0 NET045 NET083 350e-6
G0 NET043 0 VP 0 100e-6
G1 NET045 0 VDD VSS 6.5e-6
V0 NET041 0 DC 1.238
XI13 NET050 NET045 ANALOG_BUFFER
XI14 NET058 NET043 ANALOG_BUFFER
C4 NET035 0 25e-12
C5 NET090 0 31.5e-12
C0 NET0134 0 33e-12
C1 NET086 0 33e-12
E4 VN_INT1 VN_INT2 NET090 0 1
E3 VN VN_INT1 NET035 0 1
E0 NET063 NET18 NET048 NET047 275.0
E2 NET18 0 NET041 VOCM_SAMPLE 1e6
E1 NET071 NET18 NET048 NET047 -275.0
R23 NET047 0 1e9
R21 0 NET087 1
R20 NET090 NET058 1e6
R19 NET035 NET050 1e6
R18 0 NET083 1
R24 NET048 0 1e9
R3 NET063 NET0134 1e6
R7 NET071 NET086 1e6
R1 NET0134 VOCM_SAMPLE 1e9
R0 VP VN 1e9
R2 NET086 VOCM_SAMPLE 1e9
R5 VDD NET11 100e6
R6 NET11 VSS 100e6
R4 0 NET18 1e9
.ends LM48580_FDA1_HT1


.subckt LM48580_HT1 GAIN GND INN INP OUTN OUTP SHDN VAMP VBST VDD
GAHDLI4 NET079 NET074 VALUE { LIMIT(V(NET079,NET074)*1.0, -1.1, 1.1) }
GAHDLI52 NET0134 NET083 VALUE { LIMIT(V(NET0134,NET083)*1.0, -1.1, 1.1) }
EAHDLI45 VBST 0 VALUE { LIMIT(V(NET076,0)*1, 0, 15.5) }
E0 NET072 0 OUTP OUTN 614.28571428571e-3
E2 NET076 NET090 NET075 0 1
XI41 NET072 NET075 HPA_ABS
XI28 SHDN SHDN_INT LM48580_DELAY_HT1
V1 NET083 OUTN DC 35e-3
V2 NET074 OUTP DC -35e-3
V0 NET090 0 DC 6.1
I12 NET064 NET069 DC 500e-9
I6 NET038 NET047 DC 2.7e-3
XAHDLINV0 SHDN_INTINV SHDN_INT VDD GND IV110
XAHDLI34 SHDN_INTINV NET024 NET030 sw_l4 PARAMS: VON=1.8
XAHDLI19 SHDN_INT NET069 0 sw_l4 PARAMS: VON=1.8
XAHDLI18 SHDN_INTINV NET069 GND sw_l4 PARAMS: VON=1.8
XAHDLI21 SHDN_INT 0 NET064 sw_l4 PARAMS: VON=1.8
XAHDLI9 SHDN_INT NET047 GND sw_l4 PARAMS: VON=1.8
XAHDLI20 SHDN_INTINV VDD NET064 sw_l4 PARAMS: VON=1.8
XAHDLI10 SHDN_INTINV NET047 0 sw_l4 PARAMS: VON=1.8
XAHDLI5 SHDN_INT VDD NET038 sw_l4 PARAMS: VON=1.8
XAHDLI11 SHDN_INTINV 0 NET038 sw_l4 PARAMS: VON=1.8
XI2 GAIN GAIN0 GAIN1 GAIN2 VDD GND LM48580_DECODER_HT1
XI8 GAIN0 GAIN1 GAIN2 NET5 NET030 NET0134 LM48580_FEEDBACK_HT1
XI7 GAIN0 GAIN1 GAIN2 NET7 NET024 NET079 LM48580_FEEDBACK_HT1
XI1 VAMP NET030 NET079 NET0134 NET024 GND LM48580_FDA2_HT1
R6 NET1 NET5 73.476e3
R5 NET3 NET7 73.476e3
R4 INN NET1 52e3
R3 INP NET3 52e3
XI0 VDD NET1 NET7 NET5 NET3 GND LM48580_FDA1_HT1
.ends LM48580_HT1




.SUBCKT HPA_COMP_IDEAL INP INN OUT VDD VSS
E1 OUT 0 VALUE = { IF( (V(INP) > V(INN)), V(VDD), V(VSS) ) }
.ENDS


.SUBCKT sw_l4 S A B PARAMS: VON=1.1
S1 A B S 0 VSWITCH2
.MODEL VSWITCH2 VSWITCH Roff=1e9 Ron=1e-3 Voff=-0.01 Von={VON}
.ENDS


.SUBCKT IV110 2 1 VDD VSS
E1 3 0 VALUE = { IF( V(1) > (V(VDD)+V(VSS))/2, V(VSS), V(VDD) ) }
R1 3 2 1
C1 2 0 1n
.ENDS


.SUBCKT AN210 3 1 2 VDD VSS
E1 4 0 VALUE = { IF( ((V(1) > (V(VDD)+V(VSS))/2 ) & (V(2) > (V(VDD)+V(VSS))/2 )), V(VDD), V(VSS) ) }
R1 4 3 1
C1 3 0 1n
.ENDS



.SUBCKT TRANSFORMEREK0 1 2 3 4
K1 L1 L2 0.5
L1 1 2 10uH
L2 3 4 10uH
.ends



.SUBCKT TRANSFORMEREK1 1 2 3 4
K1 L1 L2 0.5
L1 1 2 10uH
L2 3 4 10uH
.ends


.MODEL DDEFAULT D IS=8E-16
.MODEL DIDEAL1 D N=50m
.MODEL DIDEAL2 D N=1m
.MODEL DCURLIM D IS=3E-17
.MODEL DBLOCK D IS=8E-16 BV=25


.SUBCKT HPA_ABS Vin Vout
E1 Vout 0 VALUE = { abs (V(Vin)) }
.ENDS


.SUBCKT Vrange Vin Vout VDD VSS VH VL
Erange Vout 0 VALUE = { LIMIT ( V(Vin), V(VDD) - V(VH), V(VSS) + V(VL) ) }
.ENDS

