*DRV104
*****************************************************************************
* (C) Copyright 2011 Texas Instruments Incorporated. All rights reserved.                                            
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.
** TI and its licensors and suppliers make no warranties, either expressed
** or implied, with respect to this model, including the warranties of 
** merchantability or fitness for a particular purpose.  The model is
** provided solely on an "as is" basis.  The entire risk as to its quality
** and performance is with the customer.
*****************************************************************************
*
* This model is subject to change without notice. Texas Instruments
* Incorporated is not responsible for updating this model.
*
*****************************************************************************
*
** Released by: Analog eLab Design Center, Texas Instruments Inc.
* Part: DRV104
* Date: 20MAY2011
* Model Type: ALL IN ONE
* Simulator: PSPICE
* Simulator Version: 16.0.0.p001
* EVM Order Number: N/A
* EVM Users Guide: N/A
* Datasheet: SBVS036B – SEPTEMBER 2003 – REVISED MARCH 2006
*
* Model Version: 1.0
*
*****************************************************************************
*
* Updates:
*
* Version 1.0 : 
* Release to Web
*
*****************************************************************************
* BEGIN MODEL DRV104
*
*
* SEE BELOW FOR SYNTAX FOR OTHER SIMULATORS, NOTES
* ON THERMAL RESISTANCE AND TIME CONSTANTS, NOTES
* FOR SIMULATION AND NOTES FOR PINOUT OPTIONS.
*
*
*** BEGIN FEATURES
*
*
* MODEL FEATURES INCLUDE
*
* FREQUENCY SELECTION BY EXTERNAL RESISTOR.
* DUTY FACTOR SELECTION BY EXTERNAL RESISTOR.
* DUTY FACTOR SELECTION BY EXTERNAL VOLTAGE.
* DELAY SELECTION BY EXTERNAL CAPACITOR.
* DELAY MINIMIZE BY TIE TO 5 VOLTS.
* OUTPUT RISE AND FALL TIMES.
* OUTPUT VOLTAGE DROP VS CURRENT AND TEMPERATURE.
* OUTPUT CURRENT LIMIT VS TEMPERATURE.
* OUTPUT LEAKAGE.
* INPUT THRESHOLD.
* INPUT BIAS CURRENT.
* MASTER PIN FUNCTION
* SYNCH PIN FUNCTION
* THERMAL SHUTDOWN.
* QUIESCENT CURRENT.
*
* MODEL FUNCTIONS FROM -55 TO 125 C BUT NOT
* ALL PARAMETERS NECESSARILY TRACK THOSE OF THE DATA SHEET CLOSELY OVER THE FULL TEMP RANGE.
*
* SYNTAX INCLUDED FOR
* PSPICE 8.0 AND UP,TOPSPICE 6 AND UP,
* AND MOST PSPICE COMPAT SIMULATORS.
* BERKELEY 3E AND UP,
* AND MOST BERKELEY COMPAT SIMULATORS.
* HSPICE 98 AND UP.
*
* END FEATURES
*
*
*** BEGIN SIMULATION NOTES
*
* BE PREPARED FOR LONG SIMULATION TIMES.
* SET ITL1 AND ITL2 TO 5000
* SET ITL4 TO AT ABOUT 200
* DO NOT SIMULATE WITH +VS BELOW 8 OR ABOVE 32 VOLTS.
* SET YOUR STEP TIME SHORT ENOUGH TO PREVENT ALIASING
* IN YOU SCOPE DISPLAY. YOU WILL WANT AT LEAST 20-40
* STEPS IN ONE CYCLE OF THE DRV104 OPERATING FREQUENCY.
* FOR MOST SIMULATORS SET T STEP CEILING SOMEWHERE
* BETWEEN TSTEP AND TSTEP DIVIDED BY 4. IF YOU ARE
* DOING THERMAL SHUTDOWM SIMULATIONS, T STEP CIELING
* SHOULD NOT EXCEED 2 TO 5 MICROSECONDS. HSPICE WILL
* RUN THE FASTEST IF YOU DO NOT USE T STEP CIELING.
* IF YOUR SIMULATOR ALLOWS LVLTIM=1 IT WILL USUALLY
* GIVE A FASTER AND MORE ACCURATE SIMULATION.
* SOME SIMULATORS REQUIRE RELTOL=0.003 TO 0.01 FOR
* REASONABLE SIMULATION TIME.
*
* THE INTERNAL TRIANGLE WAVE HAS BEEN BROUGHT OUT AS
* A DIAGNOSTIC OUTPUT FOR THE PURPOSE OF HELPING YOU
* SET SIMULATION OPTIONS FOR A GOOD TRADEOFF BETWEEN
* ACCURACY AND SIMULATION TIME. YOU SHOULD SEE THE
* TRIANGLE HAVING REPEATABLE NON-WANDERING PEAKS AND
* MINIMUMS AT 3.9 AND 1.3 VOLTS. BE CAREFUL TO
* DIFFERENTIATE BETWEEN SIMULATION ACCURACY AND SCOPE
* ALIASING. THE INTERNAL JUNCTION TEMPERATURE HAS
* ALSO BEEN BROUGHT OUT AS A DIAGNISTIC PIN OUTPUT.
* THIS IS HELP YOU SHOULD YOU ACCIDENTALLY SET UP A
* SCENARIO WHERE THE INITIAL TRANSIENT CONVERGANCE
* CONVERGES WITH THE JUNCTION TEMPERATURE HIGH ENOUGH
* TO CAUSE THERMAL SHUTDOWN.
*
* IF YOUR SIMULATOR WILL NOT DO AN INITIAL TRANSIENT
* CONVERGANCE YOU CAN USE THE SPICE OPTION UIC IN
* THE TRANSIENT ANALYSIS LINE BUT THIS WILL CAUSE
* THE CHIP TEMPERTURE TO CONVERGE INITIALLY TO 0 DEG
* C RATHER THAN YOUR ACTUAL SPICE T AMBIENT.
* YOU MAY ADD IC=XX ON THE C28 LINE BELOW WHERE XX
* IS THE SPICE T AMBIENT TO OVERCOME THIS.
*
* END SIMULATION NOTES
*
*
* PINOUT ORDER DF DLY FRQ MAST BOOT OUT +VP +VS GND SYNCH FLG IN  TRI TSIL
*              |   |   |    |    |   |   |   |   |    |     |  |   |    |
* PINOUT ORDER 1   2   3    4    5   6   8   10  11   12   13 14  194  195
*
*
.SUBCKT DRV104 1 2 3 4 5 6 8 10 11 12 13 14 
*194 195
*
*
*** NOTE THAT LAST TWO PIN CALLS MAY BE DELETED AS THEY
* ARE DIAGNOSTIC PINS
* TRI IS THE INTERNAL TRIANGLE WAVE
* TSIL IS THE JUNCTION TEMPERATURE IN DEGREES C
* DEPENDING ON YOUR SIMULATOR YOU MAY HAVE TO CONNECT
* DUMMY RESISTORS FROM THE DIAGNOSTIC OUTPUT PINS TO
* CIRCUIT GROUND IF YOU GET 'LESS THAN 2 CONNECTION..'
* ERRORS.
*
*
*** BEGIN THERMAL R AND TC
*
* NOTE THAT THE THERMAL RESISTANCE JUNCTION TO AMBIENT
* IS SET BY R154 AND DEFAULT IS 37.5 DEG C PER WATT
R154 230 95 37.5
* NOTE THAT THE THERMAL TIME CONSTANT IS SET BY C28 AND
* THAT THE DEFAULT IS ARTIFICIALLY SHORT BY 10 TIMES,
* IE C28 IS 10 TIMES SMALLER THAN ACTUAL
* THIS IS TO ALLOW INVESTIGATION OF THERMAL SHUTDOWN
* WITH SHORTER SIMULATION TIMES   TO MAKE THE THERMAL
* TIME CONSTANT REAL SET C28 TO 5E-3
C28 95 11 5E-4
*
* END THERMAL R AND TC
*
*
*** BEGIN SYNTAX VERSIONS
*
*
* START PSPICE SYNTAX GROUP
*
G8 11 95 VALUE={V(98)*V(99)}
E20 96 11 VALUE={PWR(I(V2),0.972)}
G1 94 11 VALUE={V(96)*SGN(V(97))}
G10 240 11 VALUE={I(V2)*2.75}
R23 199 200 RM1 2E4 
R24 199 201 RM1 2E4 
.MODEL RM1 RES TC1=0.005 TC2=0.00005
* END PSPICE SYNTAX GROUP
*
* START TOPSPICE SYNTAX GROUP
*G8 11 95 VALUE={V(98)*V(99)}
*E20 96 11 VALUE={I(V2)^0.972}
*G1 94 11 VALUE={V(96)*SIGN(V(97))}
*G10 240 11 VALUE={I(V2)*2.75}
*R23 199 200 2E4 TC1=0.005 TC2=0.00005
*R24 199 201 2E4 TC1=0.005 TC2=0.00005
* END TOPSPICE SYNTAX GROUP
*
* START BERKELEY SYNTAX GROUP
*B8 11 95 I=V(98)*V(99)
*B20 96 11 V=I(V2)^0.972
*B1 94 11 I=V(96)*SGN(V(97))
*B10 240 11 I=I(V2)*2.75
*R23 199 200 2E4 RM1
*R24 199 201 2E4 RM1
*.MODEL RM1 R TC1=0.005 TC2=0.00005
* END BERKELEY SYNTAX GROUP
*
* START HSPICE SYNTAX GROUP
*E20A 186 11 96 11 1E4
*R20A 186 11 1E6
*G8 11 95 CUR='V(98)*V(99)'
*E20 96 11 VOL='PWR(I(V2),0.972)'
*G1 94 11 CUR='(V(186)*SGN(V(97)))/1E4'
*G10 240 11 VALUE='I(V2)*2.75'
*R23 199 200 2E4 TC1=0.005 TC2=0.00005
*R24 199 201 2E4 TC1=0.005 TC2=0.00005
* END HSPICE SYNTAX GROUP
*
* END SYNTAX VERSIONS
*
* END NOTES
*
*
*
V1 196 11 0 PULSE 0 1.3
V2 196 3 0
V4 197 11 3.964
V5 198 11 1.249
V6 199 11 10
V7 202 11 -10
M1 200 203 202 202 MF L=3U W=30U
M2 200 201 202 202 MF L=3U W=30U
M3 201 200 202 202 MF L=3U W=30U
M4 201 204 202 202 MF L=3U W=30U
C1 94 11 67.62E-12
R27 203 11 1E4
R28 204 11 1E4
R29 205 206 1E3
C2 205 11 20E-12
R30 207 208 1E3
C3 207 11 20E-12
M11 97 205 199 199 MPF L=3U W=30U
M12 97 205 202 202 MF L=3U W=30U
E1 208 11 200 11 1
E2 206 11 207 11 1
E3 203 11 197 94 -200
E4 204 11 94 198 -200
R111 11 94 1E12
R114 11 96 1E3
R125 205 11 1E9
R126 208 11 1E9
R127 197 11 1E9
R128 198 11 1E9
C14 177 209 50E-12
R131 210 8 0.064
R133 210 211 32E6
E21 212 11 213 11 -1
E22 214 11 94 1 -200
M14 215 214 11 11 MF L=3U W=30U
V31 216 11 6
R136 216 215 2E4
M15 210 177 211 211 NOUT L=3U W=16000U
G6 177 217 218 11 -2E-3
C26 177 217 1E-12
R137 217 177 1E3
R138 6 211 0.1
R139 218 11 1E9
E24 219 11 211 6 4.47
Q2 220 221 11 QNS OFF
R140 222 219 1E3
Q3 220 223 11 QNS OFF
R141 224 220 1E3
R142 225 220 5E3
Q4 226 225 224 QPS OFF
R143 226 11 100
R144 226 223 25E3
E25 224 11 227 11 1
Q5 228 223 11 QNS OFF
D2 218 228 DD
R145 227 218 1E3
I4 11 229 1E-3
D4 229 11 DD
E28 230 11 231 11 -578.33
V34 229 231 0.7
R151 11 231 1E3
R152 11 230 1E6
E29 99 11 211 6 10
R155 99 11 1E9
E30 98 11 8 6 1
R156 98 11 1E9
E31 232 11 233 234 100
V35 234 11 55
D5 235 216 DD
D6 11 235 DD
R157 232 235 10E3
R158 233 235 550E3
R159 233 236 1E6
E32 236 11 237 11 1
Q6 228 238 11 QNS OFF
R160 238 239 100
E33 239 11 235 11 1
C31 11 233 1E-12
R161 95 237 1E6
C32 237 11 1E-9
E34 222 221 230 11 4E-3
R164 1 11 1E10
C33 11 1 5E-12
Q7 1 240 10 QPD
Q8 240 240 10 QPD
V37 227 212 6
R165 212 11 1E9
R167 214 11 1E10
M16 241 14 242 242 MPF L=3U W=30U
M17 241 14 11 11 MF L=3U W=30U
V38 242 11 3.2
E35 243 11 2 244 100
R169 2 11 1E8
Q9 2 245 10 QPD
Q10 245 245 10 QPD
I5 245 11 3.24E-6
M18 2 241 11 11 MF L=3U W=8U
V41 244 11 2.6
R170 244 11 1E9
M19 246 243 11 11 MF L=3U W=30U
M20 246 241 11 11 MF L=3U W=300U
R171 216 246 2E4
R172 243 11 1E9
M21 213 246 11 11 MF L=3U W=45U
M22 247 241 11 11 MF L=3U W=300U
D7 218 247 DD
M23 13 248 11 11 MF L=3U W=28U
R173 11 248 1E3
R174 11 13 1E8
E36 248 11 216 249 0.5
Q11 249 250 11 QNS OFF
Q12 249 251 11 QNS OFF
R175 239 251 100
R176 249 216 20E3
R177 226 250 50E3
I6 11 14 10E-9
R178 11 14 1E10
C35 11 14 5E-12
C36 2 11 22E-12
I7 10 11 0.525E-3
R179 10 11 4E5
R180 11 3 1E12
D8 11 6 DO
E37 194 11 94 11 1
R181 194 11 1E6
E38 195 11 95 11 1
R182 195 11 1E9
E39 209 11 6 11 -1
V43 217 6 -5.5
V45 252 11 4.5
Q13 4 253 252 QPD
Q14 253 253 252 QPD
I8 253 11 15E-6
M24 254 4 255 255 MPF L=3U W=30U
I9 11 4 10E-9
R184 11 4 1E10
C37 11 4 5E-12
M26 256 254 255 255 MPF L=3U W=30U
M29 257 215 252 252 MPF L=3U W=4U
M31 258 259 260 260 MPF L=3U W=30U
R185 11 12 1E10
C38 11 12 1E-12
E40 261 11 256 262 10
V46 262 11 2.25
E41 263 11 254 262 20
E42 264 11 256 262 20
V47 260 11 6
R186 265 213 25E3
M35 254 4 11 11 MF L=3U W=30U
M36 256 254 11 11 MF L=3U W=30U
M37 258 259 11 11 MF L=3U W=30U
M38 257 215 11 11 MF L=3U W=4U
E43 259 11 12 11 1.8
M39 258 263 265 266 MSW L=3U W=30U
M40 215 264 265 267 MSW L=3U W=30U
R189 266 11 1E12
R190 267 11 1E12
M41 12 261 257 268 MSW L=3U W=30U
R191 268 11 1E12
R192 11 234 1E9
R193 263 11 1E9
R194 264 11 1E9
R195 261 11 1E9
R196 11 259 1E9
R197 262 11 1E9
R199 5 11 1E6
R200 5 11 1E6
V48 252 255 0.9
.MODEL DD D IS=1E-14
.MODEL DO D IS=1E-16 RS=1 CJO=10E-12 TT=100E-9
.MODEL QNS NPN
.MODEL QPS PNP
.MODEL MF NMOS KP=200U VTO=0.5
.MODEL QPD PNP VAF=2000
.MODEL MPF PMOS KP=200U VTO=-0.5
+ LAMBDA=0.01
.MODEL NOUT NMOS KP=200U VTO=3
+ LAMBDA=0.01
.MODEL MSW NMOS KP=200U VTO=7
+ LAMBDA=0.01
.ENDS
* END MODEL DRV104
