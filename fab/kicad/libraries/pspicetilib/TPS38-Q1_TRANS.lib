*$
*****************************************************************************
* (C) Copyright 2019 Texas Instruments Incorporated. All rights reserved.
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.
** TI and its licensors and suppliers make no warranties, either expressed
** or implied, with respect to this model, including the warranties of
** merchantability or fitness for a particular purpose. The model is
** provided solely on an "as is" basis. The entire risk as to its quality
** and performance is with the customer.
*****************************************************************************
*
** Released by: WEBENCH Design Center, Texas Instruments Inc.
* Part: TPS38-Q1_PSPICE_TRANS
* Date: 1JULY2021
* Model Type: Transient
* Simulator: PSpice
* Simulator Version: 16.2.0.s003
* EVM Order Number: 
* EVM User's Guide: 
* Datasheet: SNVSBI8 â€“ JUNE 2021
*
* Model Version: Final 1.00
*
*****************************************************************************
*
* Updates:
*
* Final 1.00
* Release to Web
*
*****************************************************************************
*
* Model Usage Notes:
*
* 1. The following features have been modelled
*      a. VDD THRESHOLD RESPONSE
*      b. SENSE1/2 THRESHOLD RESPONSE
*      c. CTR1/2 RESET TIME DELAY
*      d. CTS1/2 SENSE TIME DELAY
*      e. MANUAL RESET DELAY
*      f. ALL SELECTABLE OUTPUT TOPOLOGIES 
*      g. IDD QUIESCENT CURRENT 
*      h. HYSTERESIS
*
*   
* 2. Temperature effects are note modelled.
* 3. CTR/CTS/MR pins parametric specifications have not been modelled.
* 4. High voltage limits have not been modelled on any pins.
* 5. RESET2 pin is always open-drain configuration. 
*
*****************************************************************************
* source TPS38-Q1_VERSION
.subckt TPS38-Q1_PSPICE_TRANS VDD SENSE1 SENSE2 RESET1 RESET2 CTR1 CTS1 CTS2 CTR2 GND PARAMS: CH1_INPUT=1 CH2_INPUT=1 VTH1=2.9 VTH2=2.9 HYS1=0.03 HYS2=0.03 CH1_OUTPUT=0 CH2_OUTPUT=0

X_U91         N17957087 VDD_OK_2 N17954467 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
V_V21         N17913113 0 {VITP2-VTN2}
X_U10         SENSE2 N17913039 N17913113 SENSE_UV_1 COMPHYS_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
V_V25         N17913235 0 2.7
X_U82         CH2_INPUT N17957087 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
G_G1         VDD 0 TABLE { V(N17913693, 0) } 
+ ( (0,0)(2.5,1u)(5,1.11u)(10,1.15u)(20,1.16u)(65,1.16u) )
R_R7         0 GND  1m TC=0,0 
X_U65         VDD_STARTUP VDD_OK_1 BUF_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
V_V24         N17913201 0 1m
X_U92         CH2_INPUT VDD_OK_2 SENSE_CT_2 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
V_U2_V12         U2_N16765815 0 1.28V
V_U2_V11         U2_N16769295 0 1.28Vdc
C_U2_C1         CTS2 0  {C_OFF}  
G_U2_ABMI2         0 CTS2 VALUE { IF(V(N17954467)>0.5,10u,0)    }
X_U2_U18         N17954467 U2_CTS_SENSE_BAR INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U2_U8         CTS2 U2_N16765815 CTS_OK_SENSE_2 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
X_U2_S4    U2_CTS_SENSE_BAR 0 CTS2 0 CTSDELAY_U2_S4 
D_U2_D13         CTS2 U2_N16769295 D_D1 
C_C1         0 VDD_STARTUP  1u  TC=0,0 
E_E4         N17913693 0 VDD 0 1
V_V20         N17913039 0 {VITP2}
X_U37         N17944254 VDD POR_OK_PPL COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
D_D10         VDD_STARTUP VDD_VALID D_D1 
X_S5    DRIVE_SIG_PPL 0 PPL 0 TPS38-Q1_PSPICE_TRANS_S5 
R_R1         VDD_VALID VDD_STARTUP  317.4 TC=0,0 
X_U11         VDD N17913235 N17913201 VDD_VALID COMPHYS_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
X_U1_U8         CTR2 U1_N16765815 CTR_OK_SENSE_2 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
C_U1_C1         CTR2 0  27.4375p  
X_U1_U18         SENSE_CT_2 U1_CTR_SENSE_BAR INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
G_U1_ABMI2         0 CTR2 VALUE { IF(V(SENSE_CT_2)>0.5,1u,0)    }
X_U1_S4    U1_CTR_SENSE_BAR 0 CTR2 U1_N16767630 CTRDELAY_U1_S4 
V_U1_V14         U1_N16768959 0 2V
D_U1_D14         CTR2 U1_N16768959 D_D1 
D_U1_D13         U1_N16770446 CTR2 D_D1 
V_U1_V13         U1_N16767630 0 0.72V
V_U1_V17         U1_N16770375 0 0.72V
R_U1_R1         U1_N16770446 U1_N16770375  1k TC=0,0 
X_U1_U19         U1_N16769887 CTR2 MR_ASSERT_2 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
V_U1_V16         U1_N16769887 0 0.30
V_U1_V15         U1_N16765815 0 2V
V_V23         N17944254 0 1.4
X_S7    N16784978 0 VDD1 PPL TPS38-Q1_PSPICE_TRANS_S7 
E_ABM15         VDD1 0 VALUE { (V(VDD)*1)    }
X_S8    DRIVE_SIG_PPH 0 VDD1 PPH TPS38-Q1_PSPICE_TRANS_S8 
X_U95         N19904 VDD POR_OK_PPH COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
X_U96         POR_OK_PPH SR_Q_1 DRIVE_SIG_PPH OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_S9    N16786016 0 PPH 0 TPS38-Q1_PSPICE_TRANS_S9 
V_V26         N19904 0 1.4
X_U99_U8         CTR1 U99_N16765815 CTR_OK_SENSE_1 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
C_U99_C1         CTR1 0  27.4375p  
X_U99_U18         SENSE_CT_1 U99_CTR_SENSE_BAR INV_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
G_U99_ABMI2         0 CTR1 VALUE { IF(V(SENSE_CT_1)>0.5,1u,0)    }
X_U99_S4    U99_CTR_SENSE_BAR 0 CTR1 U99_N16767630 CTRDELAY_U99_S4 
V_U99_V14         U99_N16768959 0 2V
D_U99_D14         CTR1 U99_N16768959 D_D1 
D_U99_D13         U99_N16770446 CTR1 D_D1 
V_U99_V13         U99_N16767630 0 0.72V
V_U99_V17         U99_N16770375 0 0.72V
R_U99_R1         U99_N16770446 U99_N16770375  1k TC=0,0 
X_U99_U19         U99_N16769887 CTR1 MR_ASSERT_1 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
V_U99_V16         U99_N16769887 0 0.30
V_U99_V15         U99_N16765815 0 2V
X_U101         CH1_INPUT VDD_OK_1 SENSE_CT_1 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
V_U102_V12         U102_N16765815 0 1.28V
V_U102_V11         U102_N16769295 0 1.28Vdc
G_U102_ABMI2         0 CTS1 VALUE { IF(V(N24142)>0.5,10u,0)    }
X_U102_U8         CTS1 U102_N16765815 CTS_OK_SENSE_1 COMP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
C_U102_C1         CTS1 0  {C_OFF}  
X_U102_U18         N24142 U102_CTS_SENSE_BAR INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U102_S4    U102_CTS_SENSE_BAR 0 CTS1 0 CTSDELAY_U102_S4 
D_U102_D13         CTS1 U102_N16769295 D_D1 
X_U105         N51463 VDD_OK_1 N24142 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U107         N26810 VDD POR_OK_ODL COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
V_V28         N26810 0 1.4
V_V29         N27446 0 1.4
X_U110         POR_OK_ODH SR_Q_1 DRIVE_SIG_ODH OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U109         N27446 VDD POR_OK_ODH COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
X_S13    DRIVE_SIG_ODL2 0 ODL2 0 TPS38-Q1_PSPICE_TRANS_S13 
X_U116         N31226 VDD POR_OK_ODL2 COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
V_V34         N30948 0 1.4
V_V36         N31226 0 1.4
X_S12    N16786762 0 ODH2 0 TPS38-Q1_PSPICE_TRANS_S12 
X_U115         POR_OK_ODH2 SR_Q_2 DRIVE_SIG_ODH2 OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U114         N30948 VDD POR_OK_ODH2 COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
X_U120         N36132 N36435 N34628 SENSE_OV_1 COMPHYS_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
V_V39         N36132 0 {VITP1}
V_V40         N34628 0 {VITP1*HYS1}
X_U122         VDD_STARTUP VDD_OK_2 BUF_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
X_U150         MR_ASSERT_1 N16793116 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U128         N16781930 SR_Q_1 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U140         N16784078 SR_Q_1 DRIVE_SIG_PPL AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U132         N16782258 SR_Q_2 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U134         N16782308 SR_QB_2 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U127         N16793146 SR_QB_1 N16781930 OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U144         POR_OK_ODL2 N16786505 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U146         DRIVE_SIG_ODH2 N16786762 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U152         CTS_OK_SENSE_2 MR_ASSERT_2 N16793391 OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U143         DRIVE_SIG_ODH N16786378 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U130         N16782054 SR_QB_1 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_R10         ODL RESET1  {R1_ODL} TC=0,0 
X_U142         N16786103 SR_Q_1 DRIVE_SIG_ODL AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
R_R11         ODH RESET1  {R1_ODH} TC=0,0 
X_U126         CH1_INPUT N51463 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U131         N16793577 SR_QB_2 N16782258 OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U151         CTS_OK_SENSE_1 MR_ASSERT_1 N16793275 OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U149         CTR_OK_SENSE_1 N16793116 N16793146 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U133         SR_Q_2 N16788358 N16782308 OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_R8         PPH RESET1  {R1_PPH} TC=0,0 
X_U141         POR_OK_ODL N16786103 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_S27    N16786378 0 ODH 0 TPS38-Q1_PSPICE_TRANS_S27 
R_R9         PPL RESET1  {R1_PPL} TC=0,0 
E_ABM19         N36435 0 VALUE { {V(SENSE1)+(VITP1*HYS1)}    }
X_U139         POR_OK_PPL N16784078 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U137         N16783000 N16793275 N16783101 OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U147         VDD_OK_2 N16788269 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U136         VDD_OK_1 N16783000 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_R13         ODH2 RESET2  {R2_ODH} TC=0,0 
R_R12         ODL2 RESET2  {R2_ODL} TC=0,0 
X_U94         DRIVE_SIG_PPL N16784978 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U129         SR_Q_1 N16783101 N16782054 OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_S28    DRIVE_SIG_ODL 0 ODL 0 TPS38-Q1_PSPICE_TRANS_S28 
X_U97         DRIVE_SIG_PPH N16786016 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U148         N16788269 N16793391 N16788358 OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U153         CTR_OK_SENSE_2 N16793557 N16793577 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U154         MR_ASSERT_2 N16793557 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U145         N16786505 SR_Q_2 DRIVE_SIG_ODL2 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
V_V43         N16802553 0 {VITP2}
V_V44         N16802568 0 {VITP2-VTN2}
V_V41         N16802466 0 {VITP1}
R_R14         SENSE_OV_1 CH1_INPUT  {R_CH1_SENSE_OV_1} TC=0,0 
E_ABM20         N16802485 0 VALUE { {V(SENSE1)+(VITP1*HYS1)}    }
V_V42         N16802493 0 {VITP1*HYS1}
R_R15         SENSE_UV_1 CH1_INPUT  {R_CH1_SENSE_UV_1} TC=0,0 
X_U156         SENSE2 N16802553 N16802568 SENSE_UV_2 COMPHYS_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
R_R16         SENSE_OV_2 CH2_INPUT  {R_CH2_SENSE_OV_2} TC=0,0 
R_R17         SENSE_UV_2 CH2_INPUT  {R_CH2_SENSE_UV_2} TC=0,0 
X_U155         N16802466 N16802485 N16802493 SENSE_OV_2 COMPHYS_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
.PARAM  r2_odh={if(ch2_output!=1,1e16,1e-6)} vtn1={vth1*(1-hys1)}
+  r_ch2_sense_ov_2={if(ch2_input!=0, 1e16,1e-6)} c_off=
+ {if(vth1==0.8,78.125p,273.4375p)} vtn2={vth2} vitp2={vth2*(1+hys2)} r2_odl=
+ {if(ch2_output!=0,1e16,1e-6)} vitp1={vth1} r_ch1_sense_uv_1={if(ch1_input!=1,
+  1e16,1e-6)} r1_odl={if(ch1_output!=0,1e16,1e-6)} r1_ppl=
+ {if(ch1_output!=2,1e16,1e-6)} r1_pph={if(ch1_output!=3,1e16,1e-6)} r1_odh=
+ {if(ch1_output!=1,1e16,1e-6)} r_ch1_sense_ov_1={if(ch1_input!=0, 1e16,1e-6)}
+  r_ch2_sense_uv_2={if(ch2_input!=1, 1e16,1e-6)}
.ENDS TPS38-Q1_PSPICE_TRANS

.subckt CTSDELAY_U2_S4 1 2 3 4  
S_U2_S4         3 4 1 2 _U2_S4
RS_U2_S4         1 2 1G
.MODEL         _U2_S4 VSWITCH Roff=2.3E8 Ron=2200 Voff=0.1V Von=0.5V
.ends CTSDELAY_U2_S4

.subckt TPS38-Q1_PSPICE_TRANS_S5 1 2 3 4  
S_S5         3 4 1 2 _S5
RS_S5         1 2 1G
.MODEL         _S5 VSWITCH Roff=1E6 Ron=50 Voff=0.3 Von=0.7
.ends TPS38-Q1_PSPICE_TRANS_S5

.subckt CTRDELAY_U1_S4 1 2 3 4  
S_U1_S4         3 4 1 2 _U1_S4
RS_U1_S4         1 2 1G
.MODEL         _U1_S4 VSWITCH Roff=2.3E8 Ron=1E4 Voff=0.1V Von=0.5V
.ends CTRDELAY_U1_S4

.subckt TPS38-Q1_PSPICE_TRANS_S7 1 2 3 4  
S_S7         3 4 1 2 _S7
RS_S7         1 2 1G
.MODEL         _S7 VSWITCH Roff=1E6 Ron=50 Voff=0.3 Von=0.7
.ends TPS38-Q1_PSPICE_TRANS_S7

.subckt TPS38-Q1_PSPICE_TRANS_S8 1 2 3 4  
S_S8         3 4 1 2 _S8
RS_S8         1 2 1G
.MODEL         _S8 VSWITCH Roff=1E6 Ron=50 Voff=0.3V Von=0.7V
.ends TPS38-Q1_PSPICE_TRANS_S8

.subckt TPS38-Q1_PSPICE_TRANS_S9 1 2 3 4  
S_S9         3 4 1 2 _S9
RS_S9         1 2 1G
.MODEL         _S9 VSWITCH Roff=1E6 Ron=50 Voff=0.3V Von=0.7V
.ends TPS38-Q1_PSPICE_TRANS_S9

.subckt CTRDELAY_U99_S4 1 2 3 4  
S_U99_S4         3 4 1 2 _U99_S4
RS_U99_S4         1 2 1G
.MODEL         _U99_S4 VSWITCH Roff=2.3E8 Ron=1E4 Voff=0.1V Von=0.5V
.ends CTRDELAY_U99_S4

.subckt CTSDELAY_U102_S4 1 2 3 4  
S_U102_S4         3 4 1 2 _U102_S4
RS_U102_S4         1 2 1G
.MODEL         _U102_S4 VSWITCH Roff=2.3E8 Ron=2200 Voff=0.1V Von=0.5V
.ends CTSDELAY_U102_S4

.subckt TPS38-Q1_PSPICE_TRANS_S13 1 2 3 4  
S_S13         3 4 1 2 _S13
RS_S13         1 2 1G
.MODEL         _S13 VSWITCH Roff=1E8 Ron=24 Voff=0.3V Von=0.7V
.ends TPS38-Q1_PSPICE_TRANS_S13

.subckt TPS38-Q1_PSPICE_TRANS_S12 1 2 3 4  
S_S12         3 4 1 2 _S12
RS_S12         1 2 1G
.MODEL         _S12 VSWITCH Roff=1E8 Ron=24 Voff=0.3V Von=0.7V
.ends TPS38-Q1_PSPICE_TRANS_S12

.subckt TPS38-Q1_PSPICE_TRANS_S27 1 2 3 4  
S_S27         3 4 1 2 _S27
RS_S27         1 2 1G
.MODEL         _S27 VSWITCH Roff=1E8 Ron=24 Voff=0.3V Von=0.7V
.ends TPS38-Q1_PSPICE_TRANS_S27

.subckt TPS38-Q1_PSPICE_TRANS_S28 1 2 3 4  
S_S28         3 4 1 2 _S28
RS_S28         1 2 1G
.MODEL         _S28 VSWITCH Roff=1E8 Ron=24 Voff=0.3V Von=0.7V
.ends TPS38-Q1_PSPICE_TRANS_S28
