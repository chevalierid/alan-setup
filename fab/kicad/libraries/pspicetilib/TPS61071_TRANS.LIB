*$
* TPS61071
*****************************************************************************
* (C) Copyright 2017, 2015 Texas Instruments Incorporated. All rights reserved.
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.
** TI and its licensors and suppliers make no warranties, either expressed
** or implied, with respect to this model, including the warranties of
** merchantability or fitness for a particular purpose. The model is
** provided solely on an "as is" basis. The entire risk as to its quality
** and performance is with the customer
*****************************************************************************
*
** Released by: Analog eLab Design Center, Texas Instruments Inc.
* Part: TPS61071
* Date: 06JUN2017
* Model Type: Transient
* Simulator: PSpice
* Simulator Version: 16.0.0.p001
* EVM Order Number:  
* EVM Users Guide:SLUV106 
* Datasheet: SLVS510C–JULY 2006–REVISED MARCH 2009
* Model Version: Final 1.10
*
*****************************************************************************
*
* Updates:
* Final 1.10
* <Made below change to the model>
* Included load disconnect feature during shutdown
*
* Final 1.00
* Release to Web.
*
***************************************************************************
*
* Model Usage Notes:
*
* A. Features have been modeled
*	1. Current Limit 
*	2. Soft start with precharge phase
*	3. Under voltage lockout and EN thresholds 
*	4. Load disconnect during shutdown 
*	5. Fixed Oscillator Frequency, 1200kHz
*
* B. Features haven't been modeled
*	1. Ground pin internally connected to zero hence can not be used in inverting configuration
* 	2. For VIN < 1.8, till VOUT <=1.8, device should have a fixed duty cycle of 70% and is not modeled
*	3. Temperature dependent characteristics, quiescent current, shutdown current
*
*****************************************************************************
.SUBCKT TPS61071_TRANS EN FB SW VBAT VOUT GND
X_U2_H1    U2_N98550 U2_N108539 COMP_EA 0 EA_U2_H1 
R_U2_R1         U2_N108539 0  1  
X_U2_U10         U2_N97713 SHUTDOWN_N COMP_HI AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U2_U11         U2_N97721 SHUTDOWN_N COMP_LO AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
R_U2_R2         U2_N158446 COMP_EA  50 TC=0,0 
E_U2_ABM8         U2_N97629 0 VALUE { 492m    }
E_U2_ABM9         U2_N97873 0 VALUE { 508m    }
C_U2_C1         COMP_EA 0  1n  TC=0,0 
D_U2_D2         U2_N98550 VBAT D_D1 
X_U2_U13         FB_1 U2_N97873 U2_N97713 COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
G_U2_ABM2I1         VBAT U2_N98550 VALUE { LIMIT(((V(VREF) -
+  V(FB_1))*0.12*(sqrt(v(VOUT)*500n))),-(V(VOUT)*0.5u),(V(VOUT)*0.5u))    }
X_U2_U12         U2_N97629 FB_1 U2_N97721 COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
E_U2_ABM10         U2_N158446 0 VALUE { V(COMP_EA)     }
X_U1_U19         PRE_PHASE_CTL U1_N16822956 U1_N16823058 OR2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
E_U1_ABM11         U1_N167786691 0 VALUE { IF(V(U1_PREBOOST)<0.5,
+  V(U1_N16778658), V(U1_PREMODE))    }
E_U1_ABM12         SET 0 VALUE { if (V(U1_START) > 0.5,V(U1_N16837771),0)     }
X_U1_U53         U1_N16778376 SHUTDOWN_N U1_N16778658 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U1_U25         U1_N16823058 U1_N16823042 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_U1_R16         U1_N167786691 U1_N16778662  1  
X_U1_U17         U1_N16823042 U1_N16823055 U1_PREBOOST N16823048
+  SRLATCHRHP_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U1_U626         U1_N16837747 U1_VCAP U1_S COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
C_U1_C16         0 U1_N16778662  1n  
X_U1_U288         SET U1_N16837936 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U1_U291         U1_N16887861 SET CLK_ONESHOT AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
V_U1_V5         U1_N16837747 0 0.01
V_U1_V8         U1_N16881763 0 75m
X_U1_U16         U1_N16778662 U1_PRETOBOOSTCTL PRE_PHASE_CTL U1_PRE_PHASE_CTLB
+  SRLATCHRHP_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U1_U629         SET U1_N16887861 INV_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5 DELAY=30n
X_U1_U287         PFM_TON_50 U1_N168435650 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U1_U627         U1_S U1_R U1_N16837771 U1_RESET SRLATCHRHP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
E_U1_ABM1         VREF 0 VALUE { IF(V(SHUTDOWN_N)>0.5, 0.5,0)    }
X_U1_U628         U1_VCAP U1_N16837803 U1_R COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
X_U1_U623         U1_START SET U1_NEW_CLK AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
V_U1_V6         U1_N16837803 0 0.99
X_U1_U31         VOUT U1_N16778522 U1_PRETOBOOSTCTL COMP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
E_U1_ABM3         U1_N167785521 0 VALUE { if(V(U1_PRETOBOOSTCTL) >
+  0.5,V(VBAT)-0.15, V(VBAT) - 0.1)    }
V_U1_V7         U1_N16837829 0 2
R_U1_R9         U1_N167785521 U1_N16778522  1  
D_U1_D9         U1_VCAP U1_N16837829 D_D1 
C_U1_C10         0 U1_N16778522  1n  
R_U1_R10         U1_N168435650 U1_N16851001  5  
G_U1_ABM2I1         U1_VCAP 0 VALUE { if(V(U1_N16837936) > 0.5,If(V(VOUT) >
+  1.8, 16.61m,3.92m),0 )    }
G_U1_ABM2I2         U1_N16837829 U1_VCAP VALUE { if(V(SET) > 0.5,If(V(VOUT) >
+  1.8, 1.265m,1.681m) ,0)    }
C_U1_C11         0 U1_N16851001  1n  
C_U1_C18         0 U1_VCAP  1n IC=0 
X_U1_U24         U1_PRETOBOOSTCTL U1_N16778376 INV_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U1_U58         U1_N16778376 U1_N16778376 U1_PREMODE AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
D_U1_D10         U1_N16881763 U1_VCAP D_D1 
X_U1_U48         PRE_PHASE_CTL U1_N16822956 INV_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=50n
X_U1_U26         SHUTDOWN_N U1_N16823055 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U1_U286         SHUTDOWN_N U1_PRE_PHASE_CTLB U1_PRE_PHASE_CTLB U1_START
+  AND3_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U8         TON TON GATE_N OR2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
E_U7_GAIN16         U7_N66512 0 VALUE {{16/4MEG} * V(VOUT)}
E_U7_MULT12         U7_V_IGEN4 0 VALUE {V(Q4)*V(U7_N66512)}
X_U7_U4         Q3 U7_QB3 INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
E_U7_GAIN11         U7_N66968 0 VALUE {{1/4MEG} * V(VOUT)}
X_U7_U1         Q0 U7_QB0 INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U7_U5         Q4 U7_QB4 INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U7_U2         Q1 U7_QB1 INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
E_U7_GAIN9         U7_N67586 0 VALUE {{4/4MEG} * V(VOUT)}
X_U7_U3         Q2 U7_QB2 INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
E_U7_MULT7         U7_V_IGEN2 0 VALUE {V(Q2)*V(U7_N67586)}
E_U7_ABM8         U7_V_IGEN_BASE 0 VALUE { ( V(U7_V_IGEN0)  
+ +V(U7_V_IGEN1)  
+ +V(U7_V_IGEN2) )  }
E_U7_ABM11         U7_N66570 0 VALUE { ( V(U7_V_IGEN3)  
+ +V(U7_V_IGEN4) )   }
E_U7_ABM10         N16775854 0 VALUE { ( V(U7_V_IGEN_BASE)  
+ +V(U7_N66570) )   }
E_U7_MULT6         U7_V_IGEN1 0 VALUE {V(Q1)*V(U7_N67180)}
E_U7_GAIN10         U7_N66466 0 VALUE {{8/4MEG} * V(VOUT)}
E_U7_GAIN8         U7_N67180 0 VALUE {{2/4MEG} * V(VOUT)}
E_U7_MULT13         U7_V_IGEN0 0 VALUE {V(Q0)*V(U7_N66968)}
E_U7_MULT8         U7_V_IGEN3 0 VALUE {V(Q3)*V(U7_N66466)}
C_C2         FB_1 0  5p  TC=0,0 
V_U6_V5         U6_N1156900 0 0.3
E_U6_ABM2         U6_N08065 0 VALUE { 0.8*V(VBAT)    }
X_U6_U8         EN U6_N08065 U6_EN_ON COMP_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
E_U6_ABM1         SHUTDOWN_N 0 VALUE { if( V(U6_EN_ON)> 0.5 & V(U6_UVLO_OFF) >
+  0.5,1,0)    }
X_U6_U7         VBAT U6_N07767 U6_N1156900 U6_UVLO_OFF COMPHYS_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
V_U6_V1         U6_N07767 0 1.09
C_C1         N167569301 FB_1  3p  TC=0,0 
R_R3         FB FB_1  50k TC=0,0 
X_U35         PFM_TON_50 PFM_TON_50_INV INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U36         PFM_TON_50 PFM_TON_50 PFM_INV N16880342 AND3_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
R_U4_R268         U4_CHARGE 0  1e12  
R_U4_R21         U4_N18342061 U4_N18341991  8  
X_U4_U624         SET U4_SET1 INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U4_U657         U4_TON_STOP1 U4_N18782173 U4_TOFF OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U4_U616         U4_TOFF U4_N17719585 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
C_U4_C18         0 U4_N18341991  10n  
X_U4_U660         TON TON U4_N17874165 OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U4_U615         PRE_PHASE_CTL U4_PRE_INV INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
V_U4_V7         U4_N17795703 0 5m
X_U4_U617         U4_TON_STOP_INV U4_TON_STOP INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
E_U4_ABM13         U4_N178314661 0 VALUE { if(V(PRE_PHASE_CTL) >
+  0.5,0.5,V(ISENSE1))    }
X_U4_U74         U4_N18341982 U4_N18342061 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U4_U649         CLK_ONESHOT U4_CLK_ONESHOT_INV INV_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
V_U4_V34         U4_VDD 0 1
X_U4_U614         U4_SKIP_START U4_COMP_LO_3P2UDELAY U4_123 AND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U4_U69         U4_COMP_LO_1 U4_N18341982 BUF_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
X_U4_U73         U4_N18341982 U4_N18341991 U4_N18341997 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U4_U32         U4_N17795703 U4_N17831460 U4_ZERO_DETECTOR COMP_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
C_U4_C29         0 U4_N17301712  10p IC=0 
X_U4_U646         U4_CHARGE U4_N17457842 U4_N18782173 COMP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
X_U4_U623         PFM_INV U4_N18507398 PFM_TON_50 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
E_U4_ABM14         U4_N17850251 0 VALUE { if(V(ONCE_OVER_VOUT_LO) < 0.5,
+  0.3,0.6)     }
R_U4_R7         COMP_LO U4_COMP_LO_3P2UDELAY1  {3.2u/6.9n} TC=0,0 
C_U4_C19         0 U4_N18341837  10n  
X_U4_U622         U4_COMP_LO_3P2UDELAY U4_N18289792 U4_SKIP_START
+  AND2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
C_U4_C21         0 U4_COMP_LO_3P2UDELAY1  10n  TC=0,0 
X_U4_U29         U4_ZERO_DETECTOR U4_N17874165 N16808100 N18009343
+  SRLATCHRHP_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U4_U651         U4_N17850251 ISENSE U4_N17643995 COMP_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
R_U4_R23         U4_N18341880 U4_N18341837  8  
X_U4_U652         U4_PRE_INV SHUTDOWN_N U4_N17650190 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
R_U4_R35         U4_N18507437 U4_N18507398  {420n/0.69n}  
V_U4_V33         U4_492MV 0 0.492
X_U4_U675         U4_COMP_LO_1 U4_COMP_LO_3P2UDELAY BUF_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
X_U4_U70         U4_N18341843 U4_N18341837 U4_N18341835 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U4_U618         U4_TON_STOP1 N17696333 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U4_U16         U4_N17304104 U4_N177977 STARTUPZ N175332 SRLATCHRHP_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_U4_U641         U4_N17301712 U4_N17304104 BUF_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
C_U4_C14         U4_N18507398 0  1n  
X_U4_U667         N16856815 N18217849 GATE_N U4_N18509443 U4_123 0
+  DFFSR_RHPBASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U4_U668         PFM_INV U4_N18507437 INV_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5 DELAY=10n
X_U4_U72         U4_COMP_LO_1 U4_N18341880 BUF_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
X_U4_U610         ONCE_OVER_VOUT_LO U4_ONCE_OVER_VOUT_LO_B INV_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U4_U663         U4_COMP_LO_3P2UDELAY U4_N18289792 INV_DELAY_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5 DELAY=2u
R_U4_R6         COMP_LO U4_COMP_LO_1  {20n/6.9n} TC=0,0 
C_U4_C12         U4_ZERO_DETECTOR 0  1n IC=0 
V_U4_V29         U4_N17499264 0 -0.1V
R_U4_R33         U4_N178314661 U4_N17831460  5  
C_U4_C20         0 U4_COMP_LO_1  10n  TC=0,0 
V_U4_V28         U4_N17457842 0 0Vdc
X_U4_U678         PFM_INV N18225253 N16856815 0 0 U4_COMP_LO_3P2UDELAY
+  DFFSR_SHPBASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
R_U4_R44         U4_CO_LO_INV U4_N17301712  10k  
X_U4_S1    U4_N18341997 0 U4_COMP_LO_1 U4_N18341957 PWM_U4_S1 
R_U4_R46         TON U4_N18754734  {583/0.69}  
C_U4_C10         U4_N17831460 0  1n  
X_U4_U612         COMP_LO U4_CO_LO_INV INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U4_U655         U4_N17719585 U4_TON_STOP_INV TON AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U4_U19         U4_TON_STOP CLK_ONESHOT U4_TON_STOP1 N17667581
+  SRLATCHRHP_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
C_U4_C31         0 U4_N18754734  1n IC=0 
X_U4_S9    CLK_ONESHOT 0 VBAT U4_CHARGE PWM_U4_S9 
X_U4_S5    U4_N18341835 0 U4_COMP_LO_1 0 PWM_U4_S5 
D_U4_D14         U4_N18754734 TON D_D1 
X_U4_U672         COMP_LO N18354137 BUF_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5 DELAY=4.5u
X_U4_U653         U4_N17650190 U4_N17643995 U4_TON_STOP_INV AND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U4_U671         PFM_INV PFM INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
G_U4_ABM2I3         U4_CHARGE 0 VALUE { (V(N16775854) + V(COMP_EA)+
+  (V(VOUT)*1.5u))    }
X_U4_U666         U4_ZERO_DETECTOR U4_N18509443 BUF_DELAY_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5 DELAY=35n
X_U4_U176         STARTUPZ ONCE_OVER_VOUT_LO delay PARAMS:  T=100  
V_U4_V15         U4_N18341957 0 1Vdc
X_U4_U648         U4_N17499264 U4_CHARGE d_d
X_U4_U669         U4_N18754734 CLK_ONESHOT U4_CLK_ONESHOT1 OR2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
D_U4_D12         U4_N17301712 U4_CO_LO_INV D_D1 
X_U4_U658         U4_SHUTDOWN PRE_PHASE_CTL U4_N177977 OR2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U4_U71         U4_N18341880 U4_N18341843 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U4_U155         SHUTDOWN_N U4_SHUTDOWN INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
C_U4_C4pF         U4_CHARGE 0  4p  
X_U37         PFM_INV PFM_INV PFM_TON_50_INV N16880483 AND3_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U34         TON N16805069 INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U38         N16856815 STOP INV_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
E_U3_ABM4         U3_N14312693 0 VALUE { IF(V(U3_N14312521) > 0.5,1,0)    }
V_U3_V29         U3_N16700083 0 1
X_U3_U168         STARTUPZ U3_STARTUP INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
D_U3_D18         U3_COUNT16_2_HI U3_N14308899 D_D1 
X_U3_U186         COMP_HI COMP_LO U3_N16727470 OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U3_U79         U3_N14312699 U3_N14312777 U3_CHECK_16_BEFORE_HI N14312703
+  SRLATCHRHP_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
C_U3_C27         0 U3_N14312521  700p  
R_U3_R52         U3_N14308553 U3_COUNT16_EXIT_HI  1  
X_U3_U151         GATE_N U3_N14308789 N14308725 MONOPOS_PS PARAMS: PW=50n
X_U3_U183         STARTUPZ U3_QINT_2 Q2 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_U3_R51         U3_COUNT16_2_HI U3_N14308899  1k  
X_U3_U2_U28         U3_QINT_0 U3_QINT_1 U3_QINT_2 U3_U2_N16622604
+  AND3_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U2_U19         U3_U2_QB2 U3_U2_N06453 U3_U2_N14336960 AND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U2_U27         U3_U2_N16624197 U3_U2_UP_DOWN_B U3_U2_N14320481
+  AND2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U2_TFLOP0_U1         U3_QINT_0 U3_U2_QB0 U3_U2_CLK_INT U3_U2_TFLOP0_N00087
+  STARTUPZ U3_U2_IP0 DFFSBRB_RHPBASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U2_TFLOP0_U2         U3_QINT_0 U3_U2_IP0 U3_U2_TFLOP0_N00087
+  XOR2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U2_U14         U3_N16651014 U3_QINT_0 U3_U2_N05022 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U2_U31         U3_QINT_3 U3_QINT_4 U3_U2_N16622452 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U2_U12         U3_N16651014 U3_U2_UP_DOWN_B INV_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_U3_U2_U20         U3_U2_N06449 U3_QINT_2 U3_U2_N14338844 AND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
V_U3_U2_V1         U3_U2_IP0 0 1
X_U3_U2_TFLOP4_U1         U3_QINT_4 U3_U2_QB4 U3_U2_CLK_INT U3_U2_TFLOP4_N00087
+  STARTUPZ U3_U2_IP0 DFFSBRB_RHPBASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U2_TFLOP4_U2         U3_QINT_4 U3_U2_N14339891 U3_U2_TFLOP4_N00087
+  XOR2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U2_U34         U3_U2_N16623703 U3_U2_N14331634 U3_U2_N16624197
+  AND2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U2_U21         U3_U2_N14338844 U3_U2_N14336960 U3_U2_N14336866
+  OR2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U2_U26         U3_N16651014 U3_U2_N14319523 U3_U2_N14319771 AND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U2_TFLOP2_U1         U3_QINT_2 U3_U2_QB2 U3_U2_CLK_INT U3_U2_TFLOP2_N00087
+  U3_U2_IP0 STARTUPZ DFFSBRB_RHPBASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U2_TFLOP2_U2         U3_QINT_2 U3_U2_N06937 U3_U2_TFLOP2_N00087
+  XOR2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U2_U25         U3_CLK U3_U2_N16618767 U3_U2_CLK_INT AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U2_U24         U3_U2_N14319771 U3_U2_N14320481 U3_U2_N16618767
+  NOR2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U2_U29         U3_U2_QB0 U3_U2_QB1 U3_U2_QB2 U3_U2_N14331634
+  AND3_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U2_U15         U3_U2_N05022 U3_U2_N05084 U3_U2_N06145 OR2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U2_U16         U3_U2_QB1 U3_U2_N05084 U3_U2_N06453 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U2_TFLOP1_U1         U3_QINT_1 U3_U2_QB1 U3_U2_CLK_INT U3_U2_TFLOP1_N00087
+  U3_U2_IP0 STARTUPZ DFFSBRB_RHPBASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U2_TFLOP1_U2         U3_QINT_1 U3_U2_N06145 U3_U2_TFLOP1_N00087
+  XOR2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U2_U17         U3_U2_N05022 U3_QINT_1 U3_U2_N06449 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U2_TFLOP3_U1         U3_QINT_3 U3_U2_QB3 U3_U2_CLK_INT U3_U2_TFLOP3_N00087
+  U3_U2_IP0 STARTUPZ DFFSBRB_RHPBASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U2_TFLOP3_U2         U3_QINT_3 U3_U2_N14336866 U3_U2_TFLOP3_N00087
+  XOR2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U2_U22         U3_U2_QB3 U3_U2_N14336960 U3_U2_N14339973 AND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U2_U18         U3_U2_N06449 U3_U2_N06453 U3_U2_N06937 OR2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U2_U33         U3_U2_QB4 U3_U2_QB3 U3_U2_N16623703 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U2_U23         U3_U2_N14338844 U3_QINT_3 U3_U2_N14339983 AND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U2_U13         U3_U2_QB0 U3_U2_UP_DOWN_B U3_U2_N05084 AND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U2_U30         U3_U2_N14339983 U3_U2_N14339973 U3_U2_N14339891
+  OR2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U2_U32         U3_U2_N16622604 U3_U2_N16622452 U3_U2_N14319523
+  AND2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
C_U3_C35         0 U3_N14308899  144p  
E_U3_ABM8         U3_N14308553 0 VALUE { IF(V(U3_N14308899) > 0.5,1,0)    }
V_U3_V24         U3_N14308995 0 10
R_U3_R42         U3_COUNT16_2_HI U3_N14312521  1k  
X_U3_U184         STARTUPZ U3_QINT_1 Q1 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
E_U3_ABM10         U3_N16651014 0 VALUE { if ( V(COMP_HI) < 0.5,1,0)    }
C_U3_C36         0 U3_COUNT16_EXIT_HI  1n  
G_U3_ABM2I12         0 U3_VCOUNTER16_HI VALUE { (V(U3_N14308789) - V(0)) *
+  100e-3    }
X_U3_U152         SHUTDOWN_N U3_SHUTDOWN INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U3_U178         U3_STARTUP U3_QINT_4 Q4 OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
C_U3_C17         0 U3_VCOUNTER16_HI  10n  
D_U3_D17         U3_VCOUNTER16_HI U3_N14308995 D_D1 
X_U3_S11    U3_N14308741 0 U3_VCOUNTER16_HI 0 HYPERCONTROL_U3_S11 
X_U3_U154         GATE_N U3_N14312777 N14315471 MONOPOS_PS PARAMS: PW=20n
C_U3_C28         0 U3_N14312699  1n  
X_U3_U171         U3_CHECK_16_BEFORE_HI U3_CHECK_16_BEFORE_HI U3_CHECK_16_HI
+  AND2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U185         STARTUPZ U3_QINT_3 Q3 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
V_U3_V25         U3_N14309049 0 7.75
X_U3_U153         U3_SHUTDOWN U3_COUNT16_EXIT_HI U3_N14308741 OR2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
E_U3_E10         U3_COUNT16_2_HI 0 VALUE { {IF (V(U3_VCOUNTER16_HI) >
+  V(U3_N14309049), 1, 0)} }
V_U3_V27         U3_1VDC 0 1
E_U3_ABM11         U3_COUNT 0 VALUE {  ((V(Q4)*16) + (V(Q3)*8) +(V(Q2)*4) +
+  (V(Q1)*2) +(V(Q0)*1))    }
D_U3_D16         0 U3_VCOUNTER16_HI D_D1 
X_U3_U180         U3_N16727470 U3_N16727470 U3_N16560627 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
R_U3_R43         U3_N14312693 U3_N14312699  1  
D_U3_D11         U3_COUNT16_2_HI U3_N14312521 D_D1 
X_U3_U175         U3_CLK N16555103 U3_CHECK_16_HI U3_N16560627 U3_CHECK_16_HI
+  U3_1VDC DFFSBRB_RHPBASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_U3_U187         STARTUPZ U3_QINT_0 Q0 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_U5_R11         U5_N16744234 0  20k TC=0,0 
R_U5_R23         U5_N16743998 VOUT  10u  
V_U5_V2         U5_N16744358 0 5
X_U5_U16         GATE_N U5_GATE_N_N INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U5_S1    U5_N16809079 0 U5_N16743812 0 DRIVER_U5_S1 
X_U5_U20         U5_GATE_N_INT U5_N16773474 U5_N16809079 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
R_U5_R12         U5_N16743334 0  20k TC=0,0 
E_U5_ABM10         U5_MAX 0 VALUE { max(V(VBAT), V(VOUT))    }
X_U5_U21         PRE_PHASE_CTL U5_N16773474 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_U5_R7         U5_N16743646 0  1424meg TC=0,0 
X_U5_U10         U5_N16749178 U5_N16749212 BUF_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=0.1n
C_U5_C8         0 U5_N16744422  1n  
G_U5_ABMI2         0 U5_N16744234 VALUE { IF(V(PRE_PHASE_CTL)>0.5, V(ISENSE1),
+  1)    }
X_U5_H3    U5_N16743722 U5_N16743610 U5_ISENSE2 0 DRIVER_U5_H3 
V_U5_V13         U5_N16743798 U5_MAX 0.6
R_U5_R17         U5_N16744358 U5_N16743646  1424meg TC=0,0 
G_U5_ABMI1         0 U5_N16743334 VALUE { IF(V(PRE_PHASE_CTL)>0.5
+  ,V(U5_PRE_LIMIT),0 )    }
X_U5_U17         N16805069 U5_GATE_N_N U5_N16749238 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
D_U5_D4         U5_N16743610 U5_N16743798 D_D1 
X_U5_H2    U5_N16743722 U5_N16743812 ISENSE 0 DRIVER_U5_H2 
X_U5_U19         U5_GATE_P_INT U5_N16743650 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U5_U12         U5_N16749178 U5_N16749212 U5_GATE_N_INT AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
M_U5_M1         VOUT U5_N16743330 U5_N16743578 U5_N16743578 PMOS_SIMPLE  
+ L=165u  
+ W=1109000u         
E_U5_ABM21         U5_N16744676 0 VALUE {
+  IF(V(SHUTDOWN_N)<0.5,1,V(U5_N16744422))    }
D_U5_D1         0 U5_N16743722 D_D1 
X_U5_U15         U5_N16749238 U5_N16749266 U5_GATE_P_INT AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
D_U5_D7         U5_N16743610 U5_N16743578 D_D1 
X_U5_S2    U5_N16744676 0 U5_N16744352 U5_N16743998 DRIVER_U5_S2 
X_U5_U13         U5_N16749238 U5_N16749266 BUF_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=1n
R_U5_R18         U5_N16743646 U5_N16744570  500k TC=0,0 
X_U5_H4    SW U5_N16743722 ISENSE1 0 DRIVER_U5_H4 
E_U5_ABM19         U5_N16813051 0 VALUE { if (V(VBAT) < 2.4,
+  max(2.303*((log(V(VBAT)/1.2))/9),0)+0.03,0.107)    }
X_U5_U7         U5_N16743646 U5_MAX d_d
R_U5_R6         U5_N16813051 U5_PRE_LIMIT  1  
X_U5_S3    U5_EN_CTL 0 VOUT 0 DRIVER_U5_S3 
C_U5_C16         U5_N16744570 0  100p IC=0 TC=0,0 
C_U5_C15         U5_N16743718 0  60p IC=0 TC=0,0 
C_U5_C9         0 U5_PRE_LIMIT  1n  
E_U5_ABM18         U5_N16743330 0 VALUE { if(v(PRE_PHASE_CTL) >0.5,
+  V(U5_N16743646),V(U5_MAX))    }
E_U5_ABM5         U5_N16743640 0 VALUE { IF(V(PRE_PHASE_CTL) > 0.5 ,  
+ 5,V(U5_N16743650) )   }
G_U5_ABM2I1         U5_N16744358 U5_N16743646 VALUE { {LIMIT((V(U5_N16744234) -
+  V(U5_N16743334))*28u, -50u,50u)}    }
X_U5_U18         GATE_N N16750921 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_U5_R15         U5_N16743646 U5_N16743718  10k TC=0,0 
X_U5_U14         GATE_N U5_GATE_P_N U5_N16749178 AND2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
V_U5_VDUM         U5_N16744352 U5_N16743610 0Vdc
R_U5_R5         U5_N16743640 U5_N16744422  1  
X_U5_U8         N16805069 U5_GATE_P_N INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
R_R1         N167569301 VOUT  5k TC=0,0 
.IC         V(U3_VCOUNTER16_HI )=0
.ENDS TPS61071_TRANS
*$
.subckt EA_U2_H1 1 2 3 4  
H_U2_H1         3 4 VH_U2_H1 1
VH_U2_H1         1 2 0V
.ends EA_U2_H1
*$
.subckt PWM_U4_S1 1 2 3 4  
S_U4_S1         3 4 1 2 _U4_S1
RS_U4_S1         1 2 1G
.MODEL         _U4_S1 VSWITCH Roff=1e9 Ron=1.0 Voff=0.49V Von=0.51V
.ends PWM_U4_S1
*$
.subckt PWM_U4_S9 1 2 3 4  
S_U4_S9         3 4 1 2 _U4_S9
RS_U4_S9         1 2 1G
.MODEL         _U4_S9 VSWITCH Roff=1e12 Ron=1 Voff=0.25V Von=0.75V
.ends PWM_U4_S9
*$
.subckt PWM_U4_S5 1 2 3 4  
S_U4_S5         3 4 1 2 _U4_S5
RS_U4_S5         1 2 1G
.MODEL         _U4_S5 VSWITCH Roff=1e9 Ron=1.0 Voff=0.49V Von=0.51V
.ends PWM_U4_S5
*$
.subckt HYPERCONTROL_U3_S11 1 2 3 4  
S_U3_S11         3 4 1 2 _U3_S11
RS_U3_S11         1 2 1G
.MODEL         _U3_S11 VSWITCH Roff=10e6 Ron=10m Voff=0.2 Von=0.8
.ends HYPERCONTROL_U3_S11
*$
.subckt DRIVER_U5_S1 1 2 3 4  
S_U5_S1         3 4 1 2 _U5_S1
RS_U5_S1         1 2 1G
.MODEL         _U5_S1 VSWITCH Roff=1e9 Ron=480m Voff=0.2 Von=0.8
.ends DRIVER_U5_S1
*$
.subckt DRIVER_U5_H3 1 2 3 4  
H_U5_H3         3 4 VH_U5_H3 1
VH_U5_H3         1 2 0V
.ends DRIVER_U5_H3
*$
.subckt DRIVER_U5_H2 1 2 3 4  
H_U5_H2         3 4 VH_U5_H2 1
VH_U5_H2         1 2 0V
.ends DRIVER_U5_H2
*$
.subckt DRIVER_U5_S2 1 2 3 4  
S_U5_S2         3 4 1 2 _U5_S2
RS_U5_S2         1 2 1G
.MODEL         _U5_S2 VSWITCH Roff=1e9 Ron=600m Voff=0.8 Von=0.2
.ends DRIVER_U5_S2
*$
.subckt DRIVER_U5_H4 1 2 3 4  
H_U5_H4         3 4 VH_U5_H4 1
VH_U5_H4         1 2 0V
.ends DRIVER_U5_H4
*$
.subckt DRIVER_U5_S3 1 2 3 4  
S_U5_S3         3 4 1 2 _U5_S3
RS_U5_S3         1 2 1G
.MODEL         _U5_S3 VSWITCH Roff=1.26k Ron=100e6 Voff=0.2 Von=0.8
.ends DRIVER_U5_S3
*$
****************************************************************
.SUBCKT AND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND2_BASIC_GEN
*$
.SUBCKT AND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND3_BASIC_GEN
*$
.SUBCKT AND4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH} &
+ V(D) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS AND4_BASIC_GEN
*$
.SUBCKT NAND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH} &
+ V(C) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND3_BASIC_GEN
*$
.SUBCKT NOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NOR2_BASIC_GEN
*$
.SUBCKT INV_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS INV_BASIC_GEN
*$
.SUBCKT INV_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.44}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VSS},{VDD})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS INV_DELAY_BASIC_GEN
*$
.SUBCKT BUF_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS BUF_BASIC_GEN
*$
.SUBCKT OR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR2_BASIC_GEN
*$
.SUBCKT OR3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR3_BASIC_GEN
*$
.SUBCKT OR4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  |  
+ V(B) > {VTHRESH} |
+ V(C) > {VTHRESH} |
+ V(D) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS OR4_BASIC_GEN
*$
.SUBCKT NAND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE    YINT 0 VALUE {{IF(V(A) > {VTHRESH}  &  
+ V(B) > {VTHRESH},{VSS},{VDD})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS NAND2_BASIC_GEN
*$
.SUBCKT XOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(A) > {VTHRESH}  ^  
+ V(B) > {VTHRESH},{VDD},{VSS})}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS XOR2_BASIC_GEN
*$
.SUBCKT BUF_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n 
E_ABMGATE1    YINT1 0 VALUE {{IF(V(A) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.3}
E_ABMGATE2    YINT3 0 VALUE {{IF(V(YINT2) > {VTHRESH} , 
+ {VDD},{VSS})}}
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS BUF_DELAY_BASIC_GEN
*$
.SUBCKT COMP_BASIC_GEN INP INM Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5	
E_ABM Yint 0 VALUE {IF (V(INP) > 
+ V(INM), {VDD},{VSS})}
R1 Yint Y 1
C1 Y 0 1n
.ENDS COMP_BASIC_GEN
*$
.SUBCKT COMPHYS_BASIC_GEN INP INM HYS OUT PARAMS: VDD=1 VSS=0 VTHRESH=0.5
EIN INP1 INM1 INP INM 1 
EHYS INP1 INP2 VALUE { IF( V(1) > {VTHRESH},-V(HYS),0) }
EOUT OUT 0 VALUE { IF( V(INP2)>V(INM1), {VDD} ,{VSS}) }
R1 OUT 1 1
C1 1 0 5n
RINP1 INP1 0 1K
.ENDS COMPHYS_BASIC_GEN
*$
.SUBCKT MUX2_BASIC_GEN A B S Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
E_ABMGATE  YINT 0 VALUE {{IF(V(S) > {VTHRESH},  
+ V(B),V(A))}}
RINT YINT Y 1
CINT Y 0 1n
.ENDS MUX2_BASIC_GEN
*$
.MODEL D_D1 D( IS=1e-15 TT=10p Rs=0.05 N=.1  )
*$
.SUBCKT OP_AMP P M OUT 
+ PARAMs:  Hlimit=5 Rin=10Meg BW=18Meg DC_Gain=100 Rout=100 Llimit=0 SRP=1 SRM=1
R_Rin         P M  {Rin}
E_E1          5 0 M P {-Gain}
E_LIMIT2      6 0 VALUE {LIMIT(V(5), {-Abs(SRM)*Ca*1Meg+V(1)/Ra},
+                 {SRP*Ca*1Meg+V(1)/Ra})}
G_G2          1 0 6 0 -1
R_Ra          0 1  {Ra} 
C_Ca          0 1  {Ca}   
E_LIMIT1      2 0 VALUE {LIMIT(V(1),{Llimit},{Hlimit})}
V_VL          3 0 {Llimit+200m}
V_VH          4 0 {Hlimit-200m}
D_D1          3 1 Dideal 
D_D2          1 4 Dideal 
R_Rout        OUT 2  {Rout}
.model Dideal D Is=1e-10 Cjo=.01pF Rs=1m  N=1
.PARAM  Ra=1k   Ca={exp(DC_gain*log(10)/20)/(2*3.14159*BW*Ra)} 
+ Gain={exp(DC_gain*log(10)/20)/Ra} 
.ENDS OP_AMP
*$
.SUBCKT LDCR IN OUT
+ PARAMs:  L=1u DCR=0.01 IC=0
L	IN 1  {L} IC={IC}
RDCR	1 OUT {DCR}
.ENDS LDCR
*$
.SUBCKT CESR IN OUT
+ PARAMs:  C=100u ESR=0.01 X=2 IC=0
C	IN 1  {C*X} IC={IC}
RESR	1 OUT {ESR/X}
.ENDS CESR
*$
**Reset has higher priority in this latch
.SUBCKT SRLATCHRHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,IF(V(S)>{VTHRESH},5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n
.IC V(Qint) {VSS}
.ENDS SRLATCHRHP_BASIC_GEN
*$
**Set has higher priority in this latch
.SUBCKT SRLATCHSHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
GQ 0 Qint VALUE = {IF(V(S) > {VTHRESH},5,IF(V(R)>{VTHRESH},-5, 0))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr QB 1 
Cdummy1 Q 0 1n 
Cdummy2 QB 0 1n 
.IC V(Qint) {VSS}
.ENDS SRLATCHSHP_BASIC_GEN
*$
.SUBCKT DELAY IN OUT PARAMs:  T=100
S_S1         MEAS 0 RESET2 0 S1
E_ABM1         CH 0 VALUE { if( V(IN)>0.5,1,0)    }
E_ABM3         OUT 0 VALUE { if( V(MEAS)>0.5 & V(CH)>0.5,1,0)    }
R_R1         MEAS CH  {T} 
C_C1         0 MEAS  1.4427n  
E_ABM2         RESET 0 VALUE { if(V(CH)<0.5,1,0)    }
R_R2         RESET2 RESET  0.1  
C_C2         0 RESET2  1.4427n  
.MODEL         S1 VSWITCH Roff=1e9 Ron=1.0 Voff=0.25V Von=0.75V
.ENDS 
*$
.SUBCKT MONOPOS_PS in Q Qn PARAMS: PW=1u 
VS VSUP 0 DC 1
GIN VSUP YA VALUE={IF(V(IN)>0.5, V(VSUP)/1000K, 0)}
GDIS YA 0 VALUE={IF(V(IN)>0.5,0, V(YA)/1m)}
CIN YA 0 1n IC=0
RIN YA 0 1e11
EABM1 YTD 0 VALUE={IF(V(YA)> {PW*1000}, 1, 0)}
RYTD YTD 0 1e11
EXOR P 0 VALUE={IF(V(YTD) > 0.5 ^ V(IN) > .5, 1, 0)}
ROUTpp2 P 0 1e11
EAND1 Q1 0 VALUE={ IF(V(P)>0.5 & V(IN)>0.5, 1, 0)}
Ro1 Q1 Q 1m
Co1 Q 0 1p
ROUT2 Q 0 1e11
EAND2 Qn1 0 VALUE={ IF(V(Q)>0.5, 0, 1)}
Ro2 Qn1 Qn 1m
Co2 Qn 0 1p
ROUT4 Qn 0 1e11
.ENDS MONOPOS_PS
*$
.SUBCKT MONONEG_PS in Q Qn PARAMS: PW=1u 
VS VSUP 0 DC 1
GIN VSUP YA VALUE={IF(V(IN)<0.5, V(VSUP)/1000K, 0)}
GDIS YA 0 VALUE={IF(V(IN)<0.5,0, V(YA)/1m)}
CIN YA 0 1n IC=0
RIN YA 0 1e11
EABM1 YTD 0 VALUE={IF(V(YA)> {PW*1000}, 0, 1)}
RYTD YTD 0 1e11
EXOR P 0 VALUE={IF(V(YTD) > 0.5 ^ V(IN) > .5, 1, 0)}
ROUTpp2 P 0 1e11
EAND1 Q1 0 VALUE={ IF(V(P)>0.5 & V(YTD)>0.5, 1, 0)}
Ro1 Q1 Q 1m
Co1 Q 0 1p IC=0
ROUT2 Q 0 1e11
EAND2 Qn1 0 VALUE={ IF(V(Q)>0.5, 0, 1)}
Ro2 Qn1 Qn 1m
Co2 Qn 0 1p
ROUT4 Qn 0 1e11
.ENDS MONONEG_PS
*$
.SUBCKT DFFSBRB_RHPBASIC_GEN Q QB CLK D RB SB PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} 
GQ 0 Qint VALUE = {IF(V(RB) < {VTHRESH},-5,IF(V(SB)< {VTHRESH},5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 5
D_D11 0 Qint D_D1 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSBRB_RHPBASIC_GEN
*$
.SUBCKT DFFSR_RHPBASIC_GEN Q QB CLK D R S PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}  
GQ 0 Qint VALUE = {IF(V(R) > {VTHRESH},-5,IF(V(S) > {VTHRESH},5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSR_RHPBASIC_GEN
*$
.SUBCKT UTD_TPS40007avg 1 2 PARAMS: K=1 TD=0.45U
RIN 1 0 1E15
E1 3 0 1 0 {K}
T1 3 0 2 0 Z0=1 TD={TD}
R1 2 0 1
.ENDS UTD_TPS40007avg
*$
.SUBCKT ONE_SHOT IN OUT
+ PARAMs:  T=100
S_S1         MEAS 0 RESET2 0 S1
E_ABM1         CH 0 VALUE { if( V(IN)>0.5 | V(OUT)>0.5,1,0)    }
R_R2         RESET2 RESET  0.1  
E_ABM3         OUT 0 VALUE { if( V(MEAS)<0.5 & V(CH)>0.5,1,0)    }
R_R1         MEAS CH  {T} 
C_C2         0 RESET2  1.4427n  
C_C1         0 MEAS  1.4427n  
E_ABM2         RESET 0 VALUE { if(V(CH)<0.5,1,0)    }
.MODEL         S1 VSWITCH Roff=1e9 Ron=1.0 Voff=0.25V Von=0.75V
.ENDS ONE_SHOT
*$
.SUBCKT D_D 1 2
D1 1 2 DD
.MODEL DD D( IS=1F N=0.01 TT = 10p )
.ENDS D_D
*$
*$
.MODEL PMOS_SIMPLE PMOS vto=-2 KP=0.13
*$
.model PMOS01 PMOS
+ VTO     = -2
+ KP      = 0.13
+ LAMBDA  = 0.001
*$
.SUBCKT DFFSR_SHPBASIC_GEN Q QB CLK D R S PARAMS: VDD=1 VSS=0 VTHRESH=0.5 
***Set has higher priority in this
** Changed the delay from 7n/10n to 15n/20n to help larger time step simulations
**Faster flip-flops require a a smaller time step to simulate
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} 
GQ 0 Qint VALUE = {IF(V(S) > {VTHRESH},5,IF(V(R) > {VTHRESH},-5, IF(V(CLKint)> {VTHRESH}, 
+ IF(V(D)> {VTHRESH},5,-5),0)))}
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS} 
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 20n
RQq Qqqd1 Q 1
EQb Qbr 0 VALUE = {IF( V(Q) > {VTHRESH}, {VSS},{VDD})}
RQb Qbr Qb 1 
Cdummy1 Q 0 1nF 
Cdummy2 QB 0 1nF 
.IC V(Qint) {VSS}
.ENDS DFFSR_SHPBASIC_GEN
*$