* LM48311
*****************************************************************************
* (C) Copyright 2012 Texas Instruments Incorporated. All rights reserved.
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.
** TI and its licensors and suppliers make no warranties, either expressed
** or implied, with respect to this model, including the warranties of 
** merchantability or fitness for a particular purpose.  The model is
** provided solely on an "as is" basis.  The entire risk as to its quality
** and performance is with the customer.
*****************************************************************************
*
** Released by: WEBENCH(R) Design Center, Texas Instruments Inc.
* Part: LM48311
* Date: 09/17/2012
* Model Type: All In One
* Simulator: PSPICE 
* Simulator Version: 16.2.0.p001
* EVM Order Number: N/A 
* EVM Users Guide:  N/A 
* Datasheet: March 17, 2010 SNAS484A
*
* Model Version: 1.0
*
*****************************************************************************
*
* Updates:
*
* Version 1.0 : Release to Web
*
*****************************************************************************
* Notes:
* The following parameters are modeled: 
* Quiescent Current, Common Mode Input Voltage Range, Wake Up Time,    
* Switching Frequency, Gain, Input Resistance, Shutdown pin Input Resistance,
* Efficiency
*
*****************************************************************************



.subckt LM48311 GND INM INP OUTA OUTB SD VDD
XI40 GND INM INP OUTA OUTB SD VDD LM48311_HT1
.ends







.subckt ANALOG_BUFFER VOUT VIN
R0 VIN 0 1e9
R1 VOUT 0 1e9
E0 VOUT 0 VIN 0 1
.ends ANALOG_BUFFER


.subckt LM48311_DELAY_HT1 VIN VOUT
T0 NET20 0 NET17 0 Z0=75 TD=7.5e-3
XI3 NET20 VIN ANALOG_BUFFER
XI5 VOUT NET17 ANALOG_BUFFER
R0 NET17 0 75
.ends LM48311_DELAY_HT1


.subckt LM48311_FDA_VINRANGE_VRANGE_HT1 VSS VDD VL VH VOUT VIN
R0 NET016 NET09 1
XI6 VOUT NET09 ANALOG_BUFFER
XI7 NET016 VIN ANALOG_BUFFER
VD1 VH_INT NET23 DC 1e-3
VE1 NET16 VL_INT DC 1e-3
D5 NET16 NET09 DIDEAL1
D0 NET09 NET23 DIDEAL1
E0 VH_INT 0 VDD VH 1
E1 VL_INT 0 VL VSS 1
.ends LM48311_FDA_VINRANGE_VRANGE_HT1


.subckt LM48311_FDA_VINRANGE_HT1 VDD VSS VIN1 VIN2 VOUT1 VOUT2
XI6 VSS VDD VL VH VOUT2 VIN2 LM48311_FDA_VINRANGE_VRANGE_HT1
XI5 VSS VDD VL VH VOUT1 VIN1 LM48311_FDA_VINRANGE_VRANGE_HT1
V4 VL 0 DC 0
V3 VH 0 DC 250e-3
.ends LM48311_FDA_VINRANGE_HT1


.subckt LM48311_AMP_HT1 VN VOUT VP
R1 NET20 0 1e9
R2 NET20 VOUT 1e-3
R0 VP VN 1e9
EAHDLI0 NET20 0 VALUE { LIMIT(V(VP,VN)*100e3, 0, 6) }
.ends LM48311_AMP_HT1


.subckt LM48311_FDA_HT1 VDD VN VOUTN VOUTP VP VSS
XI19 VDD VSS VP VN VP_INT VN_INT LM48311_FDA_VINRANGE_HT1
XI13 NET078 NET045 VSSX LM48311_AMP_HT1
XI14 NET080 NET039 VSSX LM48311_AMP_HT1
XI15 NET080 NET038 VDDX LM48311_AMP_HT1
XI7 NET078 NET062 VDDX LM48311_AMP_HT1
C0 NET078 0 26.1e-9
C1 NET080 0 26.1e-9
E2 NET048 NET057 VP_INT VN_INT 500e3
E3 NET057 NET056 VP_INT VN_INT 500e3
V1 VSSX VSS DC 0
V0 VDD VDDX DC 0
V4 NET050 0 DC 1.416
D5 NET080 NET038 DDEFAULT
D3 NET039 NET080 DDEFAULT
D0 NET045 NET078 DDEFAULT
D4 NET078 NET062 DDEFAULT
XI16 NET057 NET050 ANALOG_BUFFER
XI6 VOUTN NET080 ANALOG_BUFFER
XI5 VOUTP NET078 ANALOG_BUFFER
R23 VN_INT 0 1e9
R5 NET048 NET078 1e6
R24 VP_INT 0 1e9
R6 NET056 NET080 1e6
R0 VP VN 1e9
.ends LM48311_FDA_HT1


.subckt LM48311_CLASSD_HBRIDGE_TOPNMOS_HT1 D EN G GLOGICHIGH S VDD VSS
R0 D S 1e6
D4 S D DDEFAULT
C1 ENINV 0 1e-15
EBETA VBETA 0 POLY(1) GLOGICHIGH 0  754e-3  -47e-3  324.7e-6
XAHDLINV1 ENINV EN VDD VSS IV110
G1 D S POLY(3) D S G 0 VBETA 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0  0
.ends LM48311_CLASSD_HBRIDGE_TOPNMOS_HT1


.subckt LM48311_CLASSD_HBRIDGE_HT1 EN PVCC PVEE VDD VHA VHB VLA VLB VOA VOB VSS
XI3 VOA EN VLA VDD PVEE VDD VSS LM48311_CLASSD_HBRIDGE_TOPNMOS_HT1
XI2 VOB EN VLB VDD PVEE VDD VSS LM48311_CLASSD_HBRIDGE_TOPNMOS_HT1
XI1 PVCC EN VHB VDD VOB VDD VSS LM48311_CLASSD_HBRIDGE_TOPNMOS_HT1
XI0 PVCC EN VHA VDD VOA VDD VSS LM48311_CLASSD_HBRIDGE_TOPNMOS_HT1
.ends LM48311_CLASSD_HBRIDGE_HT1


.subckt LM48311_CLASSD_HDRIVER_DELAY_HT1 VIN VOUT
T0 NET20 0 NET17 0 Z0=75 TD=25e-9
XI3 NET20 VIN ANALOG_BUFFER
XI5 VOUT NET17 ANALOG_BUFFER
R0 NET17 0 75
.ends LM48311_CLASSD_HDRIVER_DELAY_HT1


.subckt LM48311_CLASSD_HDRIVER_HT1 VDD VSS VIN VOUTNEG VOUTPOS
XAHDLI8 VIN NET17 VDD VSS HPA_INV_IDEAL
XAHDLAND1 VIN NET021 VOUTPOS VDD VSS HPA_AND2_IDEAL
XAHDLAND0 NET17 NET019 VOUTNEG VDD VSS HPA_AND2_IDEAL
XI2 VIN NET021 LM48311_CLASSD_HDRIVER_DELAY_HT1
XI3 NET17 NET019 LM48311_CLASSD_HDRIVER_DELAY_HT1
.ends LM48311_CLASSD_HDRIVER_HT1


.subckt LM48311_CLASSD_FDA_HT1 VDD VN VOUTN VOUTP VP VSS
XI13 NET078 NET045 VSSX LM48311_AMP_HT1
XI14 NET080 NET039 VSSX LM48311_AMP_HT1
XI15 NET080 NET038 VDDX LM48311_AMP_HT1
XI7 NET078 NET062 VDDX LM48311_AMP_HT1
C0 NET078 0 26.1e-9
C1 NET080 0 26.1e-9
E2 NET048 NET057 VP VN 500e3
E3 NET057 NET056 VP VN 500e3
V1 VSSX VSS DC 0
V0 VDD VDDX DC 0
D5 NET080 NET038 DDEFAULT
D3 NET039 NET080 DDEFAULT
D0 NET045 NET078 DDEFAULT
D4 NET078 NET062 DDEFAULT
XI16 NET057 NET050 ANALOG_BUFFER
XI6 VOUTN NET080 ANALOG_BUFFER
XI5 VOUTP NET078 ANALOG_BUFFER
R5 NET048 NET078 1e6
R6 NET056 NET080 1e6
R10 VSS NET050 1e6
R9 VDD NET050 1e6
R0 VP VN 1e9
.ends LM48311_CLASSD_FDA_HT1


.subckt LM48311_CLASSD_HT1 EN VDD VSS VINM VINP VOUTM VOUTP
E1 NET098 0 VDD 0 500e-3
E8 NET35 NET098 POLY(2) NET0190 0 VDD 0  0  0  0  0  400e-3
XAHDLI20 EN VOUTP NET0187 sw_l4 PARAMS: VON=500e-3
XAHDLI31 EN NET075 VSS sw_l4 PARAMS: VON=500e-3
XAHDLI24 ENINV VOUTM NET0197 sw_l4 PARAMS: VON=500e-3
XAHDLI30 EN NET089 VDD sw_l4 PARAMS: VON=500e-3
XAHDLI27 ENINV VOUTP NET076 sw_l4 PARAMS: VON=500e-3
XAHDLI34 ENINV NET089 0 sw_l4 PARAMS: VON=500e-3
XAHDLI21 EN VOUTM NET0193 sw_l4 PARAMS: VON=500e-3
XAHDLI32 ENINV NET075 0 sw_l4 PARAMS: VON=500e-3
XI13 EN VDD VSS VDD VHA VHB VLA VLB NET0187 NET0193 VSS LM48311_CLASSD_HBRIDGE_HT1
XI25 VDD VSS NET46 VLA VHA LM48311_CLASSD_HDRIVER_HT1
XI26 VDD VSS NET41 VLB VHB LM48311_CLASSD_HDRIVER_HT1
XAHDLI5 NET47 NET35 NET41 VDD VSS HPA_COMP_IDEAL
XAHDLI4 NET49 NET35 NET46 VDD VSS HPA_COMP_IDEAL
XI36 VDD NET0177 NET0157 NET0159 NET0175 VSS LM48311_CLASSD_FDA_HT1
XI2 VDD NET57 NET49 NET47 NET59 VSS LM48311_CLASSD_FDA_HT1
D0 VSS VDD DDEFAULT
XAHDLI12 EN ENINV VDD VSS HPA_INV
I10 VSS 0 DC 8.1e-6
I3 NET089 NET075 DC 3e-3
I9 VSS VDD DC 15.9e-6
V1 NET0190 0 PULSE -1 1 0 1.6666e-6 1.6666e-6 100e-15 3.3333e-6
C5 ENINV 0 1e-15
C3 NET0177 NET0159 5e-12
C4 NET0175 NET0157 5e-12
C7 NET0181 NET0171 15e-12
C6 NET0181 NET0173 15e-12
C1 NET57 NET47 20e-12
C0 NET59 NET49 20e-12
R20 0 NET0181 1e9
R7 NET0175 NET0157 135e3
R17 NET0171 NET0177 20e3
R11 NET089 NET075 1e6
R18 NET0173 NET0175 20e3
R13 NET0197 0 2e3
R15 NET076 0 2e3
R19 NET0193 NET0171 520e3
R16 NET0177 NET0159 135e3
R6 NET0187 NET0173 520e3
R0 VINM NET0103 20e3
R1 VINP NET0101 20e3
R8 NET59 NET0159 20e3
R5 NET0101 NET57 20e3
R4 NET0103 NET59 20e3
R10 NET57 NET0157 20e3
.ends LM48311_CLASSD_HT1


.subckt LM48311_HT1 GND INM INP OUTA OUTB SD VDD
XI3 SD NET056 LM48311_DELAY_HT1
XI36 VDD NET16 NET10 NET12 NET14 GND LM48311_FDA_HT1
R0 SD 0 300e3
R16 NET16 NET12 20e3
R7 NET14 NET10 20e3
R18 INP NET14 20e3
R17 INM NET16 20e3
XI27 NET056 VDD GND NET10 NET12 OUTB OUTA LM48311_CLASSD_HT1
.ends LM48311_HT1


.subckt BALUN V VCM VN VP
R9 V NET023 1e-6
R4 NET035 VCM 1e-6
R5 NET023 NET016 1e-6
R3 NET027 VN 1e-6
R6 0 NET021 1e-6
R7 NET023 NET019 1e-6
R8 0 NET017 1e-6
R1 NET022 VP 1e-6
XTRANSFORMEREK0 NET016 NET021 NET022 NET035 TRANSFORMEREK0
XTRANSFORMEREK1 NET019 NET017 NET035 NET027 TRANSFORMEREK1
.ends BALUN




.SUBCKT HPA_AND2_IDEAL 1 2 3 VDD VSS
E1 3 0 VALUE = { IF( ((V(1)> (V(VDD)+V(VSS))/2 ) & (V(2)> (V(VDD)+V(VSS))/2 )), V(VDD), V(VSS) ) }
.ENDS


.SUBCKT HPA_INV 1 2 VDD VSS
E1 3 0 VALUE = { IF( V(1)> (V(VDD)+V(VSS))/2, V(VSS), V(VDD) ) }
R1 3 2 1
C1 2 0 1e-12
.ENDS


.SUBCKT HPA_INV_IDEAL 1 2 VDD VSS
E1 2 0 VALUE = { IF( V(1)> (V(VDD)+V(VSS))/2, V(VSS), V(VDD) ) }
.ENDS


.SUBCKT HPA_COMP_IDEAL INP INN OUT VDD VSS
E1 OUT 0 VALUE = { IF( (V(INP) > V(INN)), V(VDD), V(VSS) ) }
.ENDS


.SUBCKT sw_l4 S A B PARAMS: VON=1.1
S1 A B S 0 VSWITCH2
.MODEL VSWITCH2 VSWITCH Roff=1e9 Ron=1e-3 Voff=-0.01 Von={VON}
.ENDS


.SUBCKT IV110 2 1 VDD VSS
E1 3 0 VALUE = { IF( V(1) > (V(VDD)+V(VSS))/2, V(VSS), V(VDD) ) }
R1 3 2 1
C1 2 0 1n
.ENDS



.SUBCKT TRANSFORMEREK0 1 2 3 4
K1 L1 L2 0.5
L1 1 2 10uH
L2 3 4 10uH
.ends



.SUBCKT TRANSFORMEREK1 1 2 3 4
K1 L1 L2 0.5
L1 1 2 10uH
L2 3 4 10uH
.ends


.MODEL DDEFAULT D IS=8E-16 N=1m
.MODEL DIDEAL1 D N=1m
.MODEL DIDEAL2 D N=50m



